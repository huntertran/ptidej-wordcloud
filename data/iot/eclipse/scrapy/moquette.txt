GitHub - moquette-io/moquette: Java MQTT lightweight broker
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Sign in to GitHub · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Java MQTT lightweight broker
moquette-io.github.io/moquette/
View license
1.7k
stars
671
forks
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Star
Watch
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
16
branches
15
tags
Go to file
Code
Clone
HTTPS
GitHub CLI
Use Git or checkout with SVN using the web URL.
Work fast with our official CLI.
Learn more.
Open with GitHub Desktop
Download ZIP
Launching GitHub Desktop
If nothing happens, download GitHub Desktop and try again.
Go back
Launching GitHub Desktop
If nothing happens, download GitHub Desktop and try again.
Go back
Launching Xcode
If nothing happens, download Xcode and try again.
Go back
Launching Visual Studio
If nothing happens, download the GitHub extension for Visual Studio and try again.
Go back
Latest commit
andsel
Switched from connAck build method to message builder offered by netty
…
4665c5e
Nov 13, 2020
Switched from connAck build method to message builder offered by netty
4665c5e
Git stats
1,288
commits
Files
Permalink
Failed to load latest commit information.
Type
Join GitHub · GitHub
Name
Latest commit message
Commit time
.github
Added GitHub Issue template
Oct 20, 2017
.mvn/wrapper
Reintroduce maven build, with wrapper, removed gradle. (#542)
Nov 2, 2020
broker
Switched from connAck build method to message builder offered by netty
Nov 13, 2020
distribution
Updates Netty to 4.1.53 to have MQTT5 support (#546)
Nov 3, 2020
embedding_moquette
Removed gradle script files
Nov 2, 2020
tools_scripts
Bumped dev cycle 0.13
Mar 17, 2019
.editorconfig
switch to gradle
Aug 24, 2017
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
.gitignore
enable the usage of Netty OpenSSL provider implementation
Jun 22, 2018
.travis.yml
Reintroduce maven build, with wrapper, removed gradle. (#542)
Nov 2, 2020
ChangeLog.txt
Added implementation of retained store in H2
Nov 28, 2018
README.md
Minor, changed header (#536)
Oct 1, 2020
about.html
Update about.html
Apr 16, 2018
checkstyle-suppressions.xml
checkstyle: resource folders excluded form check
Feb 1, 2017
checkstyle.xml
Fixed checkStyle and ErrorProne warns
Apr 26, 2018
license-eplv10-aslv20.html
Added copyright and license notice to every source file, added about.…
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
Jun 11, 2014
license.txt
Added Apache 2.0 license
Oct 4, 2013
mvnw
Reintroduce maven build, with wrapper, removed gradle. (#542)
Nov 2, 2020
mvnw.cmd
Reintroduce maven build, with wrapper, removed gradle. (#542)
Nov 2, 2020
pom.xml
Bump junit from 4.8.2 to 4.13.1 (#544)
Nov 12, 2020
View code
README.md
Moquette Project
Documentation reference guide Guide on how to use and configure Moquette
Google Group Google Group to participate in development discussions.
Moquette aims to be a MQTT compliant broker. The broker supports QoS 0, QoS 1 and QoS 2.
Its designed to be evented, uses Netty for the protocol encoding and decoding part.
Embeddable
Freedomotic is an home automation framework and uses Moquette embedded to interface with MQTT by a specific plugin.
Moquette is also used into Atomize Spin a software solution for the logistic field.
Part of moquette are used into the Vertx MQTT module, into MQTT spy
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
and into WSO2 Messge broker.
Try the demo instance
Point your browser to cloud instance, request an account then use it from your MQTT clients.
1 minute set up
Start play with it, download the self distribution tar from BinTray ,
the un untar and start the broker listening on 1883 port and enjoy!
tar xvf moquette-distribution-0.12.1.tar.gz
cd bin
./moquette.sh
Or if you are on Windows shell
cd bin
.\moquette.bat
Embedding in other projects
To embed Moquette in another maven project is sufficient to include a repository and declare the dependency:
<repositories>
<repository>
<id>bintray</id>
<url>https://jcenter.bintray.com</url>
<releases>
<enabled>true</enabled>
</releases>
<snapshots>
<enabled>false</enabled>
</snapshots>
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
</repository>
</repositories>
Include dependency in your project:
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
<version>0.12.1</version>
</dependency>
Build from sources
After a git clone of the repository, cd into the cloned sources and: ./gradlew clean moquette-distribution:distMoquetteTar or
./gradlew clean moquette-distribution:distMoquetteZip.
In distribution/build directory will be produced the selfcontained file for the broker with all dependencies and a running script.
If you like Moquette you can support us by donating.
About
Java MQTT lightweight broker
moquette-io.github.io/moquette/
Topics
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
broker
mqtt
java
moquette
Resources
Readme
License
View license
Releases
15
Release v.012.1
Latest
Mar 3, 2019
+ 14 releases
Packages 0
No packages published
Contributors 37
+ 26 contributors
Languages
Java
79.8%
Groovy
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
13.9%
HTML
5.3%
Other
1.0%
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Security Overview · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Actions · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Moquette · GitHub
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Moquette Broker
Moquette
Documentation
Mailing list
Moquette MQTT broker
JVM lightweight MQTT broker for the Internet of Things. Simply embeddable in your IoT projects
Learn more
Follow on twitter @moquetteproject.
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Projects
0
Wiki
Security
0
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Overview
Security policy
Security advisories
0
Overview
Security policy
Security advisories
0
Security overview
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this organization
All GitHub
↵
Jump to
↵
No suggested jump to results
In this organization
All GitHub
Security policy
Suggest how users should report security vulnerabilities for this repository
Suggest a security policy
Security advisories
View security advisories for this repository
View security advisories
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
↵
Jump to
↵
In this organization
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Moquette is lightweight MQTT Java broker
Italy
http://moquette.io
Repositories
Packages
People
Projects
Dismiss
Grow your team on GitHub
GitHub is home to over 50 million developers working together. Join them to grow your own development teams, manage permissions, and collaborate on projects.
Sign up
Type:
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Projects · moquette-io/moquette · GitHub
Automate your workflow from idea to production
GitHub Actions makes it easy to automate all your software workflows, now with world-class CI/CD. Build, test, and deploy your code right from GitHub.
Learn More
Linux, macOS, Windows, ARM, and containers
Hosted runners for every major OS make it easy to build and test all your projects. Run directly on a VM or inside a container. Use your own VMs, in the cloud or on-prem, with self-hosted runners.
Matrix builds
Save time with matrix workflows that simultaneously test across multiple operating systems and versions of your runtime.
Any language
GitHub Actions supports Node.js, Python, Java, Ruby, PHP, Go, Rust, .NET, and more. Build, test, and deploy applications in your language of choice.
Live logs
See your workflow run in realtime with color and emoji. It’s one click to copy a link that highlights a specific line number to share a CI/CD failure.
Built-in secret store
Automate your software development practices with workflow files embracing the Git flow by codifying it in your repository.
Multi-container testing
Test your web service and its DB in your workflow by simply adding some docker-compose to your workflow file.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
All
Select type
All
Sources
Forks
Archived
Mirrors
Language:
All
Select language
All
Java
Repositories
moquette
Java MQTT lightweight broker
java
mqtt
broker
moquette
File Finder · GitHub
Added GitHub Issue template · moquette-io/moquette@a49792a · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
moquette/license.txt at master · moquette-io/moquette · GitHub
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Java
671
1,673
64
13
Updated Nov 16, 2020
netty-mqtt5-codec
Netty codec implementation for MQTT3 and MQTT5
Java
Apache-2.0
9
18
1
0
Updated Dec 1, 2018
Top languages
Loading…
Most used topics
Loading…
People
This organization has no public members. You must be a member to see who’s a part of this organization.
© 2020 GitHub, Inc.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Reintroduce maven project files by andsel · Pull Request #542 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Join GitHub · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Join GitHub · GitHub
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Issues · moquette-io/moquette · GitHub
Security Advisories · moquette-io/moquette · GitHub
Reintroduce maven build, with wrapper, removed gradle. (#542) · moquette-io/moquette@17f2c93 · GitHub
Join GitHub · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Switched from connAck build method to message builder offered by netty · moquette-io/moquette@4665c5e · GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Organize your issues with project boards
Did you know you can manage projects in the same place you keep your code? Set up a project board on GitHub to streamline and automate your workflow.
Learn More
Get organized
Created with Sketch.
Sort tasks
Add issues and pull requests to your board and prioritize them alongside note cards containing ideas or task lists.
Plan project
Created with Sketch.
Plan your project
Release Release v.012.1 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
moquette · GitHub Topics · GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Packages · Moquette · GitHub
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Sign in to GitHub · GitHub
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
moquette /
No matching files found.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Pull requests · moquette-io/moquette · GitHub
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Added GitHub Issue template
Loading branch information
andsel
committed
Oct 20, 2017
1 parent
1b272e5
commit a49792adf5d6bcf636737478e972207f516dc4df
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
Sort tasks into columns by status. You can label columns with status indicators like "To Do", "In Progress", and "Done".
Automate workflow
Created with Sketch.
Automate your workflow
Set up triggering events to save time on project management—we’ll move tasks into the right columns for you.
Track progress
Created with Sketch.
Track progress
Keep track of everything happening in your project and see exactly what’s changed since the last time you looked.
Share status
Created with Sketch.
Share status
Each card has a unique URL, making it easy to share and discuss individual tasks with your team.
Finish project
Created with Sketch.
Wrap up
After you wrap up your work, close your project board to remove it from your active projects list. On to the next project!
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Projects · moquette-io · GitHub
People · Moquette · GitHub
Join GitHub · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
moquette/license.txt
Go to file
Go to file
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
Unified
Split
Showing
1 changed file
with
13 additions
and 0 deletions.
+13
−0
.github/ISSUE_TEMPLATE.md
13
.github/ISSUE_TEMPLATE.md
Show comments
View file
Edit file
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Join GitHub · GitHub
GitHub - moquette-io/netty-mqtt5-codec: Netty codec implementation for MQTT3 and MQTT5
Issues · moquette-io/netty-mqtt5-codec · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Pull requests · moquette-io/netty-mqtt5-codec · GitHub
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
MQTT durable subscription exception · Issue #455 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this topic
All GitHub
↵
Jump to
↵
No suggested jump to results
In this topic
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
205 lines (170 sloc)
11.3 KB
Raw
Blame
Copyright 2012-2013 (c) Andrea Selva
Apache License
Version 2.0, January 2004
http://www.apache.org/licenses/
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
1. Definitions.
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Reintroduce maven project files
#542
Merged
andsel
merged 1 commit into
master
from
reintroduce_maven_project_files
Delete file
@@ -0,0 +1,13 @@
### Expected behavior
### Actual behavior
### Steps to reproduce
### Minimal yet complete reproducer code (or URL to code) or complete log file
### Moquette MQTT version
### JVM version (e.g. `java -version`)
### OS version (e.g. `uname -a`)
Toggle all file notes
0 comments
on commit a49792a
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
Sign in to GitHub · GitHub
Sign in to GitHub · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
64
Pull requests
13
Actions
Projects
0
Wiki
Security
0
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Overview
Security policy
Security advisories
0
Overview
Security policy
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Reintroduce maven build, with wrapper, removed gradle. (#542)
Loading branch information
andsel
committed
Nov 2, 2020
Verified
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
↵
In this topic
All GitHub
↵
Jump to
↵
Sign in
Sign up
Explore
Topics
Trending
Collections
Events
GitHub Sponsors
Get email updates
#
moquette
Star
Here are
2 public repositories
matching this topic...
moquette-io
/
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
All
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Releases · moquette-io/moquette · GitHub
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Switched from connAck build method to message builder offered by netty
Loading branch information
andsel
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Nov 2, 2020
Merged
Reintroduce maven project files
#542
andsel
merged 1 commit into
master
from
reintroduce_maven_project_files
Nov 2, 2020
+1,241
−372
Conversation
0
Commits
1
Checks
0
Files changed
21
Conversation
Copy link
Quote reply
Collaborator
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
Latest release
v0.12.1
26e43c5
Compare
Choose a tag to compare
Search for a tag
Release v.012.1
Latest release
v0.12.1
26e43c5
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Moquette doesn’t have any public projects.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Organization permissions
Members
This organization has no public members.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
64 Open
314 Closed
64 Open
314 Closed
Author
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Security advisories
0
Security Advisories
View information about security vulnerabilities from this repository's maintainers.
0 Published
There aren’t any published security advisories
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
b69146b
commit 17f2c9390a7e80b887087186f3272c4814ac4846
Unified
Split
Showing
21 changed files
with
1,241 additions
and 372 deletions.
+117
−0
.mvn/wrapper/MavenWrapperDownloader.java
BIN
.mvn/wrapper/maven-wrapper.jar
+2
−0
.mvn/wrapper/maven-wrapper.properties
+2
−9
.travis.yml
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
moquette
Star
1.7k
Code
Issues
Pull requests
Java MQTT lightweight broker
java
mqtt
broker
moquette
Updated
Nov 16, 2020
Java
dnobel
/
mqtt-load-balancer
Star
4
Code
Issues
Pull requests
MQTT Load Balancer with HAProxy
docker
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Visibility:
All
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.
committed
Nov 13, 2020
1 parent
1d38a1b
commit 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12
Unified
Split
Showing
1 changed file
with
8 additions
and 21 deletions.
+8
−21
broker/src/main/java/io/moquette/broker/MQTTConnection.java
29
broker/src/main/java/io/moquette/broker/MQTTConnection.java
Show comments
View file
Edit file
Delete file
@@ -178,14 +178,17 @@ void processConnect(MqttConnectMessage msg) {
final boolean msgCleanSessionFlag = msg.variableHeader().isCleanSession();
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
andsel
commented
Oct 30, 2020
•
edited
This PR removes gradle related files and reintroduce pom.xml files.
Updates travis.yml
Reintroduce maven build, with wrapper, removed gradle.
Loading status checks…
7f91798
andsel
force-pushed the
reintroduce_maven_project_files
branch
from
1d20eaf
to
7f91798
Nov 2, 2020
andsel
added this to the 0.14 milestone
Nov 2, 2020
Learn more
Accept
Reject
Save preferences
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Sign in to GitHub · GitHub
Join GitHub · GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
Sign in to GitHub · GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
netty-mqtt5-codec
Watch
3
Star
18
Fork
9
Netty codec implementation for MQTT3 and MQTT5
Apache-2.0 License
18
stars
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
netty-mqtt5-codec
Watch
3
Star
18
Fork
9
Code
Issues
1
Pull requests
0
Actions
Projects
0
Security
Moquette shows topics, but subscribers won't receive anything - Subscription missing? · Issue #510 · moquette-io/moquette · GitHub
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Mar 3, 2019
·
26 commits
to master
since this release
Bugfix release for bad push of queue messages
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Question: disconnecting a client when authentication details removed · Issue #516 · moquette-io/moquette · GitHub
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
moquette/MQTTConnection.java at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ? · Issue #513 · moquette-io/moquette · GitHub
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
netty-mqtt5-codec
Watch
3
Star
18
Fork
9
Code
Issues
1
Pull requests
0
Actions
Projects
0
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
+265
−0
broker/pom.xml
+1
−1
broker/src/test/java/io/moquette/integration/IntegrationUtils.java
+1
−1
broker/src/test/resources/log4j.properties
+68
−0
distribution/pom.xml
+57
−0
distribution/src/main/assembly/assembly.xml
+23
−0
embedding_moquette/pom.xml
+0
−9
gradle/java.gradle
+0
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
mqtt
haproxy
moquette
Updated
Sep 3, 2017
Improve this page
Add a description, image, and links to the
moquette
topic page so that developers can more easily learn about it.
Curate this topic
Add this topic to your repo
To associate your repository with the
moquette
topic, visit your repo's landing page and select "manage topics."
Learn more
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
2. Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.
3. Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
4. Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
boolean isSessionAlreadyPresent = !msgCleanSessionFlag && result.alreadyStored;
final String clientIdUsed = clientId;
sendConnAck(isSessionAlreadyPresent).addListener(new ChannelFutureListener() {
final MqttConnAckMessage ackMessage = MqttMessageBuilders.connAck()
.returnCode(CONNECTION_ACCEPTED)
.sessionPresent(isSessionAlreadyPresent).build();
channel.writeAndFlush(ackMessage).addListener(new ChannelFutureListener() {
@Override
public void operationComplete(ChannelFuture future) throws Exception {
if (future.isSuccess()) {
LOG.trace("CONNACK sent, channel: {}", channel);
if (!result.session.completeConnection()) {
// send DISCONNECT and close the channel
final MqttMessage disconnectMsg = disconnect();
final MqttMessage disconnectMsg = MqttMessageBuilders.disconnect().build();
channel.writeAndFlush(disconnectMsg).addListener(CLOSE);
LOG.warn("CONNACK is sent but the session created can't transition in CONNECTED state");
} else {
@@ -243,24 +246,13 @@ private boolean isNotProtocolVersion(MqttConnectMessage msg, MqttVersion version
}
private void abortConnection(MqttConnectReturnCode returnCode) {
Labels
9
Milestones
6
New pull request
New
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Hide details
View details
andsel
merged commit 17f2c93
into
master
Nov 2, 2020
2 checks passed
2 checks passed
continuous-integration/travis-ci/pr
The Travis CI build passed
Details
continuous-integration/travis-ci/push
The Travis CI build passed
Details
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
Learn more
Accept
Reject
Save preferences
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
9
forks
Star
Watch
Code
Issues
1
Pull requests
0
Actions
Projects
0
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Security
Insights
Dismiss
Insights
More
Code
Issues
Pull requests
Actions
Projects
Security
Insights
Labels
8
Milestones
0
Labels
8
Milestones
0
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
Release last_gradle · moquette-io/moquette · GitHub
🎉
😕
❤️
🚀
👀
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Security
Insights
Labels
8
Milestones
0
Labels
8
Milestones
0
New pull request
New
0 Open
0 Closed
0 Open
−20
gradle/lint.gradle
+0
−63
gradle/test.gradle
BIN
gradle/wrapper/gradle-wrapper.jar
+0
−5
gradle/wrapper/gradle-wrapper.properties
+0
−172
gradlew
+0
−84
gradlew.bat
+310
−0
mvnw
+182
−0
mvnw.cmd
+213
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
Save preferences
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
modifications, and in Source or Object form, provided that You
meet the following conditions:
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
MqttConnAckMessage badProto = connAck(returnCode, false);
MqttConnAckMessage badProto = MqttMessageBuilders.connAck()
.returnCode(returnCode)
.sessionPresent(false).build();
channel.writeAndFlush(badProto).addListener(FIRE_EXCEPTION_ON_FAILURE);
channel.close().addListener(CLOSE_ON_FAILURE);
}
private MqttConnAckMessage connAck(MqttConnectReturnCode returnCode, boolean sessionPresent) {
MqttFixedHeader mqttFixedHeader = new MqttFixedHeader(MqttMessageType.CONNACK, false, MqttQoS.AT_MOST_ONCE,
false, 0);
MqttConnAckVariableHeader mqttConnAckVariableHeader = new MqttConnAckVariableHeader(returnCode, sessionPresent);
return new MqttConnAckMessage(mqttFixedHeader, mqttConnAckVariableHeader);
}
private MqttMessage disconnect() {
MqttFixedHeader mqttFixedHeader = new MqttFixedHeader(MqttMessageType.DISCONNECT, false, MqttQoS.AT_MOST_ONCE,
false, 0);
return new MqttMessage(mqttFixedHeader);
}
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
GitHub actions
None yet
Projects
None yet
Milestone
0.14
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
1
branch
0
tags
Go to file
Code
Clone
HTTPS
GitHub CLI
Use Git or checkout with SVN using the web URL.
Work fast with our official CLI.
Learn more.
Open with GitHub Desktop
Download ZIP
Launching GitHub Desktop
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Packages · Moquette · GitHub
Packages · Moquette · GitHub
Packages · Moquette · GitHub
Packages · Moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
#531
opened Jul 23, 2020 by
dsoulayrol
NullPointerException in CTrie.evaluate
#529
opened May 13, 2020 by
hylkevds
1
3
Publish javadoc & sources of 0.13
#528
opened May 13, 2020 by
hylkevds
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
−0
pom.xml
+0
−8
settings.gradle
117
.mvn/wrapper/MavenWrapperDownloader.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,117 @@
/*
* Copyright 2007-present the original author or authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
MQTT durable subscription exception
#455
Open
OleksandrBerezianskyi opened this issue
Mar 8, 2019
· 1 comment
Open
MQTT durable subscription exception
#455
OleksandrBerezianskyi opened this issue
Mar 8, 2019
· 1 comment
Assignees
Labels
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Be notified of new releases
Create your free GitHub account today to subscribe to this repository for new releases and build software alongside 50 million developers.
Sign up
Releases
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
5. Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
6. Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
7. Disclaimer of Warranty. Unless required by applicable law or
private boolean login(MqttConnectMessage msg, final String clientId) {
// handle user authentication
if (msg.variableHeader().hasUserName()) {
@@ -306,11 +298,6 @@ void handleConnectionLost() {
}
private ChannelFuture sendConnAck(boolean isSessionAlreadyPresent) {
final MqttConnAckMessage ackMessage = connAck(CONNECTION_ACCEPTED, isSessionAlreadyPresent);
return channel.writeAndFlush(ackMessage);
}
boolean isConnected() {
return connected;
}
Toggle all file notes
0 comments
on commit 4665c5e
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
#552
opened Nov 16, 2020 by
HanSolo
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
1
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
1
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
one get
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
If nothing happens, download GitHub Desktop and try again.
Go back
Launching GitHub Desktop
If nothing happens, download GitHub Desktop and try again.
Go back
Launching Xcode
If nothing happens, download Xcode and try again.
Go back
Launching Visual Studio
If nothing happens, download the GitHub extension for Visual Studio and try again.
Go back
Latest commit
Git stats
2
commits
Files
Permalink
Failed to load latest commit information.
Type
Name
Latest commit message
Commit time
src
LICENSE
README.md
pom.xml
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Move to different package?
#1
opened May 9, 2019 by
flozano
1
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Issues · moquette-io/moquette · GitHub
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Release Release v0.11 · moquette-io/moquette · GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
Updated readme for version 0.11 · moquette-io/moquette@0bf35a7 · GitHub
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Issues · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
queue is full
#521
opened Mar 28, 2020 by
arifainchtein
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
opened Feb 27, 2020 by
carlsberg-stack
BUG - null Session in subscribe procedure
#517
opened Feb 14, 2020 by
BigGitWorld
Question: disconnecting a client when authentication details removed
#516
opened Jan 23, 2020 by
MattyyttaM
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
There aren’t any open pull requests.
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
import java.net.*;
import java.io.*;
import java.nio.channels.*;
import java.util.Properties;
public class MavenWrapperDownloader {
private static final String WRAPPER_VERSION = "0.5.6";
/**
* Default URL to download the maven-wrapper.jar from, if no 'downloadUrl' is provided.
*/
private static final String DEFAULT_DOWNLOAD_URL = "https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/"
+ WRAPPER_VERSION + "/maven-wrapper-" + WRAPPER_VERSION + ".jar";
/**
* Path to the maven-wrapper.properties file, which might contain a downloadUrl property to
* use instead of the default one.
*/
private static final String MAVEN_WRAPPER_PROPERTIES_PATH =
".mvn/wrapper/maven-wrapper.properties";
bug
Milestone
0.13
Comments
Copy link
Quote reply
OleksandrBerezianskyi
commented
Mar 8, 2019
Expected behavior
After reconnect of the same client with clean_session = false and subscribing to the same topic with QoS = 1 all missed messages should appear
Actual behavior
Exception is thrown while trying to resend unacked message:
2019-03-08 14:19:37.194 ERROR 31746 --- [ntLoopGroup-5-5] io.moquette.broker.NewNettyMQTTHandler : Unexpected exception while processing MQTT message. Closing Netty channel. CId=client123
java.lang.ClassCastException: class io.moquette.broker.SessionRegistry$PubRelMarker cannot be cast to class io.moquette.broker.SessionRegistry$PublishedMessage (io.moquette.broker.SessionRegistry$PubRelMarker and io.moquette.broker.SessionRegistry$PublishedMessage are in unnamed module of loader 'app')
at io.moquette.broker.Session.resendInflightNotAcked(Session.java:293)
at io.moquette.broker.MQTTConnection.resendNotAckedPublishes(MQTTConnection.java:481)
at io.moquette.broker.NewNettyMQTTHandler.userEventTriggered(NewNettyMQTTHandler.java:106)
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Tags
Nov 2, 2020
…
Show 2 newer tags
Nov 2, 2020
last_gradle
…
Last version with gradle build system
Nov 2, 2020
b69146b
zip
tar.gz
Apr 11, 2020
v0.13
…
Moquette 0.13 versions release
Apr 11, 2020
3b83f47
zip
tar.gz
Latest release
v0.12.1
26e43c5
Compare
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
8. Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.
9. Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
#520
opened Mar 4, 2020 by
luoliangtiger
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
2
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
fix trie match bug and bytesMetrics bug
#479
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
View code
README.md
netty-mqtt5-codec
Netty codec implementation for MQTT3 and MQTT5
About
Netty codec implementation for MQTT3 and MQTT5
Resources
Readme
License
Apache-2.0 License
Releases
No releases published
Packages 0
No packages published
Languages
Java
100.0%
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Releases · moquette-io/moquette · GitHub
Release 0.9 · moquette-io/moquette · GitHub
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
opened Jan 17, 2020 by
carlsberg-stack
5
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
opened Dec 18, 2019 by
beniroquai
1
Will it be compatible with Graalvm in the future?
#509
opened Dec 12, 2019 by
coolbeevip
Moquette & 2-way SSL authentication
#508
opened Nov 25, 2019 by
lukaszsoszynski
BrokerInterceptor thread pool never closing on serverStop
You could search all of GitHub or try an advanced search.
ProTip!
Exclude everything labeled bug with -label:bug.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
/**
* Path where the maven-wrapper.jar will be saved to.
*/
private static final String MAVEN_WRAPPER_JAR_PATH =
".mvn/wrapper/maven-wrapper.jar";
/**
* Name of the property which should be used to override the default download url for the wrapper.
*/
private static final String PROPERTY_NAME_WRAPPER_URL = "wrapperUrl";
public static void main(String args[]) {
System.out.println("- Downloader started");
File baseDirectory = new File(args[0]);
System.out.println("- Using base directory: " + baseDirectory.getAbsolutePath());
// If the maven-wrapper.properties exists, read it and check if it contains a custom
// wrapperUrl parameter.
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.handler.codec.ByteToMessageDecoder.userEventTriggered(ByteToMessageDecoder.java:366)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
Choose a tag to compare
Search for a tag
Release v.012.1
Latest release
v0.12.1
26e43c5
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Mar 3, 2019
·
26 commits
to master
since this release
Bugfix release for bad push of queue messages
Assets
2
Source code (zip)
Source code (tar.gz)
v0.12
3080050
Compare
Choose a tag to compare
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
END OF TERMS AND CONDITIONS
APPENDIX: How to apply the Apache License to your work.
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
Copyright [yyyy] [name of copyright owner]
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
Accept
Reject
Save preferences
opened Jun 2, 2019 by
ilylia
4
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
1
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
ProTip!
Updated in the last three days: updated:>2020-11-20.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Learn more
Accept
Reject
Save preferences
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
GitHub Package Registry Icon
Get started with GitHub Packages
Safely publish packages, store your packages alongside your code, and share your packages privately with your team.
Choose an ecosystem
Docker
A software platform used for building applications based on containers — small and lightweight execution environments.
Learn More
Apache Maven
A default package manager used for the Java programming language and the Java runtime environment.
Learn More
NuGet
A free and open source package manager used for the Microsoft development platforms including .NET.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
GitHub Package Registry Icon
Get started with GitHub Packages
Safely publish packages, store your packages alongside your code, and share your packages privately with your team.
Choose an ecosystem
Docker
A software platform used for building applications based on containers — small and lightweight execution environments.
Learn More
Release before_sofia2 · moquette-io/moquette · GitHub
Bumped dev cycle for 0.10 · moquette-io/moquette@a7b8c07 · GitHub
Bumped version 0.9 · moquette-io/moquette@4162aae · GitHub
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
All
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
All
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
Private
Select visibility
All
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
Open
beniroquai opened this issue
Dec 18, 2019
· 1 comment
Open
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
beniroquai opened this issue
Dec 18, 2019
· 1 comment
Comments
Copy link
Quote reply
beniroquai
commented
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Question: disconnecting a client when authentication details removed
#516
Open
MattyyttaM opened this issue
Jan 23, 2020
· 0 comments
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
moquette/broker/src/main/java/io/moquette/broker/MQTTConnection.java
/
Jump to
Code definitions
MQTTConnection
Class
handleMessage
Method
processPubComp
Method
processPubRec
Method
pubrel
Method
processPubAck
Method
processConnect
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
Open
carlsberg-stack opened this issue
Jan 17, 2020
· 5 comments
Open
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
carlsberg-stack opened this issue
Jan 17, 2020
· 5 comments
Comments
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
last_gradle
b69146b
Compare
Choose a tag to compare
Search for a tag
last_gradle
last_gradle
b69146b
Compare
Choose a tag to compare
Search for a tag
#506
opened Oct 9, 2019 by
bobrowskim
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
Connection dropped when publishing message with payload greater 8KB.
#503
opened Aug 30, 2019 by
r-t-s
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
license is missing in artifact
#492
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
File mavenWrapperPropertyFile = new File(baseDirectory, MAVEN_WRAPPER_PROPERTIES_PATH);
String url = DEFAULT_DOWNLOAD_URL;
if(mavenWrapperPropertyFile.exists()) {
FileInputStream mavenWrapperPropertyFileInputStream = null;
try {
mavenWrapperPropertyFileInputStream = new FileInputStream(mavenWrapperPropertyFile);
Properties mavenWrapperProperties = new Properties();
mavenWrapperProperties.load(mavenWrapperPropertyFileInputStream);
url = mavenWrapperProperties.getProperty(PROPERTY_NAME_WRAPPER_URL, url);
} catch (IOException e) {
System.out.println("- ERROR loading '" + MAVEN_WRAPPER_PROPERTIES_PATH + "'");
} finally {
try {
if(mavenWrapperPropertyFileInputStream != null) {
mavenWrapperPropertyFileInputStream.close();
}
} catch (IOException e) {
// Ignore ...
}
}
}
System.out.println("- Downloading from: " + url);
File outputFile = new File(baseDirectory.getAbsolutePath(), MAVEN_WRAPPER_JAR_PATH);
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.moquette.broker.MoquetteIdleTimeoutHandler.userEventTriggered(MoquetteIdleTimeoutHandler.java:48)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.moquette.broker.InflightResender.resendNotAcked(InflightResender.java:160)
at io.moquette.broker.InflightResender.access$100(InflightResender.java:32)
at io.moquette.broker.InflightResender$WriterIdleTimeoutTask.run(InflightResender.java:58)
at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38)
at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:127)
Search for a tag
Release v.012
v0.12
3080050
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Dec 1, 2018
·
40 commits
to master
since this release
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
Rewritten completly the broker to introduce the concept of MqttConnection
Dropped suppoert for MapDB and keeped only H2 MvStore for persistence
Assets
2
Source code (zip)
Source code (tar.gz)
v0.11
0bf35a7
Verified
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Reject
Save preferences
Learn More
RubyGems
A standard format for distributing Ruby programs and libraries used for the Ruby programming language.
Learn More
npm
A package manager for JavaScript, included with Node.js. npm makes it easy for developers to share and reuse code.
Learn More
Containers
beta
A single place for your team to manage Docker images and decide who can see and access your images.
Learn More
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Release last_with_maven · moquette-io/moquette · GitHub
Merge pull request #345 from AndreasMager/gradle · moquette-io/moquette@c367100 · GitHub
Release Release v0.10 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Bumped release 0.10 · moquette-io/moquette@0480260 · GitHub
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Apache Maven
A default package manager used for the Java programming language and the Java runtime environment.
Learn More
NuGet
A free and open source package manager used for the Microsoft development platforms including .NET.
Learn More
RubyGems
A standard format for distributing Ruby programs and libraries used for the Ruby programming language.
Learn More
npm
A package manager for JavaScript, included with Node.js. npm makes it easy for developers to share and reuse code.
Learn More
Containers
beta
A single place for your team to manage Docker images and decide who can see and access your images.
Learn More
© 2020 GitHub, Inc.
Terms
Privacy
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
Public
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Dec 18, 2019
Expected behavior
Clients should receive topics
Actual behavior
Clients - subscribed to topic - don'T receive anything.
Steps to reproduce
See below
Minimal yet complete reproducer code (or URL to code) or complete log file
public class MQTTBroker implements Callable<Boolean> {
private static final String TAG = "MQTTBrokerThread";
private Server server;
private Properties config;
public MQTTBroker(Properties config) {
this.config = config;
}
public Server getServer() {
return server;
}
public void stopServer() {
server.stopServer();
}
@Override
public Boolean call() throws Exception {
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Open
Question: disconnecting a client when authentication details removed
#516
MattyyttaM opened this issue
Jan 23, 2020
· 0 comments
Comments
Copy link
Quote reply
MattyyttaM
commented
Jan 23, 2020
Is there a way I can disconnect a client(s) that have connected to a certain user/password combination?
I'm trying to dynamically create/remove users whilst the broke is running. If a client has already connected with a given user/password combination and I then remove it, I want to client to be told to disconnect, if this is doable.
Moquette MQTT version
0.12.1
👍
1
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Method
operationComplete
Method
setupInflightResender
Method
initializeKeepAliveTimeout
Method
setIdleTime
Method
isNotProtocolVersion
Method
abortConnection
Method
login
Method
handleConnectionLost
Method
Copy link
Quote reply
carlsberg-stack
commented
Jan 17, 2020
No description provided.
Copy link
Collaborator
andsel
commented
Jan 17, 2020
Please file a request with more details, "bridging to a cloud broker" is not so clear to understand what you mean
Copy link
Author
carlsberg-stack
commented
Jan 17, 2020
Please file a request with more details, "bridging to a cloud broker" is not so clear to understand what you mean
I am sorry. So i am able to run broker in my android device. I am using for azure iot for remote access. I want to bridge between my android broker and azure iot.
Copy link
Collaborator
andsel
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
andsel
tagged this
Nov 2, 2020
·
9 commits
to master
since this tag
Last version with gradle build system
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
opened Jul 30, 2019 by
ascheman
How one port supports both unidirectional and two-way certificate authentication for TLS
#491
opened Jul 30, 2019 by
cnneillee
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Subscription storage
#482
opened Jun 12, 2019 by
BigGitWorld
Previous 1 2 3 Next
Previous Next
if(!outputFile.getParentFile().exists()) {
if(!outputFile.getParentFile().mkdirs()) {
System.out.println(
"- ERROR creating output directory '" + outputFile.getParentFile().getAbsolutePath() + "'");
}
}
System.out.println("- Downloading to: " + outputFile.getAbsolutePath());
try {
downloadFileFromURL(url, outputFile);
System.out.println("Done");
System.exit(0);
} catch (Throwable e) {
System.out.println("- Error downloading");
e.printStackTrace();
System.exit(1);
}
}
private static void downloadFileFromURL(String urlString, File destination) throws Exception {
if (System.getenv("MVNW_USERNAME") != null && System.getenv("MVNW_PASSWORD") != null) {
String username = System.getenv("MVNW_USERNAME");
char[] password = System.getenv("MVNW_PASSWORD").toCharArray();
Authenticator.setDefault(new Authenticator() {
@Override
at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163)
at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:495)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:905)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.base/java.lang.Thread.run(Thread.java:834)
2019-03-08 14:19:37.194 ERROR 31746 --- [ntLoopGroup-5-5] io.moquette.broker.NewNettyMQTTHandler : Unexpected exception while processing MQTT message. Closing Netty channel. CId=client123
java.nio.channels.ClosedChannelException: null
at io.netty.channel.AbstractChannel$AbstractUnsafe.close(...)(Unknown Source)
Steps to reproduce
Run moquette broker
Publish messages every second to any topic, e.g. "/test-topic"
Run subscriber with client = "client123", clean_session = false and subscribe to topic "/test-topic" with QoS = 1
Kill subscriber
Rerun subscriber
Retry 4.-5. until you get an exception
Minimal yet complete reproducer code (or URL to code) or complete log file
Client using python 3.7
import paho.mqtt.client as mqtt
# The callback for when the client receives a CONNACK response from the server.
def on_connect(client, userdata, flags, rc):
print("Connected with result code " + str(rc))
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
Compare
Choose a tag to compare
Search for a tag
Release v0.11
v0.11
0bf35a7
Compare
Choose a tag to compare
Search for a tag
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
andsel
released this
Jun 10, 2018
·
92 commits
to master
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Release second_try_with_osgi_giveup · moquette-io/moquette · GitHub
Release Release v.012 · moquette-io/moquette · GitHub
Merge pull request #350 from AndreasMager/test_setup_improvement · moquette-io/moquette@7c4f902 · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
try {
// use ServerInstance singleton to get the same instance of server
server = ServerInstance.getServerInstance();
server.startServer(config);
Log.d(TAG, "MQTT Broker Started");
return true;
} catch (Exception e) {
Log.e(TAG, e.getMessage());
throw new Exception(e.getLocalizedMessage());
}
}
}
Moquette MQTT version
latest
JVM version (e.g. java -version)
1.8
OS version (e.g. uname -a)
Android
Hey,
thanks for putting this great work online! I was wondering if someone ever tried to create a broker + cleint on the same (Android) device. My app has a moquette broker app which connects just fine and receives commands sent from a second cellphone. The brokers' debug output is reflecting the topic, but the second device (ESP32) is not receiving anything - even though it's subscribed to this topic. Do you have any idea?
The debug-output is this one:
12-17 18:11:34.839 9128-16229/in.dotworld.mqttserver I/System.out: 7468801 [nioEventLoopGroup-9-6] DEBUG io.moquette.server.netty.AutoFlushHandler - Flushing idle Netty channel. MqttClientId = AND1230206.
2019-12-17 18:11:34.840 9128-16229/in.dotworld.mqttserver I/System.out: 7468801 [nioEventLoopGroup-9-6] DEBUG io.moquette.server.netty.AutoFlushHandler - Flushing idle Netty channel. MqttClientId = AND1230206.
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
v0.11
0bf35a7
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
Compare
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Updated readme for version 0.11
Loading branch information
andsel
isConnected
Method
dropConnection
Method
processDisconnect
Method
processSubscribe
Method
sendSubAckMessage
Method
processUnsubscribe
Method
sendUnsubAckMessage
Method
processPublish
Method
sendPublishReceived
Method
processPubRel
Method
sendPublish
Method
sendIfWritableElseDrop
Method
writabilityChanged
commented
Jan 17, 2020
You have to write some code to bridge it. Moquette exposes a set of
Interceptor callback interfaces, you can implement the one you are
interested in (for example a forwarder to Azure using some Azure HTTP
endpoint or whatever protocol Azure use) and register in you embedded
application.
…
On Fri, Jan 17, 2020 at 10:24 AM Amit Jaiswal ***@***.***> wrote:
Please file a request with more details, "bridging to a cloud broker" is
not so clear to understand what you mean
I am sorry. So i am able to run broker in my android device. I am using
for azure iot for remote access. I want to bridge between my android broker
and azure iot.
—
You are receiving this because you commented.
Reply to this email directly, view it on GitHub
<#513?email_source=notifications&email_token=AAH5RUKNMO4ZMQSG3XPDDNLQ6F2OHA5CNFSM4KIDNQKKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEJHB7WQ#issuecomment-575545306>,
or unsubscribe
<https://github.com/notifications/unsubscribe-auth/AAH5RUMNBGPURCWKGD2UKLTQ6F2OHANCNFSM4KIDNQKA>
.
👍
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
});
}
URL website = new URL(urlString);
ReadableByteChannel rbc;
rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream(destination);
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
fos.close();
rbc.close();
}
}
BIN
+49.5 KB
.mvn/wrapper/maven-wrapper.jar
Show comments
View file
Edit file
Delete file
# Subscribing in on_connect() means that if we lose the connection and
# reconnect then subscriptions will be renewed.
client.subscribe("/test-topic", 1)
# The callback for when a PUBLISH message is received from the server.
def on_message(client, userdata, msg):
print(msg.topic + " " + str(msg.payload))
client = mqtt.Client(client_id="client123", clean_session=False)
client.username_pw_set("user123", "session_id")
client.on_connect = on_connect
client.on_message = on_message
print("connecting")
client.connect("localhost", 1883, 60)
print("connected")
client.loop_forever()
Moquette MQTT version
moquette-broker-0.12.1.jar
JVM version (e.g. java -version)
java -version
openjdk version "11.0.1" 2018-10-16
OpenJDK Runtime Environment 18.9 (build 11.0.1+13)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.1+13, mixed mode)
OS version (e.g. uname -a)
uname -a
since this release
Updated readme for version 0.11
Assets
2
Source code (zip)
Source code (tar.gz)
Aug 26, 2017
second_try_with_osgi_giveup
…
Abandon OSGi for the second time in the project history
Aug 26, 2017
c367100
zip
tar.gz
Aug 24, 2017
last_with_maven
…
Last version with maven build system
Aug 24, 2017
7c4f902
zip
tar.gz
Bumped release 0.13 (#523) · moquette-io/moquette@3b83f47 · GitHub
Release v0.13 · moquette-io/moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Bumped release 0.12 · moquette-io/moquette@3080050 · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Be notified of new releases
Create your free GitHub account today to subscribe to this repository for new releases and build software alongside 50 million developers.
Sign up
Releases
Tags
Feb 3, 2016
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Learn more
Accept
Reject
Save preferences
2019-12-17 18:11:34.861 9128-16229/in.dotworld.mqttserver I/System.out: 7468824 [nioEventLoopGroup-9-6] INFO messageLogger - C->B PUBLISH <AND1230206> to topics </S004/LAR01/RECM>
2019-12-17 18:11:34.862 9128-16229/in.dotworld.mqttserver I/System.out: 7468824 [nioEventLoopGroup-9-6] INFO messageLogger - C->B PUBLISH <AND1230206> to topics </S004/LAR01/RECM>
2019-12-17 18:11:34.862 9128-16229/in.dotworld.mqttserver I/System.out: 7468824 [nioEventLoopGroup-9-6] INFO messageLogger - C->B PUBLISH <AND1230206> to topics </S004/LAR01/RECM>
2019-12-17 18:11:34.865 9128-16229/in.dotworld.mqttserver I/System.out: 7468827 [nioEventLoopGroup-9-6] DEBUG io.moquette.server.netty.NettyMQTTHandler - Processing MQTT message, type: PUBLISH
2019-12-17 18:11:34.865 9128-16229/in.dotworld.mqttserver I/System.out: 7468827 [nioEventLoopGroup-9-6] DEBUG io.moquette.server.netty.NettyMQTTHandler - Processing MQTT message, type: PUBLISH
2019-12-17 18:11:34.866 9128-16229/in.dotworld.mqttserver I/System.out: 7468827 [nioEventLoopGroup-9-6] DEBUG io.moquette.server.netty.NettyMQTTHandler - Processing MQTT message, type: PUBLISH
2019-12-17 18:11:34.867 9128-16229/in.dotworld.mqttserver I/System.out: 7468830 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.ProtocolProcessor - Processing PUBLISH message. CId=AND1230206, topic=/S004/LAR01/RECM, messageId=3, qos=AT_LEAST_ONCE
2019-12-17 18:11:34.868 9128-16229/in.dotworld.mqttserver I/System.out: 7468830 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.ProtocolProcessor - Processing PUBLISH message. CId=AND1230206, topic=/S004/LAR01/RECM, messageId=3, qos=AT_LEAST_ONCE
2019-12-17 18:11:34.868 9128-16229/in.dotworld.mqttserver I/System.out: 7468830 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.ProtocolProcessor - Processing PUBLISH message. CId=AND1230206, topic=/S004/LAR01/RECM, messageId=3, qos=AT_LEAST_ONCE
2019-12-17 18:11:34.870 9128-16229/in.dotworld.mqttserver I/System.out: 7468833 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.MessagesPublisher - Sending publish message to subscribers. ClientId=AND1230206, topic=/S004/LAR01/RECM, messageId=3
2019-12-17 18:11:34.871 9128-16229/in.dotworld.mqttserver I/System.out: 7468833 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.MessagesPublisher - Sending publish message to subscribers. ClientId=AND1230206, topic=/S004/LAR01/RECM, messageId=3
2019-12-17 18:11:34.872 9128-16229/in.dotworld.mqttserver I/System.out: 7468833 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.MessagesPublisher - Sending publish message to subscribers. ClientId=AND1230206, topic=/S004/LAR01/RECM, messageId=3
2019-12-17 18:11:34.875 9128-16229/in.dotworld.mqttserver I/System.out: 7468838 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.Qos1PublishHandler - Sending PUBACK message CId=<AND1230206>
2019-12-17 18:11:34.875 9128-16229/in.dotworld.mqttserver I/System.out: 7468838 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.Qos1PublishHandler - Sending PUBACK message CId=<AND1230206>
2019-12-17 18:11:34.876 9128-16229/in.dotworld.mqttserver I/System.out: 7468838 [nioEventLoopGroup-9-6] INFO io.moquette.spi.impl.Qos1PublishHandler - Sending PUBACK message CId=<AND1230206>
2019-12-17 18:11:34.877 9128-16229/in.dotworld.mqttserver I/System.out: 7468840 [nioEventLoopGroup-9-6] INFO messageLogger - C<-B PUBACK <AND1230206> packetID <3>
2019-12-17 18:11:34.877 9128-16229/in.dotworld.mqttserver I/System.out: 7468840 [nioEventLoopGroup-9-6] INFO messageLogger - C<-B PUBACK <AND1230206> packetID <3>
2019-12-17 18:11:34.878 9128-16229/in.dotworld.mqttserver I/System.out: 7468840 [nioEventLoopGroup-9-6] INFO messageLogger - C<-B PUBACK <AND1230206> packetID <3>
2019-12-17 18:11:34.966 9128-15058/in.dotworld.mqttserver I/System.out: 7468929 [nioEventLoopGroup-9-1] DEBUG io.moquette.server.netty.AutoFlushHandler - Flushing idle Netty channel. MqttClientId = myesp.
Any idea? Both devices are visible, but it seems, that the ESP32 is not subscribing to anything,, am I right?
Cheers and thanks for putting this up! :)
Copy link
Choose a tag to compare
Search for a tag
Release v0.11
v0.11
0bf35a7
Compare
Choose a tag to compare
Search for a tag
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
andsel
released this
Jun 10, 2018
·
92 commits
to master
since this release
Updated readme for version 0.11
Assets
2
Source code (zip)
Source code (tar.gz)
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
committed
May 17, 2018
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
08d3e8d
commit 0bf35a7b8da7267c726aa2148fd631da4fa07173
Unified
Split
Showing
1 changed file
with
3 additions
and 3 deletions.
+3
−3
README.md
6
README.md
Show comments
View file
Edit file
Method
sendPubAck
Method
sendPubCompMessage
Method
getClientId
Method
getUsername
Method
sendPublishRetainedQos0
Method
sendPublishRetainedWithPacketId
Method
retainedPublish
Method
retainedPublishWithMessageId
Method
sendPublishNotRetainedQos0
Method
notRetainedPublish
Method
notRetainedPublishWithMessageId
Method
resendNotAckedPublishes
1
Copy link
Author
carlsberg-stack
commented
Jan 17, 2020
You have to write some code to bridge it. Moquette exposes a set of Interceptor callback interfaces, you can implement the one you are interested in (for example a forwarder to Azure using some Azure HTTP endpoint or whatever protocol Azure use) and register in you embedded application.
…
On Fri, Jan 17, 2020 at 10:24 AM Amit Jaiswal @.***> wrote: Please file a request with more details, "bridging to a cloud broker" is not so clear to understand what you mean I am sorry. So i am able to run broker in my android device. I am using for azure iot for remote access. I want to bridge between my android broker and azure iot. — You are receiving this because you commented. Reply to this email directly, view it on GitHub <#513?email_source=notifications&email_token=AAH5RUKNMO4ZMQSG3XPDDNLQ6F2OHA5CNFSM4KIDNQKKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEJHB7WQ#issuecomment-575545306>, or unsubscribe https://github.com/notifications/unsubscribe-auth/AAH5RUMNBGPURCWKGD2UKLTQ6F2OHANCNFSM4KIDNQKA .
Thanks
carlsberg-stack
closed this
Jan 17, 2020
Copy link
Author
carlsberg-stack
commented
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Binary file not shown.
2
.mvn/wrapper/maven-wrapper.properties
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,2 @@
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.2/apache-maven-3.6.2-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar
11
.travis.yml
Show comments
View file
Edit file
Delete file
@@ -1,13 +1,6 @@
language: java
jdk:
- openjdk12
before_cache:
Darwin Admins-MacBook-Pro.local 18.2.0 Darwin Kernel Version 18.2.0: Thu Dec 20 20:46:53 PST 2018; root:xnu-4903.241.1~1/RELEASE_X86_64 x86_64
andsel
pinned this issue
Mar 9, 2019
andsel
self-assigned this
Mar 17, 2019
andsel
added
the
bug
label
Mar 17, 2019
andsel
added this to the 0.13 milestone
Mar 17, 2019
Copy link
Collaborator
andsel
commented
Mar 17, 2019
@OleksandrBerezianskyi you missed the publisher client part. I mean the error here relates to the fact that PubRelMarker can't be cast to PublishedMessage due to a timeout of a message in flight from broker to client. The PubRelMarker is a placeholder class that reppresents the PUBREL message from broker to a subscriber that want to receive messages at QoS2. Please, could you share a complete log file from bootstrap of the broker till the crash moquette.log and messages.logs? It could help a lot to understand/ reproduce, thanks
Sign up for free
v0.10
0480260
Compare
Choose a tag to compare
Search for a tag
Release v0.10
v0.10
0480260
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Jun 30, 2017
·
148 commits
to master
since this release
Release 0.10
Assets
2
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
v0.8.1
…
Version 0.8.1 with bugfixes on clean session
Feb 3, 2016
5e680b6
zip
tar.gz
Jan 17, 2016
v0.8
…
Release 0.8 drop LMAX RingBuffer for in/out queues and use of multith…
…reading on Protocol Processor instead of single thread
Jan 17, 2016
a44d6b0
zip
tar.gz
Sep 29, 2015
last_with_ringbuffer
…
Last version with LMAX ringbuffer
Sep 29, 2015
b716927
zip
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Packages · Moquette · GitHub
Packages · Moquette · GitHub
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf by komamitsu · Pull Request #464 · moquette-io/moquette · GitHub
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
v0.9
4162aae
Compare
Choose a tag to compare
Search for a tag
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
before_sofia2
a7b8c07
Compare
Choose a tag to compare
Search for a tag
before_sofia2
before_sofia2
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Bumped dev cycle for 0.10
Loading branch information
andsel
committed
Jan 11, 2017
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Bumped version 0.9
Loading branch information
andsel
committed
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Author
beniroquai
commented
Jan 2, 2020
The problem is here. The "join" method is not implemented for some reason. I changed
this.topic = String.join("/", strTokens); to this.topic = "/"+strTokens;
This worked for me.
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Delete file
@@ -25,11 +25,11 @@ Point your MQTT client to _broker.moquette.io_
## 1 minute set up
Start play with it, download the self distribution tar from [BinTray](https://bintray.com/artifact/download/andsel/generic/distribution-0.10-bundle-tar.tar.gz) ,
Start play with it, download the self distribution tar from [BinTray](https://bintray.com/artifact/download/andsel/generic/moquette-distribution-0.11.tar) ,
the un untar and start the broker listening on `1883` port and enjoy!
```
tar zxf distribution-0.10-bundle-tar.tar.gz
tar zxf moquette-distribution-0.11.tar
cd bin
./moquette.sh
```
@@ -66,7 +66,7 @@ Include dependency in your project:
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
<version>0.10</version>
<version>0.11</version>
</dependency>
```
Toggle all file notes
0 comments
Method
nextPacketId
Method
toString
Method
remoteAddress
Method
readCompleted
Method
Code navigation index up-to-date
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
535 lines (473 sloc)
23 KB
Raw
Blame
/*
Jan 20, 2020
You have to write some code to bridge it. Moquette exposes a set of Interceptor callback interfaces, you can implement the one you are interested in (for example a forwarder to Azure using some Azure HTTP endpoint or whatever protocol Azure use) and register in you embedded application.
…
On Fri, Jan 17, 2020 at 10:24 AM Amit Jaiswal @.***> wrote: Please file a request with more details, "bridging to a cloud broker" is not so clear to understand what you mean I am sorry. So i am able to run broker in my android device. I am using for azure iot for remote access. I want to bridge between my android broker and azure iot. — You are receiving this because you commented. Reply to this email directly, view it on GitHub <#513?email_source=notifications&email_token=AAH5RUKNMO4ZMQSG3XPDDNLQ6F2OHA5CNFSM4KIDNQKKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEJHB7WQ#issuecomment-575545306>, or unsubscribe https://github.com/notifications/unsubscribe-auth/AAH5RUMNBGPURCWKGD2UKLTQ6F2OHANCNFSM4KIDNQKA .
Using Interceptor we can only send data to remote. What about to receive messages from remote? I have seen some blogs but there is no configuration here [https://aws.amazon.com/blogs/iot/how-to-bridge-mosquitto-mqtt-broker-to-aws-iot/]
carlsberg-stack
reopened this
Jan 20, 2020
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
directories:
- $HOME/.gradle/caches/
- $HOME/.gradle/wrapper/
script:
- ./gradlew install test
#script:
# - ./mvnw verify
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 17f2c93
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
andsel
Labels
bug
Projects
None yet
Milestone
0.13
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
2 participants
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Source code (zip)
Source code (tar.gz)
Jan 18, 2017
before_sofia2
…
Before contribution from Sofia2 improvements
Jan 18, 2017
a7b8c07
zip
tar.gz
v0.9
4162aae
Compare
Choose a tag to compare
Search for a tag
0.9
v0.9
4162aae
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Moquette 0.12.1 versions release · moquette-io/moquette@26e43c5 · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
last_with_maven
7c4f902
Compare
Choose a tag to compare
Search for a tag
last_with_maven
last_with_maven
7c4f902
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Merge pull request #345 from AndreasMager/gradle
Switched build from Maven to Gradle
Loading branch information
andsel
committed
Aug 24, 2017
2 parents
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
v0.10
0480260
Compare
Choose a tag to compare
Search for a tag
Release v0.10
v0.10
0480260
tar.gz
Jul 8, 2015
0.7
…
Version 0.7 MapDB migration
Jul 8, 2015
f0a8346
zip
tar.gz
Apr 6, 2015
last_osgi
…
Last try with OSGi and pax-runners, too complex and time burners to use
Apr 6, 2015
d850262
zip
tar.gz
PreviousNext
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
0.9
v0.9
4162aae
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Jan 11, 2017
·
390 commits
to master
since this release
Move the protocol processing to concurrent FSM.
Fixes for tests
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
a7b8c07
Compare
Choose a tag to compare
Search for a tag
andsel
tagged this
Jan 18, 2017
·
389 commits
to master
since this tag
Before contribution from Sofia2 improvements
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
1 parent
4162aae
commit a7b8c07d1aa683236ef827b0d3d4141ec96e33ec
Unified
Split
Showing
11 changed files
with
13 additions
and 10 deletions.
+3
−0
ChangeLog.txt
+1
−1
README.md
+1
−1
broker/pom.xml
Jan 11, 2017
1 parent
ac8a11f
commit 4162aae3a0a4e697e49983858afacb2fe1f60af5
Unified
Split
Showing
10 changed files
with
10 additions
and 10 deletions.
+1
−1
README.md
+1
−1
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Question: disconnecting a client when authentication details removed
#516
opened Jan 23, 2020 by
MattyyttaM
ProTip!
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
on commit 0bf35a7
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
* Copyright (c) 2012-2018 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.broker;
import io.moquette.broker.subscriptions.Topic;
import io.moquette.broker.security.IAuthenticator;
import io.netty.buffer.ByteBuf;
import io.netty.channel.Channel;
import io.netty.channel.ChannelFuture;
import io.netty.channel.ChannelFutureListener;
import io.netty.channel.ChannelPipeline;
import io.netty.handler.codec.mqtt.*;
import io.netty.handler.timeout.IdleStateHandler;
None yet
2 participants
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
❤️
🚀
👀
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
opened Dec 18, 2019 by
beniroquai
1
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Jan 11, 2017
·
390 commits
to master
since this release
Move the protocol processing to concurrent FSM.
Fixes for tests
Assets
2
Source code (zip)
Source code (tar.gz)
PreviousNext
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Compare
Choose a tag to compare
Search for a tag
andsel
tagged this
Aug 24, 2017
·
127 commits
to master
since this tag
Last version with maven build system
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
7c4f902
+
e8b105f
commit c367100e6b34908a8cf9b644013133e94abdc4d8
Unified
Split
Showing
31 changed files
with
699 additions
and 1,316 deletions.
+3
−0
.editorconfig
+3
−1
.gitignore
+10
−0
.travis.yml
+3
−2
README.md
+51
−0
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Jun 30, 2017
·
148 commits
to master
since this release
Release 0.10
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Browse files
Loading status checks…
Bumped release 0.10
Loading branch information
andsel
committed
Jun 27, 2017
1 parent
ae9c6c7
commit 0480260a567a4e5317acb441b7d35988df4a687f
Unified
Split
Showing
11 changed files
with
14 additions
and 14 deletions.
+3
−3
README.md
+1
−1
broker/pom.xml
+1
−1
Make the number of Netty worker threads number configurable by komamitsu · Pull Request #468 · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
second_try_with_osgi_giveup
c367100
Compare
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
v0.12
3080050
Compare
Choose a tag to compare
Search for a tag
Release v.012
v0.12
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Merge pull request #350 from AndreasMager/test_setup_improvement
Test setup improvement
Loading branch information
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
+1
−1
broker/src/main/java/io/moquette/server/Server.java
+1
−1
distribution/pom.xml
+1
−1
embedding_moquette/pom.xml
+1
−1
netty_parser/pom.xml
+1
−1
osgi_test/pom.xml
+1
−1
perf/pom.xml
+1
−1
pom.xml
+1
−1
tools_scripts/integration/brokerEmbeddedTest.groovy
3
broker/pom.xml
+1
−1
broker/src/main/java/io/moquette/server/Server.java
+1
−1
distribution/pom.xml
+1
−1
embedding_moquette/pom.xml
+1
−1
netty_parser/pom.xml
+1
−1
osgi_test/pom.xml
+1
−1
perf/pom.xml
+1
−1
pom.xml
+1
−1
tools_scripts/integration/brokerEmbeddedTest.groovy
Updated in the last three days: updated:>2020-11-20.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.net.InetSocketAddress;
import java.util.*;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
import static io.netty.handler.codec.mqtt.MqttConnectReturnCode.*;
import static io.netty.handler.codec.mqtt.MqttMessageIdVariableHeader.from;
import static io.netty.handler.codec.mqtt.MqttQoS.*;
final class MQTTConnection {
private static final Logger LOG = LoggerFactory.getLogger(MQTTConnection.class);
final Channel channel;
private BrokerConfiguration brokerConfig;
private IAuthenticator authenticator;
private SessionRegistry sessionRegistry;
private final PostOffice postOffice;
private volatile boolean connected;
private final AtomicInteger lastPacketId = new AtomicInteger(0);
MQTTConnection(Channel channel, BrokerConfiguration brokerConfig, IAuthenticator authenticator,
SessionRegistry sessionRegistry, PostOffice postOffice) {
this.channel = channel;
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Pull requests · moquette-io/moquette · GitHub
Clean test storage on exit to prevent assert in next test by qbast · Pull Request #497 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Bumped release 0.13 (#523)
Loading branch information
andsel
committed
Apr 11, 2020
Java 11 compatibility by qbast · Pull Request #498 · moquette-io/moquette · GitHub
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Releases
Tags
v0.13
3b83f47
Compare
Choose a tag to compare
Search for a tag
v0.13
v0.13
3b83f47
Compare
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Bumped release 0.12
Loading branch information
andsel
committed
Dec 1, 2018
1 parent
2138513
broker/build.gradle
+0
−282
broker/pom.xml
+89
−0
build.gradle
+63
−0
distribution/build.gradle
+0
−80
distribution/pom.xml
+0
−57
distribution/src/main/assembly/assembly.xml
+5
−0
embedding_moquette/build.gradle
+0
−37
embedding_moquette/pom.xml
+9
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
broker/src/main/java/io/moquette/server/Server.java
+1
−1
distribution/pom.xml
+1
−1
embedding_moquette/pom.xml
+1
−1
h2_storage/pom.xml
+1
−1
mapdb_storage/pom.xml
+1
−1
osgi_test/pom.xml
+1
−1
perf/pom.xml
+1
−1
pom.xml
+2
−2
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
All
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
NuGet
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Choose a tag to compare
Search for a tag
second_try_with_osgi_giveup
second_try_with_osgi_giveup
c367100
Compare
Choose a tag to compare
Search for a tag
andsel
tagged this
Aug 26, 2017
·
125 commits
to master
since this tag
Abandon OSGi for the second time in the project history
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
3080050
Compare
Choose a tag to compare
Search for a tag
andsel
released this
Dec 1, 2018
·
40 commits
to master
since this release
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
Rewritten completly the broker to introduce the concept of MqttConnection
Dropped suppoert for MapDB and keeped only H2 MvStore for persistence
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
andsel
committed
Aug 24, 2017
2 parents
dbd1310
+
4d59a54
commit 7c4f902dbd20e398f734501426cdd2ec22df6d2c
Unified
Split
Showing
9 changed files
with
175 additions
and 20 deletions.
+1
−1
.gitignore
+28
−0
broker/pom.xml
+11
−0
broker/src/test/java/io/moquette/server/ServerIntegrationSSLClientAuthTest.java
Learn more
Accept
Reject
Save preferences
Reject
Save preferences
ChangeLog.txt
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,6 @@
Version 0.10:
Version 0.9:
Moved canRead check to topic from publish phase to subscribe (#144)
Added javadoc and src jars creations for JCenter/Maven central
2
README.md
Show comments
View file
Edit file
Delete file
@@ -55,7 +55,7 @@ Include dependency in your project:
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
</dependency>
2
README.md
Show comments
View file
Edit file
Delete file
@@ -55,7 +55,7 @@ Include dependency in your project:
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
<version>0.8.1</version>
<version>0.9</version>
</dependency>
```
2
broker/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
this.brokerConfig = brokerConfig;
this.authenticator = authenticator;
this.sessionRegistry = sessionRegistry;
this.postOffice = postOffice;
this.connected = false;
}
void handleMessage(MqttMessage msg) {
MqttMessageType messageType = msg.fixedHeader().messageType();
switch (messageType) {
case CONNECT:
processConnect((MqttConnectMessage) msg);
break;
case SUBSCRIBE:
processSubscribe((MqttSubscribeMessage) msg);
break;
case UNSUBSCRIBE:
processUnsubscribe((MqttUnsubscribeMessage) msg);
break;
case PUBLISH:
processPublish((MqttPublishMessage) msg);
break;
case PUBREC:
processPubRec(msg);
break;
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
6ee0137
commit 3b83f4772a1e51a805931ff70809ce9c29fbb36f
Unified
Split
Showing
7 changed files
with
15 additions
and 11 deletions.
+4
−0
ChangeLog.txt
+3
−3
README.md
+1
−1
broker/src/main/java/io/moquette/broker/Server.java
+2
−2
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Choose a tag to compare
Search for a tag
andsel
tagged this
Apr 11, 2020
·
14 commits
to master
since this tag
Moquette 0.13 versions release
Assets
2
Source code (zip)
Source code (tar.gz)
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
commit 3080050c4dc32b92aedde1de490da7621d8b1f4b
Unified
Split
Showing
5 changed files
with
6 additions
and 6 deletions.
+1
−1
broker/src/main/java/io/moquette/broker/Server.java
+2
−2
build.gradle
+1
−1
distribution/src/main/scripts/moquette.bat
+1
−1
distribution/src/main/scripts/moquette.sh
+1
−1
tools_scripts/integration/brokerEmbeddedTest.groovy
2
−0
gradle/java.gradle
+19
−0
gradle/lint.gradle
+62
−0
gradle/test.gradle
BIN
gradle/wrapper/gradle-wrapper.jar
+6
−0
gradle/wrapper/gradle-wrapper.properties
+164
−0
gradlew
+90
−0
gradlew.bat
+23
−0
h2_storage/build.gradle
+0
−129
h2_storage/pom.xml
Packages · Moquette · GitHub
fix trie match bug and bytesMetrics bug by ilylia · Pull Request #479 · moquette-io/moquette · GitHub
tools_scripts/integration/brokerEmbeddedTest.groovy
6
README.md
Show comments
View file
Edit file
Delete file
@@ -20,10 +20,10 @@ and into [WSO2 Messge broker] (http://techexplosives-pamod.blogspot.it/2014/05/m
Point your MQTT client to _broker.moquette.io_
## 1 minute set up
Start play with it, download the self distribution tar from [BinTray](https://bintray.com/artifact/download/andsel/generic/distribution-0.8-bundle-tar.tar.gz) ,
Start play with it, download the self distribution tar from [BinTray](https://bintray.com/artifact/download/andsel/generic/distribution-0.10-bundle-tar.tar.gz) ,
the un untar and start the broker listening on 1883 port and enjoy!
```
tar zxf distribution-0.8-bundle-tar.tar.gz
tar zxf distribution-0.10-bundle-tar.tar.gz
cd bin
./moquette.sh
```
Authentication changes by ndchandar · Pull Request #507 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
+12
−0
broker/src/test/java/io/moquette/server/ServerIntegrationSSLTest.java
+18
−11
broker/src/test/java/io/moquette/server/ServerLowlevelMessagesIntegrationTests.java
+5
−0
osgi_test/README.md
+31
−0
osgi_test/pom.xml
+57
−8
osgi_test/src/test/java/io/moquette/test/osgi/MoquetteOsgiTest.java
+12
−0
osgi_test/src/test/resources/log4j.properties
2
.gitignore
Show comments
View file
Edit file
Delete file
```
2
broker/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
</parent>
<artifactId>moquette-broker</artifactId>
2
broker/src/main/java/io/moquette/server/Server.java
Show comments
View file
Edit file
Delete file
@@ -68,7 +68,7 @@
<groupId>io.moquette</groupId>
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
</parent>
<artifactId>moquette-broker</artifactId>
2
broker/src/main/java/io/moquette/server/Server.java
Show comments
View file
Edit file
Delete file
@@ -68,7 +68,7 @@
public static void main(String[] args) throws IOException {
final Server server = new Server();
server.startServer();
System.out.println("Server started, version 0.9-SNAPSHOT");
System.out.println("Server started, version 0.9");
//Bind a shutdown hook
Runtime.getRuntime().addShutdownHook(new Thread() {
@Override
2
distribution/pom.xml
Show comments
case PUBCOMP:
processPubComp(msg);
break;
case PUBREL:
processPubRel(msg);
break;
case DISCONNECT:
processDisconnect(msg);
break;
case PUBACK:
processPubAck(msg);
break;
case PINGREQ:
MqttFixedHeader pingHeader = new MqttFixedHeader(MqttMessageType.PINGRESP, false, AT_MOST_ONCE,
false, 0);
MqttMessage pingResp = new MqttMessage(pingHeader);
channel.writeAndFlush(pingResp).addListener(CLOSE_ON_FAILURE);
break;
default:
break;
}
}
private void processPubComp(MqttMessage msg) {
final int messageID = ((MqttMessageIdVariableHeader) msg.variableHeader()).messageId();
Packages · Moquette · GitHub
Packages · Moquette · GitHub
Packages · Moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Moquette 0.12.1 versions release
Loading branch information
andsel
committed
Feb 24, 2019
1 parent
b827ad4
commit 26e43c519ee69c00e0608796b6b8fafa03dbe999
Unified
Split
Showing
build.gradle
+2
−2
distribution/src/main/scripts/moquette.bat
+2
−2
distribution/src/main/scripts/moquette.sh
+1
−1
tools_scripts/integration/brokerEmbeddedTest.groovy
4
ChangeLog.txt
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,7 @@
Version 0.13:
Fixed issue #454 to avoid 1 second pause in flushing
Updated Travis build to JDK 12
Version 0.12:
Fixed issue #415
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
6
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
broker/src/main/java/io/moquette/broker/Server.java
Show comments
View file
Edit file
Delete file
@@ -57,7 +57,7 @@
public static void main(String[] args) throws IOException {
final Server server = new Server();
server.startServer();
System.out.println("Server started, version 0.12-SNAPSHOT");
System.out.println("Server started, version 0.12");
//Bind a shutdown hook
Runtime.getRuntime().addShutdownHook(new Thread(server::stopServer));
}
4
build.gradle
Show comments
View file
Edit file
Delete file
@@ -3,7 +3,7 @@ allprojects {
apply plugin: 'maven-publish'
+23
−0
mapdb_storage/build.gradle
+0
−129
mapdb_storage/pom.xml
+1
−1
osgi_test/README.md
+22
−0
osgi_test/build.gradle
+0
−183
osgi_test/pom.xml
+28
−38
osgi_test/src/test/java/io/moquette/test/osgi/MoquetteOsgiTest.java
+9
−0
perf/build.gradle
+0
−142
perf/pom.xml
+0
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
@@ -58,7 +58,7 @@ Include dependency in your project:
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</dependency>
```
2
broker/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
Open
komamitsu
wants to merge
2
commits into
moquette-io:master
base:
master
from
komamitsu:wrong-netty-buf-ref-cnt
Open
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
komamitsu
wants to merge
2
commits into
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
@@ -18,7 +18,7 @@ broker/runner
/perf/target/
/mapdb_storage/target/
*~
*log*
*.log*
.DS_Store
.settings/
.project
28
broker/pom.xml
Show comments
View file
Edit file
Delete file
@@ -100,6 +100,12 @@
<version>5.1.0</version>
</dependency>
<dependency>
<groupId>com.librato.metrics</groupId>
<artifactId>librato-java</artifactId>
<version>2.1.0</version>
public static void main(String[] args) throws IOException {
final Server server = new Server();
server.startServer();
System.out.println("Server started, version 0.9");
System.out.println("Server started, version 0.10-SNAPSHOT");
//Bind a shutdown hook
Runtime.getRuntime().addShutdownHook(new Thread() {
@Override
2
distribution/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<!--<relativePath>../pom.xml</relativePath>-->
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<!--<relativePath>../pom.xml</relativePath>-->
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
</parent>
<artifactId>distribution</artifactId>
2
embedding_moquette/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
final Session session = sessionRegistry.retrieve(getClientId());
session.processPubComp(messageID);
}
private void processPubRec(MqttMessage msg) {
final int messageID = ((MqttMessageIdVariableHeader) msg.variableHeader()).messageId();
final Session session = sessionRegistry.retrieve(getClientId());
session.processPubRec(messageID);
}
static MqttMessage pubrel(int messageID) {
MqttFixedHeader pubRelHeader = new MqttFixedHeader(MqttMessageType.PUBREL, false, AT_LEAST_ONCE, false, 0);
return new MqttMessage(pubRelHeader, from(messageID));
}
private void processPubAck(MqttMessage msg) {
final int messageID = ((MqttMessageIdVariableHeader) msg.variableHeader()).messageId();
Session session = sessionRegistry.retrieve(getClientId());
session.pubAckReceived(messageID);
}
void processConnect(MqttConnectMessage msg) {
MqttConnectPayload payload = msg.payload();
String clientId = payload.clientIdentifier();
final String username = payload.userName();
if (isNotProtocolVersion(msg, MqttVersion.MQTT_3_1) && isNotProtocolVersion(msg, MqttVersion.MQTT_3_1_1)) {
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
5 changed files
with
6 additions
and 6 deletions.
+1
−1
broker/src/main/java/io/moquette/broker/Server.java
+2
−2
build.gradle
+1
−1
distribution/src/main/scripts/moquette.bat
+1
−1
distribution/src/main/scripts/moquette.sh
README.md
Show comments
View file
Edit file
Delete file
@@ -25,11 +25,11 @@ Point your browser to [cloud instance](http://broker.moquette.io), request an ac
## 1 minute set up
Start play with it, download the self distribution tar from [BinTray](https://bintray.com/artifact/download/andsel/generic/moquette-0.12.1.tar.gz) ,
Start play with it, download the self distribution tar from [BinTray](https://bintray.com/artifact/download/andsel/generic/moquette-0.13.tar.gz) ,
the un untar and start the broker listening on `1883` port and enjoy!
```
tar xvf moquette-distribution-0.12.1.tar.gz
tar xvf moquette-distribution-0.13.tar.gz
cd bin
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Packages · Moquette · GitHub
Sign in to GitHub · GitHub
group = 'io.moquette'
version = '0.12-SNAPSHOT'
version = '0.12'
}
buildscript {
@@ -92,7 +92,7 @@ subprojects {
from components.java
groupId "$project.group"
version '0.12-SNAPSHOT'
version '0.12'
}
}
}
2
−235
pom.xml
+16
−0
settings.gradle
3
.editorconfig
Show comments
View file
Edit file
Delete file
@@ -11,3 +11,6 @@ charset = utf-8
indent_style = space
indent_size = 4
Join GitHub · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
<artifactId>moquette-broker</artifactId>
2
broker/src/main/java/io/moquette/server/Server.java
Show comments
View file
Edit file
Delete file
@@ -74,7 +74,7 @@
public static void main(String[] args) throws IOException {
final Server server = new Server();
server.startServer();
System.out.println("Server started, version 0.10-SNAPSHOT");
System.out.println("Server started, version 0.10");
//Bind a shutdown hook
Runtime.getRuntime().addShutdownHook(new Thread(server::stopServer));
}
2
distribution/pom.xml
Show comments
View file
Edit file
Delete file
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Learn more
Accept
Reject
Save preferences
moquette-io:master
from
komamitsu:wrong-netty-buf-ref-cnt
Conversation
4
Commits
2
Checks
0
Files changed
Conversation
Copy link
Quote reply
Contributor
komamitsu
commented
Mar 31, 2019
I ran into this exception when Moquette was running with QoS1 under heavy load.
07:42:33.467 [nioEventLoopGroup-3-1] ERROR i.m.broker.NewNettyMQTTHandler - Unexpected exception while processing MQTT message. Closing Netty channel. CId=internal-client
io.netty.util.IllegalReferenceCountException: refCnt: 0, increment: 1
at io.netty.buffer.AbstractReferenceCountedByteBuf.retain0(AbstractReferenceCountedByteBuf.java:67)
at io.netty.buffer.AbstractReferenceCountedByteBuf.retain(AbstractReferenceCountedByteBuf.java:54)
at io.netty.buffer.AbstractPooledDerivedByteBuf.init(AbstractPooledDerivedByteBuf.java:59)
</dependency>
<dependency>
<groupId>com.bugsnag</groupId>
<artifactId>bugsnag</artifactId>
@@ -176,6 +182,13 @@
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.awaitility</groupId>
<artifactId>awaitility</artifactId>
<version>3.0.0</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>com.h2database</groupId>
<artifactId>h2</artifactId>
@@ -241,6 +254,21 @@
</goals>
</execution>
</executions>
<configuration>
</parent>
<artifactId>distribution</artifactId>
2
embedding_moquette/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
</parent>
<artifactId>moquette-embedded-test</artifactId>
2
netty_parser/pom.xml
Show comments
View file
Edit file
Delete file
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
</parent>
<artifactId>moquette-embedded-test</artifactId>
2
netty_parser/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
</parent>
<artifactId>moquette-netty-parser</artifactId>
2
abortConnection(CONNECTION_REFUSED_UNACCEPTABLE_PROTOCOL_VERSION);
return;
}
final boolean cleanSession = msg.variableHeader().isCleanSession();
if (clientId == null || clientId.length() == 0) {
if (!brokerConfig.isAllowZeroByteClientId()) {
abortConnection(CONNECTION_REFUSED_IDENTIFIER_REJECTED);
return;
}
if (!cleanSession) {
username, channel);
abortConnection(CONNECTION_REFUSED_IDENTIFIER_REJECTED);
return;
}
// Generating client id.
clientId = UUID.randomUUID().toString().replace("-", "");
username, channel);
}
if (!login(msg, clientId)) {
abortConnection(CONNECTION_REFUSED_BAD_USER_NAME_OR_PASSWORD);
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
Sign in to GitHub · GitHub
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
Join GitHub · GitHub
Sign in to GitHub · GitHub
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
+1
−1
tools_scripts/integration/brokerEmbeddedTest.groovy
2
broker/src/main/java/io/moquette/broker/Server.java
Show comments
View file
Edit file
Delete file
@@ -55,7 +55,7 @@
public static void main(String[] args) throws IOException {
final Server server = new Server();
server.startServer();
System.out.println("Server started, version 0.12.1-SNAPSHOT");
System.out.println("Server started, version 0.12.1");
//Bind a shutdown hook
Runtime.getRuntime().addShutdownHook(new Thread(server::stopServer));
}
4
build.gradle
Show comments
./moquette.sh
```
@@ -66,7 +66,7 @@ Include dependency in your project:
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
<version>0.12.1</version>
<version>0.13</version>
</dependency>
```
2
broker/src/main/java/io/moquette/broker/Server.java
Show comments
View file
Edit file
Delete file
@@ -55,7 +55,7 @@
public static void main(String[] args) throws IOException {
final Server server = new Server();
server.startServer();
System.out.println("Server started, version 0.13-SNAPSHOT");
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
distribution/src/main/scripts/moquette.bat
Show comments
View file
Edit file
Delete file
@@ -13,7 +13,7 @@ echo " \_| |_/\___/ \__, |\__,_|\___|\__|\__\___| \_| |_/\_/\_\ \_/ \_/ "
echo " | | "
echo " |_| "
echo " "
echo " version: 0.12-SNAPSHOT "
echo " version: 0.12 "
set "CURRENT_DIR=%cd%"
if not "%MOQUETTE_HOME%" == "" goto gotHome
2
distribution/src/main/scripts/moquette.sh
Show comments
View file
Edit file
Delete file
@@ -13,7 +13,7 @@ echo " \_| |_/\___/ \__, |\__,_|\___|\__|\__\___| \_| |_/\_/\_\ \_/ \_/ "
echo " | | "
echo " |_| "
echo " "
max_line_length=120
[*.gradle]
indent_size = 2
4
.gitignore
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,5 @@
/build
*/build/
/target/
/parser/target/
/benchmarking/target/
@@ -31,7 +33,6 @@ broker/runner
.mtj.tmp/
# Package Files #
*.jar
*.war
*.ear
@@ -43,3 +44,4 @@ broker/nb-configuration.xml
broker/nbactions-Server.xml
maven-metadata.xml
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
Docker
Select type
All
npm
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
@@ -6,7 +6,7 @@
<!--<relativePath>../pom.xml</relativePath>-->
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
<artifactId>distribution</artifactId>
2
embedding_moquette/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Make the number of Netty worker threads number configurable
#468
Open
komamitsu
wants to merge
1
commit into
moquette-io:master
base:
master
at io.netty.buffer.PooledDuplicatedByteBuf.newInstance(PooledDuplicatedByteBuf.java:43)
at io.netty.buffer.PooledDuplicatedByteBuf.retainedDuplicate(PooledDuplicatedByteBuf.java:102)
at io.moquette.broker.Session.resendInflightNotAcked(Session.java:297)
at io.moquette.broker.MQTTConnection.resendNotAckedPublishes(MQTTConnection.java:481)
at io.moquette.broker.NewNettyMQTTHandler.userEventTriggered(NewNettyMQTTHandler.java:106)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.handler.codec.ByteToMessageDecoder.userEventTriggered(ByteToMessageDecoder.java:353)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
<instructions>
<Export-Package>
io.moquette.persistence,
io.moquette.server.config,
io.moquette.spi,
io.moquette.spi.impl.subscriptions,
</Export-Package>
<Embed-Dependency>
com.bugsnag;bugsnag,
com.librato.metrics;metrics-librato,
com.librato.metrics;librato-java,
</Embed-Dependency>
</instructions>
</configuration>
</plugin>
</plugins>
</build>
11
broker/src/test/java/io/moquette/server/ServerIntegrationSSLClientAuthTest.java
Show comments
View file
Edit file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
</parent>
<artifactId>moquette-netty-parser</artifactId>
2
osgi_test/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
</parent>
<artifactId>moquette-osgi-test</artifactId>
osgi_test/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
</parent>
<artifactId>moquette-osgi-test</artifactId>
2
perf/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
channel.close().addListener(CLOSE_ON_FAILURE);
return;
}
final SessionRegistry.SessionCreationResult result;
try {
LOG.trace("Binding MQTTConnection (channel: {}) to session", channel);
result = sessionRegistry.createOrReopenSession(msg, clientId, this.getUsername());
result.session.bind(this);
} catch (SessionCorruptedException scex) {
abortConnection(CONNECTION_REFUSED_SERVER_UNAVAILABLE);
return;
}
final boolean msgCleanSessionFlag = msg.variableHeader().isCleanSession();
boolean isSessionAlreadyPresent = !msgCleanSessionFlag && result.alreadyStored;
final String clientIdUsed = clientId;
final MqttConnAckMessage ackMessage = MqttMessageBuilders.connAck()
.returnCode(CONNECTION_ACCEPTED)
.sessionPresent(isSessionAlreadyPresent).build();
channel.writeAndFlush(ackMessage).addListener(new ChannelFutureListener() {
@Override
public void operationComplete(ChannelFuture future) throws Exception {
if (future.isSuccess()) {
LOG.trace("CONNACK sent, channel: {}", channel);
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
Maven
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
RubyGems
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
0 Open
0 Closed
0 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Clean test storage on exit to prevent assert in next test
#497
Open
qbast
View file
Edit file
Delete file
@@ -3,7 +3,7 @@ allprojects {
apply plugin: 'maven-publish'
group = 'io.moquette'
version = '0.12.1-SNAPSHOT'
version = '0.12.1'
}
buildscript {
@@ -92,7 +92,7 @@ subprojects {
from components.java
groupId "$project.group"
version '0.12.1-SNAPSHOT'
version '0.12.1'
}
}
}
2
distribution/src/main/scripts/moquette.bat
Show comments
View file
moquette/maven-wrapper.properties at 17f2c9390a7e80b887087186f3272c4814ac4846 · moquette-io/moquette · GitHub
System.out.println("Server started, version 0.13");
//Bind a shutdown hook
Runtime.getRuntime().addShutdownHook(new Thread(server::stopServer));
}
4
build.gradle
Show comments
View file
Edit file
Delete file
@@ -3,7 +3,7 @@ allprojects {
apply plugin: 'maven-publish'
group = 'io.moquette'
version = '0.13-SNAPSHOT'
version = '0.13'
}
buildscript {
@@ -92,7 +92,7 @@ subprojects {
from components.java
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Java 11 compatibility
#498
Open
qbast
moquette/maven-wrapper.jar at 17f2c9390a7e80b887087186f3272c4814ac4846 · moquette-io/moquette · GitHub
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
echo " version: 0.12-SNAPSHOT "
echo " version: 0.12 "
cd "$(dirname "$0")"
2
tools_scripts/integration/brokerEmbeddedTest.groovy
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
@GrabResolver(name='moquette-bintray', root='http://dl.bintray.com/andsel/maven/')
@Grab(group='io.moquette', module='moquette-broker', version='0.12-SNAPSHOT')
@Grab(group='io.moquette', module='moquette-broker', version='0.12')
import io.moquette.server.Server
Toggle all file notes
0 comments
on commit 3080050
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
/.gradle/
10
.travis.yml
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,13 @@
language: java
jdk:
- oraclejdk8
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
directories:
- $HOME/.gradle/caches/
- $HOME/.gradle/wrapper/
script:
- ./gradlew install test
5
README.md
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
<artifactId>moquette-embedded-test</artifactId>
2
h2_storage/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
<artifactId>moquette-h2-storage</artifactId>
2
mapdb_storage/pom.xml
Show comments
View file
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
from
treasure-data:netty-threads-num
Open
Make the number of Netty worker threads number configurable
#468
komamitsu
wants to merge
1
commit into
moquette-io:master
from
treasure-data:netty-threads-num
Conversation
1
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.moquette.broker.MoquetteIdleTimeoutHandler.userEventTriggered(MoquetteIdleTimeoutHandler.java:48)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
at io.netty.channel.ChannelInboundHandlerAdapter.userEventTriggered(ChannelInboundHandlerAdapter.java:108)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:329)
at io.netty.channel.AbstractChannelHandlerContext.invokeUserEventTriggered(AbstractChannelHandlerContext.java:315)
at io.netty.channel.AbstractChannelHandlerContext.fireUserEventTriggered(AbstractChannelHandlerContext.java:307)
Delete file
@@ -40,6 +40,7 @@
import org.eclipse.paho.client.mqttv3.MqttException;
import org.eclipse.paho.client.mqttv3.persist.MqttDefaultFilePersistence;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
@@ -113,11 +114,21 @@
IMqttClient m_client;
MessageCollector m_callback;
static String backup;
@BeforeClass
public static void beforeTests() {
String tmpDir = System.getProperty("java.io.tmpdir");
s_dataStore = new MqttDefaultFilePersistence(tmpDir);
backup = System.getProperty("moquette.path");
}
@AfterClass
public static void afterTests() {
2
perf/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
</parent>
<artifactId>moquette-performance</artifactId>
2
pom.xml
Show comments
View file
Edit file
Delete file
@@ -14,7 +14,7 @@
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
</parent>
<artifactId>moquette-performance</artifactId>
2
pom.xml
Show comments
View file
Edit file
Delete file
@@ -14,7 +14,7 @@
<artifactId>moquette-parent</artifactId>
<packaging>pom</packaging>
<version>0.9-SNAPSHOT</version>
<version>0.9</version>
<name>Moquette MQTT</name>
<description>Moquette lightweight MQTT Broker</description>
<inceptionYear>2011</inceptionYear>
2
tools_scripts/integration/brokerEmbeddedTest.groovy
Show comments
if (!result.session.completeConnection()) {
// send DISCONNECT and close the channel
final MqttMessage disconnectMsg = MqttMessageBuilders.disconnect().build();
channel.writeAndFlush(disconnectMsg).addListener(CLOSE);
LOG.warn("CONNACK is sent but the session created can't transition in CONNECTED state");
} else {
NettyUtils.clientID(channel, clientIdUsed);
connected = true;
// OK continue with sending queued messages and normal flow
if (result.mode == SessionRegistry.CreationModeEnum.REOPEN_EXISTING) {
result.session.sendQueuedMessagesWhileOffline();
}
initializeKeepAliveTimeout(channel, msg, clientIdUsed);
setupInflightResender(channel);
postOffice.dispatchConnection(msg);
LOG.trace("dispatch connection: {}", msg.toString());
}
} else {
sessionRegistry.disconnect(clientIdUsed);
sessionRegistry.remove(clientIdUsed);
LOG.error("CONNACK send failed, cleanup session and close the connection", future.cause());
channel.close();
}
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Pull requests · moquette-io/moquette · GitHub
moquette/MavenWrapperDownloader.java at 17f2c9390a7e80b887087186f3272c4814ac4846 · moquette-io/moquette · GitHub
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Pull requests · moquette-io/moquette · GitHub
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Packages
People
Projects
Type:
npm
Select type
All
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
moquette/.travis.yml at 17f2c9390a7e80b887087186f3272c4814ac4846 · moquette-io/moquette · GitHub
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
wants to merge
1
commit into
moquette-io:master
base:
master
from
augnetuk:it-file-fix
Open
Clean test storage on exit to prevent assert in next test
#497
qbast
wants to merge
1
commit into
moquette-io:master
Edit file
Delete file
@@ -13,7 +13,7 @@ echo " \_| |_/\___/ \__, |\__,_|\___|\__|\__\___| \_| |_/\_/\_\ \_/ \_/ "
echo " | | "
echo " |_| "
echo " "
echo " version: 0.12.1-SNAPSHOT "
echo " version: 0.12.1 "
set "CURRENT_DIR=%cd%"
if not "%MOQUETTE_HOME%" == "" goto gotHome
2
distribution/src/main/scripts/moquette.sh
Show comments
View file
Edit file
Delete file
@@ -13,7 +13,7 @@ echo " \_| |_/\___/ \__, |\__,_|\___|\__|\__\___| \_| |_/\_/\_\ \_/ \_/ "
echo " | | "
echo " |_| "
echo " "
echo " version: 0.12.1-SNAPSHOT "
echo " version: 0.12.1 "
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
groupId "$project.group"
version '0.13-SNAPSHOT'
version '0.13'
}
}
}
4
distribution/src/main/scripts/moquette.bat
Show comments
View file
Edit file
Delete file
@@ -1,6 +1,6 @@
@ECHO OFF
rem #
rem # Copyright (c) 2012-2015 Andrea Selva
rem # Copyright (c) 2012-2020 Andrea Selva
rem #
echo " "
@@ -13,7 +13,7 @@ echo " \_| |_/\___/ \__, |\__,_|\___|\__|\__\___| \_| |_/\_/\_\ \_/ \_/ "
echo " | | "
echo " |_| "
echo " "
echo " version: 0.13-SNAPSHOT "
wants to merge
2
commits into
moquette-io:master
base:
master
from
augnetuk:new-gradle
Open
Java 11 compatibility
#498
qbast
wants to merge
2
commits into
moquette-io:master
from
augnetuk:new-gradle
Conversation
0
Commits
2
Checks
0
Files changed
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
Type:
All
Select type
All
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Show comments
View file
Edit file
Delete file
@@ -64,6 +64,7 @@ Include dependency in your project:
## Build from sources
After a git clone of the repository, cd into the cloned sources and: `mvn clean package`.
In distribution/target directory will be produced the selfcontained tar for the broker with all dependencies and a running script.
After a git clone of the repository, cd into the cloned sources and: `./gradlew clean distribution:distMoquetteTar` or
`./gradlew clean distribution:distMoquetteZip`.
In distribution/build directory will be produced the selfcontained file for the broker with all dependencies and a running script.
51
broker/build.gradle
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,51 @@
description = 'Moquette - broker'
apply plugin: 'osgi'
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
fix trie match bug and bytesMetrics bug
#479
Open
ilylia
wants to merge
1
commit into
moquette-io:master
base:
master
from
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
<artifactId>moquette-mapdb-storage</artifactId>
2
osgi_test/pom.xml
Show comments
View file
Edit file
Delete file
@@ -5,7 +5,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Authentication changes
#507
Open
ndchandar
Contributor
komamitsu
commented
Apr 8, 2019
I noticed Moquette users can't configure the number of Netty worker threads in current Moquette. Increasing Netty worker threads number is important in our use case that handles a lot of MQTT requests.
This PR makes it configurable.
Add BrokerConstants.NETTY_WORKER_THREADS
Loading status checks…
48ccd40
komamitsu
force-pushed the
treasure-data:netty-threads-num
branch
from
c520b9f
to
48ccd40
Apr 8, 2019
Copy link
Collaborator
andsel
commented
Apr 8, 2019
at io.moquette.broker.InflightResender.resendNotAcked(InflightResender.java:160)
at io.moquette.broker.InflightResender.access$100(InflightResender.java:32)
at io.moquette.broker.InflightResender$WriterIdleTimeoutTask.run(InflightResender.java:58)
It looks like Session#resendInflightNotAcked() was triggered, but it dealt with a ByteBuf already freed. After this exception, the channel didn't work at all and I think this is a critical bug.
I reproduced this bug as ServerLowlevelMessagesIntegrationTests#testResendNotAckedPublishes and I tried fixing it somehow by retaining the duplicated buffer. It works so far.
komamitsu
added 2 commits
Mar 28, 2019
Add a test to reproduce the issue
00443e0
Fix a bug Session#resendInflightNotAcked() fails
…
Loading status checks…
6dee138
due to handling a freed ByteBuf
Copy link
Collaborator
andsel
commented
Apr 2, 2019
I have to reason about this more carefully, because this could potentially open to memory leakeage
🎉
if (backup == null)
System.clearProperty("moquette.path");
else
System.setProperty("moquette.path", backup);
}
protected void startServer() throws IOException {
12
broker/src/test/java/io/moquette/server/ServerIntegrationSSLTest.java
Show comments
View file
Edit file
Delete file
@@ -41,6 +41,7 @@
import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;
import org.eclipse.paho.client.mqttv3.persist.MqttDefaultFilePersistence;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
@@ -60,10 +61,21 @@
IMqttClient m_client;
<packaging>pom</packaging>
<version>0.9</version>
<version>0.10-SNAPSHOT</version>
<name>Moquette MQTT</name>
<description>Moquette lightweight MQTT Broker</description>
<inceptionYear>2011</inceptionYear>
2
tools_scripts/integration/brokerEmbeddedTest.groovy
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
@GrabResolver(name='moquette-bintray', root='http://dl.bintray.com/andsel/maven/')
@Grab(group='io.moquette', module='moquette-broker', version='0.9')
@Grab(group='io.moquette', module='moquette-broker', version='0.10-SNAPSHOT')
import io.moquette.server.Server
Toggle all file notes
0 comments
on commit a7b8c07
Please
sign in to comment.
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
@GrabResolver(name='moquette-bintray', root='http://dl.bintray.com/andsel/maven/')
@Grab(group='io.moquette', module='moquette-broker', version='0.9-SNAPSHOT')
@Grab(group='io.moquette', module='moquette-broker', version='0.9')
import io.moquette.server.Server
Toggle all file notes
0 comments
on commit 4162aae
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
}
});
}
private void setupInflightResender(Channel channel) {
channel.pipeline()
.addFirst("inflightResender", new InflightResender(5_000, TimeUnit.MILLISECONDS));
}
private void initializeKeepAliveTimeout(Channel channel, MqttConnectMessage msg, String clientId) {
int keepAlive = msg.variableHeader().keepAliveTimeSeconds();
NettyUtils.keepAlive(channel, keepAlive);
NettyUtils.cleanSession(channel, msg.variableHeader().isCleanSession());
NettyUtils.clientID(channel, clientId);
int idleTime = Math.round(keepAlive * 1.5f);
setIdleTime(channel.pipeline(), idleTime);
clientId, keepAlive, msg.variableHeader().isCleanSession(), idleTime);
}
private void setIdleTime(ChannelPipeline pipeline, int idleTime) {
if (pipeline.names().contains("idleStateHandler")) {
pipeline.remove("idleStateHandler");
}
pipeline.addFirst("idleStateHandler", new IdleStateHandler(idleTime, 0, 0));
}
private boolean isNotProtocolVersion(MqttConnectMessage msg, MqttVersion version) {
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Pull requests · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
👎
😄
🎉
😕
❤️
🚀
👀
No results matched your search.
You could search all of GitHub or try an advanced search.
ProTip!
Type g p on any issue or pull request to go back to the pull request listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Reintroduce maven build, with wrapper, removed gradle. (#542) · moquette-io/moquette@17f2c93 · GitHub
from
augnetuk:it-file-fix
Conversation
0
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
qbast
commented
Aug 16, 2019
Running ./gradlew build on linux causes following test failure:
io.moquette.integration.ServerIntegrationPahoCanPublishOnReadBlockedTopicTest > shouldNotInternalPublishOnReadBlockedSubscriptionTopic PASSED
io.moquette.integration.ServerIntegrationSSLClientAuthTest > checkClientAuthentication FAILED
java.lang.AssertionError: The DB storagefile /home/kuba/moquette/broker/build/moquette_store.h2 already exists
at org.junit.Assert.fail(Assert.java:91)
at org.junit.Assert.assertTrue(Assert.java:43)
cd "$(dirname "$0")"
2
tools_scripts/integration/brokerEmbeddedTest.groovy
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
@GrabResolver(name='moquette-bintray', root='http://dl.bintray.com/andsel/maven/')
@Grab(group='io.moquette', module='moquette-broker', version='0.12.1-SNAPSHOT')
@Grab(group='io.moquette', module='moquette-broker', version='0.12.1')
import io.moquette.server.Server
Toggle all file notes
0 comments
on commit 26e43c5
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Reintroduce maven build, with wrapper, removed gradle. (#542) · moquette-io/moquette@17f2c93 · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
echo " version: 0.13 "
set "CURRENT_DIR=%cd%"
if not "%MOQUETTE_HOME%" == "" goto gotHome
4
distribution/src/main/scripts/moquette.sh
Show comments
View file
Edit file
Delete file
@@ -1,6 +1,6 @@
#!/bin/sh
#
# Copyright (c) 2012-2015 Andrea Selva
# Copyright (c) 2012-2020 Andrea Selva
#
echo " "
@@ -13,7 +13,7 @@ echo " \_| |_/\___/ \__, |\__,_|\___|\__|\__\___| \_| |_/\_/\_\ \_/ \_/ "
echo " | | "
echo " |_| "
echo " "
echo " version: 0..13-SNAPSHOT "
echo " version: 0.13 "
cd "$(dirname "$0")"
Conversation
Copy link
Quote reply
qbast
commented
Aug 17, 2019
Gradle 4.6 does not work with Java 11.
Update Gradle to newest version (5.6) along with errorprone and spotbugs in order to make moquette buildable with JDK 11. Compatibility with Java 8 is retained.
qbast
added 2 commits
Aug 16, 2019
Clean test storage on exit to prevent assert in next test
Loading status checks…
1671fd2
Upgrade to newest gradle
Loading status checks…
cbcbea7
hylkevds
mentioned this pull request
May 15, 2020
NullPointerException in CTrie.evaluate
#529
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
npm
RubyGems
Maven
Docker
NuGet
Visibility:
All
Select visibility
All
Private
Public
Sort by:
Most downloads
Select sort view
Most downloads
Least downloads
Clear current search query, filters, and sorts
0 packages
No results matched your search.
Try browsing all packages to find what you're looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
apply plugin: 'maven'
dependencies {
compile group: 'io.netty', name: 'netty-common', version: nettyVersion
compile group: 'io.netty', name: 'netty-buffer', version: nettyVersion
compile group: 'io.netty', name: 'netty-transport', version: nettyVersion
compile group: 'io.netty', name: 'netty-handler', version: nettyVersion
compile group: 'io.netty', name: 'netty-codec', version: nettyVersion
compile group: 'io.netty', name: 'netty-codec-http', version: nettyVersion
compile group: 'io.netty', name: 'netty-codec-mqtt', version: nettyVersion
compile group: 'io.netty', name: 'netty-transport-native-epoll', version: nettyVersion, classifier: 'linux-x86_64'
compile group: 'io.dropwizard.metrics', name: 'metrics-core', version:'3.2.2'
compile group: 'io.dropwizard.metrics', name: 'metrics-jvm', version:'3.2.2'
compile group: 'com.librato.metrics', name: 'metrics-librato', version:'5.1.0'
compile group: 'com.librato.metrics', name: 'librato-java' , version:'2.1.0'
compile group: 'com.bugsnag', name: 'bugsnag', version:'[3.0,4.0)'
compile group: 'commons-codec', name: 'commons-codec', version:'1.10'
// compile group: 'org.hdrhistogram', name: 'HdrHistogram', version:'2.1.4'
compile group: 'com.hazelcast', name: 'hazelcast', version:'3.5.4'
testCompile group: 'org.fusesource.mqtt-client', name: 'mqtt-client', version:'1.12'
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
ilylia:master
Open
fix trie match bug and bytesMetrics bug
#479
ilylia
wants to merge
1
commit into
moquette-io:master
from
ilylia:master
Conversation
4
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
ilylia
commented
Jun 2, 2019
<artifactId>moquette-osgi-test</artifactId>
2
perf/pom.xml
Show comments
View file
Edit file
Delete file
@@ -6,7 +6,7 @@
<relativePath>../</relativePath>
<artifactId>moquette-parent</artifactId>
<groupId>io.moquette</groupId>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
</parent>
<artifactId>moquette-performance</artifactId>
2
pom.xml
Show comments
View file
Edit file
Delete file
@@ -14,7 +14,7 @@
<artifactId>moquette-parent</artifactId>
wants to merge
1
commit into
moquette-io:master
base:
master
from
ndchandar:master
Open
Authentication changes
#507
ndchandar
wants to merge
1
commit into
moquette-io:master
from
ndchandar:master
Conversation
2
Commits
1
Checks
0
Files changed
This is not necessary. Netty used asunch IO an Moquette is essentially IO
bound so adding thread only adds threads that do IO waiting. The broker
starts and Co figure the number of threads equals to the number of cores -
1, let this configurable to put for example 1000 threads it's a no sense,
just adds weight to the scheduler and stole memory for each thread's stack.
Il lun 8 apr 2019, 07:24 Mitsunori Komatsu <notifications@github.com> ha
scritto:
…
I noticed Moquette users can't configure the number of Netty worker
threads in current Moquette. Increasing Netty worker threads number is
important in our use case that handles a lot of MQTT requests.
This PR makes it configurable.
------------------------------
You can view, comment on, or merge this pull request online at:
#468
Commit Summary
- Add BrokerConstants.NETTY_WORKER_THREADS
File Changes
- *M* broker/src/main/java/io/moquette/BrokerConstants.java
<https://github.com/moquette-io/moquette/pull/468/files#diff-0> (1)
- *M* broker/src/main/java/io/moquette/broker/NewNettyAcceptor.java
<https://github.com/moquette-io/moquette/pull/468/files#diff-1> (13)
1
🚀
1
Copy link
Contributor
Author
komamitsu
commented
Apr 3, 2019
Yeah. If you have any concern of memory leak, feel free to give me feedbacks. Thanks.
IMO, this issue occurs 100% when a subscriber takes time and potential memory leak may be better than it.
I think you can easily reproduce this issue by running testResendNotAckedPublishes() introduced by this pull request with commenting out the fix.
Copy link
githawks
commented
Sep 24, 2019
hey brother, me too
Copy link
githawks
commented
Sep 24, 2019
just four sensor, the problem
Sign up for free
to join this conversation on GitHub.
MessageCollector m_callback;
static String backup;
@BeforeClass
public static void beforeTests() {
String tmpDir = System.getProperty("java.io.tmpdir");
s_dataStore = new MqttDefaultFilePersistence(tmpDir);
backup = System.getProperty("moquette.path");
}
@AfterClass
public static void afterTests() {
if (backup == null)
System.clearProperty("moquette.path");
else
System.setProperty("moquette.path", backup);
}
protected void startServer() throws IOException {
29
broker/src/test/java/io/moquette/server/ServerLowlevelMessagesIntegrationTests.java
Show comments
View file
Edit file
Delete file
@@ -27,8 +27,11 @@
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
return msg.variableHeader().version() != version.protocolLevel();
}
private void abortConnection(MqttConnectReturnCode returnCode) {
MqttConnAckMessage badProto = MqttMessageBuilders.connAck()
.returnCode(returnCode)
.sessionPresent(false).build();
channel.writeAndFlush(badProto).addListener(FIRE_EXCEPTION_ON_FAILURE);
channel.close().addListener(CLOSE_ON_FAILURE);
}
private boolean login(MqttConnectMessage msg, final String clientId) {
// handle user authentication
if (msg.variableHeader().hasUserName()) {
byte[] pwd = null;
if (msg.variableHeader().hasPassword()) {
pwd = msg.payload().passwordInBytes();
} else if (!brokerConfig.isAllowAnonymous()) {
LOG.info("Client didn't supply any password and MQTT anonymous mode is disabled CId={}", clientId);
return false;
}
final String login = msg.payload().userName();
if (!authenticator.checkValid(clientId, login, pwd)) {
return false;
}
NettyUtils.userName(channel, login);
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Pull requests · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Switched to gradle 5.6 (#541) · moquette-io/moquette@b69146b · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
at org.junit.Assert.assertFalse(Assert.java:68)
at io.moquette.integration.ServerIntegrationSSLClientAuthTest.setUp(ServerIntegrationSSLClientAuthTest.java:154)
This is caused by ServerIntegrationPahoCanPublishOnReadBlockedTopicTest not deleting H2 file in tearDown
Clean test storage on exit to prevent assert in next test
Loading status checks…
1671fd2
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
2
tools_scripts/integration/brokerEmbeddedTest.groovy
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
@GrabResolver(name='moquette-bintray', root='http://dl.bintray.com/andsel/maven/')
@Grab(group='io.moquette', module='moquette-broker', version='0.13-SNAPSHOT')
@Grab(group='io.moquette', module='moquette-broker', version='0.13')
import io.moquette.server.Server
Toggle all file notes
0 comments
on commit 3b83f47
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Open
hylkevds
mentioned this pull request
Aug 14, 2020
Fix java 11+ build and tests
#533
Open
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
testCompile group: 'org.eclipse.paho', name: 'org.eclipse.paho.client.mqttv3', version:'1.0.2'
testCompile group: 'org.eclipse.jetty.websocket', name: 'websocket-client', version:'9.2.0.M1'
testCompile group: 'com.h2database', name: 'h2', version:'1.4.191'
}
task createPom () {
}
jar {
manifest {
instruction 'Bundle-Description', 'Moquette lightweight MQTT Broker'
instruction 'Bundle-License', 'http://www.apache.org/licenses/LICENSE-2.0.txt, http://www.eclipse.org/org/documents/epl-v10.php'
instruction 'Import-Package', '!com.codahale.metrics*, !com.bugsnag*, !com.librato.metrics*, *'
}
from "build/pom.xml"
}
}
jar.dependsOn createPom
282
broker/pom.xml
Show comments
View file
Edit file
Delete file
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
fix trie match bug when topic contains root;
fix bytesMetrics wroteBytes always 0;
fix startup shell can not run outside bin;
Copy link
Collaborator
andsel
commented
Jun 3, 2019
Sorry @ilylia but this PR miss an important part, at least one test that manifest the problem you are trying to solve.
fix trie match bug when topic contains root, with test case;
…
Loading status checks…
74d92f9
fix bytesMetrics wroteBytes always 0;
fix startup shell can not run outside bin;
ilylia
force-pushed the
ilylia:master
branch
from
1bad339
to
74d92f9
Jun 20, 2019
<packaging>pom</packaging>
<version>0.10-SNAPSHOT</version>
<version>0.10</version>
<name>Moquette MQTT</name>
<description>Moquette lightweight MQTT Broker</description>
<inceptionYear>2011</inceptionYear>
4
tools_scripts/integration/brokerEmbeddedTest.groovy
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
@GrabResolver(name='moquette-bintray', root='http://dl.bintray.com/andsel/maven/')
@Grab(group='io.moquette', module='moquette-broker', version='0.10-SNAPSHOT')
@Grab(group='io.moquette', module='moquette-broker', version='0.10')
import io.moquette.server.Server
@@ -13,4 +13,4 @@ props.setProperty('password_file', '../broker/config/password_file.conf')
println "starting proprs $props"
server.startServer(props)
println "Stopping broker.."
server.stopServer()
server.stopServer()
Conversation
Copy link
Quote reply
ndchandar
commented
Oct 11, 2019
IAuthenticator.checkValid should return CompletableFuture<Boolean>
Notes
I can add more tests based on review/feedback
Once the PR is approved, i can work similar changes for IAuthorizatorPolicy
Authentication Changes: IAuthenticator.checkValid should return `Comp…
…
Loading status checks…
5d23808
…letableFuture<Boolean>`
ndchandar
force-pushed the
ndchandar:master
branch
from
3fe6e9b
to
5d23808
Patch Links:
- https://github.com/moquette-io/moquette/pull/468.patch
- https://github.com/moquette-io/moquette/pull/468.diff
—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub
<#468>, or mute the thread
<https://github.com/notifications/unsubscribe-auth/AA_Y0dOkYC03U8T_1P3ARPjffNKz8uxPks5vetKKgaJpZM4chUpc>
.
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
3 participants
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.awaitility.Awaitility;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Properties;
import java.util.concurrent.TimeUnit;
import static io.netty.handler.codec.mqtt.MqttConnectReturnCode.*;
import static org.junit.Assert.*;
@@ -81,10 +84,10 @@ public void elapseKeepAliveTime() throws InterruptedException {
*/
m_client.sendMessage(connectMessage);
// wait 2 times the keepAlive
Thread.sleep(keepAlive * 2 * 1000);
assertTrue(m_client.isConnectionLost());
// wait 3 times the keepAlive
Awaitility.await()
.atMost(3 * keepAlive, TimeUnit.SECONDS)
.until(m_client::isConnectionLost);
}
private static MqttConnectMessage createConnectMessage(String clientID, int keepAlive) {
@@ -109,14 +112,18 @@ public void testWillMessageIsWiredOnClientKeepAliveExpiry() throws Exception {
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
} else if (!brokerConfig.isAllowAnonymous()) {
LOG.info("Client didn't supply any credentials and MQTT anonymous mode is disabled. CId={}", clientId);
return false;
}
return true;
}
void handleConnectionLost() {
String clientID = NettyUtils.clientID(channel);
if (clientID == null || clientID.isEmpty()) {
return;
}
Session session = sessionRegistry.retrieve(clientID);
if (session.hasWill()) {
postOffice.fireWill(session.getWill());
}
if (session.isClean()) {
sessionRegistry.remove(clientID);
} else {
sessionRegistry.disconnect(clientID);
}
connected = false;
//dispatch connection lost to intercept.
String userName = NettyUtils.userName(channel);
postOffice.dispatchConnectionLost(clientID,userName);
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Subscription storage · Issue #482 · moquette-io/moquette · GitHub
Error processing protocol message: PUBACK · Issue #483 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
Learn more
Accept
Reject
Save preferences
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
17f2c9390a
moquette/.mvn/wrapper/maven-wrapper.jar
Go to file
Accept
Reject
Save preferences
Load diff
This file was deleted.
Oops, something went wrong.
Retry
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit c367100
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Copy link
Author
ilylia
commented
Jun 20, 2019
Hi @andsel , there is a test case for the trie match bug in the new pr, please check.
andsel
reviewed
Jun 20, 2019
View changes
broker/src/main/java/io/moquette/broker/subscriptions/CTrie.java
Show resolved
Hide resolved
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
andsel
Assignees
No one assigned
Labels
Toggle all file notes
0 comments
on commit 0480260
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Oct 11, 2019
Copy link
Author
ndchandar
commented
Oct 14, 2019
@andsel Pinging for review. The Travis build failures seems independent of this PR.
Copy link
Collaborator
andsel
commented
Oct 18, 2019
Hi Dinesh, I'm slow on review, to find some time to work on this. But don't
worry. Thanks for start contributing
Andrea
…
On Mon, Oct 14, 2019 at 10:13 PM Dinesh Narayanan ***@***.***> wrote:
@andsel <https://github.com/andsel> Pinging for review. The Travis build
failures seems independent of this PR.
—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub
<#507?email_source=notifications&email_token=AAH5RUMKVVW235LHQGNGVBTQOTHGTA5CNFSM4I77QJ6KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEBGKWGA#issuecomment-541895448>,
None yet
2 participants
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
m_client.clientId("FAKECLNT").connect(willTestamentTopic, willTestamentMsg);
long connectTime = System.currentTimeMillis();
// but after the 2 KEEP ALIVE timeout expires it gets fired,
// NB it's 1,5 * KEEP_ALIVE so 3 secs and some millis to propagate the message
org.eclipse.paho.client.mqttv3.MqttMessage msg = m_messageCollector.waitMessage(5);
assertNotNull("the will message should be fired after keep alive!", msg);
// the will message hasn't to be received before the elapsing of Keep Alive timeout
assertTrue(System.currentTimeMillis() - connectTime > 3000);
Awaitility.await()
.atMost(7, TimeUnit.SECONDS)
.untilAsserted(() -> {
// but after the 2 KEEP ALIVE timeout expires it gets fired,
// NB it's 1,5 * KEEP_ALIVE so 3 secs and some millis to propagate the message
org.eclipse.paho.client.mqttv3.MqttMessage msg = m_messageCollector.getMessageImmediate();
assertNotNull("the will message should be fired after keep alive!", msg);
// the will message hasn't to be received before the elapsing of Keep Alive timeout
assertTrue(System.currentTimeMillis() - connectTime > 3000);
assertEquals(willTestamentMsg, new String(msg.getPayload(), StandardCharsets.UTF_8));
});
assertEquals(willTestamentMsg, new String(msg.getPayload()));
m_willSubscriber.disconnect();
}
5
}
boolean isConnected() {
return connected;
}
void dropConnection() {
channel.close().addListener(FIRE_EXCEPTION_ON_FAILURE);
}
void processDisconnect(MqttMessage msg) {
final String clientID = NettyUtils.clientID(channel);
if (!connected) {
return;
}
sessionRegistry.disconnect(clientID);
connected = false;
channel.close().addListener(FIRE_EXCEPTION_ON_FAILURE);
String userName = NettyUtils.userName(channel);
postOffice.dispatchDisconnection(clientID, userName);
}
void processSubscribe(MqttSubscribeMessage msg) {
final String clientID = NettyUtils.clientID(channel);
if (!connected) {
dropConnection();
return;
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Plans to support MQTT 5? · Issue #490 · moquette-io/moquette · GitHub
Join GitHub · GitHub
Sign in to GitHub · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
17f2c9390a
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Dismiss
17f2c9390a
moquette/.mvn/wrapper/maven-wrapper.properties
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
2 lines (2 sloc)
218 Bytes
Raw
Blame
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.2/apache-maven-3.6.2-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Accept
Reject
Save preferences
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
49.5 KB
Download
View raw
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
2 participants
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
or unsubscribe
<https://github.com/notifications/unsubscribe-auth/AAH5RULZ24VAP5P3ITL7GHLQOTHGTANCNFSM4I77QJ6A>
.
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
2 participants
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
osgi_test/README.md
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,5 @@
# Development
to run the osgi tests use:
mvn clean && mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V && mvn -B test -pl osgi_test
31
osgi_test/pom.xml
Show comments
View file
Edit file
Delete file
@@ -22,6 +22,37 @@
<groupId>io.moquette</groupId>
<artifactId>moquette-broker</artifactId>
</dependency>
<dependency>
<groupId>io.moquette</groupId>
}
postOffice.subscribeClientToTopics(msg, clientID, NettyUtils.userName(channel), this);
}
void sendSubAckMessage(int messageID, MqttSubAckMessage ackMessage) {
final String clientId = NettyUtils.clientID(channel);
channel.writeAndFlush(ackMessage).addListener(FIRE_EXCEPTION_ON_FAILURE);
}
private void processUnsubscribe(MqttUnsubscribeMessage msg) {
List<String> topics = msg.payload().topics();
String clientID = NettyUtils.clientID(channel);
postOffice.unsubscribe(topics, this, msg.variableHeader().messageId());
}
void sendUnsubAckMessage(List<String> topics, String clientID, int messageID) {
MqttFixedHeader fixedHeader = new MqttFixedHeader(MqttMessageType.UNSUBACK, false, AT_MOST_ONCE,
false, 0);
MqttUnsubAckMessage ackMessage = new MqttUnsubAckMessage(fixedHeader, from(messageID));
channel.writeAndFlush(ackMessage).addListener(FIRE_EXCEPTION_ON_FAILURE);
}
void processPublish(MqttPublishMessage msg) {
final MqttQoS qos = msg.fixedHeader().qosLevel();
final String username = NettyUtils.userName(channel);
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
moquette/.mvn/wrapper/MavenWrapperDownloader.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
117 lines (107 sloc)
4.83 KB
Raw
Blame
/*
* Copyright 2007-present the original author or authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
2 Open
1 Closed
2 Open
1 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
fixed throw NullPointerException when new connection by luoliangtiger · Pull Request #519 · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
Dismiss
17f2c9390a
moquette/.travis.yml
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
6 lines (5 sloc)
65 Bytes
Raw
Blame
language: java
jdk:
- openjdk12
#script:
# - ./mvnw verify
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Reintroduce maven build, with wrapper, removed gradle. (#542)
Loading branch information
andsel
committed
Nov 2, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Reintroduce maven build, with wrapper, removed gradle. (#542)
Loading branch information
andsel
committed
Nov 2, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
<artifactId>moquette-h2-storage</artifactId>
</dependency>
<dependency>
<groupId>io.moquette</groupId>
<artifactId>moquette-mapdb-storage</artifactId>
</dependency>
<dependency>
<groupId>javax.servlet</groupId>
<artifactId>javax.servlet-api</artifactId>
<version>3.1.0</version>
</dependency>
<dependency>
<groupId>org.slf4j</groupId>
<artifactId>slf4j-api</artifactId>
<version>1.7.5</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.slf4j</groupId>
<artifactId>slf4j-log4j12</artifactId>
<version>1.7.5</version>
<scope>test</scope>
final String topicName = msg.variableHeader().topicName();
final String clientId = getClientId();
msg.variableHeader().packetId(), qos);
ByteBuf payload = msg.payload();
final boolean retain = msg.fixedHeader().isRetain();
final Topic topic = new Topic(topicName);
if (!topic.isValid()) {
LOG.debug("Drop connection because of invalid topic format");
dropConnection();
}
switch (qos) {
case AT_MOST_ONCE:
postOffice.receivedPublishQos0(topic, username, clientId, payload, retain, msg);
break;
case AT_LEAST_ONCE: {
final int messageID = msg.variableHeader().packetId();
postOffice.receivedPublishQos1(this, topic, username, payload, messageID, retain, msg);
break;
}
case EXACTLY_ONCE: {
final int messageID = msg.variableHeader().packetId();
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
one get by luoliangtiger · Pull Request #520 · moquette-io/moquette · GitHub
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
fix trie match bug and bytesMetrics bug
#479
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
import java.net.*;
import java.io.*;
import java.nio.channels.*;
import java.util.Properties;
public class MavenWrapperDownloader {
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Make the number of Netty worker threads number configurable
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
2 Open
0 Closed
2 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
1 parent
b69146b
commit 17f2c9390a7e80b887087186f3272c4814ac4846
Unified
Split
Showing
21 changed files
with
1,241 additions
and 372 deletions.
+117
−0
.mvn/wrapper/MavenWrapperDownloader.java
BIN
.mvn/wrapper/maven-wrapper.jar
+2
−0
.mvn/wrapper/maven-wrapper.properties
+2
−9
.travis.yml
+265
−0
broker/pom.xml
+1
1 parent
b69146b
commit 17f2c9390a7e80b887087186f3272c4814ac4846
Unified
Split
Showing
21 changed files
with
1,241 additions
and 372 deletions.
+117
−0
.mvn/wrapper/MavenWrapperDownloader.java
BIN
.mvn/wrapper/maven-wrapper.jar
+2
−0
.mvn/wrapper/maven-wrapper.properties
+2
−9
.travis.yml
+265
−0
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
</dependency>
65
osgi_test/src/test/java/io/moquette/test/osgi/MoquetteOsgiTest.java
Show comments
View file
Edit file
Delete file
@@ -18,15 +18,18 @@
import static org.junit.Assert.*;
import static org.ops4j.pax.exam.CoreOptions.*;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.ops4j.pax.exam.Configuration;
import org.ops4j.pax.exam.Option;
import org.ops4j.pax.exam.junit.PaxExam;
import org.osgi.framework.Bundle;
import org.osgi.framework.BundleContext;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.inject.Inject;
final Session session = sessionRegistry.retrieve(clientId);
session.receivedPublishQos2(messageID, msg);
postOffice.receivedPublishQos2(this, msg, username);
// msg.release();
break;
}
default:
LOG.error("Unknown QoS-Type:{}", qos);
break;
}
}
void sendPublishReceived(int messageID) {
LOG.trace("sendPubRec invoked on channel: {}", channel);
MqttFixedHeader fixedHeader = new MqttFixedHeader(MqttMessageType.PUBREC, false, AT_MOST_ONCE,
false, 0);
MqttPubAckMessage pubRecMessage = new MqttPubAckMessage(fixedHeader, from(messageID));
sendIfWritableElseDrop(pubRecMessage);
}
private void processPubRel(MqttMessage msg) {
final Session session = sessionRegistry.retrieve(getClientId());
final int messageID = ((MqttMessageIdVariableHeader) msg.variableHeader()).messageId();
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
0 Open
0 Closed
0 Open
0 Closed
Author
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
64 Open
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Issues · moquette-io/moquette · GitHub
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
64 Open
314 Closed
64 Open
opened Jun 2, 2019 by
ilylia
4
ProTip!
What’s not been updated in a month: updated:<2020-10-23.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Issues · moquette-io/moquette · GitHub
Loading status checks…
Switched to gradle 5.6 (#541)
Loading branch information
andsel
committed
Oct 30, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
f92c2ba
commit b69146bcbd4895ebf0495b5fcb35fe47b3b25bf2
Unified
Split
Showing
2 changed files
with
7 additions
and 7 deletions.
+6
−6
build.gradle
private static final String WRAPPER_VERSION = "0.5.6";
/**
* Default URL to download the maven-wrapper.jar from, if no 'downloadUrl' is provided.
*/
private static final String DEFAULT_DOWNLOAD_URL = "https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/"
+ WRAPPER_VERSION + "/maven-wrapper-" + WRAPPER_VERSION + ".jar";
/**
* Path to the maven-wrapper.properties file, which might contain a downloadUrl property to
* use instead of the default one.
*/
private static final String MAVEN_WRAPPER_PROPERTIES_PATH =
".mvn/wrapper/maven-wrapper.properties";
/**
* Path where the maven-wrapper.jar will be saved to.
*/
private static final String MAVEN_WRAPPER_JAR_PATH =
".mvn/wrapper/maven-wrapper.jar";
/**
* Name of the property which should be used to override the default download url for the wrapper.
*/
private static final String PROPERTY_NAME_WRAPPER_URL = "wrapperUrl";
public static void main(String args[]) {
#468
opened Apr 8, 2019 by
komamitsu
1
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
ProTip!
What’s not been updated in a month: updated:<2020-10-23.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Java 11 compatibility
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
−1
broker/src/test/java/io/moquette/integration/IntegrationUtils.java
+1
−1
broker/src/test/resources/log4j.properties
+68
−0
distribution/pom.xml
+57
−0
distribution/src/main/assembly/assembly.xml
+23
−0
embedding_moquette/pom.xml
+0
−9
gradle/java.gradle
+0
−20
gradle/lint.gradle
+0
broker/pom.xml
+1
−1
broker/src/test/java/io/moquette/integration/IntegrationUtils.java
+1
−1
broker/src/test/resources/log4j.properties
+68
−0
distribution/pom.xml
+57
−0
distribution/src/main/assembly/assembly.xml
+23
−0
embedding_moquette/pom.xml
+0
−9
gradle/java.gradle
+0
−20
gradle/lint.gradle
/**
@@ -35,6 +38,9 @@
*/
@RunWith(PaxExam.class)
public class MoquetteOsgiTest {
private static final Logger LOG = LoggerFactory.getLogger(MoquetteOsgiTest.class);
@Inject
private BundleContext bundleContext;
@@ -43,7 +49,42 @@
return options(
junitBundles(),
mavenBundle("io.moquette", "moquette-broker")
mavenBundle("com.google.guava", "guava").versionAsInProject(),
//mavenBundle("com.google.code.findbugs", "jsr305").versionAsInProject(),
mavenBundle("com.fasterxml.jackson.core", "jackson-core").versionAsInProject().start(),
mavenBundle("com.fasterxml.jackson.core", "jackson-databind").versionAsInProject(),
mavenBundle("com.fasterxml.jackson.core", "jackson-annotations").versionAsInProject(),
//mavenBundle("com.librato.metrics", "librato-java").versionAsInProject(),
//mavenBundle("com.librato.metrics", "metrics-librato").versionAsInProject(),
session.receivedPubRelQos2(messageID);
sendPubCompMessage(messageID);
}
void sendPublish(MqttPublishMessage publishMsg) {
final int packetId = publishMsg.variableHeader().packetId();
final String topicName = publishMsg.variableHeader().topicName();
final String clientId = getClientId();
MqttQoS qos = publishMsg.fixedHeader().qosLevel();
if (LOG.isTraceEnabled()) {
clientId, topicName, DebugUtils.payload2Str(publishMsg.payload()));
} else {
topicName);
}
sendIfWritableElseDrop(publishMsg);
}
void sendIfWritableElseDrop(MqttMessage msg) {
if (LOG.isDebugEnabled()) {
}
if (channel.isWritable()) {
ChannelFuture channelFuture;
if (brokerConfig.isImmediateBufferFlush()) {
channelFuture = channel.writeAndFlush(msg);
} else {
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
Issues · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
314 Closed
64 Open
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Authentication changes
#507
opened Oct 11, 2019 by
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
+1
−1
gradle/wrapper/gradle-wrapper.properties
12
build.gradle
Show comments
View file
Edit file
Delete file
@@ -15,7 +15,7 @@ buildscript {
dependencies {
classpath 'net.ltgt.gradle:gradle-errorprone-plugin:0.0.13'
classpath 'gradle.plugin.com.github.spotbugs:gradlePlugin:1.6.0'
classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.3'
classpath 'com.github.jengelman.gradle.plugins:shadow:5.2.0'
classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7.3'
}
}
@@ -31,8 +31,8 @@ subprojects {
}
apply from: new File(rootDir, 'gradle/java.gradle')
apply from: new File(rootDir, 'gradle/test.gradle')
apply from: new File(rootDir, 'gradle/lint.gradle')
// apply from: new File(rootDir, 'gradle/test.gradle')
System.out.println("- Downloader started");
File baseDirectory = new File(args[0]);
System.out.println("- Using base directory: " + baseDirectory.getAbsolutePath());
// If the maven-wrapper.properties exists, read it and check if it contains a custom
// wrapperUrl parameter.
File mavenWrapperPropertyFile = new File(baseDirectory, MAVEN_WRAPPER_PROPERTIES_PATH);
String url = DEFAULT_DOWNLOAD_URL;
if(mavenWrapperPropertyFile.exists()) {
FileInputStream mavenWrapperPropertyFileInputStream = null;
try {
mavenWrapperPropertyFileInputStream = new FileInputStream(mavenWrapperPropertyFile);
Properties mavenWrapperProperties = new Properties();
mavenWrapperProperties.load(mavenWrapperPropertyFileInputStream);
url = mavenWrapperProperties.getProperty(PROPERTY_NAME_WRAPPER_URL, url);
} catch (IOException e) {
System.out.println("- ERROR loading '" + MAVEN_WRAPPER_PROPERTIES_PATH + "'");
} finally {
try {
if(mavenWrapperPropertyFileInputStream != null) {
mavenWrapperPropertyFileInputStream.close();
}
} catch (IOException e) {
// Ignore ...
}
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Subscription storage
#482
Open
BigGitWorld opened this issue
Jun 12, 2019
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Error processing protocol message: PUBACK
#483
Open
Demitrius opened this issue
Jun 13, 2019
· 0 comments
Open
#498
opened Aug 17, 2019 by
qbast
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
ProTip!
Adding no:label will show everything without a label.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
−63
gradle/test.gradle
BIN
gradle/wrapper/gradle-wrapper.jar
+0
−5
gradle/wrapper/gradle-wrapper.properties
+0
−172
gradlew
+0
−84
gradlew.bat
+310
−0
mvnw
+182
−0
mvnw.cmd
+213
−0
pom.xml
+0
−8
+0
−63
gradle/test.gradle
BIN
gradle/wrapper/gradle-wrapper.jar
+0
−5
gradle/wrapper/gradle-wrapper.properties
+0
−172
gradlew
+0
−84
gradlew.bat
+310
−0
mvnw
+182
−0
mvnw.cmd
+213
−0
pom.xml
+0
−8
mavenBundle("io.dropwizard.metrics", "metrics-core").versionAsInProject(),
mavenBundle("io.dropwizard.metrics", "metrics-jvm").versionAsInProject(),
mavenBundle("com.hazelcast", "hazelcast").versionAsInProject(),
mavenBundle("io.netty", "netty-common").versionAsInProject(),
mavenBundle("io.netty", "netty-buffer").versionAsInProject(),
mavenBundle("io.netty", "netty-transport").versionAsInProject(),
mavenBundle("io.netty", "netty-resolver").versionAsInProject(),
mavenBundle("io.netty", "netty-handler").versionAsInProject(),
mavenBundle("io.netty", "netty-handler").versionAsInProject(),
mavenBundle("io.netty", "netty-codec").versionAsInProject(),
mavenBundle("io.netty", "netty-codec-http").versionAsInProject(),
mavenBundle("io.netty", "netty-codec-mqtt").versionAsInProject(),
mavenBundle("io.netty", "netty-transport-native-epoll").versionAsInProject(),
mavenBundle("io.netty", "netty-transport-native-unix-common").versionAsInProject(),
mavenBundle("commons-codec", "commons-codec").versionAsInProject(),
mavenBundle("javax.servlet", "javax.servlet-api").versionAsInProject(),
mavenBundle("io.moquette", "moquette-broker").versionAsInProject(),
mavenBundle("com.h2database", "h2-mvstore").versionAsInProject(),
mavenBundle("io.moquette", "moquette-h2-storage").versionAsInProject(),
mavenBundle("org.mapdb", "mapdb").versionAsInProject(),
mavenBundle("io.moquette", "moquette-mapdb-storage").versionAsInProject()
);
channelFuture = channel.write(msg);
}
channelFuture.addListener(FIRE_EXCEPTION_ON_FAILURE);
}
}
public void writabilityChanged() {
if (channel.isWritable()) {
LOG.debug("Channel {} is again writable", channel);
final Session session = sessionRegistry.retrieve(getClientId());
session.writabilityChanged();
}
}
void sendPubAck(int messageID) {
LOG.trace("sendPubAck invoked");
MqttFixedHeader fixedHeader = new MqttFixedHeader(MqttMessageType.PUBACK, false, AT_MOST_ONCE,
false, 0);
MqttPubAckMessage pubAckMessage = new MqttPubAckMessage(fixedHeader, from(messageID));
sendIfWritableElseDrop(pubAckMessage);
}
private void sendPubCompMessage(int messageID) {
MqttFixedHeader fixedHeader = new MqttFixedHeader(MqttMessageType.PUBCOMP, false, AT_MOST_ONCE, false, 0);
MqttMessage pubCompMessage = new MqttMessage(fixedHeader, from(messageID));
sendIfWritableElseDrop(pubCompMessage);
}
😄
🎉
😕
❤️
🚀
👀
No results matched your search.
You could search all of GitHub or try an advanced search.
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Plans to support MQTT 5?
#490
Open
mpe85 opened this issue
Jul 23, 2019
· 6 comments
Open
Plans to support MQTT 5?
#490
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Exception: java.lang.NoClassDefFoundError: org/mapdb/DBMaker
#248
opened Jan 5, 2017 by
ThomasSchemmer
3
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
processConnectionLost miss to remove the subscriptions of the client
question
#236
opened Nov 18, 2016 by
shuzhongling
1
ndchandar
2
ProTip!
Adding no:label will show everything without a label.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Bugfix/stop broker interceptor by Northram511 · Pull Request #530 · moquette-io/moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
😄
🎉
😕
❤️
🚀
👀
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
NullPointerException.I think is a bug
#473
opened Apr 22, 2019 by
liuhanjim
3
How to forcefully disconnect the client from the broker?
#469
opened Apr 8, 2019 by
giri110890
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
// apply from: new File(rootDir, 'gradle/lint.gradle')
apply plugin: 'com.jfrog.bintray'
apply plugin: 'eclipse'
@@ -112,6 +112,6 @@ subprojects {
}
}
task wrapper(type: Wrapper) {
gradleVersion = '4.6'
}
//task wrapper(type: Wrapper) {
// gradleVersion = '5.6'
//}
2
gradle/wrapper/gradle-wrapper.properties
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
}
}
System.out.println("- Downloading from: " + url);
File outputFile = new File(baseDirectory.getAbsolutePath(), MAVEN_WRAPPER_JAR_PATH);
if(!outputFile.getParentFile().exists()) {
if(!outputFile.getParentFile().mkdirs()) {
System.out.println(
"- ERROR creating output directory '" + outputFile.getParentFile().getAbsolutePath() + "'");
}
}
System.out.println("- Downloading to: " + outputFile.getAbsolutePath());
try {
downloadFileFromURL(url, outputFile);
System.out.println("Done");
System.exit(0);
} catch (Throwable e) {
System.out.println("- Error downloading");
e.printStackTrace();
System.exit(1);
}
}
private static void downloadFileFromURL(String urlString, File destination) throws Exception {
if (System.getenv("MVNW_USERNAME") != null && System.getenv("MVNW_PASSWORD") != null) {
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
· 0 comments
Open
Subscription storage
#482
BigGitWorld opened this issue
Jun 12, 2019
· 0 comments
Comments
Copy link
Quote reply
BigGitWorld
commented
Jun 12, 2019
Where is moquette saving list of subscriptions?
I want to keep list of subscriptions when the moquette server is restarted.
Moquette MQTT version
Latest version
JVM version (e.g. java -version)
java 1.8
OS version (e.g. uname -a)
Linux Ubuntu 16.04
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Error processing protocol message: PUBACK
#483
Demitrius opened this issue
Jun 13, 2019
· 0 comments
Comments
Copy link
Quote reply
Demitrius
commented
Jun 13, 2019
Expected behavior
Moquette works without exceptions when receive many (1000 for example) messages
Actual behavior
Many exceptions when client (javascript Paho) send 1000 messages in loop.
Some first (300-400 messages) was processed normal, but then exceptions.
Steps to reproduce
Run Moquette.
Run javacript code in browser (Paho lib required)
Part of code:
var mqtt_client = new Paho.MQTT.Client(host, Number(port), "/mqtt", device_guid);
// loop
for (var iii =0; iii < 1000; iii++) mqtt_client.send(device_guid, 'Hello Test #'+iii, 1, false);
Minimal yet complete reproducer code (or URL to code) or complete log file
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
settings.gradle
117
.mvn/wrapper/MavenWrapperDownloader.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,117 @@
/*
* Copyright 2007-present the original author or authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
settings.gradle
117
.mvn/wrapper/MavenWrapperDownloader.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,117 @@
/*
* Copyright 2007-present the original author or authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
}
@@ -55,15 +96,23 @@
*/
@Test
public void testCanFindOsgiBundle() throws Exception {
List<String> list = new LinkedList<>(Arrays.asList("io.moquette.broker", "io.moquette.h2-storage",
"io.moquette.mapdb-storage"));
List<String> inactive = new LinkedList<>();
for (Bundle b : bundleContext.getBundles()) {
String symbolicName = b.getSymbolicName();
System.out.format("%s %d\n", symbolicName, b.getState());
if (symbolicName != null && symbolicName.indexOf("moquette") != -1) {
return;
System.out.println("" + symbolicName);
if (symbolicName != null) {
list.remove(symbolicName);
if (b.getState() != Bundle.ACTIVE)
inactive.add(symbolicName);
}
}
// If found no bundles with moquette in the name, fail the test.
fail();
if (!inactive.isEmpty() || !list.isEmpty())
String getClientId() {
return NettyUtils.clientID(channel);
}
String getUsername() {
return NettyUtils.userName(channel);
}
public void sendPublishRetainedQos0(Topic topic, MqttQoS qos, ByteBuf payload) {
MqttPublishMessage publishMsg = retainedPublish(topic.toString(), qos, payload);
sendPublish(publishMsg);
}
public void sendPublishRetainedWithPacketId(Topic topic, MqttQoS qos, ByteBuf payload) {
final int packetId = nextPacketId();
MqttPublishMessage publishMsg = retainedPublishWithMessageId(topic.toString(), qos, payload, packetId);
sendPublish(publishMsg);
}
private static MqttPublishMessage retainedPublish(String topic, MqttQoS qos, ByteBuf message) {
return retainedPublishWithMessageId(topic, qos, message, 0);
}
private static MqttPublishMessage retainedPublishWithMessageId(String topic, MqttQoS qos, ByteBuf message,
int messageId) {
MqttFixedHeader fixedHeader = new MqttFixedHeader(MqttMessageType.PUBLISH, false, qos, true, 0);
MqttPublishVariableHeader varHeader = new MqttPublishVariableHeader(topic, messageId);
return new MqttPublishMessage(fixedHeader, varHeader, message);
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
mpe85 opened this issue
Jul 23, 2019
· 6 comments
Comments
Copy link
Quote reply
mpe85
commented
Jul 23, 2019
Are there any plans to support the latest specification version 5?
Copy link
Collaborator
andsel
commented
Jul 23, 2019
Yes
I'm working on it, in my spare time.
Andrea
…
On Tue, Jul 23, 2019 at 8:57 AM mpe85 ***@***.***> wrote:
Are there any plans to support the latest specification version 5?
—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub
Fixes #529, #505: NPE caused by matching on a TNode by hylkevds · Pull Request #532 · moquette-io/moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Added configuration item for handshake timeout on SSL channel (#531) by dsoulayrol · Pull Request #551 · moquette-io/moquette · GitHub
republishing messages fails....
bug
#234
opened Nov 17, 2016 by
windbender
7
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
when protocol processor is inited with ssl port the word "disabled" is used to indicate the server name
#209
opened Sep 15, 2016 by
windbender
Intermittent concurrentModificationExceptions
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
9
Netty Leak Detection.
#467
opened Apr 4, 2019 by
kopens
1
failed to allocate 16777216 byte(s) of direct memory
#466
opened Apr 4, 2019 by
FengXMGeek
3
Deploy -javadoc and -source jars
#465
opened Apr 1, 2019 by
joker1
distribute
#458
opened Mar 18, 2019 by
dqqzj
7
MQTT durable subscription exception
bug
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
distributionUrl=https\://services.gradle.org/distributions/gradle-4.6-bin.zip
distributionUrl=https\://services.gradle.org/distributions/gradle-5.6-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
Toggle all file notes
0 comments
on commit b69146b
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
String username = System.getenv("MVNW_USERNAME");
char[] password = System.getenv("MVNW_PASSWORD").toCharArray();
Authenticator.setDefault(new Authenticator() {
@Override
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
});
}
URL website = new URL(urlString);
ReadableByteChannel rbc;
rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream(destination);
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
fos.close();
rbc.close();
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
fixed throw NullPointerException when new connection
#519
Open
luoliangtiger
wants to merge
1
commit into
moquette-io:master
base:
master
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Log with exception attached
mqtt-log.log
Moquette MQTT version
version 0.13-SNAPSHOT
JVM version (e.g. java -version)
openjdk version "11.0.3" 2019-04-16 LTS
OpenJDK Runtime Environment 18.9 (build 11.0.3+7-LTS)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.3+7-LTS, mixed mode, sharing)
OS version (e.g. uname -a)
Linux dev.cwt.local 4.1.12-124.26.10.el7uek.x86_64 #2 SMP Fri Apr 19 18:00:11 PDT 2019 x86_64 x86_64 x86_64 GNU/Linux
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
import java.net.*;
import java.io.*;
import java.nio.channels.*;
import java.util.Properties;
public class MavenWrapperDownloader {
private static final String WRAPPER_VERSION = "0.5.6";
/**
* Default URL to download the maven-wrapper.jar from, if no 'downloadUrl' is provided.
*/
private static final String DEFAULT_DOWNLOAD_URL = "https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/"
+ WRAPPER_VERSION + "/maven-wrapper-" + WRAPPER_VERSION + ".jar";
/**
* Path to the maven-wrapper.properties file, which might contain a downloadUrl property to
* use instead of the default one.
*/
private static final String MAVEN_WRAPPER_PROPERTIES_PATH =
".mvn/wrapper/maven-wrapper.properties";
/**
* Path where the maven-wrapper.jar will be saved to.
*/
private static final String MAVEN_WRAPPER_JAR_PATH =
".mvn/wrapper/maven-wrapper.jar";
/**
*/
import java.net.*;
import java.io.*;
import java.nio.channels.*;
import java.util.Properties;
public class MavenWrapperDownloader {
private static final String WRAPPER_VERSION = "0.5.6";
/**
* Default URL to download the maven-wrapper.jar from, if no 'downloadUrl' is provided.
*/
private static final String DEFAULT_DOWNLOAD_URL = "https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/"
+ WRAPPER_VERSION + "/maven-wrapper-" + WRAPPER_VERSION + ".jar";
/**
* Path to the maven-wrapper.properties file, which might contain a downloadUrl property to
* use instead of the default one.
fail("This osgi bundles are missing: " + list + " this osgi packages are NOT active" + inactive);
}
}
12
osgi_test/src/test/resources/log4j.properties
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,12 @@
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=ERROR, stdout
log4j.logger.io.moquette=DEBUG
# stdout appender is set to be a ConsoleAppender.
}
// TODO move this method in Session
void sendPublishNotRetainedQos0(Topic topic, MqttQoS qos, ByteBuf payload) {
MqttPublishMessage publishMsg = notRetainedPublish(topic.toString(), qos, payload);
sendPublish(publishMsg);
}
static MqttPublishMessage notRetainedPublish(String topic, MqttQoS qos, ByteBuf message) {
return notRetainedPublishWithMessageId(topic, qos, message, 0);
}
static MqttPublishMessage notRetainedPublishWithMessageId(String topic, MqttQoS qos, ByteBuf message,
int messageId) {
MqttFixedHeader fixedHeader = new MqttFixedHeader(MqttMessageType.PUBLISH, false, qos, false, 0);
<#490?email_source=notifications&email_token=AAH5RULSU5MYI3ASVS4FETTQA2TWFA5CNFSM4IGAUTOKYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HA2ZNLQ>,
or mute the thread
<https://github.com/notifications/unsubscribe-auth/AAH5RULZOSLBDZAXBJOW673QA2TWFANCNFSM4IGAUTOA>
.
👍
1
🎉
1
Copy link
Author
mpe85
commented
Jul 23, 2019
Thats great to hear :-)
Thanks for the quick answer.
Copy link
Collaborator
andsel
commented
Jul 23, 2019
Your're welcome,
but the implementation will take time;-)
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
one get
#520
Open
luoliangtiger
wants to merge
1
commit into
moquette-io:master
base:
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
bug
#208
opened Sep 14, 2016 by
kjayashankar
1
Server API to get subscriptions information
feature req
#207
opened Sep 14, 2016 by
teranisi
3
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
Authentication interface should return Optional< Principal>
feature req
#176
opened May 6, 2016 by
windbender
2
Allow for multiple server side clients to share a topic with queue behavior...
Fix java 11+ build and tests by hylkevds · Pull Request #533 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
0.13
1
InterceptAcknowledgedMessage.StoredMessage is inaccessible
#444
opened Jan 14, 2019 by
austinw-fineart
0.13
3
getSubscriptions() always return an Empty list
#438
opened Nov 19, 2018 by
abdollahpour
Publish Failed Acknowledgment
#433
opened Oct 22, 2018 by
BigGitWorld
Abnormal disconnection of the connection will result in InterceptHandler.onConnectionLost() called twice
#430
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
from
luoliangtiger:master
Open
fixed throw NullPointerException when new connection
#519
luoliangtiger
wants to merge
1
commit into
moquette-io:master
from
luoliangtiger:master
Conversation
0
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
luoliangtiger
commented
Mar 2, 2020
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
* Name of the property which should be used to override the default download url for the wrapper.
*/
private static final String PROPERTY_NAME_WRAPPER_URL = "wrapperUrl";
public static void main(String args[]) {
System.out.println("- Downloader started");
File baseDirectory = new File(args[0]);
System.out.println("- Using base directory: " + baseDirectory.getAbsolutePath());
// If the maven-wrapper.properties exists, read it and check if it contains a custom
// wrapperUrl parameter.
File mavenWrapperPropertyFile = new File(baseDirectory, MAVEN_WRAPPER_PROPERTIES_PATH);
String url = DEFAULT_DOWNLOAD_URL;
if(mavenWrapperPropertyFile.exists()) {
FileInputStream mavenWrapperPropertyFileInputStream = null;
try {
mavenWrapperPropertyFileInputStream = new FileInputStream(mavenWrapperPropertyFile);
Properties mavenWrapperProperties = new Properties();
mavenWrapperProperties.load(mavenWrapperPropertyFileInputStream);
url = mavenWrapperProperties.getProperty(PROPERTY_NAME_WRAPPER_URL, url);
} catch (IOException e) {
System.out.println("- ERROR loading '" + MAVEN_WRAPPER_PROPERTIES_PATH + "'");
} finally {
*/
private static final String MAVEN_WRAPPER_PROPERTIES_PATH =
".mvn/wrapper/maven-wrapper.properties";
/**
* Path where the maven-wrapper.jar will be saved to.
*/
private static final String MAVEN_WRAPPER_JAR_PATH =
".mvn/wrapper/maven-wrapper.jar";
/**
* Name of the property which should be used to override the default download url for the wrapper.
*/
private static final String PROPERTY_NAME_WRAPPER_URL = "wrapperUrl";
public static void main(String args[]) {
System.out.println("- Downloader started");
File baseDirectory = new File(args[0]);
System.out.println("- Using base directory: " + baseDirectory.getAbsolutePath());
// If the maven-wrapper.properties exists, read it and check if it contains a custom
// wrapperUrl parameter.
File mavenWrapperPropertyFile = new File(baseDirectory, MAVEN_WRAPPER_PROPERTIES_PATH);
String url = DEFAULT_DOWNLOAD_URL;
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Threshold=DEBUG
# for debug trace
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
Toggle all file notes
0 comments
on commit 7c4f902
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
MqttPublishVariableHeader varHeader = new MqttPublishVariableHeader(topic, messageId);
return new MqttPublishMessage(fixedHeader, varHeader, message);
}
public void resendNotAckedPublishes() {
final Session session = sessionRegistry.retrieve(getClientId());
session.resendInflightNotAcked();
}
int nextPacketId() {
return lastPacketId.incrementAndGet();
}
@Override
public String toString() {
}
InetSocketAddress remoteAddress() {
return (InetSocketAddress) channel.remoteAddress();
}
public void readCompleted() {
if (getClientId() != null) {
// TODO drain all messages in target's session in-flight message queue
postOffice.flushInFlight(this);
}
}
}
Andrea
…
On Tue, Jul 23, 2019 at 9:06 AM mpe85 ***@***.***> wrote:
Thats great to hear :-)
Thanks for the quick answer.
—
You are receiving this because you commented.
Reply to this email directly, view it on GitHub
<#490?email_source=notifications&email_token=AAH5RUIY2SGOD3RP6TA2XALQA2UWTA5CNFSM4IGAUTOKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD2SELWI#issuecomment-514082265>,
or mute the thread
<https://github.com/notifications/unsubscribe-auth/AAH5RUK5SNWNBPUWJOMKXLTQA2UWTANCNFSM4IGAUTOA>
.
Copy link
MuhammadMattiullah
commented
Sep 20, 2019
Hello Andsel, is it supporting mqtt v5 ?
Copy link
Collaborator
andsel
commented
Sep 20, 2019
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
master
from
luoliangtiger:dev
Open
one get
#520
luoliangtiger
wants to merge
1
commit into
moquette-io:master
from
luoliangtiger:dev
Conversation
0
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
luoliangtiger
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
feature req
#158
opened Mar 4, 2016 by
redboy1972
4
Avoid OutOfMemory error
feature req
#141
opened Jan 17, 2016 by
andsel
0.9
3
[FR]Moquette clusters
feature req
#131
opened Dec 11, 2015 by
pabloa
0.9
19
Retained message with QoS 0
#125
opened Nov 11, 2015 by
env3d
5
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
opened Sep 20, 2018 by
CoderBigL
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
The server throws an exception when the message is received
#406
opened Jun 4, 2018 by
ma-yadong
3
client can't reconnect to the broker once exception happened inner processSubscribe()
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
java.lang.NullPointerException
at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936)
at io.moquette.broker.SessionRegistry.retrieve(SessionRegistry.java:233)
at io.moquette.broker.PostOffice.flushInFlight(PostOffice.java:313)
at io.moquette.broker.MQTTConnection.readCompleted(MQTTConnection.java:507)
at io.moquette.broker.NewNettyMQTTHandler.channelReadComplete(NewNettyMQTTHandler.java:76)
fixed throw NullPointerException when new connection
…
Loading status checks…
2cadef6
java.lang.NullPointerException
at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936)
at io.moquette.broker.SessionRegistry.retrieve(SessionRegistry.java:233)
at io.moquette.broker.PostOffice.flushInFlight(PostOffice.java:313)
at io.moquette.broker.MQTTConnection.readCompleted(MQTTConnection.java:507)
at io.moquette.broker.NewNettyMQTTHandler.channelReadComplete(NewNettyMQTTHandler.java:76)
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
try {
if(mavenWrapperPropertyFileInputStream != null) {
mavenWrapperPropertyFileInputStream.close();
}
} catch (IOException e) {
// Ignore ...
}
}
}
System.out.println("- Downloading from: " + url);
File outputFile = new File(baseDirectory.getAbsolutePath(), MAVEN_WRAPPER_JAR_PATH);
if(!outputFile.getParentFile().exists()) {
if(!outputFile.getParentFile().mkdirs()) {
System.out.println(
"- ERROR creating output directory '" + outputFile.getParentFile().getAbsolutePath() + "'");
}
}
System.out.println("- Downloading to: " + outputFile.getAbsolutePath());
try {
if(mavenWrapperPropertyFile.exists()) {
FileInputStream mavenWrapperPropertyFileInputStream = null;
try {
mavenWrapperPropertyFileInputStream = new FileInputStream(mavenWrapperPropertyFile);
Properties mavenWrapperProperties = new Properties();
mavenWrapperProperties.load(mavenWrapperPropertyFileInputStream);
url = mavenWrapperProperties.getProperty(PROPERTY_NAME_WRAPPER_URL, url);
} catch (IOException e) {
System.out.println("- ERROR loading '" + MAVEN_WRAPPER_PROPERTIES_PATH + "'");
} finally {
try {
if(mavenWrapperPropertyFileInputStream != null) {
mavenWrapperPropertyFileInputStream.close();
}
} catch (IOException e) {
// Ignore ...
}
}
}
System.out.println("- Downloading from: " + url);
File outputFile = new File(baseDirectory.getAbsolutePath(), MAVEN_WRAPPER_JAR_PATH);
if(!outputFile.getParentFile().exists()) {
if(!outputFile.getParentFile().mkdirs()) {
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Hi Muhammad
not at the moment, it's still work in progress.
Andrea
…
On Fri, Sep 20, 2019 at 1:48 PM Muhammad Mattiullah < ***@***.***> wrote:
Hello Andsel, is it supporting mqtt v5 ?
—
You are receiving this because you commented.
Reply to this email directly, view it on GitHub
<#490?email_source=notifications&email_token=AAH5RUKESDF2GDSBPBPJWF3QKS2BZA5CNFSM4IGAUTOKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD7GOCYI#issuecomment-533520737>,
or mute the thread
<https://github.com/notifications/unsubscribe-auth/AAH5RUKZIRJYE5KAAFJKX23QKS2BZANCNFSM4IGAUTOA>
.
👍
1
🎉
1
Copy link
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
commented
Mar 4, 2020
No description provided.
one get
Loading status checks…
94c785c
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
Previous 1 2 3 Next
Previous Next
ProTip!
Find all open issues with in progress development work with linked:pr.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
#388
opened Feb 6, 2018 by
fjcyue
6
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
cannot make a distinction between bad user and not authorized when connect
#359
opened Sep 5, 2017 by
rongwei84n
2
Netty Leak Detection
#356
opened Aug 31, 2017 by
somejavadev
1
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
downloadFileFromURL(url, outputFile);
System.out.println("Done");
System.exit(0);
} catch (Throwable e) {
System.out.println("- Error downloading");
e.printStackTrace();
System.exit(1);
}
}
System.out.println(
"- ERROR creating output directory '" + outputFile.getParentFile().getAbsolutePath() + "'");
}
}
System.out.println("- Downloading to: " + outputFile.getAbsolutePath());
try {
downloadFileFromURL(url, outputFile);
System.out.println("Done");
System.exit(0);
} catch (Throwable e) {
System.out.println("- Error downloading");
e.printStackTrace();
System.exit(1);
}
}
private static void downloadFileFromURL(String urlString, File destination) throws Exception {
if (System.getenv("MVNW_USERNAME") != null && System.getenv("MVNW_PASSWORD") != null) {
String username = System.getenv("MVNW_USERNAME");
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
MuhammadMattiullah
commented
Sep 20, 2019
Thanks for the quick response.
Regards
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
3 participants
© 2020 GitHub, Inc.
Terms
Privacy
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Bugfix/stop broker interceptor
#530
Open
Northram511
wants to merge
2
commits into
moquette-io:master
base:
master
from
Northram511:bugfix/stopBrokerInterceptor
Open
Bugfix/stop broker interceptor
#530
How one port supports both unidirectional and two-way certificate authentication for TLS
#491
opened Jul 30, 2019 by
cnneillee
ProTip!
Exclude everything labeled bug with -label:bug.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
edenmob
1
Message size >64kB is not handled via Websocket connection.
#319
opened May 25, 2017 by
raipratheek
1
if unchecked exception is throw while running processSubscription then remove() will never be called
#316
opened May 19, 2017 by
windbender
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
Previous 1 2 3 Next
Previous Next
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Switched from connAck build method to message builder offered by netty · moquette-io/moquette@4665c5e · GitHub
🚀
👀
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
private static void downloadFileFromURL(String urlString, File destination) throws Exception {
if (System.getenv("MVNW_USERNAME") != null && System.getenv("MVNW_PASSWORD") != null) {
String username = System.getenv("MVNW_USERNAME");
char[] password = System.getenv("MVNW_PASSWORD").toCharArray();
Authenticator.setDefault(new Authenticator() {
@Override
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
});
}
URL website = new URL(urlString);
ReadableByteChannel rbc;
rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream(destination);
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
fos.close();
rbc.close();
}
}
BIN
+49.5 KB
.mvn/wrapper/maven-wrapper.jar
char[] password = System.getenv("MVNW_PASSWORD").toCharArray();
Authenticator.setDefault(new Authenticator() {
@Override
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
});
}
URL website = new URL(urlString);
ReadableByteChannel rbc;
rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream(destination);
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
fos.close();
rbc.close();
}
}
BIN
+49.5 KB
.mvn/wrapper/maven-wrapper.jar
Show comments
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Fixes #529, #505: NPE caused by matching on a TNode
#532
Open
hylkevds
wants to merge
1
commit into
moquette-io:master
base:
master
from
hylkevds:fix_529_npe_in_ctrie
Open
Fixes #529, #505: NPE caused by matching on a TNode
#532
hylkevds
wants to merge
😄
🎉
😕
❤️
🚀
👀
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Added configuration item for handshake timeout on SSL channel (#531)
#551
Open
dsoulayrol
wants to merge
1
commit into
moquette-io:master
base:
master
from
dsoulayrol:issue-531
Open
Added configuration item for handshake timeout on SSL channel (#531)
#551
dsoulayrol
wants to merge
1
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Northram511
wants to merge
2
commits into
moquette-io:master
from
Northram511:bugfix/stopBrokerInterceptor
Conversation
0
Commits
2
Checks
0
Files changed
Conversation
Copy link
Quote reply
Northram511
commented
May 26, 2020
No description provided.
Northram511
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Updated paho to 1.2.5 to fix CVE-2019-11777 (fixed in Pago 1.2.1) (#550) · moquette-io/moquette@1d38a1b · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Show comments
View file
Edit file
Delete file
Binary file not shown.
2
.mvn/wrapper/maven-wrapper.properties
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,2 @@
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.2/apache-maven-3.6.2-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar
11
.travis.yml
Show comments
View file
Edit file
Delete file
@@ -1,13 +1,6 @@
View file
Edit file
Delete file
Binary file not shown.
2
.mvn/wrapper/maven-wrapper.properties
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,2 @@
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.2/apache-maven-3.6.2-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar
11
.travis.yml
Show comments
View file
Edit file
Delete file
@@ -1,13 +1,6 @@
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
1
commit into
moquette-io:master
from
hylkevds:fix_529_npe_in_ctrie
Conversation
0
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
Contributor
hylkevds
commented
Aug 13, 2020
This PR fixes #529, #505.
In high load conditions, TNodes are not removed from the tree fast enough, and are evaluated when matching topics.
This PR moves the check that skips TNodes forward, before child nodes are even considered. As a side effect, no EmptySet is created and added to the matched subscriptions.
Fixes #529, #505: NPE caused by matching on a TNode
72a21ef
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
commit into
moquette-io:master
from
dsoulayrol:issue-531
Conversation
0
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
dsoulayrol
commented
Nov 13, 2020
A cleaner version with the requested parameter description in moquette.conf.
Added configuration item for handshake timeout on SSL channel (#531)
Loading status checks…
2496e2e
Sign up for free
to join this conversation on GitHub.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Fix java 11+ build and tests
#533
Open
hylkevds
wants to merge
6
commits into
moquette-io:master
base:
master
from
hylkevds:fix_java_11
Open
Fix java 11+ build and tests
added 2 commits
May 26, 2020
updated netty to 4.1.50.Final
9c52a41
stopping BrokerInterceptor
Loading status checks…
5874e10
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
language: java
language: java
jdk:
jdk:
- openjdk12
- openjdk12
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
directories:
- $HOME/.gradle/caches/
- $HOME/.gradle/wrapper/
script:
#script:
- ./gradlew install test
# - ./mvnw verify
Oops, something went wrong.
language: java
jdk:
- openjdk12
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
directories:
- $HOME/.gradle/caches/
- $HOME/.gradle/wrapper/
script:
- ./gradlew install test
#script:
# - ./mvnw verify
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 17f2c93
Please
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
NullPointerException in CTrie.evaluate
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
2 participants
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
#533
hylkevds
wants to merge
6
commits into
moquette-io:master
from
hylkevds:fix_java_11
Conversation
1
Commits
6
Checks
0
Files changed
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Retry
Toggle all file notes
0 comments
on commit 17f2c93
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Conversation
Copy link
Quote reply
Contributor
hylkevds
commented
Aug 14, 2020
•
edited
This PR:
makes the changes needed for java 11+, mostly copied from #498.
Fixes ServerIntegrationPahoCanPublishOnReadBlockedTopicTest so it cleans up.
This fixes several following tests breaking.
Fixes the PostOffice throwing a NPE when clientId is null.
This fixes the test ServerIntegrationSSLClientAuthTest > checkClientAuthenticationFail.
Update the test certificates, adding the flag CA:true.
This fixes the error TrustAnchor with subject "CN=moquette.io" is not a CA certificate
in ServerIntegrationSSLClientAuthTest > checkClientAuthentication.
Bump errorProne version to 2.4.0 to fix java 12 regression.
Fixes ServerLowlevelMessagesIntegrationTests so it cleans up.
This fixes several following tests breaking.
hylkevds
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Switched from connAck build method to message builder offered by netty
Loading branch information
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
added 6 commits
Aug 13, 2020
Update gradle and plugins for java 11+
0f82530
598ebd4
Fixed NPE when client id is null
20ddcee
Added CA:true tag to signing certificate and regenerated certs
ce73d6e
Bump errorProne version to 2.4.0 to fix java 12 regression
6e31dfb
dc5e87e
Copy link
Contributor
Author
hylkevds
commented
Aug 14, 2020
Yay, Travis is happy again!
https://travis-ci.org/github/moquette-io/moquette/builds/717854877
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Updated paho to 1.2.5 to fix CVE-2019-11777 (fixed in Pago 1.2.1) (#550)
Loading branch information
andsel
andsel
committed
Nov 13, 2020
1 parent
1d38a1b
commit 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12
Unified
Split
Showing
1 changed file
with
8 additions
and 21 deletions.
+8
−21
broker/src/main/java/io/moquette/broker/MQTTConnection.java
29
Sign in to GitHub · GitHub
:)
andsel
self-requested a review
Nov 12, 2020
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
andsel
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
committed
Nov 13, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
aa332d0
commit 1d38a1b8d4c1bd42cbdaf8567b5a6f22f31bc149
Unified
Split
Showing
7 changed files
with
8 additions
and 6 deletions.
+1
−1
broker/pom.xml
+6
−4
broker/src/test/java/io/moquette/integration/ServerIntegrationSSLClientAuthTest.java
+1
−1
broker/src/test/java/io/moquette/integration/ServerIntegrationSSLTest.java
broker/src/main/java/io/moquette/broker/MQTTConnection.java
Show comments
View file
Edit file
Delete file
@@ -178,14 +178,17 @@ void processConnect(MqttConnectMessage msg) {
final boolean msgCleanSessionFlag = msg.variableHeader().isCleanSession();
boolean isSessionAlreadyPresent = !msgCleanSessionFlag && result.alreadyStored;
final String clientIdUsed = clientId;
sendConnAck(isSessionAlreadyPresent).addListener(new ChannelFutureListener() {
final MqttConnAckMessage ackMessage = MqttMessageBuilders.connAck()
.returnCode(CONNECTION_ACCEPTED)
.sessionPresent(isSessionAlreadyPresent).build();
channel.writeAndFlush(ackMessage).addListener(new ChannelFutureListener() {
@Override
public void operationComplete(ChannelFuture future) throws Exception {
if (future.isSuccess()) {
LOG.trace("CONNACK sent, channel: {}", channel);
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
BIN
broker/src/test/resources/clientkeystore.jks
BIN
broker/src/test/resources/serverkeystore.jks
BIN
broker/src/test/resources/signedclientkeystore.jks
BIN
broker/src/test/resources/unsignedclientkeystore.jks
2
broker/pom.xml
Show comments
View file
Edit file
Delete file
@@ -17,7 +17,7 @@
<bintray.package>io.moquette.moquette-broker</bintray.package>
<netty.version>4.1.53.Final</netty.version>
<netty.tcnative.version>2.0.34.Final</netty.tcnative.version>
<paho.version>1.2.0</paho.version>
<paho.version>1.2.5</paho.version>
<h2.version>1.4.199</h2.version>
</properties>
if (!result.session.completeConnection()) {
// send DISCONNECT and close the channel
final MqttMessage disconnectMsg = disconnect();
final MqttMessage disconnectMsg = MqttMessageBuilders.disconnect().build();
channel.writeAndFlush(disconnectMsg).addListener(CLOSE);
LOG.warn("CONNACK is sent but the session created can't transition in CONNECTED state");
} else {
@@ -243,24 +246,13 @@ private boolean isNotProtocolVersion(MqttConnectMessage msg, MqttVersion version
}
private void abortConnection(MqttConnectReturnCode returnCode) {
MqttConnAckMessage badProto = connAck(returnCode, false);
MqttConnAckMessage badProto = MqttMessageBuilders.connAck()
.returnCode(returnCode)
.sessionPresent(false).build();
channel.writeAndFlush(badProto).addListener(FIRE_EXCEPTION_ON_FAILURE);
channel.close().addListener(CLOSE_ON_FAILURE);
}
private MqttConnAckMessage connAck(MqttConnectReturnCode returnCode, boolean sessionPresent) {
MqttFixedHeader mqttFixedHeader = new MqttFixedHeader(MqttMessageType.CONNACK, false, MqttQoS.AT_MOST_ONCE,
false, 0);
MqttConnAckVariableHeader mqttConnAckVariableHeader = new MqttConnAckVariableHeader(returnCode, sessionPresent);
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Will it be compatible with Graalvm in the future? · Issue #509 · moquette-io/moquette · GitHub
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
10
broker/src/test/java/io/moquette/integration/ServerIntegrationSSLClientAuthTest.java
Show comments
View file
Edit file
Delete file
@@ -53,16 +53,17 @@
/**
* Check that Moquette could also handle SSL with client authentication.
*
* This test verifies client's autentication on server, so the server certificate has to be imported into the
* This test verifies client's authentication on server, so the server certificate has to be imported into the
* client's keystore and the client's certificate must be imported into server's keystore.
*
* the first way is done by:
* <pre>
* keytool -genkeypair -alias testserver -keyalg RSA -validity 3650 -keysize 2048 -dname cn=moquette.io -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv
* keytool -genkeypair -alias testserver -keyalg RSA -validity 3650 -keysize 2048 -dname cn=localhost -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv
* </pre>
* and
* <pre>
* keytool -exportcert -alias testserver -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv | keytool -importcert -trustcacerts -noprompt -alias testserver -keystore signedclientkeystore.jks -keypass passw0rd -storepass passw0rd
* keytool -exportcert -alias testserver -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv | \
return new MqttConnAckMessage(mqttFixedHeader, mqttConnAckVariableHeader);
}
private MqttMessage disconnect() {
MqttFixedHeader mqttFixedHeader = new MqttFixedHeader(MqttMessageType.DISCONNECT, false, MqttQoS.AT_MOST_ONCE,
false, 0);
return new MqttMessage(mqttFixedHeader);
}
private boolean login(MqttConnectMessage msg, final String clientId) {
// handle user authentication
if (msg.variableHeader().hasUserName()) {
@@ -306,11 +298,6 @@ void handleConnectionLost() {
}
private ChannelFuture sendConnAck(boolean isSessionAlreadyPresent) {
final MqttConnAckMessage ackMessage = connAck(CONNECTION_ACCEPTED, isSessionAlreadyPresent);
return channel.writeAndFlush(ackMessage);
}
boolean isConnected() {
return connected;
}
Toggle all file notes
0 comments
on commit 4665c5e
Please
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
* keytool -importcert -trustcacerts -noprompt -alias testserver -keystore signedclientkeystore.jks -keypass passw0rd -storepass passw0rd
* </pre>
*
* to create the key in the client side:
@@ -72,7 +73,8 @@
*
* to import the client's certificate into server:
* <pre>
* keytool -exportcert -alias signedtestclient -keystore signedclientkeystore.jks -keypass passw0rd -storepass passw0rd | keytool -importcert -trustcacerts -noprompt -alias signedtestclient -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv
* keytool -exportcert -alias signedtestclient -keystore signedclientkeystore.jks -keypass passw0rd -storepass passw0rd | \
* keytool -importcert -trustcacerts -noprompt -alias signedtestclient -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv
* </pre>
*
* To verify that a client's certficate not imported into server, it's necessary to create a client's key:
2
broker/src/test/java/io/moquette/integration/ServerIntegrationSSLTest.java
Show comments
View file
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Edit file
Delete file
@@ -62,7 +62,7 @@
*
* Command executed to create the key on server's keystore:
* <pre>
* keytool -genkeypair -alias testserver -keyalg RSA -validity 3650 -keysize 2048 -dname cn=moquette.io -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv
* keytool -genkeypair -alias testserver -keyalg RSA -validity 3650 -keysize 2048 -dname cn=localhost -keystore serverkeystore.jks -keypass passw0rdsrv -storepass passw0rdsrv
* </pre>
*
* Command executed to export the certificate from the server's keystore and import directly in client's keystore:
BIN
-8 Bytes
(99%)
broker/src/test/resources/clientkeystore.jks
Show comments
View file
Edit file
Delete file
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Binary file not shown.
BIN
-8 Bytes
(100%)
broker/src/test/resources/serverkeystore.jks
Show comments
View file
Edit file
Delete file
Binary file not shown.
BIN
-8 Bytes
(100%)
broker/src/test/resources/signedclientkeystore.jks
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
Show comments
View file
Edit file
Delete file
Binary file not shown.
BIN
-8 Bytes
(100%)
broker/src/test/resources/unsignedclientkeystore.jks
Show comments
View file
Edit file
Delete file
Binary file not shown.
Toggle all file notes
0 comments
on commit 1d38a1b
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Will it be compatible with Graalvm in the future?
#509
Open
coolbeevip opened this issue
Dec 12, 2019
· 0 comments
Open
Will it be compatible with Graalvm in the future?
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
#509
coolbeevip opened this issue
Dec 12, 2019
· 0 comments
Comments
Copy link
Quote reply
coolbeevip
commented
Dec 12, 2019
Expected behavior
Actual behavior
Steps to reproduce
Minimal yet complete reproducer code (or URL to code) or complete log file
Moquette MQTT version
JVM version (e.g. java -version)
OS version (e.g. uname -a)
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
Sign in to GitHub · GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Sign in to GitHub · GitHub
Sign in to GitHub · GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Buffering settings to reduce latency · Issue #527 · moquette-io/moquette · GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Sign in to GitHub · GitHub
Sign in to GitHub · GitHub
Reintroduce maven project files by andsel · Pull Request #542 · moquette-io/moquette · GitHub
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Sign in to GitHub · GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Buffering settings to reduce latency
#527
Open
impliedx opened this issue
May 8, 2020
· 1 comment
Open
Buffering settings to reduce latency
#527
impliedx opened this issue
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Issues · moquette-io/moquette · GitHub
May 8, 2020
· 1 comment
Comments
Copy link
Quote reply
impliedx
commented
May 8, 2020
There is a latency in the delivery of messages which seems to be from some buffering which flushes the messages only every few seconds. Is there a configuration where this latency can be reduced and the messages processed as soon as they come in?
Moquette MQTT version
1.12.1
JVM version (e.g. java -version)
8
OS version (e.g. uname -a)
Windows 10 / Ubuntu 16.04
Copy link
Contributor
hylkevds
commented
May 13, 2020
Probably a duplicate of, or related to #515
Sign up for free
Reintroduce maven project files
#542
Merged
andsel
merged 1 commit into
master
from
reintroduce_maven_project_files
Nov 2, 2020
Merged
Reintroduce maven project files
#542
andsel
merged 1 commit into
master
from
reintroduce_maven_project_files
Nov 2, 2020
Conversation
0
Commits
1
Checks
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Sign in to GitHub · GitHub
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
2 participants
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
0
Files changed
Commits on Nov 2, 2020
Reintroduce maven build, with wrapper, removed gradle.
andsel
committed
Nov 2, 2020
Loading status checks…
7f91798
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Sign in to GitHub · GitHub
Issues · moquette-io/moquette · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Sign in to GitHub · GitHub
Sign in to GitHub · GitHub
Packages · Moquette · GitHub
Reject
Save preferences
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Sign in to GitHub · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Skip to content
moquette-io
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Sign up
Moquette
Repositories
Packages
People
Projects
GitHub Package Registry Icon
Get started with GitHub Packages
Safely publish packages, store your packages alongside your code, and share your packages privately with your team.
Choose an ecosystem
Docker
A software platform used for building applications based on containers — small and lightweight execution environments.
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
Learn More
Apache Maven
A default package manager used for the Java programming language and the Java runtime environment.
Learn More
NuGet
A free and open source package manager used for the Microsoft development platforms including .NET.
Learn More
RubyGems
A standard format for distributing Ruby programs and libraries used for the Ruby programming language.
Learn More
npm
A package manager for JavaScript, included with Node.js. npm makes it easy for developers to share and reuse code.
Learn More
Containers
beta
A single place for your team to manage Docker images and decide who can see and access your images.
Learn More
© 2020 GitHub, Inc.
Terms
Privacy
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
opened Nov 29, 2016 by
peacecoder
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
👍
👎
😄
🎉
😕
❤️
🚀
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
6
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
Bump junit from 4.8.2 to 4.13.1 (#544) · moquette-io/moquette@c7461f1 · GitHub
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#290
opened Mar 23, 2017 by
leesangboo
7
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
We've detected that JavaScript is disabled in your browser. Would you like to proceed to legacy Twitter?
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Netty Leak Detection.
#467
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Yes
Something went wrong, but don’t fret — let’s give it another shot.
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Sign in to GitHub · GitHub
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Netty Leak Detection.
#467
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
Mix and match filters to narrow down what you’re looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Bump junit from 4.8.2 to 4.13.1 (#544)
Bumps [junit](https://github.com/junit-team/junit4) from 4.8.2 to 4.13.1.
- [Release notes](https://github.com/junit-team/junit4/releases)
- [Changelog](https://github.com/junit-team/junit4/blob/main/doc/ReleaseNotes4.13.1.md)
- [Commits](junit-team/junit4@r4.8.2...r4.13.1)
Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
Loading branch information
dependabot
committed
Nov 12, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
3c3859f
commit c7461f1eb2c1c5ad460f395b27e7779a55d5c112
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Unified
Split
Showing
1 changed file
with
1 addition
and 1 deletion.
+1
−1
pom.xml
2
pom.xml
Show comments
View file
Edit file
Delete file
@@ -60,7 +60,7 @@
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.8.2</version>
<version>4.13.1</version>
<scope>test</scope>
</dependency>
Sign in to GitHub · GitHub
Toggle all file notes
0 comments
on commit c7461f1
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Added copyright and license notice to every source file, added about.… · moquette-io/moquette@666cc29 · GitHub
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Sign in to GitHub · GitHub
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
Browse files
Added copyright and license notice to every source file, added about.…
…html and license.htl
Loading branch information
andsel
committed
Jun 11, 2014
1 parent
0bbe719
commit 666cc29d47f57fc00798856e335e5270c0075a10
Unified
Split
Showing
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
133 changed files
with
2,569 additions
and 13 deletions.
+28
−0
about.html
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
moquette/.editorconfig at master · moquette-io/moquette · GitHub
Learn more
Accept
Reject
Save preferences
Added implementation of retained store in H2 · moquette-io/moquette@2138513 · GitHub
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
+15
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Sign in to GitHub · GitHub
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
+15
−0
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/RepublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/StopEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/SubscribeEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/storage/StoredPublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/Subscription.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/SubscriptionsStore.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/Token.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/TreeNode.java
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Sign in to GitHub · GitHub
moquette/ProtocolEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ConfigurationParser.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ConnectionDescriptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/Constants.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/IAuthenticator.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/Server.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ServerAcceptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ServerChannel.java
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Added implementation of retained store in H2
Loading branch information
andsel
committed
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Sign in to GitHub · GitHub
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/MoquetteIdleTimoutHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyAcceptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyChannel.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyMQTTHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetrics.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetricsCollector.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetricsHandler.java
moquette/DebugUtils.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/.editorconfig
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
16 lines (13 sloc)
299 Bytes
Raw
Blame
# EditorConfig is awesome: http://EditorConfig.org
# top-most EditorConfig file
root = true
# Unix-style newlines with a newline ending every file
[*]
end_of_line = lf
insert_final_newline = true
charset = utf-8
indent_style = space
indent_size = 4
Nov 28, 2018
1 parent
80daadf
commit 213851335a4f22fc30796911d5bebcd1d26fb7c7
Unified
Split
Showing
9 changed files
with
132 additions
and 20 deletions.
+2
−0
ChangeLog.txt
+3
−1
broker/src/main/java/io/moquette/broker/IRetainedRepository.java
+21
−5
broker/src/main/java/io/moquette/broker/MemoryRetainedRepository.java
+12
−9
broker/src/main/java/io/moquette/broker/PostOffice.java
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetrics.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetricsCollector.java
+15
−1
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetricsHandler.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticatorTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageServiceTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/MockAuthenticator.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessorTest.java
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
max_line_length=120
[*.gradle]
indent_size = 2
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
+24
−0
broker/src/main/java/io/moquette/broker/RetainedMessage.java
+4
−1
broker/src/main/java/io/moquette/broker/Server.java
+5
−0
broker/src/main/java/io/moquette/persistence/H2Builder.java
+55
−0
broker/src/main/java/io/moquette/persistence/H2RetainedRepository.java
+6
−4
broker/src/test/java/io/moquette/broker/PostOfficePublishTest.java
2
ChangeLog.txt
Show comments
View file
Edit file
Delete file
@@ -1,6 +1,8 @@
Version 0.12:
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Sign in to GitHub · GitHub
+15
−0
.../src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/SubscriptionsStoreTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ConfigurationParserTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/MQTTWebSocket.java
+15
−1
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationFuseTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationPahoTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationQoSValidationTest.java
+15
−3
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationSSLTest.java
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Fixed issue #415
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
Rewritten completly the broker to introduce the concept of MqttConnection
Dropped suppoert for MapDB and keeped only H2 MvStore for persistence
Version 0.10:
Netty epoll system added
4
broker/src/main/java/io/moquette/broker/IRetainedRepository.java
Show comments
View file
Edit file
Delete file
@@ -18,6 +18,8 @@
import io.moquette.broker.subscriptions.Topic;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import java.util.List;
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationWebSocketTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerLowlevelMessagesIntegrationTests.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerRestartIntegrationTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/TestCallback.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/testclient/Client.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/testclient/ClientNettyMQTTHandler.java
+15
−0
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Reject
Save preferences
public interface IRetainedRepository {
void cleanRetained(Topic topic);
@@ -26,5 +28,5 @@
boolean isEmpty();
MqttPublishMessage retainedOnTopic(String topic);
List<RetainedMessage> retainedOnTopic(String topic);
}
26
broker/src/main/java/io/moquette/broker/MemoryRetainedRepository.java
Show comments
View file
Edit file
Delete file
@@ -16,8 +16,12 @@
package io.moquette.broker;
import io.moquette.broker.subscriptions.Topic;
import io.netty.buffer.ByteBuf;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import java.util.ArrayList;
import java.util.List;
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
46 lines (40 sloc)
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
moquette/H2RetainedRepository.java at 213851335a4f22fc30796911d5bebcd1d26fb7c7 · moquette-io/moquette · GitHub
bundle/src/main/java/org/dna/mqtt/moquette/bundle/Activator.java
+576
−0
license-eplv10-aslv20.html
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnectDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnectEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DemuxDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DemuxEncoder.java
+15
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;
@@ -26,16 +30,20 @@
* */
final class MemoryRetainedRepository implements IRetainedRepository {
private final ConcurrentMap<String, MqttPublishMessage> storage = new ConcurrentHashMap<>();
private final ConcurrentMap<Topic, RetainedMessage> storage = new ConcurrentHashMap<>();
@Override
public void cleanRetained(Topic topic) {
storage.remove(topic.toString());
storage.remove(topic);
}
@Override
public void retain(Topic topic, MqttPublishMessage msg) {
storage.put(topic.toString(), msg);
final ByteBuf payload = msg.content();
byte[] rawPayload = new byte[payload.readableBytes()];
payload.getBytes(0, rawPayload);
final RetainedMessage toStore = new RetainedMessage(msg.fixedHeader().qosLevel(), rawPayload);
storage.put(topic, toStore);
1.42 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.Utils;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.server.ServerChannel;
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DisconnectDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DisconnectEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MQTTDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MQTTEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MessageIDDecoder.java
+15
−1
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingReqDecoder.java
+15
−1
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingReqEncoder.java
+15
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
32 lines (30 sloc)
941 Bytes
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
}
@Override
@@ -44,7 +52,15 @@ public boolean isEmpty() {
}
@Override
public MqttPublishMessage retainedOnTopic(String topic) {
return storage.get(topic);
public List<RetainedMessage> retainedOnTopic(String topic) {
final Topic searchTopic = new Topic(topic);
final List<RetainedMessage> matchingMessages = new ArrayList<>();
for (Map.Entry<Topic, RetainedMessage> entry : storage.entrySet()) {
final Topic scanTopic = entry.getKey();
if (searchTopic.match(scanTopic)) {
matchingMessages.add(entry.getValue());
}
}
return matchingMessages;
}
}
21
broker/src/main/java/io/moquette/broker/PostOffice.java
Show comments
/**
* Event used to carry ProtocolMessages from front handler to event processor
*/
public class ProtocolEvent extends MessagingEvent {
ServerChannel m_session;
AbstractMessage message;
public ProtocolEvent(ServerChannel session, AbstractMessage message) {
this.m_session = session;
this.message = message;
}
public ServerChannel getSession() {
return m_session;
}
public AbstractMessage getMessage() {
return message;
}
@Override
public String toString() {
return "ProtocolEvent wrapping " + Utils.msgType2String(message.getMessageType());
}
}
Copy lines
Copy permalink
View git blame
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingRespDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingRespEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubCompDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubCompEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRecDecoder.java
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
/**
*
* @author andrea
*/
class DebugUtils {
static String payload2Str(ByteBuffer content) {
byte[] b = new byte[content.remaining()];
content.mark();
content.get(b);
content.reset();
View file
Edit file
Delete file
@@ -21,6 +21,7 @@
import io.moquette.broker.subscriptions.Topic;
import io.moquette.broker.security.IAuthorizatorPolicy;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.Unpooled;
import io.netty.handler.codec.mqtt.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
@@ -99,19 +100,21 @@ private void publishRetainedMessagesForSubscriptions(String clientID, List<Subsc
Session targetSession = this.sessionRegistry.retrieve(clientID);
for (Subscription subscription : newSubscriptions) {
final String topicFilter = subscription.getTopicFilter().toString();
final MqttPublishMessage retainedMsg = retainedRepository.retainedOnTopic(topicFilter);
final List<RetainedMessage> retainedMsgs = retainedRepository.retainedOnTopic(topicFilter);
if (retainedMsg == null) {
if (retainedMsgs.isEmpty()) {
// not found
continue;
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Added copyright and license notice to every source file, added about.… · moquette-io/moquette@666cc29 · GitHub
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRecEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRelDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRelEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PublishDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PublishEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubAckEncoder.java
return new String(b);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
}
final MqttQoS retainedQos = retainedMsg.fixedHeader().qosLevel();
MqttQoS qos = lowerQosToTheSubscriptionDesired(subscription, retainedQos);
final ByteBuf origPayload = retainedMsg.payload();
ByteBuf payload = origPayload.retainedDuplicate();
targetSession.sendRetainedPublishOnSessionAtQos(subscription.getTopicFilter(), qos, payload);
for (RetainedMessage retainedMsg : retainedMsgs) {
final MqttQoS retainedQos = retainedMsg.qosLevel();
MqttQoS qos = lowerQosToTheSubscriptionDesired(subscription, retainedQos);
// final ByteBuf origPayload = retainedMsg.getPayload();
final ByteBuf payloadBuf = Unpooled.wrappedBuffer(retainedMsg.getPayload());
// ByteBuf payload = origPayload.retainedDuplicate();
targetSession.sendRetainedPublishOnSessionAtQos(subscription.getTopicFilter(), qos, payloadBuf);
}
}
}
24
broker/src/main/java/io/moquette/broker/RetainedMessage.java
Show comments
View file
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubscribeDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubscribeEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/Utils.java
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Edit file
Delete file
@@ -0,0 +1,24 @@
package io.moquette.broker;
import io.netty.handler.codec.mqtt.MqttQoS;
import java.io.Serializable;
public class RetainedMessage implements Serializable{
private final MqttQoS qos;
private final byte[] payload;
public RetainedMessage(MqttQoS qos, byte[] payload) {
this.qos = qos;
this.payload = payload;
}
public MqttQoS qosLevel() {
return qos;
}
public byte[] getPayload() {
return payload;
}
}
5
broker/src/main/java/io/moquette/broker/Server.java
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
213851335a
moquette/broker/src/main/java/io/moquette/persistence/H2RetainedRepository.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
moquette/PostOfficePublishTest.java at 213851335a4f22fc30796911d5bebcd1d26fb7c7 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnAckEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnectDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnectEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PubAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PubAckEncoderTest.java
+15
−0
Show comments
View file
Edit file
Delete file
@@ -162,21 +162,24 @@ public void startServer(IConfig config, List<? extends InterceptHandler> handler
final ISubscriptionsRepository subscriptionsRepository;
final IQueueRepository queueRepository;
final IRetainedRepository retainedRepository;
if (persistencePath != null && !persistencePath.isEmpty()) {
LOG.trace("Configuring H2 subscriptions store to {}", persistencePath);
h2Builder = new H2Builder(config, scheduler).initStore();
subscriptionsRepository = h2Builder.subscriptionsRepository();
queueRepository = h2Builder.queueRepository();
retainedRepository = h2Builder.retainedRepository();
} else {
LOG.trace("Configuring in-memory subscriptions store");
subscriptionsRepository = new MemorySubscriptionsRepository();
queueRepository = new MemoryQueueRepository();
retainedRepository = new MemoryRetainedRepository();
55 lines (45 sloc)
1.66 KB
Raw
Blame
package io.moquette.persistence;
import io.moquette.broker.IRetainedRepository;
import io.moquette.broker.RetainedMessage;
import io.moquette.broker.subscriptions.Topic;
import io.netty.buffer.ByteBuf;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import org.h2.mvstore.MVMap;
import org.h2.mvstore.MVStore;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
public class H2RetainedRepository implements IRetainedRepository {
private final MVMap<Topic, RetainedMessage> queueMap;
public H2RetainedRepository(MVStore mvStore) {
this.queueMap = mvStore.openMap("retained_store");
}
@Override
public void cleanRetained(Topic topic) {
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
moquette/ChangeLog.txt at 213851335a4f22fc30796911d5bebcd1d26fb7c7 · moquette-io/moquette · GitHub
Updated the pax-runner to fix issue #40 · moquette-io/moquette@0bbe719 · GitHub
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PublishDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PublishEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubAckEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubscribeDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubscribeEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/TestUtils.java
+15
moquette/.editorconfig at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
}
ISubscriptionsDirectory subscriptions = new CTrieSubscriptionDirectory();
subscriptions.init(subscriptionsRepository);
SessionRegistry sessions = new SessionRegistry(subscriptions, queueRepository);
dispatcher = new PostOffice(subscriptions, authorizatorPolicy, new MemoryRetainedRepository(), sessions,
dispatcher = new PostOffice(subscriptions, authorizatorPolicy, retainedRepository, sessions,
interceptor);
final BrokerConfiguration brokerConfig = new BrokerConfiguration(config);
MQTTConnectionFactory connectionFactory = new MQTTConnectionFactory(brokerConfig, authenticator, sessions,
5
broker/src/main/java/io/moquette/persistence/H2Builder.java
Show comments
View file
Edit file
Delete file
@@ -2,6 +2,7 @@
import io.moquette.BrokerConstants;
import io.moquette.broker.IQueueRepository;
import io.moquette.broker.IRetainedRepository;
import io.moquette.broker.ISubscriptionsRepository;
import io.moquette.broker.config.IConfig;
queueMap.remove(topic);
}
@Override
public void retain(Topic topic, MqttPublishMessage msg) {
final ByteBuf payload = msg.content();
byte[] rawPayload = new byte[payload.readableBytes()];
payload.getBytes(0, rawPayload);
final RetainedMessage toStore = new RetainedMessage(msg.fixedHeader().qosLevel(), rawPayload);
queueMap.put(topic, toStore);
}
@Override
public boolean isEmpty() {
return queueMap.isEmpty();
}
@Override
public List<RetainedMessage> retainedOnTopic(String topic) {
final Topic searchTopic = new Topic(topic);
final List<RetainedMessage> matchingMessages = new ArrayList<>();
for (Map.Entry<Topic, RetainedMessage> entry : queueMap.entrySet()) {
final Topic scanTopic = entry.getKey();
if (searchTopic.match(scanTopic)) {
matchingMessages.add(entry.getValue());
Added implementation of retained store in H2 · moquette-io/moquette@2138513 · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Added copyright and license notice to every source file, added about.…
…html and license.htl
Loading branch information
andsel
committed
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
−1
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeDecoderTest.java
+15
−1
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UtilsTest.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/commons/Constants.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/MQTTException.java
+15
−4
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/Utils.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/AbstractMessage.java
+15
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
import org.h2.mvstore.MVStore;
@@ -57,4 +58,8 @@ public void closeStore() {
public IQueueRepository queueRepository() {
return new H2QueueRepository(mvStore);
}
public IRetainedRepository retainedRepository() {
return new H2RetainedRepository(mvStore);
}
}
55
broker/src/main/java/io/moquette/persistence/H2RetainedRepository.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,55 @@
package io.moquette.persistence;
import io.moquette.broker.IRetainedRepository;
import io.moquette.broker.RetainedMessage;
}
}
return matchingMessages;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
moquette/IStorageService.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Jun 11, 2014
1 parent
0bbe719
commit 666cc29d47f57fc00798856e335e5270c0075a10
Unified
Split
Showing
133 changed files
with
2,569 additions
and 13 deletions.
+28
−0
about.html
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
+15
−0
moquette/FileAuthenticator.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/IMatchingCondition.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/IMessaging.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ConnAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ConnectMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/DisconnectMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/MessageIDMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PingReqMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PingRespMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubAckMessage.java
+15
−0
moquette/HawtDBStorageService.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Separated CTrie as data structure from the rest of CTrieSubscriptionD… · moquette-io/moquette@80daadf · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
import io.moquette.broker.subscriptions.Topic;
import io.netty.buffer.ByteBuf;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import org.h2.mvstore.MVMap;
import org.h2.mvstore.MVStore;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
public class H2RetainedRepository implements IRetainedRepository {
private final MVMap<Topic, RetainedMessage> queueMap;
public H2RetainedRepository(MVStore mvStore) {
this.queueMap = mvStore.openMap("retained_store");
}
@Override
public void cleanRetained(Topic topic) {
queueMap.remove(topic);
}
@Override
public void retain(Topic topic, MqttPublishMessage msg) {
final ByteBuf payload = msg.content();
byte[] rawPayload = new byte[payload.readableBytes()];
payload.getBytes(0, rawPayload);
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
moquette/IPersistentSubscriptionStore.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
213851335a
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubCompMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubRecMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubRelMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PublishMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/SubAckMessage.java
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
moquette/ProtocolProcessor.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
final RetainedMessage toStore = new RetainedMessage(msg.fixedHeader().qosLevel(), rawPayload);
queueMap.put(topic, toStore);
}
@Override
public boolean isEmpty() {
return queueMap.isEmpty();
}
@Override
public List<RetainedMessage> retainedOnTopic(String topic) {
final Topic searchTopic = new Topic(topic);
final List<RetainedMessage> matchingMessages = new ArrayList<>();
for (Map.Entry<Topic, RetainedMessage> entry : queueMap.entrySet()) {
final Topic scanTopic = entry.getKey();
if (searchTopic.match(scanTopic)) {
matchingMessages.add(entry.getValue());
}
}
return matchingMessages;
}
}
10
broker/src/test/java/io/moquette/broker/PostOfficePublishTest.java
moquette/SimpleMessaging.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
moquette/broker/src/test/java/io/moquette/broker/PostOfficePublishTest.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
415 lines (350 sloc)
18.8 KB
Raw
Blame
/*
* Copyright (c) 2012-2018 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
moquette/ValueEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/DisconnectEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/MemoryStorageService.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
213851335a
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Updated the pax-runner to fix issue #40
Loading branch information
andsel
committed
Jun 11, 2014
1 parent
c231471
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/SubscribeMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/UnsubAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/UnsubscribeMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ZeroLengthMessage.java
28
about.html
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,28 @@
moquette/InitEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/LostConnectionEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Show comments
View file
Edit file
Delete file
@@ -390,7 +390,7 @@ public void cleanRetainedMessageStoreWhenPublishWithRetainedQos0IsReceived() {
sut.receivedPublishQos1(connection, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
publishMsg);
assertMessageIsRetained(NEWS_TOPIC);
assertMessageIsRetained(NEWS_TOPIC, anyPayload);
// publish a QoS0 retained message
// Exercise
@@ -406,8 +406,10 @@ public void cleanRetainedMessageStoreWhenPublishWithRetainedQos0IsReceived() {
assertTrue("Retained message for topic /news must be cleared", retainedRepository.isEmpty());
}
private void assertMessageIsRetained(String expectedTopicName) {
MqttPublishMessage msg = retainedRepository.retainedOnTopic(expectedTopicName);
assertEquals(expectedTopicName, msg.variableHeader().topicName());
private void assertMessageIsRetained(String expectedTopicName, ByteBuf expectedPayload) {
List<RetainedMessage> msgs = retainedRepository.retainedOnTopic(expectedTopicName);
assertEquals(1, msgs.size());
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Added implementation of retained store in H2
Loading branch information
andsel
committed
Nov 28, 2018
1 parent
80daadf
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.broker;
import io.moquette.broker.security.PermitAllAuthorizatorPolicy;
import io.moquette.broker.subscriptions.CTrieSubscriptionDirectory;
import io.moquette.broker.subscriptions.ISubscriptionsDirectory;
import io.moquette.broker.subscriptions.Subscription;
import io.moquette.broker.subscriptions.Topic;
import io.moquette.persistence.MemorySubscriptionsRepository;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.ByteBufUtil;
import io.netty.buffer.Unpooled;
import io.netty.buffer.UnpooledByteBufAllocator;
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/RepublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/StopEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/SubscribeEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/storage/StoredPublishEvent.java
+15
−0
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
moquette/ChangeLog.txt
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
103 lines (93 sloc)
6.14 KB
Raw
Blame
Version 0.12:
Fixed issue #415
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
Rewritten completly the broker to introduce the concept of MqttConnection
Dropped suppoert for MapDB and keeped only H2 MvStore for persistence
Version 0.10:
Netty epoll system added
Separated in memory and MapDB storage implementations
Cleanly separated inflight part (inbound and outbound)
Version 0.9:
Moved canRead check to topic from publish phase to subscribe (#144)
Added javadoc and src jars creations for JCenter/Maven central
commit 0bbe719f16eb9e8c1d5a93dc5515945703150580
Unified
Split
Showing
1 changed file
with
3 additions
and 2 deletions.
+3
−2
bundle/pom.xml
5
bundle/pom.xml
Show comments
View file
Edit file
Delete file
@@ -212,12 +212,13 @@
<!-- Pax Runner Maven plugin -->
<groupId>org.ops4j</groupId>
<artifactId>maven-pax-plugin</artifactId>
<version>1.4</version>
<version>1.5</version>
<configuration>
moquette/OutputMessagingEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
moquette/PubAckEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>About</title>
</head>
<body lang="EN-US">
<h2>About Moquette MQT broker</h2>
<p>June 11, 2014</p>
<h3>License</h3>
<p>The Eclipse Foundation makes available all content in this plug-in (&quot;Moquette MQTT&quot;). Unless otherwise
indicated below, the Content is provided to you under the terms and conditions of the
Eclipse Public License Version 1.0 (&quot;EPL&quot;). A copy of the EPL is available
at <a href="http://www.eclipse.org/legal/epl-v10.html">http://www.eclipse.org/legal/epl-v10.html</a>.
For purposes of the EPL, &quot;Program&quot; will mean the Content.</p>
<p>If you did not receive this Content directly from the Eclipse Foundation, the Content is
being redistributed by another party (&quot;Redistributor&quot;) and different terms and conditions may
apply to your use of any object code in the Content. Check the Redistributor's license that was
provided with the Content. If no such license exists, contact the Redistributor. Unless otherwise
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
moquette/PublishEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
moquette/.editorconfig
Go to file
Go to file
moquette/MessagingEvent.java at 666cc29d47f57fc00798856e335e5270c0075a10 · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
RetainedMessage msg = msgs.get(0);
assertEquals(ByteBufUtil.hexDump(expectedPayload), ByteBufUtil.hexDump(msg.getPayload()));
}
}
Toggle all file notes
0 comments
on commit 2138513
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
commit 213851335a4f22fc30796911d5bebcd1d26fb7c7
Unified
Split
Showing
9 changed files
with
132 additions
and 20 deletions.
+2
−0
ChangeLog.txt
+3
−1
broker/src/main/java/io/moquette/broker/IRetainedRepository.java
+21
−5
broker/src/main/java/io/moquette/broker/MemoryRetainedRepository.java
import io.netty.channel.Channel;
import io.netty.channel.embedded.EmbeddedChannel;
import io.netty.handler.codec.mqtt.*;
import org.junit.Before;
import org.junit.Test;
import java.nio.charset.Charset;
import java.util.*;
import static io.moquette.broker.PostOfficeUnsubscribeTest.CONFIG;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_LEAST_ONCE;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_MOST_ONCE;
import static io.netty.handler.codec.mqtt.MqttQoS.EXACTLY_ONCE;
import static java.util.Collections.singleton;
import static java.util.Collections.singletonMap;
import static org.junit.Assert.*;
public class PostOfficePublishTest {
private static final String FAKE_CLIENT_ID = "FAKE_123";
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/Subscription.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/SubscriptionsStore.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/Token.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/TreeNode.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ConfigurationParser.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ConnectionDescriptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/Constants.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/IAuthenticator.java
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Added persisting of clean session flag for already existing client session (fix issue #145)
Moved the message logic management fo FSM, to better control the concurrency.
Changed default config to use in memory store and not default moquette.mapdb
Version 0.8:
Introduced authenticator and authorizator implementations.
Fixed bug, doesn't close the channel when connect doesn't contains a valid proto name, issue #65
Fixed bug, does not check for zero length topic (filters) in PUBLISH, SUBSCRIBE, and UNSUBSCRIBE, issue #67
Fixed issue #69
Fixed bug #68, UNSUBSCRIBE has to fail on bad topicFilter names
Fixed bug #81, on stop of moquette broker it doesn't shutdown due to no shutdown of ringbuffer used on the back of ProtocolProcessor
Moved config to be not only filesystem based, but also classpath and memory (fix issue #73)
Switched from commit persistence on every change to time based to fix delay in handling many msgs/sec (fix issue #79)
Changed willMessage and password in CONNECT message from String to byte[] (fix issue #94 and #95)
Fixed ugly empty session storage, avoid fake NullObject empty subscription subscription
Added check to avoid creation of LostConnectionEvents for not yet completed connects (fix issue #88)
Removed LMAX ringbuffer to use multi threading with persistent (copy on write) data structures
Fixed bug that on connection stolen dropped also the new connection (fix issue #108)
Refactored the storage part to be more rational and use ClientSession concept
Added config property 'autosave_interval' (issue #97)
Removed leaking ref to parent's node (issue #119 and #126)
Added internal publish once the broker is embedded (issue #113)
<!-- Pax Runner version -->
<runner>1.4.0</runner>
<runner>1.8.5</runner>
<!-- OSGi framework type (equinox, felix, knopflerfish) -->
<framework>equinox</framework>
<!--<framework>felix</framework>-->
<provision>
<!-- <param> - -log=debug</param>
<param> - -workingDirectory=target/runner</param> -->
Toggle all file notes
0 comments
on commit 0bbe719
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
indicated below, the terms and conditions of the EPL still apply to any source code in the Content
and such source code may be obtained at <a href="http://www.eclipse.org/">http://www.eclipse.org</a>.</p>
</body>
</html>
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
16 lines (13 sloc)
299 Bytes
Raw
Blame
# EditorConfig is awesome: http://EditorConfig.org
# top-most EditorConfig file
root = true
# Unix-style newlines with a newline ending every file
[*]
end_of_line = lf
insert_final_newline = true
charset = utf-8
indent_style = space
indent_size = 4
max_line_length=120
[*.gradle]
indent_size = 2
Copy lines
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
+12
−9
broker/src/main/java/io/moquette/broker/PostOffice.java
+24
−0
broker/src/main/java/io/moquette/broker/RetainedMessage.java
+4
−1
broker/src/main/java/io/moquette/broker/Server.java
+5
−0
broker/src/main/java/io/moquette/persistence/H2Builder.java
+55
−0
broker/src/main/java/io/moquette/persistence/H2RetainedRepository.java
+6
−4
broker/src/test/java/io/moquette/broker/PostOfficePublishTest.java
2
ChangeLog.txt
Show comments
View file
Edit file
private static final String FAKE_CLIENT_ID2 = "FAKE_456";
static final String SUBSCRIBER_ID = "Subscriber";
static final String PUBLISHER_ID = "Publisher";
private static final String TEST_USER = "fakeuser";
private static final String TEST_PWD = "fakepwd";
private static final String NEWS_TOPIC = "/news";
private static final String BAD_FORMATTED_TOPIC = "#MQTTClient";
private MQTTConnection connection;
private EmbeddedChannel channel;
private PostOffice sut;
private ISubscriptionsDirectory subscriptions;
public static final String FAKE_USER_NAME = "UnAuthUser";
private MqttConnectMessage connectMessage;
private SessionRegistry sessionRegistry;
private MockAuthenticator mockAuthenticator;
static final BrokerConfiguration ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID =
new BrokerConfiguration(true, true, false);
private MemoryRetainedRepository retainedRepository;
private MemoryQueueRepository queueRepository;
@Before
public void setUp() {
sessionRegistry = initPostOfficeAndSubsystems();
mockAuthenticator = new MockAuthenticator(singleton(FAKE_CLIENT_ID), singletonMap(TEST_USER, TEST_PWD));
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
71 lines (55 sloc)
2.33 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/Server.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ServerAcceptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ServerChannel.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/MoquetteIdleTimoutHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyAcceptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyChannel.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyMQTTHandler.java
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Removed client active/not active state from persistence (issue #118)
Avoid deletion of client descriptor in case of multiple clients with same clientID (issues #116 and #124)
Removed a queue per client of inFlightIds (never cleaned) in favor of single atomic generator
Version 0.7:
Fix issue #38, added aligned to MQTT 3.1.1
Refactored big event switch to @Annotation dispatcher
Switched from HawtDB to MapDB
Fixed bug that didn't update client subscription on persistent store so that on server restart there where ghost subscriptions.
Fixed Issue #11, multiple republish of persisted QoS1/2 messages on clients reconnections.
Refactored the publish logic for QoS 1 2 to try to be more readable
Added packetIdentifier storage and generation
Fixed issue #16, bad packetId for will messages with qos > 0
Added store path variable "persistent_store" to configuration file (picked from Steven Warwick fork)
Removed OSGi bundle, developer time burner
Fixed github issue #30, returning error on mapdb file not deleted that corrupt reiterated builds
Added handling of allow_anonymous clients (as in mosquitto issue #34)
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Separated CTrie as data structure from the rest of CTrieSubscriptionD…
…irectory
Loading branch information
andsel
committed
Nov 24, 2018
1 parent
f3daad5
commit 80daadff4748a450b693a4761fb1b2a12f742655
Unified
Split
Showing
6 changed files
Security Policy · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
moquette/checkstyle.xml at master · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Delete file
@@ -1,6 +1,8 @@
Version 0.12:
Version 0.12:
Fixed issue #415
Fixed issue #415
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
Dropped Hazelcast because at the moment Moquette is not designed to be clusterizable
Rewritten completly the broker to introduce the concept of MqttConnection
Dropped suppoert for MapDB and keeped only H2 MvStore for persistence
Version 0.10:
Version 0.10:
Netty epoll system added
Netty epoll system added
4
broker/src/main/java/io/moquette/broker/IRetainedRepository.java
Show comments
View file
Edit file
Delete file
@@ -18,6 +18,8 @@
import io.moquette.broker.subscriptions.Topic;
import io.moquette.broker.subscriptions.Topic;
connection = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID);
connectMessage = ConnectionTestUtils.buildConnect(FAKE_CLIENT_ID);
}
private MQTTConnection createMQTTConnection(BrokerConfiguration config) {
channel = new EmbeddedChannel();
return createMQTTConnection(config, channel);
}
private MQTTConnection createMQTTConnection(BrokerConfiguration config, Channel channel) {
return new MQTTConnection(channel, config, mockAuthenticator, sessionRegistry, sut);
}
private SessionRegistry initPostOfficeAndSubsystems() {
subscriptions = new CTrieSubscriptionDirectory();
ISubscriptionsRepository subscriptionsRepository = new MemorySubscriptionsRepository();
subscriptions.init(subscriptionsRepository);
retainedRepository = new MemoryRetainedRepository();
queueRepository = new MemoryQueueRepository();
SessionRegistry sessionRegistry = new SessionRegistry(subscriptions, queueRepository);
sut = new PostOffice(subscriptions, new PermitAllAuthorizatorPolicy(), retainedRepository, sessionRegistry,
ConnectionTestUtils.NO_OBSERVERS_INTERCEPTOR);
return sessionRegistry;
}
@Test
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import java.nio.ByteBuffer;
import org.dna.mqtt.moquette.messaging.spi.impl.events.PublishEvent;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import static org.dna.mqtt.moquette.messaging.spi.impl.HawtDBStorageService.StoredMessage;
import java.util.Collection;
import java.util.List;
/**
* Defines the SPI to be implemented by a StorageService that handle persistence of messages and subscriptions.
*/
public interface IStorageService extends IPersistentSubscriptionStore {
/**
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetrics.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetricsCollector.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetricsHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetrics.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetricsCollector.java
+15
−1
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetricsHandler.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticatorTest.java
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
105 lines (92 sloc)
3.51 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
Cannot retrieve contributors at this time
23 lines (21 sloc)
724 Bytes
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
/**
*/
Copy path
Cannot retrieve contributors at this time
35 lines (29 sloc)
1.06 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
Modified the password_file format to use password stored in sha256 and not plain text
Added ACL file for topic read|write operations.
Removed cause of leakage of Netty Sessions (fix issue #39)
Cleaned Netty's stuff reference from Events used in Disruptor (fix issue #40)
Bad assignment of PacketID during publish to subscribed QoS0 topics (fix issue #38)
Fixed duplicated subscription with different QoS same client and topic (fix issue #49)
Fixed UNSUBSCRIBE that missed to remove the subscription from the persistent store (fix issue #50)
Fixed issue on multiple publish for overlapping subscription by the same client (fix issue #52).
Moved the authorization check before dropping an already connected client with same clientID (fix issue #44).
Fixed subscription tree that was unable to update clean session flag on subs with same client, topic and qos (fix issue #55)
Fixed overwriting of published qos in forward publish loop (fix issue #56)
Version 0.6:
Fix issue #42, bad password file path composition
Fix issue #43, missed topic case (finance/+ does has to match finance)
Integrated WebSocket support (issue #37)
Integrated SSL support (issue #41)
Fixed issue #40, check Logging inside the Felix OSGi
Fixed issue #46, implement correct behaviour for Will stuff
Splitted stores to persist messages and sessions into different interfaces
Renamed some methods in sessions store
Moved logging conf and slf4j-log4j deps out of broker to let it use the container's log configuration
Version 0.5:
Reject
Save preferences
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
moquette/license-eplv10-aslv20.html at master · moquette-io/moquette · GitHub
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
/
Added Apache 2.0 license · moquette-io/moquette@af8c0e3 · GitHub
Fixed checkStyle and ErrorProne warns · moquette-io/moquette@033a428 · GitHub
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Copy path
Cannot retrieve contributors at this time
313 lines (264 sloc)
12 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
Join GitHub · GitHub
with
327 additions
and 285 deletions.
+233
−0
broker/src/main/java/io/moquette/broker/subscriptions/CTrie.java
+9
−196
broker/src/main/java/io/moquette/broker/subscriptions/CTrieSubscriptionDirectory.java
+1
−1
broker/src/main/java/io/moquette/broker/subscriptions/DumpTreeVisitor.java
+1
−1
broker/src/main/java/io/moquette/broker/subscriptions/SubscriptionCounterVisitor.java
+22
−22
broker/src/test/java/io/moquette/broker/subscriptions/CTrieSubscriptionDirectoryMatchingTest.java
+61
−65
Join GitHub · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
526 lines (447 sloc)
23.6 KB
Raw
Blame
/*
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
223 lines (187 sloc)
9.43 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
Go to definition
R
Copy path
Cannot retrieve contributors at this time
33 lines (28 sloc)
1.04 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import java.util.List;
public interface IRetainedRepository {
public interface IRetainedRepository {
void cleanRetained(Topic topic);
void cleanRetained(Topic topic);
@@ -26,5 +28,5 @@
boolean isEmpty();
boolean isEmpty();
MqttPublishMessage retainedOnTopic(String topic);
List<RetainedMessage> retainedOnTopic(String topic);
}
}
26
broker/src/main/java/io/moquette/broker/MemoryRetainedRepository.java
Show comments
View file
Edit file
Delete file
@@ -16,8 +16,12 @@
package io.moquette.broker;
public void testPublishQoS0ToItself() {
connection.processConnect(connectMessage);
ConnectionTestUtils.assertConnectAccepted(channel);
// subscribe
subscribe(AT_MOST_ONCE, NEWS_TOPIC, connection);
// Exercise
final ByteBuf payload = Unpooled.copiedBuffer("Hello world!", Charset.defaultCharset());
sut.receivedPublishQos0(new Topic(NEWS_TOPIC), TEST_USER, FAKE_CLIENT_ID, payload, false,
MqttMessageBuilders.publish()
.payload(payload.retainedDuplicate())
.qos(MqttQoS.AT_MOST_ONCE)
.retained(false)
.topicName(NEWS_TOPIC).build());
// Verify
ConnectionTestUtils.verifyReceivePublish(channel, NEWS_TOPIC, "Hello world!");
}
@Test
public void testForceClientDisconnection_issue116() {
final MQTTConnection clientXA = connectAs("subscriber");
subscribe(clientXA, NEWS_TOPIC, AT_MOST_ONCE);
final MQTTConnection clientXB = connectAs("publisher");
final ByteBuf anyPayload = Unpooled.copiedBuffer("Hello", Charset.defaultCharset());
sut.receivedPublishQos2(clientXB, MqttMessageBuilders.publish()
.payload(anyPayload)
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
37 lines (30 sloc)
1002 Bytes
Raw
Blame
/*
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
161 lines (136 sloc)
6.13 KB
Raw
* Used to initialize all persistent store structures
* */
void initStore();
/**
* Persist the message.
* If the message is empty then the topic is cleaned, else it's stored.
*/
void storeRetained(String topic, ByteBuffer message, AbstractMessage.QOSType qos);
/**
* Return a list of retained messages that satisfy the condition.
*/
Collection<StoredMessage> searchMatching(IMatchingCondition condition);
void storePublishForFuture(PublishEvent evt);
/**
* Return the list of persisted publishes for the given clientID.
* For QoS1 and QoS2 with clean session flag, this method return the list of
* missed publish events while the client was disconnected.
*/
List<PublishEvent> retrievePersistedPublishes(String clientID);
void cleanPersistedPublishMessage(String clientID, int messageID);
void cleanPersistedPublishes(String clientID);
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageServiceTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/MockAuthenticator.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessorTest.java
+15
−0
.../src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/SubscriptionsStoreTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ConfigurationParserTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/MQTTWebSocket.java
+15
−1
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationFuseTest.java
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.text.ParseException;
import java.util.HashMap;
import java.util.Map;
import org.dna.mqtt.moquette.server.IAuthenticator;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
/**
*
* @author andrea
*/
public class FileAuthenticator implements IAuthenticator {
private static final Logger LOG = LoggerFactory.getLogger(FileAuthenticator.class);
private Map<String, String> m_identities = new HashMap<String, String>();
FileAuthenticator(String parent, String filePath) {
File file = new File(parent, filePath);
public interface IMatchingCondition {
boolean match(String key);
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.server.ServerChannel;
/**
* Interface to the underling messaging system used to publish, subscribe.
*
* @author andrea
*/
public interface IMessaging {
void stop();
void disconnect(ServerChannel session);
void lostConnection(String clientID);
void handleProtocolMessage(ServerChannel session, AbstractMessage msg);
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Fix issue 20 (no flush of message on PINGREQ)
Fix issue 21 (bad channel timeout handler)
Created a self contained distribution package (issue 22)
Fix issue 28, OSGi-fied the broker
Fixed issue #31 missed to insert the hawtdb jars
Added a separate mvn module to host the OSGi bundle declaration
Fixed issue #30
Added password file for identity management on connect (Fix #23)
Version 0.4:
Dropped support for MINA
Fix Issue 15 (bad re-activation of client's subscriptions after a recconection)
Fix Issue 16 (bad re-publish of stored messages after a client reconnection)
Fixed a bug in unsubscribe due to missed clientID check
Fixed Issue 18 (descriptor of a disconnected (not active) client)
Bug fix for override subscriptions to the same /topic but with different QoS (latest wins)
Added test to check the downgrading of QoS of messages sent to registered subscribers (fixed a bug of double delivery of QoS2 messages)
Version 0.3:
Added Netty IO connectors
Dropped tests based on Fuse source client lib moving to Paho java client
Version 0.2:
Fixed issues (10, 11, 12, 13)
Fixed interdependency bug in test
Copy lines
Copy permalink
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import java.util.List;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
Show comments
View file
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
34 lines (28 sloc)
936 Bytes
Raw
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
34 lines (30 sloc)
978 Bytes
import java.io.File;
import java.io.IOException;
import java.io.Serializable;
import java.nio.ByteBuffer;
import java.util.*;
import org.dna.mqtt.moquette.MQTTException;
import org.dna.mqtt.moquette.messaging.spi.IMatchingCondition;
import org.dna.mqtt.moquette.messaging.spi.IStorageService;
import org.dna.mqtt.moquette.messaging.spi.impl.events.PublishEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.storage.StoredPublishEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.subscriptions.Subscription;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.server.Server;
import org.fusesource.hawtbuf.codec.StringCodec;
import org.fusesource.hawtdb.api.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
/**
* Implementation of IStorageService backed by HawtDB
*/
public class HawtDBStorageService implements IStorageService {
public static class StoredMessage implements Serializable {
AbstractMessage.QOSType m_qos;
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
233
broker/src/main/java/io/moquette/broker/subscriptions/CTrie.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,233 @@
package io.moquette.broker.subscriptions;
import java.util.Collections;
import java.util.HashSet;
import java.util.Optional;
import java.util.Set;
public class CTrie {
interface IVisitor<T> {
void visit(CNode node, int deep);
T getResult();
}
private static final Token ROOT = new Token("root");
private static final INode NO_PARENT = null;
private enum Action {
OK, REPEAT
}
INode root;
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
moquette/mvnw at master · moquette-io/moquette · GitHub
moquette/mvnw.cmd at master · moquette-io/moquette · GitHub
moquette/pom.xml at master · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
import com.lmax.disruptor.EventHandler;
import com.lmax.disruptor.RingBuffer;
import com.lmax.disruptor.SequenceBarrier;
import java.nio.ByteBuffer;
import java.util.Collection;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
import com.lmax.disruptor.EventHandler;
import com.lmax.disruptor.RingBuffer;
import com.lmax.disruptor.SequenceBarrier;
import java.util.Properties;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;
import org.dna.mqtt.moquette.messaging.spi.IMessaging;
package org.dna.mqtt.moquette.messaging.spi;
import java.util.List;
import org.dna.mqtt.moquette.messaging.spi.impl.subscriptions.Subscription;
/**
* Store used to handle the persistence of the subscriptions tree.
*
* @author andrea
*/
public interface IPersistentSubscriptionStore {
void addNewSubscription(Subscription newSubscription, String clientID);
void removeAllSubscriptions(String clientID);
List<Subscription> retrieveAllSubscriptions();
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
package io.moquette.broker;
import io.moquette.broker.subscriptions.Topic;
import io.moquette.broker.subscriptions.Topic;
import io.netty.buffer.ByteBuf;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;
import java.util.concurrent.ConcurrentMap;
@@ -26,16 +30,20 @@
* */
* */
final class MemoryRetainedRepository implements IRetainedRepository {
final class MemoryRetainedRepository implements IRetainedRepository {
private final ConcurrentMap<String, MqttPublishMessage> storage = new ConcurrentHashMap<>();
private final ConcurrentMap<Topic, RetainedMessage> storage = new ConcurrentHashMap<>();
@Override
@Override
public void cleanRetained(Topic topic) {
.qos(MqttQoS.EXACTLY_ONCE)
.retained(false)
.topicName(NEWS_TOPIC).build(), "username");
final MQTTConnection clientYA = connectAs("subscriber");
subscribe(clientYA, NEWS_TOPIC, AT_MOST_ONCE);
final MQTTConnection clientYB = connectAs("publisher");
final ByteBuf anyPayload2 = Unpooled.copiedBuffer("Hello 2", Charset.defaultCharset());
sut.receivedPublishQos2(clientYB, MqttMessageBuilders.publish()
.payload(anyPayload2)
.qos(MqttQoS.EXACTLY_ONCE)
.retained(true)
.topicName(NEWS_TOPIC).build(), "username");
// Verify
assertFalse("First 'subscriber' channel MUST be closed by the broker", clientXA.channel.isOpen());
ConnectionTestUtils.verifyPublishIsReceived((EmbeddedChannel) clientYA.channel, AT_MOST_ONCE, "Hello 2");
}
private MQTTConnection connectAs(String clientId) {
EmbeddedChannel channel = new EmbeddedChannel();
MQTTConnection connection = createMQTTConnection(CONFIG, channel);
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
44 lines (37 sloc)
1.23 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.server.ServerChannel;
/**
*
* @author andrea
*/
public class DisconnectEvent extends MessagingEvent {
ServerChannel m_session;
public DisconnectEvent(ServerChannel session) {
m_session = session;
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
import java.util.ArrayList;
import org.dna.mqtt.moquette.messaging.spi.IMatchingCondition;
import org.dna.mqtt.moquette.messaging.spi.IStorageService;
import org.dna.mqtt.moquette.messaging.spi.impl.events.PublishEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.subscriptions.Subscription;
void cleanInFlight(String msgID);
void addInFlight(PublishEvent evt, String publishKey);
void close();
void persistQoS2Message(String publishKey, PublishEvent evt);
void removeQoS2Message(String publishKey);
PublishEvent retrieveQoS2Message(String publishKey);
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationPahoTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationQoSValidationTest.java
+15
−3
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationSSLTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationWebSocketTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerLowlevelMessagesIntegrationTests.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerRestartIntegrationTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/TestCallback.java
+15
LOG.info("Loading password file: " + file);
if (file.isDirectory()) {
LOG.warn(String.format("Bad file reference %s is a directory", file));
return;
}
try {
FileReader reader = new FileReader(file);
parse(reader);
} catch (FileNotFoundException fex) {
LOG.warn(String.format("Parsing not existing file %s", file), fex);
} catch (ParseException pex) {
LOG.warn(String.format("Fromat ero in parsing password file %s", file), pex);
}
}
private void parse(Reader reader) throws ParseException {
if (reader == null) {
return;
}
BufferedReader br = new BufferedReader(reader);
String line;
try {
while ((line = br.readLine()) != null) {
int commentMarker = line.indexOf('#');
if (commentMarker != -1) {
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Sign up for free
Dismiss
666cc29d47
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
byte[] m_payload;
String m_topic;
StoredMessage(byte[] message, AbstractMessage.QOSType qos, String topic) {
m_qos = qos;
m_payload = message;
m_topic = topic;
}
AbstractMessage.QOSType getQos() {
return m_qos;
}
ByteBuffer getPayload() {
return (ByteBuffer) ByteBuffer.allocate(m_payload.length).put(m_payload).flip();
}
String getTopic() {
return m_topic;
}
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
CTrie() {
final CNode mainNode = new CNode();
mainNode.token = ROOT;
this.root = new INode(mainNode);
}
Optional<CNode> lookup(Topic topic) {
INode inode = this.root;
Token token = topic.headToken();
while (!topic.isEmpty() && (inode.mainNode().anyChildrenMatch(token))) {
topic = topic.exceptHeadToken();
inode = inode.mainNode().childOf(token);
token = topic.headToken();
}
if (inode == null || !topic.isEmpty()) {
return Optional.empty();
}
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
moquette/broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import org.dna.mqtt.moquette.messaging.spi.IMatchingCondition;
import org.dna.mqtt.moquette.messaging.spi.IStorageService;
import org.dna.mqtt.moquette.messaging.spi.impl.events.MessagingEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.events.OutputMessagingEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.events.PubAckEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.events.PublishEvent;
import org.dna.mqtt.moquette.messaging.spi.impl.subscriptions.Subscription;
import org.dna.mqtt.moquette.messaging.spi.impl.subscriptions.SubscriptionsStore;
import org.dna.mqtt.moquette.proto.messages.PubCompMessage;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.proto.messages.ConnAckMessage;
import org.dna.mqtt.moquette.messaging.spi.IStorageService;
import org.dna.mqtt.moquette.messaging.spi.impl.events.*;
import org.dna.mqtt.moquette.messaging.spi.impl.subscriptions.SubscriptionsStore;
import org.dna.mqtt.moquette.proto.messages.PubCompMessage;
import org.dna.mqtt.moquette.proto.messages.*;
import org.dna.mqtt.moquette.server.Constants;
import org.dna.mqtt.moquette.server.IAuthenticator;
import org.dna.mqtt.moquette.server.ServerChannel;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
/**
*
* Singleton class that orchestrate the execution of the protocol.
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
public void cleanRetained(Topic topic) {
storage.remove(topic.toString());
storage.remove(topic);
}
}
@Override
@Override
public void retain(Topic topic, MqttPublishMessage msg) {
public void retain(Topic topic, MqttPublishMessage msg) {
storage.put(topic.toString(), msg);
final ByteBuf payload = msg.content();
byte[] rawPayload = new byte[payload.readableBytes()];
payload.getBytes(0, rawPayload);
final RetainedMessage toStore = new RetainedMessage(msg.fixedHeader().qosLevel(), rawPayload);
connection.processConnect(ConnectionTestUtils.buildConnect(clientId));
ConnectionTestUtils.assertConnectAccepted(channel);
return connection;
}
private void subscribe(MqttQoS topic, String newsTopic, MQTTConnection connection) {
MqttSubscribeMessage subscribe = MqttMessageBuilders.subscribe()
.addSubscription(topic, newsTopic)
.messageId(1)
.build();
sut.subscribeClientToTopics(subscribe, connection.getClientId(), null, this.connection);
MqttSubAckMessage subAck = ((EmbeddedChannel) this.connection.channel).readOutbound();
assertEquals(topic.value(), (int) subAck.payload().grantedQoSLevels().get(0));
}
protected void subscribe(MQTTConnection connection, String topic, MqttQoS desiredQos) {
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.EventFactory;
import org.dna.mqtt.moquette.messaging.spi.impl.events.MessagingEvent;
/**
* Carrier value object for the RingBuffer.
*
* @author andrea
*/
public final class ValueEvent {
private MessagingEvent m_event;
public MessagingEvent getEvent() {
return m_event;
}
}
public ServerChannel getSession() {
return m_session;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import java.util.Collection;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
−0
broker/src/test/java/org/dna/mqtt/moquette/testclient/Client.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/testclient/ClientNettyMQTTHandler.java
+15
−0
bundle/src/main/java/org/dna/mqtt/moquette/bundle/Activator.java
+576
−0
license-eplv10-aslv20.html
+15
−0
if (commentMarker == 0) {
//skip its a comment
continue;
} else {
//it's a malformed comment
throw new ParseException(line, commentMarker);
}
} else {
if (line.isEmpty() || line.matches("^\\s*$")) {
//skip it's a black line
continue;
}
Learn more
Accept
Reject
Save preferences
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Copy path
Cannot retrieve contributors at this time
43 lines (36 sloc)
1.21 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
Cannot retrieve contributors at this time
39 lines (33 sloc)
1.07 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import java.util.Properties;
/**
*/
public final class InitEvent extends MessagingEvent {
private Properties config;
public InitEvent(Properties config) {
this.config = config;
}
public Properties getConfig() {
return config;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
* Used to model the connection lost event
*
* @author andrea
*/
public class LostConnectionEvent extends MessagingEvent{
private String m_clientID;
public LostConnectionEvent(String clienID) {
m_clientID = clienID;
}
public String getClientID() {
return m_clientID;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
}
private static final Logger LOG = LoggerFactory.getLogger(HawtDBStorageService.class);
private MultiIndexFactory m_multiIndexFactory;
private PageFileFactory pageFactory;
//maps clientID to the list of pending messages stored
//TODO move in a multimap because only Qos1 and QoS2 are stored here and they have messageID(key of secondary map)
private SortedIndex<String, List<StoredPublishEvent>> m_persistentMessageStore;
private SortedIndex<String, StoredMessage> m_retainedStore;
//bind clientID+MsgID -> evt message published
private SortedIndex<String, StoredPublishEvent> m_inflightStore;
//bind clientID+MsgID -> evt message published
private SortedIndex<String, StoredPublishEvent> m_qos2Store;
//persistent Map of clientID, set of Subscriptions
private SortedIndex<String, Set<Subscription>> m_persistentSubscriptions;
public HawtDBStorageService() {
String storeFile = Server.STORAGE_FILE_PATH;
pageFactory = new PageFileFactory();
File tmpFile;
try {
tmpFile = new File(storeFile);
tmpFile.createNewFile();
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
return Optional.of(inode.mainNode());
}
enum NavigationAction {
MATCH, GODEEP, STOP
}
private NavigationAction evaluate(Topic topic, CNode cnode) {
if (Token.MULTI.equals(cnode.token)) {
return NavigationAction.MATCH;
}
if (topic.isEmpty()) {
return NavigationAction.STOP;
}
final Token token = topic.headToken();
if (!(Token.SINGLE.equals(cnode.token) || cnode.token.equals(token) || ROOT.equals(cnode.token))) {
return NavigationAction.STOP;
}
return NavigationAction.GODEEP;
}
public Set<Subscription> recursiveMatch(Topic topic) {
return recursiveMatch(topic, this.root);
}
private Set<Subscription> recursiveMatch(Topic topic, INode inode) {
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
0
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Overview
106 lines (91 sloc)
2.91 KB
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Cannot retrieve contributors at this time
25 lines (23 sloc)
790 Bytes
Raw
Blame
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
*Event used to push work request on the SimpleMessaging.
import org.dna.mqtt.moquette.proto.messages.ConnectMessage;
import org.dna.mqtt.moquette.proto.messages.PubAckMessage;
import org.dna.mqtt.moquette.proto.messages.PubRecMessage;
import org.dna.mqtt.moquette.proto.messages.PubRelMessage;
import org.dna.mqtt.moquette.proto.messages.PublishMessage;
import org.dna.mqtt.moquette.proto.messages.SubAckMessage;
import org.dna.mqtt.moquette.proto.messages.SubscribeMessage;
import org.dna.mqtt.moquette.proto.messages.UnsubAckMessage;
import org.dna.mqtt.moquette.server.ConnectionDescriptor;
import org.dna.mqtt.moquette.server.Constants;
import org.dna.mqtt.moquette.server.IAuthenticator;
import org.dna.mqtt.moquette.server.ServerChannel;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
/**
* Class responsible to handle the logic of MQTT protocol it's the director of
* the protocol execution.
*
* Used by the front facing class SimpleMessaging.
*
* @author andrea
*/
*
* Uses the LMAX Disruptor to serialize the incoming, requests, because it work in a evented fashion.
*
* @author andrea
*/
public class SimpleMessaging implements IMessaging, EventHandler<ValueEvent> {
private static final Logger LOG = LoggerFactory.getLogger(SimpleMessaging.class);
private SubscriptionsStore subscriptions;
private RingBuffer<ValueEvent> m_ringBuffer;
private IStorageService m_storageService;
private ExecutorService m_executor;
BatchEventProcessor<ValueEvent> m_eventProcessor;
private static SimpleMessaging INSTANCE;
private ProtocolProcessor m_processor = new ProtocolProcessor();
CountDownLatch m_stopLatch;
private SimpleMessaging() {
}
public static SimpleMessaging getInstance() {
if (INSTANCE == null) {
INSTANCE = new SimpleMessaging();
}
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
storage.put(topic, toStore);
}
}
@Override
@Override
@@ -44,7 +52,15 @@ public boolean isEmpty() {
}
}
@Override
@Override
public MqttPublishMessage retainedOnTopic(String topic) {
public List<RetainedMessage> retainedOnTopic(String topic) {
return storage.get(topic);
final Topic searchTopic = new Topic(topic);
final List<RetainedMessage> matchingMessages = new ArrayList<>();
for (Map.Entry<Topic, RetainedMessage> entry : storage.entrySet()) {
final Topic scanTopic = entry.getKey();
if (searchTopic.match(scanTopic)) {
matchingMessages.add(entry.getValue());
}
}
return matchingMessages;
EmbeddedChannel channel = (EmbeddedChannel) connection.channel;
MqttSubscribeMessage subscribe = MqttMessageBuilders.subscribe()
.addSubscription(desiredQos, topic)
.messageId(1)
.build();
sut.subscribeClientToTopics(subscribe, connection.getClientId(), null, connection);
MqttSubAckMessage subAck = channel.readOutbound();
assertEquals(desiredQos.value(), (int) subAck.payload().grantedQoSLevels().get(0));
final String clientId = connection.getClientId();
Subscription expectedSubscription = new Subscription(clientId, new Topic(topic), desiredQos);
final Set<Subscription> matchedSubscriptions = subscriptions.matchWithoutQosSharpening(new Topic(topic));
assertEquals(1, matchedSubscriptions.size());
final Subscription onlyMatchedSubscription = matchedSubscriptions.iterator().next();
assertEquals(expectedSubscription, onlyMatchedSubscription);
}
@Test
public void testPublishToMultipleSubscribers() {
final Set<String> clientIds = new HashSet<>(Arrays.asList(FAKE_CLIENT_ID, FAKE_CLIENT_ID2));
mockAuthenticator = new MockAuthenticator(clientIds, singletonMap(TEST_USER, TEST_PWD));
EmbeddedChannel channel1 = new EmbeddedChannel();
MQTTConnection connection1 = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID, channel1);
connection1.processConnect(ConnectionTestUtils.buildConnect(FAKE_CLIENT_ID));
public void setEvent(MessagingEvent event) {
m_event = event;
}
public final static EventFactory<ValueEvent> EVENT_FACTORY = new EventFactory<ValueEvent>() {
public ValueEvent newInstance() {
return new ValueEvent();
}
};
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
/**
*/
public class MemoryStorageService implements IStorageService {
private Map<String, Set<Subscription>> m_persistentSubscriptions = new HashMap<String, Set<Subscription>>();
private Map<String, HawtDBStorageService.StoredMessage> m_retainedStore = new HashMap<String, HawtDBStorageService.StoredMessage>();
//TODO move in a multimap because only Qos1 and QoS2 are stored here and they have messageID(key of secondary map)
private Map<String, List<PublishEvent>> m_persistentMessageStore = new HashMap<String, List<PublishEvent>>();
private Map<String, PublishEvent> m_inflightStore = new HashMap<String, PublishEvent>();
private Map<String, PublishEvent> m_qos2Store = new HashMap<String, PublishEvent>();
private static final Logger LOG = LoggerFactory.getLogger(MemoryStorageService.class);
public void initStore() {
//To change body of implemented methods use File | Settings | File Templates.
}
public void storeRetained(String topic, ByteBuffer message, AbstractMessage.QOSType qos) {
if (!message.hasRemaining()) {
//clean the message from topic
m_retainedStore.remove(topic);
} else {
//store the message to the topic
byte[] raw = new byte[message.remaining()];
message.get(raw);
m_retainedStore.put(topic, new HawtDBStorageService.StoredMessage(raw, qos, topic));
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnectDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnectEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DemuxDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DemuxEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DisconnectDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DisconnectEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MQTTDecoder.java
//split till the first space
int deilimiterIdx = line.indexOf(':');
String username = line.substring(0, deilimiterIdx).trim();
String password = line.substring(deilimiterIdx + 1).trim();
m_identities.put(username, password);
}
}
} catch (IOException ex) {
throw new ParseException("Failed to read", 1);
}
}
public boolean checkValid(String username, String password) {
String foundPwq = m_identities.get(username);
if (foundPwq == null) {
return false;
}
return foundPwq.equals(password);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.server.ServerChannel;
/**
*
* @author andrea
*/
public class OutputMessagingEvent extends MessagingEvent {
private ServerChannel m_channel;
private AbstractMessage m_message;
public OutputMessagingEvent(ServerChannel channel, AbstractMessage message) {
m_channel = channel;
m_message = message;
}
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
* Used to send the ack message back to the client after a publish
*/
public class PubAckEvent extends MessagingEvent {
int m_messageId;
String m_clientID;
public PubAckEvent(int messageID, String clientID) {
m_messageId = messageID ;
m_clientID = clientID;
}
public int getMessageId() {
return m_messageId;
}
public String getClientID() {
return m_clientID;
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
Show comments
View file
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
} catch (IOException ex) {
LOG.error(null, ex);
throw new MQTTException("Can't create temp file for subscriptions storage [" + storeFile + "]", ex);
}
pageFactory.setFile(tmpFile);
pageFactory.open();
PageFile pageFile = pageFactory.getPageFile();
m_multiIndexFactory = new MultiIndexFactory(pageFile);
}
public void initStore() {
initRetainedStore();
//init the message store for QoS 1/2 messages in clean sessions
initPersistentMessageStore();
initInflightMessageStore();
initPersistentSubscriptions();
initPersistentQoS2MessageStore();
}
private void initRetainedStore() {
BTreeIndexFactory<String, StoredMessage> indexFactory = new BTreeIndexFactory<String, StoredMessage>();
indexFactory.setKeyCodec(StringCodec.INSTANCE);
m_retainedStore = (SortedIndex<String, StoredMessage>) m_multiIndexFactory.openOrCreate("retained", indexFactory);
}
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
CNode cnode = inode.mainNode();
NavigationAction action = evaluate(topic, cnode);
if (action == NavigationAction.MATCH) {
return cnode.subscriptions;
}
if (action == NavigationAction.STOP) {
return Collections.emptySet();
}
if (cnode instanceof TNode) {
return Collections.emptySet();
}
Topic remainingTopic = (ROOT.equals(cnode.token)) ? topic : topic.exceptHeadToken();
Set<Subscription> subscriptions = new HashSet<>();
if (remainingTopic.isEmpty()) {
subscriptions.addAll(cnode.subscriptions);
}
for (INode subInode : cnode.allChildren()) {
subscriptions.addAll(recursiveMatch(remainingTopic, subInode));
}
return subscriptions;
}
public void addToTree(Subscription newSubscription) {
Action res;
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Bump junit from 4.8.2 to 4.13.1 by dependabot · Pull Request #544 · moquette-io/moquette · GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Security policy
Security advisories
0
Overview
Security policy
Security advisories
0
No security policy detected
This project has not set up a SECURITY.md file yet.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage.QOSType;
import java.nio.ByteBuffer;
import org.dna.mqtt.moquette.proto.messages.PublishMessage;
import org.dna.mqtt.moquette.server.ServerChannel;
/**
*
* @author andrea
*/
public class PublishEvent extends MessagingEvent {
String m_topic;
QOSType m_qos;
//byte[] m_message;
ByteBuffer m_message;
boolean m_retain;
String m_clientID;
//Optional attribute, available only fo QoS 1 and 2
int m_msgID;
transient ServerChannel m_session;
public PublishEvent(PublishMessage pubMsg, String clientID, ServerChannel session) {
m_topic = pubMsg.getTopicName();
m_qos = pubMsg.getQos();
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
moquette/checkstyle.xml
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
154 lines (151 sloc)
6.01 KB
Raw
Blame
*
* @author andrea
*/
public abstract class MessagingEvent {
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
class ProtocolProcessor implements EventHandler<ValueEvent> {
private static final Logger LOG = LoggerFactory.getLogger(ProtocolProcessor.class);
private Map<String, ConnectionDescriptor> m_clientIDs = new HashMap<String, ConnectionDescriptor>();
private SubscriptionsStore subscriptions;
private IStorageService m_storageService;
private IAuthenticator m_authenticator;
private ExecutorService m_executor;
BatchEventProcessor<ValueEvent> m_eventProcessor;
private RingBuffer<ValueEvent> m_ringBuffer;
ProtocolProcessor() {}
/**
* @param subscriptions the subscription store where are stored all the existing
* clients subscriptions.
* @param storageService the persistent store to use for save/load of messages
* for QoS1 and QoS2 handling.
* @param authenticator the authenticator used in connect messages
*/
void init(SubscriptionsStore subscriptions, IStorageService storageService,
IAuthenticator authenticator) {
//m_clientIDs = clientIDs;
this.subscriptions = subscriptions;
m_authenticator = authenticator;
return INSTANCE;
}
public void init(Properties configProps) {
subscriptions = new SubscriptionsStore();
m_executor = Executors.newFixedThreadPool(1);
m_ringBuffer = new RingBuffer<ValueEvent>(ValueEvent.EVENT_FACTORY, 1024 * 32);
SequenceBarrier barrier = m_ringBuffer.newBarrier();
m_eventProcessor = new BatchEventProcessor<ValueEvent>(m_ringBuffer, barrier, this);
//TODO in a presentation is said to don't do the followinf line!!
m_ringBuffer.setGatingSequences(m_eventProcessor.getSequence());
m_executor.submit(m_eventProcessor);
disruptorPublish(new InitEvent(configProps));
}
private void disruptorPublish(MessagingEvent msgEvent) {
LOG.debug("disruptorPublish publishing event {}", msgEvent);
long sequence = m_ringBuffer.next();
ValueEvent event = m_ringBuffer.get(sequence);
event.setEvent(msgEvent);
m_ringBuffer.publish(sequence);
}
public void disconnect(ServerChannel session) {
}
}
}
}
21
broker/src/main/java/io/moquette/broker/PostOffice.java
Show comments
View file
Edit file
Delete file
@@ -21,6 +21,7 @@
import io.moquette.broker.subscriptions.Topic;
import io.moquette.broker.subscriptions.Topic;
import io.moquette.broker.security.IAuthorizatorPolicy;
import io.moquette.broker.security.IAuthorizatorPolicy;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.Unpooled;
import io.netty.handler.codec.mqtt.*;
import io.netty.handler.codec.mqtt.*;
import org.slf4j.Logger;
import org.slf4j.Logger;
ConnectionTestUtils.assertConnectAccepted(channel1);
EmbeddedChannel channel2 = new EmbeddedChannel();
MQTTConnection connection2 = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID, channel2);
connection2.processConnect(ConnectionTestUtils.buildConnect(FAKE_CLIENT_ID2));
ConnectionTestUtils.assertConnectAccepted(channel2);
// subscribe
final MqttQoS qos = AT_MOST_ONCE;
final String newsTopic = NEWS_TOPIC;
subscribe(qos, newsTopic, connection1);
subscribe(qos, newsTopic, connection2);
// Exercise
final ByteBuf payload = Unpooled.copiedBuffer("Hello world!", Charset.defaultCharset());
sut.receivedPublishQos0(new Topic(NEWS_TOPIC), TEST_USER, FAKE_CLIENT_ID, payload, false,
MqttMessageBuilders.publish()
.payload(payload.retainedDuplicate())
.qos(MqttQoS.AT_MOST_ONCE)
.retained(false)
.topicName(NEWS_TOPIC).build());
// Verify
ConnectionTestUtils.verifyReceivePublish(channel1, NEWS_TOPIC, "Hello world!");
ConnectionTestUtils.verifyReceivePublish(channel2, NEWS_TOPIC, "Hello world!");
}
@Test
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
}
}
public Collection<HawtDBStorageService.StoredMessage> searchMatching(IMatchingCondition condition) {
LOG.debug("searchMatching scanning all retained messages, presents are {}", m_retainedStore.size());
List<HawtDBStorageService.StoredMessage> results = new ArrayList<HawtDBStorageService.StoredMessage>();
for (Map.Entry<String, HawtDBStorageService.StoredMessage> entry : m_retainedStore.entrySet()) {
HawtDBStorageService.StoredMessage storedMsg = entry.getValue();
if (condition.match(entry.getKey())) {
results.add(storedMsg);
}
}
return results;
}
public void storePublishForFuture(PublishEvent evt) {
LOG.debug("storePublishForFuture store evt {}", evt);
List<PublishEvent> storedEvents;
String clientID = evt.getClientID();
if (!m_persistentMessageStore.containsKey(clientID)) {
storedEvents = new ArrayList<PublishEvent>();
} else {
storedEvents = m_persistentMessageStore.get(clientID);
}
storedEvents.add(evt);
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MQTTEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MessageIDDecoder.java
+15
−1
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingReqDecoder.java
+15
−1
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingReqEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingRespDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingRespEncoder.java
+15
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
public ServerChannel getChannel() {
return m_channel;
}
public AbstractMessage getMessage() {
return m_message;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.BufferedReader;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
Show comments
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
moquette/license-eplv10-aslv20.html
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Added Apache 2.0 license
Loading branch information
andsel
committed
Oct 4, 2013
1 parent
f4162c2
commit af8c0e3b9a186faf144f51218b934188af8b1120
Unified
Split
Showing
1 changed file
with
205 additions
and 0 deletions.
+205
−0
license.txt
205
license.txt
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Fixed checkStyle and ErrorProne warns
Loading branch information
andsel
committed
Apr 26, 2018
1 parent
1a6dd8a
commit 033a428184ce1e8a134fda082c04346ac6858c61
Unified
Split
Showing
81 changed files
with
681 additions
and 425 deletions.
+3
−1
broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
+4
−2
broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
private void initPersistentMessageStore() {
BTreeIndexFactory<String, List<StoredPublishEvent>> indexFactory = new BTreeIndexFactory<String, List<StoredPublishEvent>>();
indexFactory.setKeyCodec(StringCodec.INSTANCE);
m_persistentMessageStore = (SortedIndex<String, List<StoredPublishEvent>>) m_multiIndexFactory.openOrCreate("persistedMessages", indexFactory);
}
private void initPersistentSubscriptions() {
BTreeIndexFactory<String, Set<Subscription>> indexFactory = new BTreeIndexFactory<String, Set<Subscription>>();
indexFactory.setKeyCodec(StringCodec.INSTANCE);
m_persistentSubscriptions = (SortedIndex<String, Set<Subscription>>) m_multiIndexFactory.openOrCreate("subscriptions", indexFactory);
}
/**
* Initialize the message store used to handle the temporary storage of QoS 1,2
* messages in flight.
*/
private void initInflightMessageStore() {
BTreeIndexFactory<String, StoredPublishEvent> indexFactory = new BTreeIndexFactory<String, StoredPublishEvent>();
indexFactory.setKeyCodec(StringCodec.INSTANCE);
m_inflightStore = (SortedIndex<String, StoredPublishEvent>) m_multiIndexFactory.openOrCreate("inflight", indexFactory);
}
private void initPersistentQoS2MessageStore() {
BTreeIndexFactory<String, StoredPublishEvent> indexFactory = new BTreeIndexFactory<String, StoredPublishEvent>();
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
do {
res = insert(newSubscription.topicFilter, this.root, newSubscription);
} while (res == Action.REPEAT);
}
private Action insert(Topic topic, final INode inode, Subscription newSubscription) {
Token token = topic.headToken();
if (!topic.isEmpty() && inode.mainNode().anyChildrenMatch(token)) {
Topic remainingTopic = topic.exceptHeadToken();
INode nextInode = inode.mainNode().childOf(token);
return insert(remainingTopic, nextInode, newSubscription);
} else {
if (topic.isEmpty()) {
return insertSubscription(inode, newSubscription);
} else {
return createNodeAndInsertSubscription(topic, inode, newSubscription);
}
}
}
private Action insertSubscription(INode inode, Subscription newSubscription) {
CNode cnode = inode.mainNode();
CNode updatedCnode = cnode.copy().addSubscription(newSubscription);
if (inode.compareAndSet(cnode, updatedCnode)) {
return Action.OK;
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
m_message = pubMsg.getPayload();
m_retain = pubMsg.isRetainFlag();
m_clientID = clientID;
m_session = session;
if (pubMsg.getQos() != QOSType.MOST_ONE) {
m_msgID = pubMsg.getMessageID();
}
}
public PublishEvent(String topic, QOSType qos, ByteBuffer message, boolean retain,
String clientID, ServerChannel session) {
m_topic = topic;
m_qos = qos;
m_message = message;
m_retain = retain;
m_clientID = clientID;
m_session = session;
}
public PublishEvent(String topic, QOSType qos, ByteBuffer message, boolean retain,
String clientID, int msgID, ServerChannel session) {
this(topic, qos, message, retain, clientID, session);
m_msgID = msgID;
}
public String getTopic() {
return m_topic;
<?xml version="1.0" encoding="UTF-8"?>
<!--
~ Copyright 2012 The Netty Project
~
~ The Netty Project licenses this file to you under the Apache License,
~ version 2.0 (the "License"); you may not use this file except in compliance
~ with the License. You may obtain a copy of the License at:
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
~ License for the specific language governing permissions and limitations
~ under the License.
-->
<!DOCTYPE module PUBLIC
"-//Puppy Crawl//DTD Check Configuration 1.2//EN"
"http://www.puppycrawl.com/dtds/configuration_1_2.dtd">
<module name="Checker">
<property name="severity" value="warning"/>
<!--
<module name="SuppressionFilter">
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
m_storageService = storageService;
//init the output ringbuffer
m_executor = Executors.newFixedThreadPool(1);
m_ringBuffer = new RingBuffer<ValueEvent>(ValueEvent.EVENT_FACTORY, 1024 * 32);
SequenceBarrier barrier = m_ringBuffer.newBarrier();
m_eventProcessor = new BatchEventProcessor<ValueEvent>(m_ringBuffer, barrier, this);
//TODO in a presentation is said to don't do the followinf line!!
m_ringBuffer.setGatingSequences(m_eventProcessor.getSequence());
m_executor.submit(m_eventProcessor);
}
void processConnect(ServerChannel session, ConnectMessage msg) {
LOG.debug("processConnect for client {}", msg.getClientID());
if (msg.getProcotolVersion() != 0x03) {
ConnAckMessage badProto = new ConnAckMessage();
badProto.setReturnCode(ConnAckMessage.UNNACEPTABLE_PROTOCOL_VERSION);
LOG.warn("processConnect sent bad proto ConnAck");
session.write(badProto);
session.close(false);
return;
}
if (msg.getClientID() == null || msg.getClientID().length() > 23) {
ConnAckMessage okResp = new ConnAckMessage();
okResp.setReturnCode(ConnAckMessage.IDENTIFIER_REJECTED);
disruptorPublish(new DisconnectEvent(session));
}
public void lostConnection(String clientID) {
disruptorPublish(new LostConnectionEvent(clientID));
}
public void handleProtocolMessage(ServerChannel session, AbstractMessage msg) {
disruptorPublish(new ProtocolEvent(session, msg));
}
public void stop() {
m_stopLatch = new CountDownLatch(1);
disruptorPublish(new StopEvent());
try {
//wait the callback notification from the protocol processor thread
boolean elapsed = !m_stopLatch.await(10, TimeUnit.SECONDS);
if (elapsed) {
LOG.error("Can't stop the server in 10 seconds");
}
} catch (InterruptedException ex) {
LOG.error(null, ex);
}
}
public void onEvent(ValueEvent t, long l, boolean bln) throws Exception {
MessagingEvent evt = t.getEvent();
LOG.info("onEvent processing messaging event from input ringbuffer {}", evt);
import org.slf4j.LoggerFactory;
import org.slf4j.LoggerFactory;
@@ -99,19 +100,21 @@ private void publishRetainedMessagesForSubscriptions(String clientID, List<Subsc
Session targetSession = this.sessionRegistry.retrieve(clientID);
Session targetSession = this.sessionRegistry.retrieve(clientID);
for (Subscription subscription : newSubscriptions) {
for (Subscription subscription : newSubscriptions) {
final String topicFilter = subscription.getTopicFilter().toString();
final String topicFilter = subscription.getTopicFilter().toString();
final MqttPublishMessage retainedMsg = retainedRepository.retainedOnTopic(topicFilter);
final List<RetainedMessage> retainedMsgs = retainedRepository.retainedOnTopic(topicFilter);
if (retainedMsg == null) {
if (retainedMsgs.isEmpty()) {
// not found
// not found
continue;
continue;
}
}
for (RetainedMessage retainedMsg : retainedMsgs) {
final MqttQoS retainedQos = retainedMsg.fixedHeader().qosLevel();
final MqttQoS retainedQos = retainedMsg.qosLevel();
public void testPublishWithEmptyPayloadClearRetainedStore() {
connection.processConnect(connectMessage);
ConnectionTestUtils.assertConnectAccepted(channel);
this.retainedRepository.retain(new Topic(NEWS_TOPIC), MqttMessageBuilders.publish()
.payload(ByteBufUtil.writeAscii(UnpooledByteBufAllocator.DEFAULT, "Hello world!"))
.qos(AT_LEAST_ONCE)
.build());
// Exercise
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
sut.receivedPublishQos0(new Topic(NEWS_TOPIC), TEST_USER, FAKE_CLIENT_ID, anyPayload, true,
MqttMessageBuilders.publish()
.payload(anyPayload)
.qos(MqttQoS.AT_MOST_ONCE)
.retained(false)
.topicName(NEWS_TOPIC).build());
// Verify
assertTrue("QoS0 MUST clean retained message for topic", retainedRepository.isEmpty());
}
@Test
public void testPublishWithQoS1() {
connection.processConnect(connectMessage);
ConnectionTestUtils.assertConnectAccepted(channel);
subscribe(connection, NEWS_TOPIC, AT_LEAST_ONCE);
m_persistentMessageStore.put(clientID, storedEvents);
}
@Override
public List<PublishEvent> retrievePersistedPublishes(String clientID) {
return m_persistentMessageStore.get(clientID);
}
public void cleanPersistedPublishMessage(String clientID, int messageID) {
List<PublishEvent> events = m_persistentMessageStore.get(clientID);
PublishEvent toRemoveEvt = null;
for (PublishEvent evt : events) {
if (evt.getMessageID() == messageID) {
toRemoveEvt = evt;
}
}
events.remove(toRemoveEvt);
m_persistentMessageStore.put(clientID, events);
}
public void cleanPersistedPublishes(String clientID) {
m_persistentMessageStore.remove(clientID);
}
public void cleanInFlight(String msgID) {
m_inflightStore.remove(msgID);
}
public void addInFlight(PublishEvent evt, String publishKey) {
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubCompDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubCompEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRecDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRecEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRelDecoder.java
+15
−0
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.File;
15
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
576 lines (508 sloc)
29.3 KB
Raw
Blame
<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="ProgId" content="Word.Document">
<meta name="Generator" content="Microsoft Word 9">
<meta name="Originator" content="Microsoft Word 9">
<link rel="File-List" href="http://www.eclipse.org/legal/Eclipse%20EPL%202003_11_10%20Final_files/filelist.xml">
<title>Eclipse Public License - Version 1.0 / Apache License - Version 2.0</title>
<!--[if gte mso 9]><xml>
<o:DocumentProperties>
<o:Revision>2</o:Revision>
<o:TotalTime>3</o:TotalTime>
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,205 @@
Copyright 2012-2013 (c) Andrea Selva
Apache License
Version 2.0, January 2004
http://www.apache.org/licenses/
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
1. Definitions.
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
+1
−1
broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
+1
−2
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
+7
−3
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
+3
−1
broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
+5
−8
broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
+7
−2
broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
+3
−1
broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
+6
−2
indexFactory.setKeyCodec(StringCodec.INSTANCE);
m_qos2Store = (SortedIndex<String, StoredPublishEvent>) m_multiIndexFactory.openOrCreate("qos2Store", indexFactory);
}
@Override
public void storeRetained(String topic, ByteBuffer message, AbstractMessage.QOSType qos) {
if (!message.hasRemaining()) {
//clean the message from topic
m_retainedStore.remove(topic);
} else {
//store the message to the topic
byte[] raw = new byte[message.remaining()];
message.get(raw);
m_retainedStore.put(topic, new StoredMessage(raw, qos, topic));
}
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
} else {
return Action.REPEAT;
}
}
private Action createNodeAndInsertSubscription(Topic topic, INode inode, Subscription newSubscription) {
INode newInode = createPathRec(topic, newSubscription);
CNode cnode = inode.mainNode();
CNode updatedCnode = cnode.copy();
updatedCnode.add(newInode);
return inode.compareAndSet(cnode, updatedCnode) ? Action.OK : Action.REPEAT;
}
private INode createPathRec(Topic topic, Subscription newSubscription) {
Topic remainingTopic = topic.exceptHeadToken();
if (!remainingTopic.isEmpty()) {
INode inode = createPathRec(remainingTopic, newSubscription);
CNode cnode = new CNode();
cnode.token = topic.headToken();
cnode.add(inode);
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
moquette/mvnw
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
executable file
310 lines (277 sloc)
9.83 KB
Raw
Blame
#!/bin/sh
# ----------------------------------------------------------------------------
# Licensed to the Apache Software Foundation (ASF) under one
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
moquette/mvnw.cmd
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
182 lines (147 sloc)
6.45 KB
Raw
Blame
@REM ----------------------------------------------------------------------------
@REM Licensed to the Apache Software Foundation (ASF) under one
@REM or more contributor license agreements. See the NOTICE file
@REM distributed with this work for additional information
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
master
moquette/pom.xml
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
}
public QOSType getQos() {
return m_qos;
}
public ByteBuffer getMessage() {
return m_message;
}
public boolean isRetain() {
return m_retain;
}
public String getClientID() {
return m_clientID;
}
public int getMessageID() {
return m_msgID;
}
public ServerChannel getSession() {
return m_session;
}
@Override
public String toString() {
return "PublishEvent{" +
"m_msgID=" + m_msgID +
", m_clientID='" + m_clientID + '\'' +
<property name="file" value="checkstyle-suppressions.xml" />
</module>
<module name="io.netty.build.checkstyle.SuppressionFilter">
<property name="pattern" value="((LocalTime|WorldClock)Protocol|LinkedTransferQueue|Version|jzlib/.*|chmv8/.*|com/sun/nio/sctp/.*)\.java" />
</module>
-->
<module name="FileTabCharacter"/>
<!--
<module name="JavadocPackage"/>
-->
<module name="NewlineAtEndOfFile">
<property name="lineSeparator" value="lf" />
</module>
<!-- Copyright headers -->
<module name="RegexpSingleline">
<property name="format" value="^(\s|\*)*Copyright\s.*$"/>
<property name="minimum" value="1"/>
<property name="maximum" value="1"/>
<property name="message" value="missing copyright header"/>
</module>
<!-- Unmaintainable Javadoc tags -->
<!--module name="RegexpSingleline">
<property name="format" value="(@(author|version)|\(non-Javadoc\))"/>
<property name="ignoreCase" value="true"/>
session.write(okResp);
return;
}
//if an old client with the same ID already exists close its session.
if (m_clientIDs.containsKey(msg.getClientID())) {
//clean the subscriptions if the old used a cleanSession = true
ServerChannel oldSession = m_clientIDs.get(msg.getClientID()).getSession();
boolean cleanSession = (Boolean) oldSession.getAttribute(Constants.CLEAN_SESSION);
if (cleanSession) {
//cleanup topic subscriptions
processRemoveAllSubscriptions(msg.getClientID());
}
m_clientIDs.get(msg.getClientID()).getSession().close(false);
}
ConnectionDescriptor connDescr = new ConnectionDescriptor(msg.getClientID(), session, msg.isCleanSession());
m_clientIDs.put(msg.getClientID(), connDescr);
int keepAlive = msg.getKeepAlive();
LOG.debug("Connect with keepAlive {} s", keepAlive);
session.setAttribute(Constants.KEEP_ALIVE, keepAlive);
session.setAttribute(Constants.CLEAN_SESSION, msg.isCleanSession());
//used to track the client in the subscription and publishing phases.
session.setAttribute(Constants.ATTR_CLIENTID, msg.getClientID());
session.setIdleTime(Math.round(keepAlive * 1.5f));
if (evt instanceof PublishEvent) {
m_processor.processPublish((PublishEvent) evt);
} else if (evt instanceof StopEvent) {
processStop();
} else if (evt instanceof DisconnectEvent) {
DisconnectEvent disEvt = (DisconnectEvent) evt;
String clientID = (String) disEvt.getSession().getAttribute(Constants.ATTR_CLIENTID);
m_processor.processDisconnect(disEvt.getSession(), clientID, false);
} else if (evt instanceof ProtocolEvent) {
ServerChannel session = ((ProtocolEvent) evt).getSession();
AbstractMessage message = ((ProtocolEvent) evt).getMessage();
if (message instanceof ConnectMessage) {
m_processor.processConnect(session, (ConnectMessage) message);
} else if (message instanceof PublishMessage) {
PublishEvent pubEvt;
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
pubEvt = new PublishEvent((PublishMessage) message, clientID, session);
// if (message.getQos() == QOSType.MOST_ONE) {
// pubEvt = new PublishEvent(pubMsg.getTopicName(), pubMsg.getQos(), pubMsg.getPayload(), pubMsg.isRetainFlag(), clientID, session);
//
// } else {
// pubEvt = new PublishEvent(pubMsg.getTopicName(), pubMsg.getQos(), pubMsg.getPayload(), pubMsg.isRetainFlag(), clientID, pubMsg.getMessageID(), session);
// }
m_processor.processPublish(pubEvt);
MqttQoS qos = lowerQosToTheSubscriptionDesired(subscription, retainedQos);
MqttQoS qos = lowerQosToTheSubscriptionDesired(subscription, retainedQos);
final ByteBuf origPayload = retainedMsg.payload();
// final ByteBuf origPayload = retainedMsg.getPayload();
ByteBuf payload = origPayload.retainedDuplicate();
final ByteBuf payloadBuf = Unpooled.wrappedBuffer(retainedMsg.getPayload());
targetSession.sendRetainedPublishOnSessionAtQos(subscription.getTopicFilter(), qos, payload);
// ByteBuf payload = origPayload.retainedDuplicate();
targetSession.sendRetainedPublishOnSessionAtQos(subscription.getTopicFilter(), qos, payloadBuf);
}
}
}
}
}
24
broker/src/main/java/io/moquette/broker/RetainedMessage.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,24 @@
package io.moquette.broker;
import io.netty.handler.codec.mqtt.MqttQoS;
// Exercise
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
sut.receivedPublishQos1(connection, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
MqttMessageBuilders.publish()
.payload(Unpooled.copiedBuffer("Any payload", Charset.defaultCharset()))
.qos(MqttQoS.AT_LEAST_ONCE)
.retained(true)
.topicName(NEWS_TOPIC).build());
// Verify
ConnectionTestUtils.verifyPublishIsReceived(channel, AT_LEAST_ONCE, "Any payload");
}
@Test
public void testPublishWithQoS2() {
connection.processConnect(connectMessage);
ConnectionTestUtils.assertConnectAccepted(channel);
subscribe(connection, NEWS_TOPIC, EXACTLY_ONCE);
// Exercise
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
sut.receivedPublishQos2(connection, MqttMessageBuilders.publish()
.payload(anyPayload)
.qos(MqttQoS.EXACTLY_ONCE)
.retained(true)
m_inflightStore.put(publishKey, evt);
}
public void addNewSubscription(Subscription newSubscription, String clientID) {
if (!m_persistentSubscriptions.containsKey(clientID)) {
m_persistentSubscriptions.put(clientID, new HashSet<Subscription>());
}
Set<Subscription> subs = m_persistentSubscriptions.get(clientID);
if (!subs.contains(newSubscription)) {
subs.add(newSubscription);
m_persistentSubscriptions.put(clientID, subs);
}
}
public void removeAllSubscriptions(String clientID) {
m_persistentSubscriptions.remove(clientID);
}
public List<Subscription> retrieveAllSubscriptions() {
List<Subscription> allSubscriptions = new ArrayList<Subscription>();
for (Map.Entry<String, Set<Subscription>> entry : m_persistentSubscriptions.entrySet()) {
allSubscriptions.addAll(entry.getValue());
}
return allSubscriptions;
}
public void close() {
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRelEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PublishDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PublishEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubscribeDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubscribeEncoder.java
Learn more
Accept
Reject
Save preferences
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
<o:Created>2004-03-05T23:03:00Z</o:Created>
<o:LastSaved>2004-03-05T23:03:00Z</o:LastSaved>
<o:Pages>4</o:Pages>
<o:Words>1626</o:Words>
<o:Characters>9270</o:Characters>
<o:Lines>77</o:Lines>
<o:Paragraphs>18</o:Paragraphs>
<o:CharactersWithSpaces>11384</o:CharactersWithSpaces>
<o:Version>9.4402</o:Version>
</o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
<w:WordDocument>
<w:TrackRevisions/>
</w:WordDocument>
</xml><![endif]-->
<style>
<!--
/* Font Definitions */
@font-face
{font-family:Tahoma;
panose-1:2 11 6 4 3 5 4 4 2 4;
mso-font-charset:0;
mso-generic-font-family:swiss;
outstanding shares, or (iii) beneficial ownership of such entity.
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.
"Contribution" shall mean any work of authorship, including
broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
+8
−6
broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
+3
−1
broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
+2
−1
broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
+3
−1
broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
+0
−16
broker/src/main/java/io/moquette/spi/DurableSession.java
+16
−0
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
+32
−0
broker/src/main/java/io/moquette/spi/InboundFlightZone.java
}
@Override
public Collection<StoredMessage> searchMatching(IMatchingCondition condition) {
LOG.debug("searchMatching scanning all retained messages, presents are {}", m_retainedStore.size());
List<StoredMessage> results = new ArrayList<StoredMessage>();
for (Map.Entry<String, StoredMessage> entry : m_retainedStore) {
StoredMessage storedMsg = entry.getValue();
if (condition.match(entry.getKey())) {
results.add(storedMsg);
}
}
return results;
}
public void storePublishForFuture(PublishEvent evt) {
List<StoredPublishEvent> storedEvents;
String clientID = evt.getClientID();
if (!m_persistentMessageStore.containsKey(clientID)) {
storedEvents = new ArrayList<StoredPublishEvent>();
} else {
storedEvents = m_persistentMessageStore.get(clientID);
}
storedEvents.add(convertToStored(evt));
m_persistentMessageStore.put(clientID, storedEvents);
Learn more
Accept
Reject
Save preferences
return new INode(cnode);
} else {
return createLeafNodes(topic.headToken(), newSubscription);
}
}
private INode createLeafNodes(Token token, Subscription newSubscription) {
CNode newLeafCnode = new CNode();
newLeafCnode.token = token;
newLeafCnode.addSubscription(newSubscription);
return new INode(newLeafCnode);
}
public void removeFromTree(Topic topic, String clientID) {
Action res;
do {
res = remove(clientID, topic, this.root, NO_PARENT);
} while (res == Action.REPEAT);
}
private Action remove(String clientId, Topic topic, INode inode, INode iParent) {
Token token = topic.headToken();
if (!topic.isEmpty() && (inode.mainNode().anyChildrenMatch(token))) {
Topic remainingTopic = topic.exceptHeadToken();
INode nextInode = inode.mainNode().childOf(token);
# or more contributor license agreements. See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership. The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License. You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
# ----------------------------------------------------------------------------
# ----------------------------------------------------------------------------
# Maven Start Up Batch script
#
# Required ENV vars:
# ------------------
# JAVA_HOME - location of a JDK home dir
#
# Optional ENV vars
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
@REM regarding copyright ownership. The ASF licenses this file
@REM to you under the Apache License, Version 2.0 (the
@REM "License"); you may not use this file except in compliance
@REM with the License. You may obtain a copy of the License at
@REM
@REM http://www.apache.org/licenses/LICENSE-2.0
@REM
@REM Unless required by applicable law or agreed to in writing,
@REM software distributed under the License is distributed on an
@REM "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
@REM KIND, either express or implied. See the License for the
@REM specific language governing permissions and limitations
@REM under the License.
@REM ----------------------------------------------------------------------------
@REM ----------------------------------------------------------------------------
@REM Maven Start Up Batch script
@REM
@REM Required ENV vars:
@REM JAVA_HOME - location of a JDK home dir
@REM
@REM Optional ENV vars
@REM M2_HOME - location of maven2's installed home dir
@REM MAVEN_BATCH_ECHO - set to 'on' to enable the echoing of the batch commands
218 lines (197 sloc)
7.31 KB
Raw
Blame
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<!--<netty.version>4.1.12.Final</netty.version>-->
<source.version>1.8</source.version>
<target.version>1.8</target.version>
<bintray.repo>andsel/maven</bintray.repo>
<bintray.parent.package>io.moquette.moquette-parent</bintray.parent.package>
</properties>
<groupId>io.moquette</groupId>
<artifactId>moquette-parent</artifactId>
<packaging>pom</packaging>
<version>0.14-SNAPSHOT</version>
", m_retain=" + m_retain +
", m_qos=" + m_qos +
", m_topic='" + m_topic + '\'' +
'}';
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
<property name="message" value="unmaintainable Javadoc tags: @author, @version, or (non-Javadoc)"/>
</module-->
<!-- IDE-generated comment -->
<module name="RegexpSingleline">
<property name="format" value="File \| Settings \| File Templates"/>
<property name="message" value="IDE-generated comment"/>
</module>
<!-- Force UNIX line separator
<module name="io.netty.build.checkstyle.NewlineCheck"/>
-->
<!-- Trailing whitespace -->
<module name="RegexpSingleline">
<property name="format" value="\s+$"/>
<property name="message" value="trailing whitespace"/>
</module>
<!-- Prohibit consecutive empty lines (except the lines after package/import) -->
<module name="RegexpMultiline">
<property name="message" value="two or more consecutive empty lines"/>
</module>
<module name="RegexpMultiline">
<property name="message" value="an empty line before '}'"/>
</module>
<module name="RegexpMultiline">
//Handle will flag
if (msg.isWillFlag()) {
AbstractMessage.QOSType willQos = AbstractMessage.QOSType.values()[msg.getWillQos()];
byte[] willPayload = msg.getWillMessage().getBytes();
ByteBuffer bb = (ByteBuffer) ByteBuffer.allocate(willPayload.length).put(willPayload).flip();
PublishEvent pubEvt = new PublishEvent(msg.getWillTopic(), willQos,
bb, msg.isWillRetain(), msg.getClientID(), session);
processPublish(pubEvt);
}
//handle user authentication
if (msg.isUserFlag()) {
String pwd = null;
if (msg.isPasswordFlag()) {
pwd = msg.getPassword();
}
if (!m_authenticator.checkValid(msg.getUsername(), pwd)) {
ConnAckMessage okResp = new ConnAckMessage();
okResp.setReturnCode(ConnAckMessage.BAD_USERNAME_OR_PASSWORD);
session.write(okResp);
return;
}
}
} else if (message instanceof DisconnectMessage) {
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
boolean cleanSession = (Boolean) session.getAttribute(Constants.CLEAN_SESSION);
//close the TCP connection
//session.close(true);
m_processor.processDisconnect(session, clientID, cleanSession);
} else if (message instanceof UnsubscribeMessage) {
UnsubscribeMessage unsubMsg = (UnsubscribeMessage) message;
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
m_processor.processUnsubscribe(session, clientID, unsubMsg.topics(), unsubMsg.getMessageID());
} else if (message instanceof SubscribeMessage) {
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
boolean cleanSession = (Boolean) session.getAttribute(Constants.CLEAN_SESSION);
m_processor.processSubscribe(session, (SubscribeMessage) message, clientID, cleanSession);
} else if (message instanceof PubRelMessage) {
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
int messageID = ((PubRelMessage) message).getMessageID();
m_processor.processPubRel(clientID, messageID);
} else if (message instanceof PubRecMessage) {
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
int messageID = ((PubRecMessage) message).getMessageID();
m_processor.processPubRec(clientID, messageID);
} else if (message instanceof PubCompMessage) {
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
import java.io.Serializable;
public class RetainedMessage implements Serializable{
private final MqttQoS qos;
private final byte[] payload;
public RetainedMessage(MqttQoS qos, byte[] payload) {
this.qos = qos;
this.payload = payload;
}
public MqttQoS qosLevel() {
return qos;
}
public byte[] getPayload() {
return payload;
}
}
5
broker/src/main/java/io/moquette/broker/Server.java
Show comments
View file
Edit file
Delete file
.topicName(NEWS_TOPIC).build(), "username");
// Verify
ConnectionTestUtils.verifyPublishIsReceived(channel, EXACTLY_ONCE, "Any payload");
}
// aka testPublishWithQoS1_notCleanSession
@Test
public void forwardQoS1PublishesWhenNotCleanSessionReconnects() {
connection.processConnect(ConnectionTestUtils.buildConnectNotClean(FAKE_CLIENT_ID));
ConnectionTestUtils.assertConnectAccepted(channel);
subscribe(connection, NEWS_TOPIC, AT_LEAST_ONCE);
connection.processDisconnect(null);
// publish a QoS 1 message from another client publish a message on the topic
EmbeddedChannel pubChannel = new EmbeddedChannel();
MQTTConnection pubConn = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID, pubChannel);
pubConn.processConnect(ConnectionTestUtils.buildConnect(PUBLISHER_ID));
ConnectionTestUtils.assertConnectAccepted(pubChannel);
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
sut.receivedPublishQos1(pubConn, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
MqttMessageBuilders.publish()
.payload(anyPayload.retainedDuplicate())
.qos(MqttQoS.AT_LEAST_ONCE)
.topicName(NEWS_TOPIC).build());
// simulate a reconnection from the other client
//To change body of implemented methods use File | Settings | File Templates.
}
public void persistQoS2Message(String publishKey, PublishEvent evt) {
m_qos2Store.put(publishKey, evt);
}
public void removeQoS2Message(String publishKey) {
m_qos2Store.remove(publishKey);
}
public PublishEvent retrieveQoS2Message(String publishKey) {
return m_qos2Store.get(publishKey);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/Utils.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnAckEncoderTest.java
+15
−0
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
mso-font-pitch:variable;
mso-font-signature:553679495 -2147483648 8 0 66047 0;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
{mso-style-parent:"";
margin:0in;
margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-size:12.0pt;
font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";}
p
{margin-right:0in;
mso-margin-top-alt:auto;
mso-margin-bottom-alt:auto;
margin-left:0in;
mso-pagination:widow-orphan;
font-size:12.0pt;
font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";}
p.BalloonText, li.BalloonText, div.BalloonText
{mso-style-name:"Balloon Text";
margin:0in;
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.
2. Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+2
−2
broker/src/main/java/io/moquette/spi/TransientSession.java
+3
−1
broker/src/main/java/io/moquette/spi/impl/DebugUtils.java
+6
−4
broker/src/main/java/io/moquette/spi/impl/MessagesPublisher.java
+4
−4
broker/src/main/java/io/moquette/spi/impl/PersistentQueueMessageSender.java
+46
−71
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessor.java
+8
−6
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessorBootstrapper.java
+48
−0
broker/src/main/java/io/moquette/spi/impl/RunningSubscription.java
//NB rewind the evt message content
}
@Override
public List<PublishEvent> retrievePersistedPublishes(String clientID) {
List<StoredPublishEvent> storedEvts = m_persistentMessageStore.get(clientID);
if (storedEvts == null) {
return null;
}
List<PublishEvent> liveEvts = new ArrayList<PublishEvent>();
for (StoredPublishEvent storedEvt : storedEvts) {
liveEvts.add(convertFromStored(storedEvt));
}
return liveEvts;
}
public void cleanPersistedPublishMessage(String clientID, int messageID) {
List<StoredPublishEvent> events = m_persistentMessageStore.get(clientID);
if (events == null) {
return;
}
StoredPublishEvent toRemoveEvt = null;
for (StoredPublishEvent evt : events) {
if (evt.getMessageID() == messageID) {
toRemoveEvt = evt;
return remove(clientId, remainingTopic, nextInode, inode);
} else {
final CNode cnode = inode.mainNode();
if (cnode instanceof TNode) {
// this inode is a tomb, has no clients and should be cleaned up
// Because we implemented cleanTomb below, this should be rare, but possible
// Consider calling cleanTomb here too
return Action.OK;
}
if (cnode.containsOnly(clientId) && topic.isEmpty() && cnode.allChildren().isEmpty()) {
// last client to leave this node, AND there are no downstream children, remove via TNode tomb
if (inode == this.root) {
return inode.compareAndSet(cnode, inode.mainNode().copy()) ? Action.OK : Action.REPEAT;
}
TNode tnode = new TNode();
return inode.compareAndSet(cnode, tnode) ? cleanTomb(inode, iParent) : Action.REPEAT;
} else if (cnode.contains(clientId) && topic.isEmpty()) {
CNode updatedCnode = cnode.copy();
updatedCnode.removeSubscriptionsFor(clientId);
return inode.compareAndSet(cnode, updatedCnode) ? Action.OK : Action.REPEAT;
} else {
//someone else already removed
# -----------------
# M2_HOME - location of maven2's installed home dir
# MAVEN_OPTS - parameters passed to the Java VM when running Maven
# e.g. to debug Maven itself, use
# set MAVEN_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
# MAVEN_SKIP_RC - flag to disable loading of mavenrc files
# ----------------------------------------------------------------------------
if [ -z "$MAVEN_SKIP_RC" ] ; then
if [ -f /etc/mavenrc ] ; then
. /etc/mavenrc
fi
if [ -f "$HOME/.mavenrc" ] ; then
. "$HOME/.mavenrc"
fi
fi
# OS specific support. $var _must_ be set to either true or false.
cygwin=false;
darwin=false;
mingw=false
case "`uname`" in
CYGWIN*) cygwin=true ;;
MINGW*) mingw=true;;
Darwin*) darwin=true
# Use /usr/libexec/java_home if available, otherwise fall back to /Library/Java/Home
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
@REM MAVEN_BATCH_PAUSE - set to 'on' to wait for a keystroke before ending
@REM MAVEN_OPTS - parameters passed to the Java VM when running Maven
@REM e.g. to debug Maven itself, use
@REM set MAVEN_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
@REM MAVEN_SKIP_RC - flag to disable loading of mavenrc files
@REM ----------------------------------------------------------------------------
@REM Begin all REM lines with '@' in case MAVEN_BATCH_ECHO is 'on'
@echo off
@REM set title of command window
title %0
@REM enable echoing by setting MAVEN_BATCH_ECHO to 'on'
@if "%MAVEN_BATCH_ECHO%" == "on" echo %MAVEN_BATCH_ECHO%
@REM set %HOME% to equivalent of $HOME
if "%HOME%" == "" (set "HOME=%HOMEDRIVE%%HOMEPATH%")
@REM Execute a user defined script before this one
if not "%MAVEN_SKIP_RC%" == "" goto skipRcPre
@REM check for pre script, once with legacy .bat ending and once with .cmd ending
if exist "%HOME%\mavenrc_pre.bat" call "%HOME%\mavenrc_pre.bat"
if exist "%HOME%\mavenrc_pre.cmd" call "%HOME%\mavenrc_pre.cmd"
:skipRcPre
@setlocal
set ERROR_CODE=0
@REM To isolate internal variables from possible post scripts, we use another setlocal
<name>Moquette MQTT</name>
<description>Moquette lightweight MQTT Broker</description>
<inceptionYear>2011</inceptionYear>
<url>http://moquette.io</url>
<licenses>
<license>
<name>The Apache License, Version 2.0</name>
<url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
</license>
<license>
<name>Eclipse Public License - Version 1.0</name>
<url>http://www.eclipse.org/org/documents/epl-v10.php</url>
</license>
</licenses>
<developers>
<developer>
<id>andsel</id>
<name>Andrea Selva</name>
<roles>
<role>architect</role>
<role>developer</role>
<role>founder</role>
</roles>
<timezone>+1</timezone>
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
<property name="message" value="an empty line after a short line that ends with '{'"/>
</module>
<module name="TreeWalker">
<module name="LineLength">
<property name="max" value="120"/>
</module>
<module name="WhitespaceAfter"/>
<module name="WhitespaceAround">
<property name="tokens" value="ASSIGN, BAND, BAND_ASSIGN, BOR, BOR_ASSIGN, BSR, BSR_ASSIGN, BXOR, BXOR_ASSIGN, DIV, DIV_ASSIGN, EQUAL, GE, GT, LAND, LCURLY, LE, LITERAL_ASSERT, LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR, LITERAL_IF, LITERAL_RETURN, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN, MOD, MOD_ASSIGN, NOT_EQUAL, PLUS, PLUS_ASSIGN, RCURLY, SL, SLIST, SL_ASSIGN, SR, SR_ASSIGN, STAR, STAR_ASSIGN, TYPE_EXTENSION_AND"/>
</module>
<!-- Commented out due to false positives.
<module name="MissingDeprecated"/>
-->
<module name="MissingOverride"/>
<module name="PackageAnnotation"/>
<module name="EmptyBlock">
<property name="option" value="text"/>
</module>
<module name="LeftCurly"/>
<module name="RightCurly"/>
<!--
<module name="NeedBraces"/>
-->
<module name="AvoidNestedBlocks">
subscriptions.activate(msg.getClientID());
//handle clean session flag
if (msg.isCleanSession()) {
//remove all prev subscriptions
//cleanup topic subscriptions
processRemoveAllSubscriptions(msg.getClientID());
}
ConnAckMessage okResp = new ConnAckMessage();
okResp.setReturnCode(ConnAckMessage.CONNECTION_ACCEPTED);
LOG.debug("processConnect sent OK ConnAck");
session.write(okResp);
if (!msg.isCleanSession()) {
//force the republish of stored QoS1 and QoS2
republishStored(msg.getClientID());
}
}
private void republishStored(String clientID) {
LOG.trace("republishStored invoked");
List<PublishEvent> publishedEvents = m_storageService.retrievePersistedPublishes(clientID);
if (publishedEvents == null) {
LOG.info("No stored messages for client <{}>", clientID);
int messageID = ((PubCompMessage) message).getMessageID();
m_processor.processPubComp(clientID, messageID);
} else if (message instanceof PubAckMessage) {
String clientID = (String) session.getAttribute(Constants.ATTR_CLIENTID);
int messageID = ((PubAckMessage) message).getMessageID();
m_processor.processPubAck(clientID, messageID);
} else {
throw new RuntimeException("Illegal message received " + message);
}
} else if (evt instanceof InitEvent) {
processInit(((InitEvent) evt).getConfig());
} else if (evt instanceof LostConnectionEvent) {
LostConnectionEvent lostEvt = (LostConnectionEvent) evt;
m_processor.proccessConnectionLost(lostEvt.getClientID());
}
}
private void processInit(Properties props) {
m_storageService = new HawtDBStorageService();
m_storageService.initStore();
subscriptions.init(m_storageService);
String passwdPath = props.getProperty("password_file");
String configPath = System.getProperty("moquette.path", null);
IAuthenticator authenticator = new FileAuthenticator(configPath, passwdPath);
@@ -162,21 +162,24 @@ public void startServer(IConfig config, List<? extends InterceptHandler> handler
final ISubscriptionsRepository subscriptionsRepository;
final ISubscriptionsRepository subscriptionsRepository;
final IQueueRepository queueRepository;
final IQueueRepository queueRepository;
final IRetainedRepository retainedRepository;
if (persistencePath != null && !persistencePath.isEmpty()) {
if (persistencePath != null && !persistencePath.isEmpty()) {
LOG.trace("Configuring H2 subscriptions store to {}", persistencePath);
LOG.trace("Configuring H2 subscriptions store to {}", persistencePath);
h2Builder = new H2Builder(config, scheduler).initStore();
h2Builder = new H2Builder(config, scheduler).initStore();
subscriptionsRepository = h2Builder.subscriptionsRepository();
subscriptionsRepository = h2Builder.subscriptionsRepository();
queueRepository = h2Builder.queueRepository();
queueRepository = h2Builder.queueRepository();
retainedRepository = h2Builder.retainedRepository();
} else {
} else {
LOG.trace("Configuring in-memory subscriptions store");
LOG.trace("Configuring in-memory subscriptions store");
subscriptionsRepository = new MemorySubscriptionsRepository();
subscriptionsRepository = new MemorySubscriptionsRepository();
connection = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID);
connectMessage = ConnectionTestUtils.buildConnectNotClean(FAKE_CLIENT_ID);
connection.processConnect(connectMessage);
ConnectionTestUtils.assertConnectAccepted(channel);
// Verify
ConnectionTestUtils.verifyPublishIsReceived(channel, AT_LEAST_ONCE, "Any payload");
}
@Test
public void checkReceivePublishedMessage_after_a_reconnect_with_notCleanSession() {
// first connect - subscribe -disconnect
connection.processConnect(ConnectionTestUtils.buildConnectNotClean(FAKE_CLIENT_ID));
ConnectionTestUtils.assertConnectAccepted(channel);
subscribe(connection, NEWS_TOPIC, AT_LEAST_ONCE);
connection.processDisconnect(null);
// connect - subscribe from another connection but with same ClientID
EmbeddedChannel secondChannel = new EmbeddedChannel();
MQTTConnection secondConn = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID, secondChannel);
secondConn.processConnect(ConnectionTestUtils.buildConnect(FAKE_CLIENT_ID));
ConnectionTestUtils.assertConnectAccepted(secondChannel);
subscribe(secondConn, NEWS_TOPIC, AT_LEAST_ONCE);
// publish a QoS 1 message another client publish a message on the topic
EmbeddedChannel pubChannel = new EmbeddedChannel();
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnectDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnectEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PubAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PubAckEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PublishDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PublishEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubAckEncoderTest.java
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-size:8.0pt;
font-family:Tahoma;
mso-fareast-font-family:"Times New Roman";}
@page Section1
{size:8.5in 11.0in;
margin:1.0in 1.25in 1.0in 1.25in;
mso-header-margin:.5in;
mso-footer-margin:.5in;
mso-paper-source:0;}
div.Section1
{page:Section1;}
-->
</style>
</head><body style="" lang="EN-US">
<div class="Section1">
<p style="text-align: center;" align="center"><b>Eclipse Public License - v 1.0</b>
</p>
<p><span style="font-size: 10pt;">THE ACCOMPANYING PROGRAM IS PROVIDED UNDER
THE TERMS OF THIS ECLIPSE PUBLIC LICENSE ("AGREEMENT"). ANY USE,
REPRODUCTION OR DISTRIBUTION OF THE PROGRAM CONSTITUTES RECIPIENT'S ACCEPTANCE
OF THIS AGREEMENT.</span> </p>
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.
3. Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
4. Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
+3
−1
broker/src/main/java/io/moquette/spi/impl/SessionsRepository.java
+12
−4
broker/src/main/java/io/moquette/spi/impl/security/ACLFileParser.java
+1
−0
broker/src/main/java/io/moquette/spi/impl/security/AcceptAllAuthenticator.java
+10
−8
broker/src/main/java/io/moquette/spi/impl/subscriptions/CNode.java
+10
−75
broker/src/main/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectory.java
+67
−0
broker/src/main/java/io/moquette/spi/impl/subscriptions/DumpTreeVisitor.java
+33
−0
broker/src/main/java/io/moquette/spi/impl/subscriptions/SubscriptionCounterVisitor.java
+2
}
}
events.remove(toRemoveEvt);
m_persistentMessageStore.put(clientID, events);
}
public void cleanPersistedPublishes(String clientID) {
m_persistentMessageStore.remove(clientID);
}
public void cleanInFlight(String msgID) {
m_inflightStore.remove(msgID);
}
public void addInFlight(PublishEvent evt, String publishKey) {
StoredPublishEvent storedEvt = convertToStored(evt);
m_inflightStore.put(publishKey, storedEvt);
}
public void addNewSubscription(Subscription newSubscription, String clientID) {
if (!m_persistentSubscriptions.containsKey(clientID)) {
LOG.debug("clientID {} is a newcome, creating it's subscriptions set", clientID);
m_persistentSubscriptions.put(clientID, new HashSet<Subscription>());
}
Set<Subscription> subs = m_persistentSubscriptions.get(clientID);
if (!subs.contains(newSubscription)) {
return Action.OK;
}
}
}
/**
*
* Cleans Disposes of TNode in separate Atomic CAS operation per
* http://bravenewgeek.com/breaking-and-entering-lose-the-lock-while-embracing-concurrency/
*
* We roughly follow this theory above, but we allow CNode with no Subscriptions to linger (for now).
*
*
* @param inode inode that handle to the tomb node.
* @param iParent inode parent.
* @return REPEAT if the this methods wasn't successful or OK.
*/
private Action cleanTomb(INode inode, INode iParent) {
CNode updatedCnode = iParent.mainNode().copy();
updatedCnode.remove(inode);
return iParent.compareAndSet(iParent.mainNode(), updatedCnode) ? Action.OK : Action.REPEAT;
}
public int size() {
SubscriptionCounterVisitor visitor = new SubscriptionCounterVisitor();
dfsVisit(this.root, visitor, 0);
# See https://developer.apple.com/library/mac/qa/qa1170/_index.html
if [ -z "$JAVA_HOME" ]; then
if [ -x "/usr/libexec/java_home" ]; then
export JAVA_HOME="`/usr/libexec/java_home`"
else
export JAVA_HOME="/Library/Java/Home"
fi
fi
;;
esac
if [ -z "$JAVA_HOME" ] ; then
if [ -r /etc/gentoo-release ] ; then
JAVA_HOME=`java-config --jre-home`
fi
fi
if [ -z "$M2_HOME" ] ; then
## resolve links - $0 may be a link to maven's home
PRG="$0"
# need this for relative symlinks
while [ -h "$PRG" ] ; do
ls=`ls -ld "$PRG"`
link=`expr "$ls" : '.*-> \(.*\)$'`
if expr "$link" : '/.*' > /dev/null; then
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Bump junit from 4.8.2 to 4.13.1
#544
Merged
andsel
merged 1 commit into
master
from
dependabot/maven/junit-junit-4.13.1
Nov 12, 2020
Merged
Bump junit from 4.8.2 to 4.13.1
@setlocal
@REM ==== START VALIDATION ====
if not "%JAVA_HOME%" == "" goto OkJHome
echo.
echo Error: JAVA_HOME not found in your environment. >&2
echo Please set the JAVA_HOME variable in your environment to match the >&2
echo location of your Java installation. >&2
echo.
goto error
:OkJHome
if exist "%JAVA_HOME%\bin\java.exe" goto init
echo.
echo Error: JAVA_HOME is set to an invalid directory. >&2
echo JAVA_HOME = "%JAVA_HOME%" >&2
echo Please set the JAVA_HOME variable in your environment to match the >&2
echo location of your Java installation. >&2
echo.
goto error
@REM ==== END VALIDATION ====
:init
@REM Find the project base dir, i.e. the directory that contains the folder ".mvn".
@REM Fallback to current working directory if not found.
set MAVEN_PROJECTBASEDIR=%MAVEN_BASEDIR%
</developer>
</developers>
<scm>
<connection>scm:git:git@github.com:moquette-io/moquette.git</connection>
<developerConnection>scm:git:git@github.com:moquette-io/moquette.git</developerConnection>
<url>git@github.com:moquette-io/moquette.git</url>
</scm>
<modules>
<module>broker</module>
<module>distribution</module>
<module>embedding_moquette</module>
</modules>
<dependencies>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.13.1</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.slf4j</groupId>
<artifactId>slf4j-log4j12</artifactId>
<version>1.7.5</version>
<property name="allowInSwitchCase" value="true"/>
</module>
<module name="FinalClass"/>
<module name="HideUtilityClassConstructor"/>
<module name="CovariantEquals"/>
<module name="EmptyStatement"/>
<module name="EqualsHashCode"/>
<!--
<module name="FinalLocalVariable"/>
-->
<!-- Commented out due to http://jira.codehaus.org/browse/MCHECKSTYLE-111
<module name="RedundantThrows">
<property name="logLoadErrors" value="false"/>
<property name="suppressLoadErrors" value="true"/>
</module>
-->
<module name="SimplifyBooleanExpression"/>
<module name="SimplifyBooleanReturn"/>
<module name="SuperFinalize"/>
<module name="PackageDeclaration"/>
<module name="ExplicitInitialization"/>
<module name="DefaultComesLast"/>
<module name="UnnecessaryParentheses"/>
<!--
return;
}
LOG.info("republishing stored messages to client <{}>", clientID);
for (PublishEvent pubEvt : publishedEvents) {
sendPublish(pubEvt.getClientID(), pubEvt.getTopic(), pubEvt.getQos(),
pubEvt.getMessage(), false, pubEvt.getMessageID());
}
}
void processPubAck(String clientID, int messageID) {
//Remove the message from message store
m_storageService.cleanPersistedPublishMessage(clientID, messageID);
}
private void processRemoveAllSubscriptions(String clientID) {
LOG.info("cleaning old saved subscriptions for client <{}>", clientID);
subscriptions.removeForClient(clientID);
//remove also the messages stored of type QoS1/2
m_storageService.cleanPersistedPublishes(clientID);
}
protected void processPublish(PublishEvent evt) {
LOG.trace("PUB --PUBLISH--> SRV processPublish invoked with {}", evt);
final String topic = evt.getTopic();
final AbstractMessage.QOSType qos = evt.getQos();
final ByteBuffer message = evt.getMessage();
boolean retain = evt.isRetain();
m_processor.init(subscriptions, m_storageService, authenticator);
}
private void processStop() {
LOG.debug("processStop invoked");
m_storageService.close();
// m_eventProcessor.halt();
m_executor.shutdown();
subscriptions = null;
m_stopLatch.countDown();
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
queueRepository = new MemoryQueueRepository();
queueRepository = new MemoryQueueRepository();
retainedRepository = new MemoryRetainedRepository();
}
}
ISubscriptionsDirectory subscriptions = new CTrieSubscriptionDirectory();
ISubscriptionsDirectory subscriptions = new CTrieSubscriptionDirectory();
subscriptions.init(subscriptionsRepository);
subscriptions.init(subscriptionsRepository);
SessionRegistry sessions = new SessionRegistry(subscriptions, queueRepository);
SessionRegistry sessions = new SessionRegistry(subscriptions, queueRepository);
dispatcher = new PostOffice(subscriptions, authorizatorPolicy, new MemoryRetainedRepository(), sessions,
dispatcher = new PostOffice(subscriptions, authorizatorPolicy, retainedRepository, sessions,
interceptor);
interceptor);
final BrokerConfiguration brokerConfig = new BrokerConfiguration(config);
final BrokerConfiguration brokerConfig = new BrokerConfiguration(config);
MQTTConnectionFactory connectionFactory = new MQTTConnectionFactory(brokerConfig, authenticator, sessions,
MQTTConnectionFactory connectionFactory = new MQTTConnectionFactory(brokerConfig, authenticator, sessions,
5
MQTTConnection pubConn = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID, pubChannel);
pubConn.processConnect(ConnectionTestUtils.buildConnect(PUBLISHER_ID));
ConnectionTestUtils.assertConnectAccepted(pubChannel);
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
sut.receivedPublishQos1(pubConn, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
MqttMessageBuilders.publish()
.payload(anyPayload.retainedDuplicate())
.qos(MqttQoS.AT_LEAST_ONCE)
.topicName(NEWS_TOPIC).build());
// Verify that after a reconnection the client receive the message
ConnectionTestUtils.verifyPublishIsReceived(secondChannel, AT_LEAST_ONCE, "Any payload");
}
@Test
public void noPublishToInactiveSession() {
// create an inactive session for Subscriber
connection.processConnect(ConnectionTestUtils.buildConnectNotClean(SUBSCRIBER_ID));
ConnectionTestUtils.assertConnectAccepted(channel);
subscribe(connection, NEWS_TOPIC, AT_LEAST_ONCE);
connection.processDisconnect(null);
// Exercise
EmbeddedChannel pubChannel = new EmbeddedChannel();
MQTTConnection pubConn = createMQTTConnection(ALLOW_ANONYMOUS_AND_ZERO_BYTES_CLID, pubChannel);
Reject
Save preferences
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubscribeDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubscribeEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/TestUtils.java
+15
−1
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeDecoderTest.java
+15
−1
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UtilsTest.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/commons/Constants.java
+15
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
<p><b><span style="font-size: 10pt;">1. DEFINITIONS</span></b> </p>
<p><span style="font-size: 10pt;">"Contribution" means:</span> </p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
in the case of the initial Contributor, the initial code and documentation
distributed under this Agreement, and<br clear="left">
b) in the case of each subsequent Contributor:</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">i)
changes to the Program, and</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">ii)
additions to the Program;</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">where
such changes and/or additions to the Program originate from and are distributed
by that particular Contributor. A Contribution 'originates' from a Contributor
if it was added to the Program by such Contributor itself or anyone acting on
such Contributor's behalf. Contributions do not include additions to the
Program which: (i) are separate modules of software distributed in conjunction
with the Program under their own license agreement, and (ii) are not derivative
works of the Program. </span></p>
meet the following conditions:
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
−2
broker/src/main/java/io/moquette/spi/impl/subscriptions/Token.java
+5
−9
broker/src/main/java/io/moquette/spi/impl/subscriptions/Topic.java
+4
−4
broker/src/test/java/io/moquette/Utils.java
+24
−5
broker/src/test/java/io/moquette/persistence/MessageStoreTCK.java
+1
−1
broker/src/test/java/io/moquette/server/MessageCollector.java
+3
LOG.debug("updating clientID {} subscriptions set with new subscription", clientID);
//TODO check the subs doesn't contain another subscription to the same topic with different
Subscription existingSubscription = null;
for (Subscription scanSub : subs) {
if (newSubscription.getTopic().equals(scanSub.getTopic())) {
existingSubscription = scanSub;
break;
}
}
if (existingSubscription != null) {
subs.remove(existingSubscription);
}
subs.add(newSubscription);
m_persistentSubscriptions.put(clientID, subs);
}
}
public void removeAllSubscriptions(String clientID) {
m_persistentSubscriptions.remove(clientID);
}
public List<Subscription> retrieveAllSubscriptions() {
List<Subscription> allSubscriptions = new ArrayList<Subscription>();
return visitor.getResult();
}
public String dumpTree() {
DumpTreeVisitor visitor = new DumpTreeVisitor();
dfsVisit(this.root, visitor, 0);
return visitor.getResult();
}
private void dfsVisit(INode node, IVisitor<?> visitor, int deep) {
if (node == null) {
return;
}
visitor.visit(node.mainNode(), deep);
++deep;
for (INode child : node.mainNode().allChildren()) {
dfsVisit(child, visitor, deep);
}
}
}
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
PRG="$link"
else
PRG="`dirname "$PRG"`/$link"
fi
done
saveddir=`pwd`
M2_HOME=`dirname "$PRG"`/..
# make it fully qualified
M2_HOME=`cd "$M2_HOME" && pwd`
cd "$saveddir"
# echo Using m2 at $M2_HOME
fi
# For Cygwin, ensure paths are in UNIX format before anything is touched
if $cygwin ; then
[ -n "$M2_HOME" ] &&
M2_HOME=`cygpath --unix "$M2_HOME"`
[ -n "$JAVA_HOME" ] &&
JAVA_HOME=`cygpath --unix "$JAVA_HOME"`
[ -n "$CLASSPATH" ] &&
CLASSPATH=`cygpath --path --unix "$CLASSPATH"`
fi
#544
andsel
merged 1 commit into
master
from
dependabot/maven/junit-junit-4.13.1
Nov 12, 2020
Conversation
0
Commits
1
Checks
0
Files changed
Conversation
Copy link
Quote reply
Contributor
dependabot
bot
commented
on behalf of github
Nov 2, 2020
Bumps junit from 4.8.2 to 4.13.1.
Release notes
IF NOT "%MAVEN_PROJECTBASEDIR%"=="" goto endDetectBaseDir
set EXEC_DIR=%CD%
set WDIR=%EXEC_DIR%
:findBaseDir
IF EXIST "%WDIR%"\.mvn goto baseDirFound
cd ..
IF "%WDIR%"=="%CD%" goto baseDirNotFound
set WDIR=%CD%
goto findBaseDir
:baseDirFound
set MAVEN_PROJECTBASEDIR=%WDIR%
cd "%EXEC_DIR%"
goto endDetectBaseDir
:baseDirNotFound
set MAVEN_PROJECTBASEDIR=%EXEC_DIR%
cd "%EXEC_DIR%"
:endDetectBaseDir
IF NOT EXIST "%MAVEN_PROJECTBASEDIR%\.mvn\jvm.config" goto endReadAdditionalConfig
@setlocal EnableExtensions EnableDelayedExpansion
for /F "usebackq delims=" %%a in ("%MAVEN_PROJECTBASEDIR%\.mvn\jvm.config") do set JVM_CONFIG_MAVEN_PROPS=!JVM_CONFIG_MAVEN_PROPS! %%a
@endlocal & set JVM_CONFIG_MAVEN_PROPS=%JVM_CONFIG_MAVEN_PROPS%
:endReadAdditionalConfig
SET MAVEN_JAVA_EXE="%JAVA_HOME%\bin\java.exe"
set WRAPPER_JAR="%MAVEN_PROJECTBASEDIR%\.mvn\wrapper\maven-wrapper.jar"
<scope>test</scope>
</dependency>
<!-- needs extra dependencies: objenesis & hamcrest -->
<dependency>
<groupId>org.mockito</groupId>
<artifactId>mockito-core</artifactId>
<version>1.9.0</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.assertj</groupId>
<artifactId>assertj-core</artifactId>
<version>2.6.0</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.awaitility</groupId>
<artifactId>awaitility</artifactId>
<version>3.0.0</version>
<module name="AvoidStarImport">
<property name="allowStaticMemberImports" value="true"/>
</module>
-->
<module name="RedundantImport"/>
<!-- Commented out due to false positives.
<module name="UnusedImports">
<property name="processJavadoc" value="true"/>
</module>
-->
<module name="JavadocStyle">
<property name="checkFirstSentence" value="false"/>
</module>
<module name="UpperEll"/>
<module name="ArrayTypeStyle"/>
<module name="OuterTypeFilename"/>
<module name="ModifierOrder"/>
<module name="RedundantModifier"/>
<module name="GenericWhitespace"/>
<module name="EmptyForInitializerPad"/>
<module name="EmptyForIteratorPad"/>
<module name="MethodParamPad"/>
<module name="ParenPad"/>
<module name="TypecastParenPad"/>
evt.getClientID(), evt.getTopic(), evt.getQos());
String publishKey = null;
if (qos == AbstractMessage.QOSType.LEAST_ONE) {
//store the temporary message
publishKey = String.format("%s%d", evt.getClientID(), evt.getMessageID());
m_storageService.addInFlight(evt, publishKey);
} else if (qos == AbstractMessage.QOSType.EXACTLY_ONCE) {
publishKey = String.format("%s%d", evt.getClientID(), evt.getMessageID());
//store the message in temp store
m_storageService.persistQoS2Message(publishKey, evt);
sendPubRec(evt.getClientID(), evt.getMessageID());
}
//NB publish to subscribers for QoS 2 happen upon PUBREL from publisher
if (qos != AbstractMessage.QOSType.EXACTLY_ONCE) {
publish2Subscribers(topic, qos, message, retain, evt.getMessageID());
}
if (qos == AbstractMessage.QOSType.LEAST_ONE) {
if (publishKey == null) {
throw new RuntimeException("Found a publish key null for QoS " + qos + " for message " + evt);
}
m_storageService.cleanInFlight(publishKey);
sendPubAck(new PubAckEvent(evt.getMessageID(), evt.getClientID()));
LOG.debug("replying with PubAck to MSG ID {}", evt.getMessageID());
}
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
broker/src/main/java/io/moquette/persistence/H2Builder.java
Show comments
View file
Edit file
Delete file
@@ -2,6 +2,7 @@
import io.moquette.BrokerConstants;
import io.moquette.BrokerConstants;
import io.moquette.broker.IQueueRepository;
import io.moquette.broker.IQueueRepository;
import io.moquette.broker.IRetainedRepository;
import io.moquette.broker.ISubscriptionsRepository;
import io.moquette.broker.ISubscriptionsRepository;
import io.moquette.broker.config.IConfig;
import io.moquette.broker.config.IConfig;
import org.h2.mvstore.MVStore;
import org.h2.mvstore.MVStore;
@@ -57,4 +58,8 @@ public void closeStore() {
public IQueueRepository queueRepository() {
public IQueueRepository queueRepository() {
return new H2QueueRepository(mvStore);
return new H2QueueRepository(mvStore);
}
pubConn.processConnect(ConnectionTestUtils.buildConnect(PUBLISHER_ID));
ConnectionTestUtils.assertConnectAccepted(pubChannel);
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
sut.receivedPublishQos1(pubConn, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
MqttMessageBuilders.publish()
.payload(anyPayload)
.qos(MqttQoS.AT_LEAST_ONCE)
.retained(true)
.topicName(NEWS_TOPIC).build());
verifyNoPublishIsReceived(channel);
}
private void verifyNoPublishIsReceived(EmbeddedChannel channel) {
final Object messageReceived = channel.readOutbound();
assertNull("Received an out message from processor while not expected", messageReceived);
}
@Test
public void cleanRetainedMessageStoreWhenPublishWithRetainedQos0IsReceived() {
connection.processConnect(connectMessage);
ConnectionTestUtils.assertConnectAccepted(channel);
// publish a QoS1 retained message
final ByteBuf anyPayload = Unpooled.copiedBuffer("Any payload", Charset.defaultCharset());
final MqttPublishMessage publishMsg = MqttMessageBuilders.publish()
.payload(Unpooled.copiedBuffer("Any payload", Charset.defaultCharset()))
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/MQTTException.java
+15
−4
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/Utils.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/AbstractMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ConnAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ConnectMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/DisconnectMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/MessageIDMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PingReqMessage.java
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.EventFactory;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
<p><span style="font-size: 10pt;">"Contributor" means any person or
entity that distributes the Program.</span> </p>
<p><span style="font-size: 10pt;">"Licensed Patents " mean patent
claims licensable by a Contributor which are necessarily infringed by the use
or sale of its Contribution alone or when combined with the Program. </span></p>
<p><span style="font-size: 10pt;">"Program" means the Contributions
distributed in accordance with this Agreement.</span> </p>
<p><span style="font-size: 10pt;">"Recipient" means anyone who
receives the Program under this Agreement, including all Contributors.</span> </p>
<p><b><span style="font-size: 10pt;">2. GRANT OF RIGHTS</span></b> </p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
Subject to the terms of this Agreement, each Contributor hereby grants Recipient
a non-exclusive, worldwide, royalty-free copyright license to<span style="color: red;"> </span>reproduce, prepare derivative works of, publicly
display, publicly perform, distribute and sublicense the Contribution of such
Contributor, if any, and such derivative works, in source code and object code
form.</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">b)
Subject to the terms of this Agreement, each Contributor hereby grants
Recipient a non-exclusive, worldwide,<span style="color: green;"> </span>royalty-free
patent license under Licensed Patents to make, use, sell, offer to sell, import
and otherwise transfer the Contribution of such Contributor, if any, in source
code and object code form. This patent license shall apply to the combination
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
−1
broker/src/test/java/io/moquette/server/ServerIntegrationFuseTest.java
+4
−3
broker/src/test/java/io/moquette/server/ServerIntegrationHazelcastHandlerInterceptorTest.java
+10
−10
broker/src/test/java/io/moquette/server/ServerIntegrationPahoTest.java
+11
−9
broker/src/test/java/io/moquette/server/ServerIntegrationQoSValidationTest.java
+8
−6
broker/src/test/java/io/moquette/server/ServerIntegrationRestartTest.java
+2
−1
broker/src/test/java/io/moquette/server/ServerIntegrationSSLTest.java
+1
−0
broker/src/test/java/io/moquette/server/ServerIntegrationWebSocketTest.java
+3
−2
broker/src/test/java/io/moquette/server/ServerLowlevelMessagesIntegrationTests.java
for (Map.Entry<String, Set<Subscription>> entry : m_persistentSubscriptions) {
allSubscriptions.addAll(entry.getValue());
}
LOG.debug("retrieveAllSubscriptions returning subs {}", allSubscriptions);
return allSubscriptions;
}
public void close() {
LOG.debug("closing disk storage");
try {
pageFactory.close();
} catch (IOException ex) {
LOG.error(null, ex);
}
}
/*-------- QoS 2 storage management --------------*/
public void persistQoS2Message(String publishKey, PublishEvent evt) {
m_qos2Store.put(publishKey, convertToStored(evt));
}
public void removeQoS2Message(String publishKey) {
m_qos2Store.remove(publishKey);
}
public PublishEvent retrieveQoS2Message(String publishKey) {
StoredPublishEvent storedEvt = m_qos2Store.get(publishKey);
on commit 80daadf
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
# For Mingw, ensure paths are in UNIX format before anything is touched
if $mingw ; then
[ -n "$M2_HOME" ] &&
M2_HOME="`(cd "$M2_HOME"; pwd)`"
[ -n "$JAVA_HOME" ] &&
JAVA_HOME="`(cd "$JAVA_HOME"; pwd)`"
fi
if [ -z "$JAVA_HOME" ]; then
javaExecutable="`which javac`"
if [ -n "$javaExecutable" ] && ! [ "`expr \"$javaExecutable\" : '\([^ ]*\)'`" = "no" ]; then
# readlink(1) is not available as standard on Solaris 10.
readLink=`which readlink`
if [ ! `expr "$readLink" : '\([^ ]*\)'` = "no" ]; then
if $darwin ; then
javaHome="`dirname \"$javaExecutable\"`"
javaExecutable="`cd \"$javaHome\" && pwd -P`/javac"
else
javaExecutable="`readlink -f \"$javaExecutable\"`"
fi
javaHome="`dirname \"$javaExecutable\"`"
javaHome=`expr "$javaHome" : '\(.*\)/bin'`
JAVA_HOME="$javaHome"
export JAVA_HOME
fi
Sourced from junit's releases.
JUnit 4.13.1
Please refer to the release notes for details.
JUnit 4.13
Please refer to the release notes for details.
JUnit 4.13 RC 2
Please refer to the release notes for details.
JUnit 4.13 RC 1
Please refer to the release notes for details.
JUnit 4.13 Beta 3
Please refer to the release notes for details.
JUnit 4.13 Beta 2
Please refer to the release notes for details.
JUnit 4.13 Beta 1
Please refer to the release notes for details.
JUnit 4.12
Please refer to the release notes for details.
JUnit 4.12 Beta 3
Please refer to the release notes for details.
JUnit 4.12 Beta 2
No release notes provided.
JUnit 4.12 Beta 1
No release notes provided.
JUnit 4.11
No release notes provided.
Changelog
Sign in to GitHub · GitHub
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
set WRAPPER_LAUNCHER=org.apache.maven.wrapper.MavenWrapperMain
set DOWNLOAD_URL="https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
FOR /F "tokens=1,2 delims==" %%A IN ("%MAVEN_PROJECTBASEDIR%\.mvn\wrapper\maven-wrapper.properties") DO (
IF "%%A"=="wrapperUrl" SET DOWNLOAD_URL=%%B
)
@REM Extension to allow automatically downloading the maven-wrapper.jar from Maven-central
@REM This allows using the maven wrapper in projects that prohibit checking in binary data.
if exist %WRAPPER_JAR% (
if "%MVNW_VERBOSE%" == "true" (
echo Found %WRAPPER_JAR%
)
) else (
if not "%MVNW_REPOURL%" == "" (
SET DOWNLOAD_URL="%MVNW_REPOURL%/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
)
if "%MVNW_VERBOSE%" == "true" (
echo Couldn't find %WRAPPER_JAR%, downloading it ...
echo Downloading from: %DOWNLOAD_URL%
)
powershell -Command "&{"^
"$webclient = new-object System.Net.WebClient;"^
"if (-not ([string]::IsNullOrEmpty('%MVNW_USERNAME%') -and [string]::IsNullOrEmpty('%MVNW_PASSWORD%'))) {"^
<scope>test</scope>
</dependency>
</dependencies>
<reporting>
<plugins>
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>cobertura-maven-plugin</artifactId>
<version>2.6</version>
</plugin>
</plugins>
</reporting>
<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<configuration>
</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-checkstyle-plugin</artifactId>
Issues · moquette-io/moquette · GitHub
<module name="ParameterName">
<property name="format" value="^(?!arg[0-9])[_a-z][_a-zA-Z0-9]*$" />
</module>
</module>
</module>
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
if (retain) {
m_storageService.storeRetained(topic, message, qos);
}
}
/**
* Flood the subscribers with the message to notify. MessageID is optional and should only used for QoS 1 and 2
* */
private void publish2Subscribers(String topic, AbstractMessage.QOSType qos, ByteBuffer origMessage, boolean retain, Integer messageID) {
LOG.debug("publish2Subscribers republishing to existing subscribers that matches the topic {}", topic);
if (LOG.isDebugEnabled()) {
LOG.debug("content <{}>", DebugUtils.payload2Str(origMessage));
LOG.debug("subscription tree {}", subscriptions.dumpTree());
}
for (final Subscription sub : subscriptions.matches(topic)) {
if (qos.ordinal() > sub.getRequestedQos().ordinal()) {
qos = sub.getRequestedQos();
}
ByteBuffer message = origMessage.duplicate();
sub.getClientId(), sub.getTopic(), qos, sub.isActive());
if (qos == AbstractMessage.QOSType.MOST_ONE && sub.isActive()) {
//QoS 0
sendPublish(sub.getClientId(), topic, qos, message, false);
} else {
Reject
Save preferences
}
public IRetainedRepository retainedRepository() {
return new H2RetainedRepository(mvStore);
}
}
}
55
broker/src/main/java/io/moquette/persistence/H2RetainedRepository.java
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,55 @@
package io.moquette.persistence;
import io.moquette.broker.IRetainedRepository;
import io.moquette.broker.RetainedMessage;
import io.moquette.broker.subscriptions.Topic;
import io.netty.buffer.ByteBuf;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
.qos(MqttQoS.AT_LEAST_ONCE)
.retained(true)
.topicName(NEWS_TOPIC)
.build();
sut.receivedPublishQos1(connection, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
publishMsg);
assertMessageIsRetained(NEWS_TOPIC, anyPayload);
// publish a QoS0 retained message
// Exercise
final ByteBuf qos0Payload = Unpooled.copiedBuffer("QoS0 payload", Charset.defaultCharset());
sut.receivedPublishQos0(new Topic(NEWS_TOPIC), TEST_USER, connection.getClientId(), qos0Payload, true,
MqttMessageBuilders.publish()
.payload(qos0Payload)
.qos(MqttQoS.AT_MOST_ONCE)
.retained(false)
.topicName(NEWS_TOPIC).build());
// Verify
assertTrue("Retained message for topic /news must be cleared", retainedRepository.isEmpty());
}
private void assertMessageIsRetained(String expectedTopicName, ByteBuf expectedPayload) {
List<RetainedMessage> msgs = retainedRepository.retainedOnTopic(expectedTopicName);
assertEquals(1, msgs.size());
RetainedMessage msg = msgs.get(0);
assertEquals(ByteBufUtil.hexDump(expectedPayload), ByteBufUtil.hexDump(msg.getPayload()));
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PingRespMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubCompMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubRecMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubRelMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PublishMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/SubAckMessage.java
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.server.ServerChannel;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
of the Contribution and the Program if, at the time the Contribution is added
by the Contributor, such addition of the Contribution causes such combination
to be covered by the Licensed Patents. The patent license shall not apply to
any other combinations which include the Contribution. No hardware per se is
licensed hereunder. </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">c)
Recipient understands that although each Contributor grants the licenses to its
Contributions set forth herein, no assurances are provided by any Contributor
that the Program does not infringe the patent or other intellectual property
rights of any other entity. Each Contributor disclaims any liability to Recipient
for claims brought by any other entity based on infringement of intellectual
property rights or otherwise. As a condition to exercising the rights and
licenses granted hereunder, each Recipient hereby assumes sole responsibility
to secure any other intellectual property rights needed, if any. For example,
if a third party patent license is required to allow Recipient to distribute
the Program, it is Recipient's responsibility to acquire that license before
distributing the Program.</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">d)
Each Contributor represents that to its knowledge it has sufficient copyright
rights in its Contribution, if any, to grant the copyright license set forth in
this Agreement. </span></p>
<p><b><span style="font-size: 10pt;">3. REQUIREMENTS</span></b> </p>
<p><span style="font-size: 10pt;">A Contributor may choose to distribute the
5. Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
6. Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
7. Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
8. Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
+5
−4
broker/src/test/java/io/moquette/spi/ClientSessionTest.java
+17
−15
broker/src/test/java/io/moquette/spi/impl/AbstractProtocolProcessorCommonUtils.java
+2
−1
broker/src/test/java/io/moquette/spi/impl/BrokerInterceptorTest.java
+4
−1
broker/src/test/java/io/moquette/spi/impl/MockAuthenticator.java
+3
−3
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessorTest.java
+4
−3
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_CONNECT_Test.java
+2
−2
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_VariousUseCases_Test.java
+5
return convertFromStored(storedEvt);
}
private StoredPublishEvent convertToStored(PublishEvent evt) {
StoredPublishEvent storedEvt = new StoredPublishEvent(evt);
return storedEvt;
}
private PublishEvent convertFromStored(StoredPublishEvent evt) {
byte[] message = evt.getMessage();
ByteBuffer bbmessage = ByteBuffer.wrap(message);
//bbmessage.flip();
PublishEvent liveEvt = new PublishEvent(evt.getTopic(), evt.getQos(),
bbmessage, evt.isRetain(), evt.getClientID(), evt.getMessageID(), null);
return liveEvt;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Sign in to GitHub · GitHub
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
fi
fi
if [ -z "$JAVACMD" ] ; then
if [ -n "$JAVA_HOME" ] ; then
if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
# IBM's JDK on AIX uses strange locations for the executables
JAVACMD="$JAVA_HOME/jre/sh/java"
else
JAVACMD="$JAVA_HOME/bin/java"
fi
else
JAVACMD="`which java`"
fi
fi
if [ ! -x "$JAVACMD" ] ; then
echo "Error: JAVA_HOME is not defined correctly." >&2
echo " We cannot execute $JAVACMD" >&2
exit 1
fi
if [ -z "$JAVA_HOME" ] ; then
echo "Warning: JAVA_HOME environment variable is not set."
fi
CLASSWORLDS_LAUNCHER=org.codehaus.plexus.classworlds.launcher.Launcher
# traverses directory structure from process work directory to filesystem root
Issues · moquette-io/moquette · GitHub
Sourced from junit's changelog.
Summary of changes in version 4.13.1
Rules
Security fix: TemporaryFolder now limits access to temporary folders on Java 1.7 or later
A local information disclosure vulnerability in TemporaryFolder has been fixed. See the published security advisory for details.
Test Runners
[Pull request #1669:](junit-team/junit#1669) Make FrameworkField constructor public
Prior to this change, custom runners could make FrameworkMethod instances, but not FrameworkField instances. This small change allows for both now, because FrameworkField's constructor has been promoted from package-private to public.
Commits
moquette/mvnw at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
"$webclient.Credentials = new-object System.Net.NetworkCredential('%MVNW_USERNAME%', '%MVNW_PASSWORD%');"^
"}"^
"[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; $webclient.DownloadFile('%DOWNLOAD_URL%', '%WRAPPER_JAR%')"^
"}"
if "%MVNW_VERBOSE%" == "true" (
echo Finished downloading %WRAPPER_JAR%
)
)
@REM End of extension
@REM Provide a "standardized" way to retrieve the CLI args that will
@REM work with both Windows and non-Windows executions.
set MAVEN_CMD_LINE_ARGS=%*
%MAVEN_JAVA_EXE% %JVM_CONFIG_MAVEN_PROPS% %MAVEN_OPTS% %MAVEN_DEBUG_OPTS% -classpath %WRAPPER_JAR% "-Dmaven.multiModuleProjectDirectory=%MAVEN_PROJECTBASEDIR%" %WRAPPER_LAUNCHER% %MAVEN_CONFIG% %*
if ERRORLEVEL 1 goto error
goto end
:error
set ERROR_CODE=1
:end
@endlocal & set ERROR_CODE=%ERROR_CODE%
if not "%MAVEN_SKIP_RC%" == "" goto skipRcPost
@REM check for post script, once with legacy .bat ending and once with .cmd ending
if exist "%HOME%\mavenrc_post.bat" call "%HOME%\mavenrc_post.bat"
<version>2.17</version>
<configuration>
<configLocation>checkstyle.xml</configLocation>
<!--<suppressionsLocation>checkstyle-suppressions.xml</suppressionsLocation>-->
<!--
<configLocation>/google_checks.xml</configLocation>
-->
<failOnViolation>true</failOnViolation>
<consoleOutput>true</consoleOutput>
</configuration>
<executions>
<execution>
<phase>validate</phase>
<goals>
<goal>check</goal>
</goals>
</execution>
</executions>
</plugin>
</plugins>
</build>
<profiles>
<profile>
<id>release-sign-artifacts</id>
Bump junit from 4.8.2 to 4.13.1 by dependabot · Pull Request #544 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
//QoS 1 or 2
//if the target subscription is not clean session and is not connected => store it
if (!sub.isCleanSession() && !sub.isActive()) {
//clone the event with matching clientID
PublishEvent newPublishEvt = new PublishEvent(topic, qos, message, retain, sub.getClientId(), messageID, null);
m_storageService.storePublishForFuture(newPublishEvt);
} else {
//if QoS 2 then store it in temp memory
if (qos ==AbstractMessage.QOSType.EXACTLY_ONCE) {
String publishKey = String.format("%s%d", sub.getClientId(), messageID);
PublishEvent newPublishEvt = new PublishEvent(topic, qos, message, retain, sub.getClientId(), messageID, null);
m_storageService.addInFlight(newPublishEvt, publishKey);
}
//publish
if (sub.isActive()) {
sendPublish(sub.getClientId(), topic, qos, message, false);
}
}
}
}
}
private void sendPublish(String clientId, String topic, AbstractMessage.QOSType qos, ByteBuffer message, boolean retained) {
//TODO pay attention to the message ID can't be 0 and it's the message sent to subscriber
int messageID = 1;
import org.h2.mvstore.MVMap;
import org.h2.mvstore.MVStore;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
public class H2RetainedRepository implements IRetainedRepository {
private final MVMap<Topic, RetainedMessage> queueMap;
public H2RetainedRepository(MVStore mvStore) {
this.queueMap = mvStore.openMap("retained_store");
}
@Override
public void cleanRetained(Topic topic) {
queueMap.remove(topic);
}
@Override
public void retain(Topic topic, MqttPublishMessage msg) {
final ByteBuf payload = msg.content();
byte[] rawPayload = new byte[payload.readableBytes()];
payload.getBytes(0, rawPayload);
final RetainedMessage toStore = new RetainedMessage(msg.fixedHeader().qosLevel(), rawPayload);
queueMap.put(topic, toStore);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/SubscribeMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/UnsubAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/UnsubscribeMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ZeroLengthMessage.java
28
about.html
Show comments
View file
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import java.util.Properties;
15
...er/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
Program in object code form under its own license agreement, provided that:</span>
</p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
it complies with the terms and conditions of this Agreement; and</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">b)
its license agreement:</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">i)
effectively disclaims on behalf of all Contributors all warranties and
conditions, express and implied, including warranties or conditions of title
and non-infringement, and implied warranties or conditions of merchantability
and fitness for a particular purpose; </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">ii)
effectively excludes on behalf of all Contributors all liability for damages,
including direct, indirect, special, incidental and consequential damages, such
as lost profits; </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">iii)
states that any provisions which differ from this Agreement are offered by that
Contributor alone and not by any other party; and</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">iv)
states that source code for the Program is available from such Contributor, and
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.
9. Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
END OF TERMS AND CONDITIONS
APPENDIX: How to apply the Apache License to your work.
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
−3
broker/src/test/java/io/moquette/spi/impl/security/DBAuthenticatorTest.java
+5
−3
broker/src/test/java/io/moquette/spi/impl/security/FileAuthenticatorTest.java
+5
−4
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryMatchingTest.java
+7
−14
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryTest.java
+0
−1
broker/src/test/java/io/moquette/spi/impl/subscriptions/TopicTest.java
+8
−2
broker/src/test/java/io/moquette/testclient/Client.java
+4
−2
broker/src/test/java/io/moquette/testclient/ClientNettyMQTTHandler.java
+8
−6
broker/src/test/java/io/moquette/testclient/RawClient.java
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
# first directory with .mvn subdirectory is considered project base directory
find_maven_basedir() {
if [ -z "$1" ]
then
echo "Path not specified to find_maven_basedir"
return 1
fi
basedir="$1"
wdir="$1"
while [ "$wdir" != '/' ] ; do
if [ -d "$wdir"/.mvn ] ; then
basedir=$wdir
break
fi
# workaround for JBEAP-8937 (on Solaris 10/Sparc)
wdir=`cd "$wdir/.."; pwd`
fi
# end of workaround
done
}
# concatenates all lines of a file
concat_lines() {
if [ -f "$1" ]; then
echo "$(tr -s '\n' ' ' < "$1")"
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
1b683f4 [maven-release-plugin] prepare release r4.13.1
ce6ce3a Draft 4.13.1 release notes
c29dd82 Change version to 4.13.1-SNAPSHOT
1d17486 Add a link to assertThrows in exception testing
543905d Use separate line for annotation in Javadoc
510e906 Add sub headlines to class Javadoc
610155b Merge pull request from GHSA-269g-pwp5-87pp
b6cfd1e Explicitly wrap float parameter for consistency (#1671)
a5d205c Fix GitHub link in FAQ (#1672)
3a5c6b4 Deprecated since jdk9 replacing constructor instance of Double and Float (#1660)
Additional commits viewable in compare view
Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.
Dependabot commands and options
You can trigger Dependabot actions by commenting on this PR:
@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
@dependabot use these labels will set the current labels as the default for future PRs for this repo and language
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Bump junit from 4.8.2 to 4.13.1 by dependabot · Pull Request #544 · moquette-io/moquette · GitHub
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
if exist "%HOME%\mavenrc_post.cmd" call "%HOME%\mavenrc_post.cmd"
:skipRcPost
@REM pause the script if MAVEN_BATCH_PAUSE is set to 'on'
if "%MAVEN_BATCH_PAUSE%" == "on" pause
if "%MAVEN_TERMINATE_CMD%" == "on" exit %ERROR_CODE%
exit /B %ERROR_CODE%
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-source-plugin</artifactId>
<executions>
<execution>
<id>attach-sources</id>
<goals>
<goal>jar</goal>
</goals>
</execution>
</executions>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-javadoc-plugin</artifactId>
<executions>
<execution>
<id>attach-javadocs</id>
<goals>
Skip to content
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
sendPublish(clientId, topic, qos, message, retained, messageID);
}
private void sendPublish(String clientId, String topic, AbstractMessage.QOSType qos, ByteBuffer message, boolean retained, int messageID) {
PublishMessage pubMessage = new PublishMessage();
pubMessage.setRetainFlag(retained);
pubMessage.setTopicName(topic);
pubMessage.setQos(qos);
pubMessage.setPayload(message);
if (LOG.isDebugEnabled()) {
LOG.debug("content <{}>", DebugUtils.payload2Str(message));
}
if (pubMessage.getQos() != AbstractMessage.QOSType.MOST_ONE) {
pubMessage.setMessageID(messageID);
}
if (m_clientIDs == null) {
throw new RuntimeException("Internal bad error, found m_clientIDs to null while it should be initialized, somewhere it's overwritten!!");
}
LOG.debug("clientIDs are {}", m_clientIDs);
if (m_clientIDs.get(clientId) == null) {
throw new RuntimeException(String.format("Can't find a ConnectionDescriptor for client <%s> in cache <%s>", clientId, m_clientIDs));
}
// m_clientIDs.get(clientId).getSession().write(pubMessage);
disruptorPublish(new OutputMessagingEvent(m_clientIDs.get(clientId).getSession(), pubMessage));
}
@Override
public boolean isEmpty() {
return queueMap.isEmpty();
}
@Override
public List<RetainedMessage> retainedOnTopic(String topic) {
final Topic searchTopic = new Topic(topic);
final List<RetainedMessage> matchingMessages = new ArrayList<>();
for (Map.Entry<Topic, RetainedMessage> entry : queueMap.entrySet()) {
final Topic scanTopic = entry.getKey();
if (searchTopic.match(scanTopic)) {
matchingMessages.add(entry.getValue());
}
}
return matchingMessages;
}
}
10
broker/src/test/java/io/moquette/broker/PostOfficePublishTest.java
Show comments
View file
Edit file
Delete file
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Edit file
Delete file
@@ -0,0 +1,28 @@
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>About</title>
</head>
<body lang="EN-US">
<h2>About Moquette MQT broker</h2>
<p>June 11, 2014</p>
<h3>License</h3>
<p>The Eclipse Foundation makes available all content in this plug-in (&quot;Moquette MQTT&quot;). Unless otherwise
indicated below, the Content is provided to you under the terms and conditions of the
Eclipse Public License Version 1.0 (&quot;EPL&quot;). A copy of the EPL is available
at <a href="http://www.eclipse.org/legal/epl-v10.html">http://www.eclipse.org/legal/epl-v10.html</a>.
For purposes of the EPL, &quot;Program&quot; will mean the Content.</p>
<p>If you did not receive this Content directly from the Eclipse Foundation, the Content is
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
informs licensees how to obtain it in a reasonable manner on or through a
medium customarily used for software exchange.<span style="color: blue;"> </span></span></p>
<p><span style="font-size: 10pt;">When the Program is made available in source
code form:</span> </p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
it must be made available under this Agreement; and </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">b) a
copy of this Agreement must be included with each copy of the Program. </span></p>
<p><span style="font-size: 10pt;">Contributors may not remove or alter any
copyright notices contained within the Program. </span></p>
<p><span style="font-size: 10pt;">Each Contributor must identify itself as the
originator of its Contribution, if any, in a manner that reasonably allows
subsequent Recipients to identify the originator of the Contribution. </span></p>
<p><b><span style="font-size: 10pt;">4. COMMERCIAL DISTRIBUTION</span></b> </p>
<p><span style="font-size: 10pt;">Commercial distributors of software may
accept certain responsibilities with respect to end users, business partners
and the like. While this license is intended to facilitate the commercial use
of the Program, the Contributor who includes the Program in a commercial
product offering should do so in a manner which does not create potential
liability for other Contributors. Therefore, if a Contributor includes the
Program in a commercial product offering, such Contributor ("Commercial
Contributor") hereby agrees to defend and indemnify every other
Contributor ("Indemnified Contributor") against any losses, damages and
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
Copyright [yyyy] [name of copyright owner]
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Toggle all file notes
0 comments
on commit af8c0e3
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
+2
−2
checkstyle.xml
+9
−11
distribution/build.gradle
+5
−3
embedding_moquette/src/main/java/io/moquette/testembedded/EmbeddedLauncher.java
+15
−0
h2_storage/src/main/java/io/moquette/persistence/h2/H2PersistentQueue.java
+6
−10
h2_storage/src/main/java/io/moquette/persistence/h2/H2PersistentStore.java
+17
−11
h2_storage/src/main/java/io/moquette/persistence/h2/H2SessionsStore.java
+17
−2
h2_storage/src/test/java/io/moquette/persistence/h2/H2PersistentQueueTest.java
+2
−1
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Sign in to GitHub · GitHub
moquette/ISubscriptionsStore.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
fi
}
BASE_DIR=`find_maven_basedir "$(pwd)"`
if [ -z "$BASE_DIR" ]; then
exit 1;
fi
##########################################################################################
# Extension to allow automatically downloading the maven-wrapper.jar from Maven-central
# This allows using the maven wrapper in projects that prohibit checking in binary data.
##########################################################################################
if [ -r "$BASE_DIR/.mvn/wrapper/maven-wrapper.jar" ]; then
if [ "$MVNW_VERBOSE" = true ]; then
echo "Found .mvn/wrapper/maven-wrapper.jar"
fi
else
if [ "$MVNW_VERBOSE" = true ]; then
echo "Couldn't find .mvn/wrapper/maven-wrapper.jar, downloading it ..."
fi
if [ -n "$MVNW_REPOURL" ]; then
jarUrl="$MVNW_REPOURL/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
else
jarUrl="https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
fi
moquette/DurableSession.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
moquette/MessageMetricsHandler.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
moquette/pom.xml at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Bump junit from 4.8.2 to 4.13.1 by dependabot · Pull Request #544 · moquette-io/moquette · GitHub
moquette/mvnw.cmd at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
@dependabot use these reviewers will set the current reviewers as the default for future PRs for this repo and language
@dependabot use these assignees will set the current assignees as the default for future PRs for this repo and language
@dependabot use this milestone will set the current milestone as the default for future PRs for this repo and language
You can disable automated security fix PRs for this repo from the Security Alerts page.
Bump junit from 4.8.2 to 4.13.1
…
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
Loading status checks…
b313cac
Bumps [junit](https://github.com/junit-team/junit4) from 4.8.2 to 4.13.1.
- [Release notes](https://github.com/junit-team/junit4/releases)
- [Changelog](https://github.com/junit-team/junit4/blob/main/doc/ReleaseNotes4.13.1.md)
- [Commits](junit-team/junit4@r4.8.2...r4.13.1)
Signed-off-by: dependabot[bot] <support@github.com>
dependabot
bot
added
the
dependencies
label
Nov 2, 2020
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
<goal>jar</goal>
</goals>
</execution>
</executions>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-gpg-plugin</artifactId>
<executions>
<execution>
<id>sign-artifacts</id>
<phase>package</phase>
<goals>
<goal>sign</goal>
</goals>
</execution>
</executions>
</plugin>
</plugins>
</build>
</profile>
</profiles>
<repositories>
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
}
private void sendPubRec(String clientID, int messageID) {
PubRecMessage pubRecMessage = new PubRecMessage();
pubRecMessage.setMessageID(messageID);
// m_clientIDs.get(clientID).getSession().write(pubRecMessage);
disruptorPublish(new OutputMessagingEvent(m_clientIDs.get(clientID).getSession(), pubRecMessage));
}
private void sendPubAck(PubAckEvent evt) {
LOG.trace("sendPubAck invoked");
String clientId = evt.getClientID();
PubAckMessage pubAckMessage = new PubAckMessage();
pubAckMessage.setMessageID(evt.getMessageId());
try {
if (m_clientIDs == null) {
throw new RuntimeException("Internal bad error, found m_clientIDs to null while it should be initialized, somewhere it's overwritten!!");
}
LOG.debug("clientIDs are {}", m_clientIDs);
if (m_clientIDs.get(clientId) == null) {
throw new RuntimeException(String.format("Can't find a ConnectionDEwcriptor for client %s in cache %s", clientId, m_clientIDs));
}
// LOG.debug("Session for clientId " + clientId + " is " + m_clientIDs.get(clientId).getSession());
// m_clientIDs.get(clientId).getSession().write(pubAckMessage);
disruptorPublish(new OutputMessagingEvent(m_clientIDs.get(clientId).getSession(), pubAckMessage));
@@ -390,7 +390,7 @@ public void cleanRetainedMessageStoreWhenPublishWithRetainedQos0IsReceived() {
sut.receivedPublishQos1(connection, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
sut.receivedPublishQos1(connection, new Topic(NEWS_TOPIC), TEST_USER, anyPayload, 1, true,
publishMsg);
publishMsg);
assertMessageIsRetained(NEWS_TOPIC);
assertMessageIsRetained(NEWS_TOPIC, anyPayload);
// publish a QoS0 retained message
// publish a QoS0 retained message
// Exercise
// Exercise
@@ -406,8 +406,10 @@ public void cleanRetainedMessageStoreWhenPublishWithRetainedQos0IsReceived() {
assertTrue("Retained message for topic /news must be cleared", retainedRepository.isEmpty());
assertTrue("Retained message for topic /news must be cleared", retainedRepository.isEmpty());
}
}
private void assertMessageIsRetained(String expectedTopicName) {
private void assertMessageIsRetained(String expectedTopicName, ByteBuf expectedPayload) {
MqttPublishMessage msg = retainedRepository.retainedOnTopic(expectedTopicName);
List<RetainedMessage> msgs = retainedRepository.retainedOnTopic(expectedTopicName);
assertEquals(expectedTopicName, msg.variableHeader().topicName());
assertEquals(1, msgs.size());
RetainedMessage msg = msgs.get(0);
Save preferences
being redistributed by another party (&quot;Redistributor&quot;) and different terms and conditions may
apply to your use of any object code in the Content. Check the Redistributor's license that was
provided with the Content. If no such license exists, contact the Redistributor. Unless otherwise
indicated below, the terms and conditions of the EPL still apply to any source code in the Content
and such source code may be obtained at <a href="http://www.eclipse.org/">http://www.eclipse.org</a>.</p>
</body>
</html>
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
15
...r/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
Show comments
View file
Edit file
Delete file
costs (collectively "Losses") arising from claims, lawsuits and other
legal actions brought by a third party against the Indemnified Contributor to
the extent caused by the acts or omissions of such Commercial Contributor in
connection with its distribution of the Program in a commercial product
offering. The obligations in this section do not apply to any claims or Losses
relating to any actual or alleged intellectual property infringement. In order
to qualify, an Indemnified Contributor must: a) promptly notify the Commercial
Contributor in writing of such claim, and b) allow the Commercial Contributor
to control, and cooperate with the Commercial Contributor in, the defense and
any related settlement negotiations. The Indemnified Contributor may participate
in any such claim at its own expense.</span> </p>
<p><span style="font-size: 10pt;">For example, a Contributor might include the
Program in a commercial product offering, Product X. That Contributor is then a
Commercial Contributor. If that Commercial Contributor then makes performance
claims, or offers warranties related to Product X, those performance claims and
warranties are such Commercial Contributor's responsibility alone. Under this
section, the Commercial Contributor would have to defend claims against the
other Contributors related to those performance claims and warranties, and if a
court requires any other Contributor to pay any damages as a result, the
Commercial Contributor must pay those damages.</span> </p>
<p><b><span style="font-size: 10pt;">5. NO WARRANTY</span></b> </p>
<p><span style="font-size: 10pt;">EXCEPT AS EXPRESSLY SET FORTH IN THIS
AGREEMENT, THE PROGRAM IS PROVIDED ON AN "AS IS" BASIS, WITHOUT
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
h2_storage/src/test/java/io/moquette/persistence/h2/H2SessionsStoreTest.java
+1
−1
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBMessagesStore.java
+1
−0
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBPersistentStore.java
+8
−6
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBSessionsStore.java
+3
−1
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBPersistentStoreTest.java
+2
−1
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBSessionsStoreTest.java
+17
−6
perf/src/main/java/io/moquette/parser/netty/performance/BenchmarkPublisher.java
+14
−1
perf/src/main/java/io/moquette/parser/netty/performance/BenchmarkSubscriber.java
+9
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
while IFS="=" read key value; do
case "$key" in (wrapperUrl) jarUrl="$value"; break ;;
esac
done < "$BASE_DIR/.mvn/wrapper/maven-wrapper.properties"
if [ "$MVNW_VERBOSE" = true ]; then
echo "Downloading from: $jarUrl"
fi
wrapperJarPath="$BASE_DIR/.mvn/wrapper/maven-wrapper.jar"
if $cygwin; then
wrapperJarPath=`cygpath --path --windows "$wrapperJarPath"`
fi
if command -v wget > /dev/null; then
if [ "$MVNW_VERBOSE" = true ]; then
echo "Found wget ... using wget"
fi
if [ -z "$MVNW_USERNAME" ] || [ -z "$MVNW_PASSWORD" ]; then
wget "$jarUrl" -O "$wrapperJarPath"
else
wget --http-user=$MVNW_USERNAME --http-password=$MVNW_PASSWORD "$jarUrl" -O "$wrapperJarPath"
fi
elif command -v curl > /dev/null; then
if [ "$MVNW_VERBOSE" = true ]; then
echo "Found curl ... using curl"
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Hide details
View details
andsel
merged commit c7461f1
into
master
Nov 12, 2020
2 checks passed
2 checks passed
continuous-integration/travis-ci/pr
The Travis CI build passed
Details
continuous-integration/travis-ci/push
The Travis CI build passed
Details
dependabot
bot
deleted the
dependabot/maven/junit-junit-4.13.1
branch
Nov 12, 2020
Sign up for free
moquette/MQTTMessageLogger.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
<repository>
<id>Maven repo</id>
<url>https://repo1.maven.org/maven2/</url>
</repository>
<repository>
<id>Paho Releases</id>
<url>https://repo.eclipse.org/content/repositories/paho-releases/</url>
</repository>
<repository>
<id>sonatype-snapshots</id>
<snapshots>
<enabled>true</enabled>
</snapshots>
<url>https://oss.sonatype.org/content/repositories/snapshots</url>
</repository>
</repositories>
<distributionManagement>
<repository>
<id>bintray</id>
</repository>
</distributionManagement>
</project>
Copy lines
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
}catch(Throwable t) {
LOG.error(null, t);
}
}
/**
* Second phase of a publish QoS2 protocol, sent by publisher to the broker. Search the stored message and publish
* to all interested subscribers.
* */
void processPubRel(String clientID, int messageID) {
String publishKey = String.format("%s%d", clientID, messageID);
PublishEvent evt = m_storageService.retrieveQoS2Message(publishKey);
final String topic = evt.getTopic();
final AbstractMessage.QOSType qos = evt.getQos();
publish2Subscribers(topic, qos, evt.getMessage(), evt.isRetain(), evt.getMessageID());
m_storageService.removeQoS2Message(publishKey);
if (evt.isRetain()) {
m_storageService.storeRetained(topic, evt.getMessage(), qos);
}
sendPubComp(clientID, messageID);
}
private void sendPubComp(String clientID, int messageID) {
PubCompMessage pubCompMessage = new PubCompMessage();
assertEquals(ByteBufUtil.hexDump(expectedPayload), ByteBufUtil.hexDump(msg.getPayload()));
}
}
}
}
Toggle all file notes
0 comments
on commit 2138513
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
package org.dna.mqtt.moquette.messaging.spi;
/**
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
Show comments
View file
Edit file
WARRANTIES OR CONDITIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED INCLUDING,
WITHOUT LIMITATION, ANY WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT,
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Each Recipient is solely
responsible for determining the appropriateness of using and distributing the
Program and assumes all risks associated with its exercise of rights under this
Agreement , including but not limited to the risks and costs of program errors,
compliance with applicable laws, damage to or loss of data, programs or
equipment, and unavailability or interruption of operations. </span></p>
<p><b><span style="font-size: 10pt;">6. DISCLAIMER OF LIABILITY</span></b> </p>
<p><span style="font-size: 10pt;">EXCEPT AS EXPRESSLY SET FORTH IN THIS
AGREEMENT, NEITHER RECIPIENT NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OR DISTRIBUTION OF
THE PROGRAM OR THE EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF
THE POSSIBILITY OF SUCH DAMAGES.</span> </p>
<p><b><span style="font-size: 10pt;">7. GENERAL</span></b> </p>
<p><span style="font-size: 10pt;">If any provision of this Agreement is invalid
or unenforceable under applicable law, it shall not affect the validity or
enforceability of the remainder of the terms of this Agreement, and without
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
−8
perf/src/main/java/io/moquette/parser/netty/performance/LoopMQTTHandler.java
+6
−3
perf/src/main/java/io/moquette/parser/netty/performance/NettyPublishReceiverHandler.java
+10
−5
perf/src/main/java/io/moquette/parser/netty/performance/ProtocolDecodingServer.java
+8
−3
perf/src/main/java/io/moquette/parser/netty/performance/ProtocolPublishDecodingServer.java
+10
−4
perf/src/main/java/io/moquette/parser/netty/performance/PublishBomber.java
+4
−3
perf/src/main/java/io/moquette/parser/netty/performance/PublishReceiverHandler.java
+1
−2
tools_scripts/integration/bunch_publish_issue12.groovy
4
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
moquette/NettyAcceptor.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
fi
if [ -z "$MVNW_USERNAME" ] || [ -z "$MVNW_PASSWORD" ]; then
curl -o "$wrapperJarPath" "$jarUrl" -f
else
curl --user $MVNW_USERNAME:$MVNW_PASSWORD -o "$wrapperJarPath" "$jarUrl" -f
fi
else
if [ "$MVNW_VERBOSE" = true ]; then
echo "Falling back to using Java to download"
fi
javaClass="$BASE_DIR/.mvn/wrapper/MavenWrapperDownloader.java"
# For Cygwin, switch paths to Windows format before running javac
if $cygwin; then
javaClass=`cygpath --path --windows "$javaClass"`
fi
if [ -e "$javaClass" ]; then
if [ ! -e "$BASE_DIR/.mvn/wrapper/MavenWrapperDownloader.class" ]; then
if [ "$MVNW_VERBOSE" = true ]; then
echo " - Compiling MavenWrapperDownloader.java ..."
fi
# Compiling the Java class
("$JAVA_HOME/bin/javac" "$javaClass")
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
dependencies
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
moquette/mvnw
Go to file
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Bump junit from 4.8.2 to 4.13.1
#544
Merged
andsel
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
0 Open
4 Closed
0 Open
4 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
pubCompMessage.setMessageID(messageID);
// m_clientIDs.get(clientID).getSession().write(pubCompMessage);
disruptorPublish(new OutputMessagingEvent(m_clientIDs.get(clientID).getSession(), pubCompMessage));
}
void processPubRec(String clientID, int messageID) {
//once received a PUBREC reply with a PUBREL(messageID)
PubRelMessage pubRelMessage = new PubRelMessage();
pubRelMessage.setMessageID(messageID);
pubRelMessage.setQos(AbstractMessage.QOSType.LEAST_ONE);
// m_clientIDs.get(clientID).getSession().write(pubRelMessage);
disruptorPublish(new OutputMessagingEvent(m_clientIDs.get(clientID).getSession(), pubRelMessage));
}
void processPubComp(String clientID, int messageID) {
//once received the PUBCOMP then remove the message from the temp memory
String publishKey = String.format("%s%d", clientID, messageID);
m_storageService.cleanInFlight(publishKey);
}
void processDisconnect(ServerChannel session, String clientID, boolean cleanSession) throws InterruptedException {
if (cleanSession) {
//cleanup topic subscriptions
processRemoveAllSubscriptions(clientID);
}
// m_notifier.disconnect(evt.getSession());
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
package org.dna.mqtt.moquette.messaging.spi;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
Show comments
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
further action by the parties hereto, such provision shall be reformed to the
minimum extent necessary to make such provision valid and enforceable.</span> </p>
<p><span style="font-size: 10pt;">If Recipient institutes patent litigation
against any entity (including a cross-claim or counterclaim in a lawsuit)
alleging that the Program itself (excluding combinations of the Program with
other software or hardware) infringes such Recipient's patent(s), then such
Recipient's rights granted under Section 2(b) shall terminate as of the date
such litigation is filed. </span></p>
<p><span style="font-size: 10pt;">All Recipient's rights under this Agreement
shall terminate if it fails to comply with any of the material terms or
conditions of this Agreement and does not cure such failure in a reasonable
period of time after becoming aware of such noncompliance. If all Recipient's
rights under this Agreement terminate, Recipient agrees to cease use and
distribution of the Program as soon as reasonably practicable. However,
Recipient's obligations under this Agreement and any licenses granted by
Recipient relating to the Program shall continue and survive. </span></p>
<p><span style="font-size: 10pt;">Everyone is permitted to copy and distribute
copies of this Agreement, but in order to avoid inconsistency the Agreement is
copyrighted and may only be modified in the following manner. The Agreement
Steward reserves the right to publish new versions (including revisions) of
this Agreement from time to time. No one other than the Agreement Steward has
the right to modify this Agreement. The Eclipse Foundation is the initial
broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,7 @@
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static io.moquette.spi.impl.Utils.readBytesAndRewind;
import static java.nio.charset.StandardCharsets.UTF_8;
public class HazelcastInterceptHandler extends AbstractInterceptHandler {
@@ -45,7 +46,8 @@ public void onPublish(InterceptPublishMessage msg) {
ByteBuf payload = msg.getPayload();
byte[] payloadContent = readBytesAndRewind(payload);
new String(payloadContent, UTF_8));
ITopic<HazelcastMsg> topic = hz.getTopic("moquette");
HazelcastMsg hazelcastMsg = new HazelcastMsg(msg);
topic.publish(hazelcastMsg);
6
broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
fi
if [ -e "$BASE_DIR/.mvn/wrapper/MavenWrapperDownloader.class" ]; then
# Running the downloader
if [ "$MVNW_VERBOSE" = true ]; then
echo " - Running MavenWrapperDownloader.java ..."
fi
("$JAVA_HOME/bin/java" -cp .mvn/wrapper MavenWrapperDownloader "$MAVEN_PROJECTBASEDIR")
fi
fi
fi
fi
##########################################################################################
# End of extension
##########################################################################################
if [ "$MVNW_VERBOSE" = true ]; then
echo $MAVEN_PROJECTBASEDIR
fi
MAVEN_OPTS="$(concat_lines "$MAVEN_PROJECTBASEDIR/.mvn/jvm.config") $MAVEN_OPTS"
# For Cygwin, switch paths to Windows format before running java
if $cygwin; then
[ -n "$M2_HOME" ] &&
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
moquette/NettyMQTTHandler.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
moquette/BytesMetricsHandler.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
executable file
310 lines (277 sloc)
9.83 KB
Raw
Blame
#!/bin/sh
# ----------------------------------------------------------------------------
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements. See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership. The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License. You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
merged 1 commit into
master
from
dependabot/maven/junit-junit-4.13.1
Nov 12, 2020
Conversation
0
Commits
1
Checks
0
Files changed
Bump junit from 4.8.2 to 4.13.1
b313cac
Select commit
b313cac
Bump junit from 4.8.2 to 4.13.1
dependabot Nov 2, 2020
Merged
Bump junit from 4.8.2 to 4.13.1
#544
Bump junit from 4.8.2 to 4.13.1
b313cac
Select commit
b313cac
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
No results matched your search.
You could search all of GitHub or try an advanced search.
ProTip!
Type g p on any issue or pull request to go back to the pull request listing page.
m_clientIDs.remove(clientID);
session.close(true);
//de-activate the subscriptions for this ClientID
// String clientID = (String) evt.getSession().getAttribute(Constants.ATTR_CLIENTID);
subscriptions.deactivate(clientID);
}
void proccessConnectionLost(String clientID) {
//If already removed a disconnect message was already processed for this clientID
if (m_clientIDs.remove(clientID) != null) {
//de-activate the subscriptions for this ClientID
subscriptions.deactivate(clientID);
LOG.info("Lost connection with client <{}>", clientID);
}
}
/**
* Remove the clientID from topic subscription, if not previously subscribed,
* doesn't reply any error
*/
void processUnsubscribe(ServerChannel session, String clientID, List<String> topics, int messageID) {
for (String topic : topics) {
subscriptions.removeSubscription(topic, clientID);
}
//ack the client
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
package org.dna.mqtt.moquette.messaging.spi;
import java.util.List;
import java.util.List;
import org.dna.mqtt.moquette.proto.Utils;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
Agreement Steward. The Eclipse Foundation may assign the responsibility to
serve as the Agreement Steward to a suitable separate entity. Each new version
of the Agreement will be given a distinguishing version number. The Program
(including Contributions) may always be distributed subject to the version of
the Agreement under which it was received. In addition, after a new version of
the Agreement is published, Contributor may elect to distribute the Program
(including its Contributions) under the new version. Except as expressly stated
in Sections 2(a) and 2(b) above, Recipient receives no rights or licenses to
the intellectual property of any Contributor under this Agreement, whether
expressly, by implication, estoppel or otherwise. All rights in the Program not
expressly granted under this Agreement are reserved.</span> </p>
<p><span style="font-size: 10pt;">This Agreement is governed by the laws of the
State of New York and the intellectual property laws of the United States of
America. No party to this Agreement will bring a legal action under this
Agreement more than one year after the cause of action arose. Each party waives
its rights to a jury trial in any resulting litigation.</span> </p>
<p class="MsoNormal"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--><o:p></o:p></p>
</div>
<div class="Section2">
<p style="text-align: center;" align="center"><b>Apache License</b></br>
Version 2.0, January 2004<br/>
http://www.apache.org/licenses/<br/>
Show comments
View file
Edit file
Delete file
@@ -18,6 +18,8 @@
import io.netty.handler.codec.mqtt.MqttConnectMessage;
import java.nio.charset.StandardCharsets;
public class InterceptConnectMessage extends InterceptAbstractMessage {
private final MqttConnectMessage msg;
@@ -72,14 +74,14 @@ public String getUsername() {
}
public byte[] getPassword() {
return msg.payload().password().getBytes();
return msg.payload().password().getBytes(StandardCharsets.UTF_8);
}
public String getWillTopic() {
return msg.payload().willTopic();
}
public byte[] getWillMessage() {
return msg.payload().willMessage().getBytes();
return msg.payload().willMessage().getBytes(StandardCharsets.UTF_8);
}
}
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
M2_HOME=`cygpath --path --windows "$M2_HOME"`
[ -n "$JAVA_HOME" ] &&
JAVA_HOME=`cygpath --path --windows "$JAVA_HOME"`
[ -n "$CLASSPATH" ] &&
CLASSPATH=`cygpath --path --windows "$CLASSPATH"`
[ -n "$MAVEN_PROJECTBASEDIR" ] &&
MAVEN_PROJECTBASEDIR=`cygpath --path --windows "$MAVEN_PROJECTBASEDIR"`
fi
# Provide a "standardized" way to retrieve the CLI args that will
# work with both Windows and non-Windows executions.
MAVEN_CMD_LINE_ARGS="$MAVEN_CONFIG $@"
export MAVEN_CMD_LINE_ARGS
WRAPPER_LAUNCHER=org.apache.maven.wrapper.MavenWrapperMain
exec "$JAVACMD" \
$MAVEN_OPTS \
-classpath "$MAVEN_PROJECTBASEDIR/.mvn/wrapper/maven-wrapper.jar" \
Copy lines
Copy permalink
View git blame
Reference in new issue
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
New issue
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied. See the License for the
# specific language governing permissions and limitations
# under the License.
# ----------------------------------------------------------------------------
# ----------------------------------------------------------------------------
# Maven Start Up Batch script
#
# Required ENV vars:
# ------------------
# JAVA_HOME - location of a JDK home dir
#
# Optional ENV vars
# -----------------
# M2_HOME - location of maven2's installed home dir
# MAVEN_OPTS - parameters passed to the Java VM when running Maven
# e.g. to debug Maven itself, use
# set MAVEN_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
# MAVEN_SKIP_RC - flag to disable loading of mavenrc files
# ----------------------------------------------------------------------------
if [ -z "$MAVEN_SKIP_RC" ] ; then
if [ -f /etc/mavenrc ] ; then
. /etc/mavenrc
Bump junit from 4.8.2 to 4.13.1
#544
Merged
andsel
merged 1 commit into
master
from
dependabot/maven/junit-junit-4.13.1
Nov 12, 2020
Merged
Bump junit from 4.8.2 to 4.13.1
#544
andsel
merged 1 commit into
master
from
dependabot/maven/junit-junit-4.13.1
Nov 12, 2020
Conversation
0
Commits
1
Checks
0
Files changed
Bump junit from 4.8.2 to 4.13.1
dependabot Nov 2, 2020
Waiting for checks information...
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
UnsubAckMessage ackMessage = new UnsubAckMessage();
ackMessage.setMessageID(messageID);
LOG.info("replying with UnsubAck to MSG ID {}", messageID);
session.write(ackMessage);
}
void processSubscribe(ServerChannel session, SubscribeMessage msg, String clientID, boolean cleanSession) {
for (SubscribeMessage.Couple req : msg.subscriptions()) {
AbstractMessage.QOSType qos = AbstractMessage.QOSType.values()[req.getQos()];
Subscription newSubscription = new Subscription(clientID, req.getTopic(), qos, cleanSession);
subscribeSingleTopic(newSubscription, req.getTopic());
}
//ack the client
SubAckMessage ackMessage = new SubAckMessage();
ackMessage.setMessageID(msg.getMessageID());
//reply with requested qos
for(SubscribeMessage.Couple req : msg.subscriptions()) {
AbstractMessage.QOSType qos = AbstractMessage.QOSType.values()[req.getQos()];
ackMessage.addType(qos);
}
LOG.debug("replying with SubAck to MSG ID {}", msg.getMessageID());
session.write(ackMessage);
}
private void subscribeSingleTopic(Subscription newSubscription, final String topic) {
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
</p>
<p><span style="font-size: 10pt;">TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION</spam></p>
<p><b><span style="font-size: 10pt;">1. Definitions.</span></b> </p>
<p><span style="font-size: 10pt;">
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.</span></p>
<p><span style="font-size: 10pt;">
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.</span></p>
<p><span style="font-size: 10pt;">
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.</span></p>
<p><span style="font-size: 10pt;">
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.</span></p>
2
broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
Show comments
View file
Edit file
Delete file
@@ -41,7 +41,7 @@ public void initStore() {
public void storeRetained(Topic topic, StoredMessage storedMessage) {
if (storedMessage.getClientID() == null) {
throw new IllegalArgumentException( "Message to be persisted must have a not null client ID");
throw new IllegalArgumentException("Message to be persisted must have a not null client ID");
}
m_retainedStore.put(topic, storedMessage);
}
3
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
Show comments
View file
Edit file
Delete file
@@ -33,7 +33,7 @@
private static final Logger LOG = LoggerFactory.getLogger(MemorySessionStore.class);
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
moquette/broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
69 lines (59 sloc)
1.94 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/spi/DurableSession.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
213 lines (182 sloc)
7.61 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
71 lines (58 sloc)
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
moquette/pom.xml
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
218 lines (197 sloc)
7.31 KB
Raw
Blame
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Bump junit from 4.8.2 to 4.13.1
#544
Merged
andsel
merged 1 commit into
master
from
dependabot/maven/junit-junit-4.13.1
Nov 12, 2020
+1
−1
Conversation
0
moquette/mvnw.cmd
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
182 lines (147 sloc)
6.45 KB
Raw
Blame
@REM ----------------------------------------------------------------------------
@REM Licensed to the Apache Software Foundation (ASF) under one
@REM or more contributor license agreements. See the NOTICE file
@REM distributed with this work for additional information
@REM regarding copyright ownership. The ASF licenses this file
@REM to you under the Apache License, Version 2.0 (the
@REM "License"); you may not use this file except in compliance
@REM with the License. You may obtain a copy of the License at
@REM
@REM http://www.apache.org/licenses/LICENSE-2.0
@REM
@REM Unless required by applicable law or agreed to in writing,
🚀
👀
MQTT durable subscription exception
bug
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
0.13
1
ProTip!
Type g p on any issue or pull request to go back to the pull request listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
/
fi
if [ -f "$HOME/.mavenrc" ] ; then
. "$HOME/.mavenrc"
fi
fi
# OS specific support. $var _must_ be set to either true or false.
cygwin=false;
darwin=false;
mingw=false
case "`uname`" in
CYGWIN*) cygwin=true ;;
MINGW*) mingw=true;;
Darwin*) darwin=true
# Use /usr/libexec/java_home if available, otherwise fall back to /Library/Java/Home
# See https://developer.apple.com/library/mac/qa/qa1170/_index.html
if [ -z "$JAVA_HOME" ]; then
if [ -x "/usr/libexec/java_home" ]; then
export JAVA_HOME="`/usr/libexec/java_home`"
else
export JAVA_HOME="/Library/Java/Home"
fi
fi
;;
Commits on Nov 2, 2020
Bump junit from 4.8.2 to 4.13.1
…
Bumps [junit](https://github.com/junit-team/junit4) from 4.8.2 to 4.13.1.
- [Release notes](https://github.com/junit-team/junit4/releases)
- [Changelog](https://github.com/junit-team/junit4/blob/main/doc/ReleaseNotes4.13.1.md)
- [Commits](junit-team/junit4@r4.8.2...r4.13.1)
Signed-off-by: dependabot[bot] <support@github.com>
dependabot
committed
Nov 2, 2020
Loading status checks…
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
b313cac
Add this suggestion to a batch that can be applied as a single commit.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
newSubscription.getClientId(), topic,
AbstractMessage.QOSType.formatQoS(newSubscription.getRequestedQos()));
subscriptions.add(newSubscription);
//scans retained messages to be published to the new subscription
Collection<HawtDBStorageService.StoredMessage> messages = m_storageService.searchMatching(new IMatchingCondition() {
public boolean match(String key) {
return SubscriptionsStore.matchTopics(key, topic);
}
});
for (HawtDBStorageService.StoredMessage storedMsg : messages) {
//fire the as retained the message
LOG.debug("send publish message for topic {}", topic);
sendPublish(newSubscription.getClientId(), storedMsg.getTopic(), storedMsg.getQos(), storedMsg.getPayload(), true);
}
}
private void disruptorPublish(OutputMessagingEvent msgEvent) {
LOG.debug("disruptorPublish publishing event on output {}", msgEvent);
long sequence = m_ringBuffer.next();
ValueEvent event = m_ringBuffer.get(sequence);
event.setEvent(msgEvent);
m_ringBuffer.publish(sequence);
}
public void onEvent(ValueEvent t, long l, boolean bln) throws Exception {
package org.dna.mqtt.moquette.messaging.spi;
package org.dna.mqtt.moquette.messaging.spi;
import java.nio.ByteBuffer;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage.QOSType;
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 666cc29
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
<p><span style="font-size: 10pt;">
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.</span></p>
<p><span style="font-size: 10pt;">
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.</span></p>
<p><span style="font-size: 10pt;">
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).</span></p>
<p><span style="font-size: 10pt;">
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.</span></p>
<p><span style="font-size: 10pt;">
class Session {
static class Session {
final String clientID;
final Map<Topic, Subscription> subscriptions = new ConcurrentHashMap<>();
boolean cleanSession;
@@ -170,7 +170,6 @@ public Subscription reload(Subscription subcription) {
return subscriptions.get(subcription.getTopicFilter());
}
@Override
public StoredMessage inFlightAck(String clientID, int messageID) {
return getSession(clientID).outboundFlightMessages.remove(messageID);
10
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
Show comments
View file
Edit file
Delete file
@@ -29,6 +29,10 @@
import io.moquette.server.netty.metrics.MessageMetricsHandler;
import io.netty.channel.Channel;
import static io.netty.channel.ChannelFutureListener.CLOSE;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
/
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.spi;
import io.moquette.spi.impl.subscriptions.Subscription;
import io.moquette.spi.impl.subscriptions.Topic;
import java.util.Collection;
import java.util.List;
public interface ISubscriptionsStore {
/**
* Add a new subscription to the session
*
* @param newSubscription
* the subscription to add.
*/
void addNewSubscription(Subscription newSubscription);
/**
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.spi;
import io.moquette.spi.impl.subscriptions.Subscription;
import io.moquette.spi.impl.subscriptions.Topic;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.util.Collection;
import java.util.HashSet;
import java.util.Set;
public class DurableSession extends ClientSession {
class OutboundFlightZone {
2.51 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.netty.metrics;
import io.netty.channel.Channel;
import io.netty.channel.ChannelDuplexHandler;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.ChannelPromise;
import io.netty.util.Attribute;
<!--<netty.version>4.1.12.Final</netty.version>-->
<source.version>1.8</source.version>
<target.version>1.8</target.version>
<bintray.repo>andsel/maven</bintray.repo>
<bintray.parent.package>io.moquette.moquette-parent</bintray.parent.package>
</properties>
<groupId>io.moquette</groupId>
<artifactId>moquette-parent</artifactId>
<packaging>pom</packaging>
<version>0.14-SNAPSHOT</version>
<name>Moquette MQTT</name>
<description>Moquette lightweight MQTT Broker</description>
<inceptionYear>2011</inceptionYear>
<url>http://moquette.io</url>
<licenses>
<license>
<name>The Apache License, Version 2.0</name>
<url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
</license>
<license>
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Commits
1
Checks
0
Files changed
1
Merged
Bump junit from 4.8.2 to 4.13.1
#544
Changes from all commits
Commits
Show all changes
1 commit
Select commit
b313cac
Bump junit from 4.8.2 to 4.13.1
dependabot Nov 2, 2020
File filter...
Filter file types
.xml
(1)
All 1 file type selected
Filter viewed files
Hide viewed files
@REM software distributed under the License is distributed on an
@REM "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
@REM KIND, either express or implied. See the License for the
@REM specific language governing permissions and limitations
@REM under the License.
@REM ----------------------------------------------------------------------------
@REM ----------------------------------------------------------------------------
@REM Maven Start Up Batch script
@REM
@REM Required ENV vars:
@REM JAVA_HOME - location of a JDK home dir
@REM
@REM Optional ENV vars
@REM M2_HOME - location of maven2's installed home dir
@REM MAVEN_BATCH_ECHO - set to 'on' to enable the echoing of the batch commands
@REM MAVEN_BATCH_PAUSE - set to 'on' to wait for a keystroke before ending
@REM MAVEN_OPTS - parameters passed to the Java VM when running Maven
@REM e.g. to debug Maven itself, use
@REM set MAVEN_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000
@REM MAVEN_SKIP_RC - flag to disable loading of mavenrc files
@REM ----------------------------------------------------------------------------
@REM Begin all REM lines with '@' in case MAVEN_BATCH_ECHO is 'on'
@echo off
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
106 lines (96 sloc)
3.94 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
esac
if [ -z "$JAVA_HOME" ] ; then
if [ -r /etc/gentoo-release ] ; then
JAVA_HOME=`java-config --jre-home`
fi
fi
if [ -z "$M2_HOME" ] ; then
## resolve links - $0 may be a link to maven's home
PRG="$0"
# need this for relative symlinks
while [ -h "$PRG" ] ; do
ls=`ls -ld "$PRG"`
link=`expr "$ls" : '.*-> \(.*\)$'`
if expr "$link" : '/.*' > /dev/null; then
PRG="$link"
else
PRG="`dirname "$PRG"`/$link"
fi
done
saveddir=`pwd`
M2_HOME=`dirname "$PRG"`/..
# make it fully qualified
M2_HOME=`cd "$M2_HOME" && pwd`
cd "$saveddir"
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
MessagingEvent evt = t.getEvent();
//It's always of type OutputMessagingEvent
OutputMessagingEvent outEvent = (OutputMessagingEvent) evt;
outEvent.getChannel().write(outEvent.getMessage());
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."</span></p>
<p><span style="font-size: 10pt;">
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.</span></p>
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
/**
* Value object to maintain the information of single connection, like ClientID, Channel, and clean
* session flag.
@@ -62,7 +66,7 @@ public ConnectionDescriptor(String clientID, Channel session, boolean cleanSessi
}
public void writeAndFlush(Object payload) {
this.channel.writeAndFlush(payload);
this.channel.writeAndFlush(payload).addListener(FIRE_EXCEPTION_ON_FAILURE);
}
public void setupAutoFlusher(int flushIntervalMs) {
@@ -88,7 +92,7 @@ public boolean close() {
if (!success) {
return false;
}
this.channel.close();
this.channel.close().addListener(CLOSE_ON_FAILURE);
return true;
}
@@ -100,7 +104,7 @@ public void abort() {
LOG.info("Closing connection descriptor. MqttClientId = {}.", clientID);
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
406 lines (365 sloc)
20.1 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* Removed a specific subscription
*
* @param topic
* the topic of the subscription.
* @param clientID
* the session client.
*/
void removeSubscription(Topic topic, String clientID);
/**
* Remove all the subscriptions of the session
*
* @param clientID
* the client ID
*/
void wipeSubscriptions(String clientID);
/**
* Return all topic filters to recreate the subscription tree.
*/
List<Subscription> listAllSubscriptions();
/**
* Load from storage all the subscriptions of the specified client.
* */
Collection<Subscription> listClientSubscriptions(String clientID);
/**
/**
* Save the binding messageID, clientID - message
*
* @param messageID the packet ID used in transmission
* @param msg the message to put in flight zone
*/
void waitingAck(int messageID, IMessagesStore.StoredMessage msg) {
if (LOG.isTraceEnabled()) {
}
sessionsStore.inFlight(clientID, messageID, msg);
}
IMessagesStore.StoredMessage acknowledged(int messageID) {
if (LOG.isTraceEnabled()) {
}
return sessionsStore.inFlightAck(clientID, messageID);
}
}
private static final Logger LOG = LoggerFactory.getLogger(DurableSession.class);
private final ISessionsStore sessionsStore;
private final ISubscriptionsStore subscriptionsStore;
private final OutboundFlightZone outboundFlightZone;
private final InboundFlightZone inboundFlightZone;
public DurableSession(String clientID, ISessionsStore sessions, ISubscriptionsStore subscriptionsStore) {
super(clientID);
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class MessageMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<MessageMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("MessageMetrics");
private MessageMetricsCollector m_collector;
public MessageMetricsHandler(MessageMetricsCollector collector) {
m_collector = collector;
}
@Override
public void channelActive(ChannelHandlerContext ctx) throws Exception {
Attribute<MessageMetrics> attr = ctx.channel().attr(ATTR_KEY_METRICS);
attr.set(new MessageMetrics());
super.channelActive(ctx);
}
@Override
public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementRead(1);
ctx.fireChannelRead(msg);
}
@Override
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
<name>Eclipse Public License - Version 1.0</name>
<url>http://www.eclipse.org/org/documents/epl-v10.php</url>
</license>
</licenses>
<developers>
<developer>
<id>andsel</id>
<name>Andrea Selva</name>
<roles>
<role>architect</role>
<role>developer</role>
<role>founder</role>
</roles>
<timezone>+1</timezone>
</developer>
</developers>
<scm>
<connection>scm:git:git@github.com:moquette-io/moquette.git</connection>
<developerConnection>scm:git:git@github.com:moquette-io/moquette.git</developerConnection>
<url>git@github.com:moquette-io/moquette.git</url>
</scm>
<modules>
<module>broker</module>
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Clear filters
Jump to…
Jump to file
Failed to load files. Retry
Always
Unified
Split
Just for now
Hide whitespace changes
Apply and reload
2
pom.xml
Show comments
View file
Edit file
Delete file
Open in desktop
@@ -60,7 +60,7 @@
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.8.2</version>
<version>4.13.1</version>
@REM set title of command window
title %0
@REM enable echoing by setting MAVEN_BATCH_ECHO to 'on'
@if "%MAVEN_BATCH_ECHO%" == "on" echo %MAVEN_BATCH_ECHO%
@REM set %HOME% to equivalent of $HOME
if "%HOME%" == "" (set "HOME=%HOMEDRIVE%%HOMEPATH%")
@REM Execute a user defined script before this one
if not "%MAVEN_SKIP_RC%" == "" goto skipRcPre
@REM check for pre script, once with legacy .bat ending and once with .cmd ending
if exist "%HOME%\mavenrc_pre.bat" call "%HOME%\mavenrc_pre.bat"
if exist "%HOME%\mavenrc_pre.cmd" call "%HOME%\mavenrc_pre.cmd"
:skipRcPre
@setlocal
set ERROR_CODE=0
@REM To isolate internal variables from possible post scripts, we use another setlocal
@setlocal
@REM ==== START VALIDATION ====
if not "%JAVA_HOME%" == "" goto OkJHome
echo.
echo Error: JAVA_HOME not found in your environment. >&2
echo Please set the JAVA_HOME variable in your environment to match the >&2
echo location of your Java installation. >&2
echo.
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.netty.metrics;
import io.moquette.server.netty.NettyUtils;
import io.netty.channel.ChannelDuplexHandler;
import io.netty.channel.ChannelHandler.Sharable;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.ChannelPromise;
import io.netty.handler.codec.mqtt.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.util.List;
import static io.moquette.spi.impl.Utils.messageId;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
/**
*
* @author andrea
*/
# echo Using m2 at $M2_HOME
fi
# For Cygwin, ensure paths are in UNIX format before anything is touched
if $cygwin ; then
[ -n "$M2_HOME" ] &&
M2_HOME=`cygpath --unix "$M2_HOME"`
[ -n "$JAVA_HOME" ] &&
JAVA_HOME=`cygpath --unix "$JAVA_HOME"`
[ -n "$CLASSPATH" ] &&
CLASSPATH=`cygpath --path --unix "$CLASSPATH"`
fi
# For Mingw, ensure paths are in UNIX format before anything is touched
if $mingw ; then
[ -n "$M2_HOME" ] &&
M2_HOME="`(cd "$M2_HOME"; pwd)`"
[ -n "$JAVA_HOME" ] &&
JAVA_HOME="`(cd "$JAVA_HOME"; pwd)`"
fi
if [ -z "$JAVA_HOME" ]; then
javaExecutable="`which javac`"
if [ -n "$javaExecutable" ] && ! [ "`expr \"$javaExecutable\" : '\([^ ]*\)'`" = "no" ]; then
# readlink(1) is not available as standard on Solaris 10.
readLink=`which readlink`
if [ ! `expr "$readLink" : '\([^ ]*\)'` = "no" ]; then
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.BufferedReader;
import java.io.BufferedReader;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
<p><b><span style="font-size: 10pt;">2. Grant of Copyright License.</span></b> </p>
<p><span style="font-size: 10pt;">
Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.</span></p>
<p><b><span style="font-size: 10pt;">3. Grant of Patent License.</span></b><p>
<p><span style="font-size: 10pt;">
Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
// try {
// this.channel.disconnect().sync();
this.channel.close(); // .sync();
this.channel.close().addListener(CLOSE_ON_FAILURE); // .sync();
// } catch (InterruptedException e) {
// e.printStackTrace();
// }
4
broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
Show comments
View file
Edit file
Delete file
@@ -19,6 +19,8 @@
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
@@ -51,7 +53,7 @@ public Reader loadDefaultResource() {
public Reader loadResource(String relativePath) {
LOG.info("Loading resource. RelativePath = {}.", relativePath);
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.netty;
import io.moquette.BrokerConstants;
import io.moquette.server.ServerAcceptor;
import io.moquette.server.config.IConfig;
import io.moquette.server.netty.metrics.*;
* @param subcription
* the subscription to reaload from storage.
* @return the subscription stored by clientID and topicFilter, if any else null;
*/
Subscription reload(Subscription subcription);
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
this.subscriptionsStore = subscriptionsStore;
this.sessionsStore = sessions;
this.outboundFlightZone = new OutboundFlightZone();
this.inboundFlightZone = new InboundFlightZone();
}
public void reloadAllSubscriptionsFromStore() {
Collection<Subscription> reloadedSubscriptions = this.subscriptionsStore.listClientSubscriptions(this.clientID);
this.subscriptions.addAll(reloadedSubscriptions);
}
@Override
public boolean isCleanSession() {
return false;
}
@Override
public boolean subscribe(Subscription newSubscription) {
newSubscription.getTopicFilter(), newSubscription.getRequestedQos());
boolean validTopic = newSubscription.getTopicFilter().isValid();
if (!validTopic) {
newSubscription.getTopicFilter());
metrics.incrementWrote(1);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
@Override
public void close(ChannelHandlerContext ctx, ChannelPromise promise) throws Exception {
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
m_collector.sumReadMessages(metrics.messagesRead());
m_collector.sumWroteMessages(metrics.messagesWrote());
super.close(ctx, promise);
}
public static MessageMetrics getMessageMetrics(Channel channel) {
return channel.attr(ATTR_KEY_METRICS).get();
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
<module>distribution</module>
<module>embedding_moquette</module>
</modules>
<dependencies>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.13.1</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.slf4j</groupId>
<artifactId>slf4j-log4j12</artifactId>
<version>1.7.5</version>
<scope>test</scope>
</dependency>
<!-- needs extra dependencies: objenesis & hamcrest -->
<dependency>
<groupId>org.mockito</groupId>
<artifactId>mockito-core</artifactId>
<version>1.9.0</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.assertj</groupId>
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
<scope>test</scope>
</dependency>
Toggle all file notes
ProTip!
Use n and p to navigate between commits in a pull request.
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
goto error
:OkJHome
if exist "%JAVA_HOME%\bin\java.exe" goto init
echo.
echo Error: JAVA_HOME is set to an invalid directory. >&2
echo JAVA_HOME = "%JAVA_HOME%" >&2
echo Please set the JAVA_HOME variable in your environment to match the >&2
echo location of your Java installation. >&2
echo.
goto error
@REM ==== END VALIDATION ====
:init
@REM Find the project base dir, i.e. the directory that contains the folder ".mvn".
@REM Fallback to current working directory if not found.
set MAVEN_PROJECTBASEDIR=%MAVEN_BASEDIR%
IF NOT "%MAVEN_PROJECTBASEDIR%"=="" goto endDetectBaseDir
set EXEC_DIR=%CD%
set WDIR=%EXEC_DIR%
:findBaseDir
IF EXIST "%WDIR%"\.mvn goto baseDirFound
cd ..
IF "%WDIR%"=="%CD%" goto baseDirNotFound
set WDIR=%CD%
goto findBaseDir
@Sharable
public class MQTTMessageLogger extends ChannelDuplexHandler {
private static final Logger LOG = LoggerFactory.getLogger("messageLogger");
@Override
public void channelRead(ChannelHandlerContext ctx, Object message) {
logMQTTMessage(ctx, message, "C->B");
ctx.fireChannelRead(message);
}
private void logMQTTMessage(ChannelHandlerContext ctx, Object message, String direction) {
if (!(message instanceof MqttMessage)) {
return;
}
MqttMessage msg = (MqttMessage) message;
String clientID = NettyUtils.clientID(ctx.channel());
MqttMessageType messageType = msg.fixedHeader().messageType();
switch (messageType) {
case CONNECT:
case CONNACK:
case PINGREQ:
case PINGRESP:
case DISCONNECT:
break;
case SUBSCRIBE:
if $darwin ; then
javaHome="`dirname \"$javaExecutable\"`"
javaExecutable="`cd \"$javaHome\" && pwd -P`/javac"
else
javaExecutable="`readlink -f \"$javaExecutable\"`"
fi
javaHome="`dirname \"$javaExecutable\"`"
javaHome=`expr "$javaHome" : '\(.*\)/bin'`
JAVA_HOME="$javaHome"
export JAVA_HOME
fi
fi
fi
if [ -z "$JAVACMD" ] ; then
if [ -n "$JAVA_HOME" ] ; then
if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
# IBM's JDK on AIX uses strange locations for the executables
JAVACMD="$JAVA_HOME/jre/sh/java"
else
JAVACMD="$JAVA_HOME/bin/java"
fi
else
JAVACMD="`which java`"
fi
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.File;
import java.io.File;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
Show comments
View file
Edit file
Delete file
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
</span></p>
<p><b><span style="font-size: 10pt;">
4. Redistribution.
</span></b></p>
<p><span style="font-size: 10pt;">You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:</span><p>
<ul>
<li><span style="font-size: 10pt;">
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and</span><p>
</li>
<li><span style="font-size: 10pt;">
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and</span><p>
</li>
</li><span style="font-size: 10pt;">
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
InputStream is = this.classLoader.getResourceAsStream(relativePath);
return is != null ? new InputStreamReader(is) : null;
return is != null ? new InputStreamReader(is, StandardCharsets.UTF_8) : null;
}
@Override
13
broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.text.ParseException;
import java.util.Properties;
@@ -55,15 +57,10 @@ void parse(File file) throws ParseException {
moquette/FileResourceLoader.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
import io.moquette.spi.impl.ProtocolProcessor;
import io.moquette.spi.security.ISslContextCreator;
import io.netty.bootstrap.ServerBootstrap;
import io.netty.buffer.ByteBuf;
import io.netty.channel.*;
import io.netty.channel.epoll.EpollEventLoopGroup;
import io.netty.channel.epoll.EpollServerSocketChannel;
import io.netty.channel.nio.NioEventLoopGroup;
import io.netty.channel.socket.ServerSocketChannel;
import io.netty.channel.socket.SocketChannel;
import io.netty.channel.socket.nio.NioServerSocketChannel;
import io.netty.handler.codec.MessageToMessageDecoder;
import io.netty.handler.codec.MessageToMessageEncoder;
import io.netty.handler.codec.http.HttpObjectAggregator;
import io.netty.handler.codec.http.HttpRequestDecoder;
import io.netty.handler.codec.http.HttpResponseEncoder;
import io.netty.handler.codec.http.HttpServerCodec;
import io.netty.handler.codec.http.websocketx.BinaryWebSocketFrame;
import io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler;
import io.netty.handler.codec.mqtt.MqttDecoder;
import io.netty.handler.codec.mqtt.MqttEncoder;
import io.netty.handler.ssl.SslHandler;
moquette/MemorySessionStore.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
// send SUBACK with 0x80 for this topic filter
return false;
}
Subscription existingSub = subscriptionsStore.reload(newSubscription);
// update the selected subscriptions if not present or if has a greater qos
if (existingSub == null || existingSub.qosLessThan(newSubscription)) {
if (existingSub != null) {
LOG.info("Subscription already existed with a lower QoS value. It will be updated. CId={}, " +
newSubscription.getTopicFilter(), existingSub.getRequestedQos(), newSubscription.getRequestedQos());
subscriptions.remove(newSubscription);
}
subscriptions.add(newSubscription);
subscriptionsStore.addNewSubscription(newSubscription);
}
return true;
}
@Override
public void unsubscribeFrom(Topic topicFilter) {
subscriptionsStore.removeSubscription(topicFilter, clientID);
Set<Subscription> subscriptionsToRemove = new HashSet<>();
moquette/MoquetteIdleTimeoutHandler.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
<artifactId>assertj-core</artifactId>
<version>2.6.0</version>
<scope>test</scope>
</dependency>
<dependency>
<groupId>org.awaitility</groupId>
<artifactId>awaitility</artifactId>
<version>3.0.0</version>
<scope>test</scope>
</dependency>
</dependencies>
<reporting>
<plugins>
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>cobertura-maven-plugin</artifactId>
<version>2.6</version>
</plugin>
</plugins>
</reporting>
<build>
<plugins>
moquette/ConnectionDescriptor.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
123 lines (112 sloc)
4.9 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
Cannot retrieve contributors at this time
72 lines (59 sloc)
2.56 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.netty.metrics;
import io.netty.buffer.ByteBuf;
import io.netty.channel.Channel;
moquette/ClasspathResourceLoader.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
:baseDirFound
set MAVEN_PROJECTBASEDIR=%WDIR%
cd "%EXEC_DIR%"
goto endDetectBaseDir
:baseDirNotFound
set MAVEN_PROJECTBASEDIR=%EXEC_DIR%
cd "%EXEC_DIR%"
:endDetectBaseDir
IF NOT EXIST "%MAVEN_PROJECTBASEDIR%\.mvn\jvm.config" goto endReadAdditionalConfig
@setlocal EnableExtensions EnableDelayedExpansion
for /F "usebackq delims=" %%a in ("%MAVEN_PROJECTBASEDIR%\.mvn\jvm.config") do set JVM_CONFIG_MAVEN_PROPS=!JVM_CONFIG_MAVEN_PROPS! %%a
@endlocal & set JVM_CONFIG_MAVEN_PROPS=%JVM_CONFIG_MAVEN_PROPS%
:endReadAdditionalConfig
SET MAVEN_JAVA_EXE="%JAVA_HOME%\bin\java.exe"
set WRAPPER_JAR="%MAVEN_PROJECTBASEDIR%\.mvn\wrapper\maven-wrapper.jar"
set WRAPPER_LAUNCHER=org.apache.maven.wrapper.MavenWrapperMain
set DOWNLOAD_URL="https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
FOR /F "tokens=1,2 delims==" %%A IN ("%MAVEN_PROJECTBASEDIR%\.mvn\wrapper\maven-wrapper.properties") DO (
IF "%%A"=="wrapperUrl" SET DOWNLOAD_URL=%%B
)
@REM Extension to allow automatically downloading the maven-wrapper.jar from Maven-central
@REM This allows using the maven wrapper in projects that prohibit checking in binary data.
MqttSubscribeMessage subscribe = (MqttSubscribeMessage) msg;
subscribe.payload().topicSubscriptions());
break;
case UNSUBSCRIBE:
MqttUnsubscribeMessage unsubscribe = (MqttUnsubscribeMessage) msg;
break;
case PUBLISH:
MqttPublishMessage publish = (MqttPublishMessage) msg;
break;
case PUBREC:
case PUBCOMP:
case PUBREL:
case PUBACK:
case UNSUBACK:
break;
case SUBACK:
MqttSubAckMessage suback = (MqttSubAckMessage) msg;
final List<Integer> grantedQoSLevels = suback.payload().grantedQoSLevels();
grantedQoSLevels);
break;
}
}
@Override
fi
if [ ! -x "$JAVACMD" ] ; then
echo "Error: JAVA_HOME is not defined correctly." >&2
echo " We cannot execute $JAVACMD" >&2
exit 1
fi
if [ -z "$JAVA_HOME" ] ; then
echo "Warning: JAVA_HOME environment variable is not set."
fi
CLASSWORLDS_LAUNCHER=org.codehaus.plexus.classworlds.launcher.Launcher
# traverses directory structure from process work directory to filesystem root
# first directory with .mvn subdirectory is considered project base directory
find_maven_basedir() {
if [ -z "$1" ]
then
echo "Path not specified to find_maven_basedir"
return 1
fi
basedir="$1"
wdir="$1"
while [ "$wdir" != '/' ] ; do
if [ -d "$wdir"/.mvn ] ; then
basedir=$wdir
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
excluding those notices that do not pertain to any part of
the Derivative Works; and</span><p>
</li>
<li><span style="font-size: 10pt;">
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.</span><p>
return;
}
try {
FileReader reader = new FileReader(file);
Reader reader = Files.newBufferedReader(file.toPath(), StandardCharsets.UTF_8);
parse(reader);
} catch (FileNotFoundException fex) {
LOG.warn(
String.format(
"parsing not existing file %s, so fallback on default configuration!",
file.getAbsolutePath()),
fex);
return;
} catch (IOException fex) {
LOG.warn("parsing not existing file {}, fallback on default configuration!", file.getAbsolutePath(), fex);
}
}
9
broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
Show comments
View file
Edit file
Delete file
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
import io.netty.handler.timeout.IdleStateHandler;
import io.netty.util.concurrent.Future;
import io.netty.util.concurrent.GenericFutureListener;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLEngine;
import java.io.IOException;
import java.util.List;
import java.util.Optional;
import java.util.concurrent.TimeUnit;
import static io.moquette.BrokerConstants.*;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
public class NettyAcceptor implements ServerAcceptor {
private static final String MQTT_SUBPROTOCOL_CSV_LIST = "mqtt, mqttv3.1, mqttv3.1.1";
static class WebSocketFrameToByteBufDecoder extends MessageToMessageDecoder<BinaryWebSocketFrame> {
@Override
protected void decode(ChannelHandlerContext chc, BinaryWebSocketFrame frame, List<Object> out)
throws Exception {
// convert the frame to a ByteBuf
ByteBuf bb = frame.content();
// System.out.println("WebSocketFrameToByteBufDecoder decode - " +
// ByteBufUtil.hexDump(bb));
bb.retain();
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
for (Subscription sub : this.subscriptions) {
if (sub.getTopicFilter().equals(topicFilter)) {
subscriptionsToRemove.add(sub);
}
}
subscriptions.removeAll(subscriptionsToRemove);
}
@Override
public void cleanSession() {
sessionsStore.removeTemporaryQoS2(this.clientID);
LOG.info("Wiping existing subscriptions. ClientId={}", clientID);
subscriptionsStore.wipeSubscriptions(clientID);
LOG.info("Removing queues. ClientId={}", clientID);
sessionsStore.dropQueue(clientID);
}
@Override
public void disconnect() {
LOG.info("Client disconnected. Removing its subscriptions. CId={}", clientID);
// cleanup topic subscriptions
cleanSession();
}
@Override
protected int nextPacketId() {
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Learn more
Accept
Reject
Save preferences
moquette/MemoryMessagesStore.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<configuration>
</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-checkstyle-plugin</artifactId>
<version>2.17</version>
<configuration>
<configLocation>checkstyle.xml</configLocation>
<!--<suppressionsLocation>checkstyle-suppressions.xml</suppressionsLocation>-->
<!--
<configLocation>/google_checks.xml</configLocation>
-->
<failOnViolation>true</failOnViolation>
<consoleOutput>true</consoleOutput>
</configuration>
<executions>
<execution>
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.netty;
import io.moquette.spi.impl.ProtocolProcessor;
import io.netty.channel.ChannelHandler.Sharable;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.ChannelInboundHandlerAdapter;
import io.netty.handler.codec.mqtt.*;
import io.netty.util.ReferenceCountUtil;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_MOST_ONCE;
@Sharable
public class NettyMQTTHandler extends ChannelInboundHandlerAdapter {
private static final Logger LOG = LoggerFactory.getLogger(NettyMQTTHandler.class);
private final ProtocolProcessor m_processor;
public NettyMQTTHandler(ProtocolProcessor processor) {
moquette/InterceptConnectMessage.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
import io.netty.channel.ChannelDuplexHandler;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.ChannelPromise;
import io.netty.util.Attribute;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class BytesMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<BytesMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("BytesMetrics");
private BytesMetricsCollector m_collector;
public BytesMetricsHandler(BytesMetricsCollector collector) {
m_collector = collector;
}
@Override
public void channelActive(ChannelHandlerContext ctx) throws Exception {
Attribute<BytesMetrics> attr = ctx.channel().attr(ATTR_KEY_METRICS);
attr.set(new BytesMetrics());
super.channelActive(ctx);
}
@Override
public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementRead(((ByteBuf) msg).readableBytes());
moquette/ConfigurationParser.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Reject
Save preferences
if exist %WRAPPER_JAR% (
if "%MVNW_VERBOSE%" == "true" (
echo Found %WRAPPER_JAR%
)
) else (
if not "%MVNW_REPOURL%" == "" (
SET DOWNLOAD_URL="%MVNW_REPOURL%/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
)
if "%MVNW_VERBOSE%" == "true" (
echo Couldn't find %WRAPPER_JAR%, downloading it ...
echo Downloading from: %DOWNLOAD_URL%
)
powershell -Command "&{"^
"$webclient = new-object System.Net.WebClient;"^
"if (-not ([string]::IsNullOrEmpty('%MVNW_USERNAME%') -and [string]::IsNullOrEmpty('%MVNW_PASSWORD%'))) {"^
"$webclient.Credentials = new-object System.Net.NetworkCredential('%MVNW_USERNAME%', '%MVNW_PASSWORD%');"^
"}"^
"[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; $webclient.DownloadFile('%DOWNLOAD_URL%', '%WRAPPER_JAR%')"^
"}"
if "%MVNW_VERBOSE%" == "true" (
echo Finished downloading %WRAPPER_JAR%
)
public void channelInactive(ChannelHandlerContext ctx) throws Exception {
String clientID = NettyUtils.clientID(ctx.channel());
if (clientID != null && !clientID.isEmpty()) {
LOG.info("Channel closed <{}>", clientID);
}
ctx.fireChannelInactive();
}
@Override
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
logMQTTMessage(ctx, msg, "C<-B");
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
break
fi
# workaround for JBEAP-8937 (on Solaris 10/Sparc)
wdir=`cd "$wdir/.."; pwd`
fi
# end of workaround
done
}
# concatenates all lines of a file
concat_lines() {
if [ -f "$1" ]; then
echo "$(tr -s '\n' ' ' < "$1")"
fi
}
BASE_DIR=`find_maven_basedir "$(pwd)"`
if [ -z "$BASE_DIR" ]; then
exit 1;
fi
##########################################################################################
# Extension to allow automatically downloading the maven-wrapper.jar from Maven-central
# This allows using the maven wrapper in projects that prohibit checking in binary data.
##########################################################################################
if [ -r "$BASE_DIR/.mvn/wrapper/maven-wrapper.jar" ]; then
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
</li>
</ul>
</span></p>
<p><span style="font-size: 10pt;">
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
</span></p>
<p><b><span style="font-size: 10pt;">
5. Submission of Contributions.
</span></b></p>
<p><span style="font-size: 10pt;">Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
</span></p>
<p><b><span style="font-size: 10pt;">
@@ -19,10 +19,15 @@
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.nio.file.Files;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static java.nio.charset.StandardCharsets.UTF_8;
public class FileResourceLoader implements IResourceLoader {
private static final Logger LOG = LoggerFactory.getLogger(FileResourceLoader.class);
@@ -68,8 +73,8 @@ public Reader loadResource(File f) {
throw new ResourceIsDirectoryException("File \"" + f + "\" is a directory!");
}
try {
return new FileReader(f);
} catch (FileNotFoundException e) {
return Files.newBufferedReader(f.toPath(), UTF_8);
} catch (IOException e) {
LOG.error("The file does not exist. Path = {}.", f.getAbsolutePath());
return null;
Sign in to GitHub · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
out.add(bb);
}
}
static class ByteBufToWebSocketFrameEncoder extends MessageToMessageEncoder<ByteBuf> {
@Override
protected void encode(ChannelHandlerContext chc, ByteBuf bb, List<Object> out) throws Exception {
// convert the ByteBuf to a WebSocketFrame
BinaryWebSocketFrame result = new BinaryWebSocketFrame();
// System.out.println("ByteBufToWebSocketFrameEncoder encode - " +
// ByteBufUtil.hexDump(bb));
result.content().writeBytes(bb);
out.add(result);
}
}
abstract static class PipelineInitializer {
abstract void init(ChannelPipeline pipeline) throws Exception;
}
private static final Logger LOG = LoggerFactory.getLogger(NettyAcceptor.class);
EventLoopGroup m_bossGroup;
EventLoopGroup m_workerGroup;
BytesMetricsCollector m_bytesMetricsCollector = new BytesMetricsCollector();
MessageMetricsCollector m_metricsCollector = new MessageMetricsCollector();
private Optional<? extends ChannelInboundHandler> metrics;
private Optional<? extends ChannelInboundHandler> errorsCather;
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
return this.sessionsStore.nextPacketID(this.clientID);
}
@Override
public IMessagesStore.StoredMessage inFlightAcknowledged(int messageID) {
return outboundFlightZone.acknowledged(messageID);
}
@Override
public int inFlightAckWaiting(IMessagesStore.StoredMessage msg) {
LOG.debug("Adding message to inflight zone. CId={}", clientID);
int messageId = this.nextPacketId();
outboundFlightZone.waitingAck(messageId, msg);
return messageId;
}
@Override
public IMessagesStore.StoredMessage inboundInflight(int messageID) {
return inboundFlightZone.lookup(messageID);
}
@Override
public void markAsInboundInflight(int messageID, IMessagesStore.StoredMessage msg) {
inboundFlightZone.waitingRel(messageID, msg);
}
@Override
public void moveInFlightToSecondPhaseAckWaiting(int messageID, IMessagesStore.StoredMessage msg) {
this.sessionsStore.moveInFlightToSecondPhaseAckWaiting(this.clientID, messageID, msg);
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
<phase>validate</phase>
<goals>
<goal>check</goal>
</goals>
</execution>
</executions>
</plugin>
</plugins>
</build>
<profiles>
<profile>
<id>release-sign-artifacts</id>
<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-source-plugin</artifactId>
<executions>
<execution>
<id>attach-sources</id>
<goals>
<goal>jar</goal>
</goals>
</execution>
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
m_processor = processor;
}
@Override
public void channelRead(ChannelHandlerContext ctx, Object message) {
MqttMessage msg = (MqttMessage) message;
MqttMessageType messageType = msg.fixedHeader().messageType();
LOG.debug("Processing MQTT message, type={}", messageType);
try {
switch (messageType) {
case CONNECT:
m_processor.processConnect(ctx.channel(), (MqttConnectMessage) msg);
break;
case SUBSCRIBE:
m_processor.processSubscribe(ctx.channel(), (MqttSubscribeMessage) msg);
break;
case UNSUBSCRIBE:
m_processor.processUnsubscribe(ctx.channel(), (MqttUnsubscribeMessage) msg);
break;
case PUBLISH:
m_processor.processPublish(ctx.channel(), (MqttPublishMessage) msg);
break;
case PUBREC:
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
ctx.fireChannelRead(msg);
}
@Override
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementWrote(((ByteBuf) msg).writableBytes());
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
@Override
public void close(ChannelHandlerContext ctx, ChannelPromise promise) throws Exception {
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
m_collector.sumReadBytes(metrics.readBytes());
m_collector.sumWroteBytes(metrics.wroteBytes());
super.close(ctx, promise);
}
public static BytesMetrics getBytesMetrics(Channel channel) {
return channel.attr(ATTR_KEY_METRICS).get();
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
)
@REM End of extension
@REM Provide a "standardized" way to retrieve the CLI args that will
@REM work with both Windows and non-Windows executions.
set MAVEN_CMD_LINE_ARGS=%*
%MAVEN_JAVA_EXE% %JVM_CONFIG_MAVEN_PROPS% %MAVEN_OPTS% %MAVEN_DEBUG_OPTS% -classpath %WRAPPER_JAR% "-Dmaven.multiModuleProjectDirectory=%MAVEN_PROJECTBASEDIR%" %WRAPPER_LAUNCHER% %MAVEN_CONFIG% %*
if ERRORLEVEL 1 goto error
goto end
:error
set ERROR_CODE=1
:end
@endlocal & set ERROR_CODE=%ERROR_CODE%
if not "%MAVEN_SKIP_RC%" == "" goto skipRcPost
@REM check for post script, once with legacy .bat ending and once with .cmd ending
if exist "%HOME%\mavenrc_post.bat" call "%HOME%\mavenrc_post.bat"
if exist "%HOME%\mavenrc_post.cmd" call "%HOME%\mavenrc_post.cmd"
:skipRcPost
@REM pause the script if MAVEN_BATCH_PAUSE is set to 'on'
if "%MAVEN_BATCH_PAUSE%" == "on" pause
if "%MAVEN_TERMINATE_CMD%" == "on" exit %ERROR_CODE%
exit /B %ERROR_CODE%
Copy lines
Copy permalink
View git blame
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
if [ "$MVNW_VERBOSE" = true ]; then
echo "Found .mvn/wrapper/maven-wrapper.jar"
fi
else
if [ "$MVNW_VERBOSE" = true ]; then
echo "Couldn't find .mvn/wrapper/maven-wrapper.jar, downloading it ..."
fi
if [ -n "$MVNW_REPOURL" ]; then
jarUrl="$MVNW_REPOURL/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
else
jarUrl="https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar"
fi
while IFS="=" read key value; do
case "$key" in (wrapperUrl) jarUrl="$value"; break ;;
esac
done < "$BASE_DIR/.mvn/wrapper/maven-wrapper.properties"
if [ "$MVNW_VERBOSE" = true ]; then
echo "Downloading from: $jarUrl"
fi
wrapperJarPath="$BASE_DIR/.mvn/wrapper/maven-wrapper.jar"
if $cygwin; then
wrapperJarPath=`cygpath --path --windows "$wrapperJarPath"`
fi
import com.lmax.disruptor.BatchEventProcessor;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
Added Apache 2.0 license · moquette-io/moquette@af8c0e3 · GitHub
6. Trademarks.
</span></b></p>
<p><span style="font-size: 10pt;">This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
</span></p>
<p><b><span style="font-size: 10pt;">
7. Disclaimer of Warranty.
</span></b></p>
<p><span style="font-size: 10pt;">Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
</span></p>
<p><b><span style="font-size: 10pt;">
8. Limitation of Liability.
</span></b></p>
<p><span style="font-size: 10pt;">In no event and under no legal theory,
Added Apache 2.0 license · moquette-io/moquette@af8c0e3 · GitHub
}
4
broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.handler.timeout.IdleState;
import io.netty.handler.timeout.IdleStateEvent;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
@Sharable
class MoquetteIdleTimeoutHandler extends ChannelDuplexHandler {
@@ -37,7 +39,7 @@ public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exc
LOG.info("Firing channel inactive event. MqttClientId = {}.", NettyUtils.clientID(ctx.channel()));
// fire a channelInactive to trigger publish of Will
ctx.fireChannelInactive();
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
} else {
if (LOG.isDebugEnabled()) {
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Sign in to GitHub · GitHub
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
private int nettySoBacklog;
private boolean nettySoReuseaddr;
private boolean nettyTcpNodelay;
private boolean nettySoKeepalive;
private int nettyChannelTimeoutSeconds;
private int maxBytesInMessage;
private Class<? extends ServerSocketChannel> channelClass;
@Override
public void initialize(ProtocolProcessor processor, IConfig props, ISslContextCreator sslCtxCreator)
throws IOException {
LOG.info("Initializing Netty acceptor...");
nettySoBacklog = Integer.parseInt(props.getProperty(BrokerConstants.NETTY_SO_BACKLOG_PROPERTY_NAME, "128"));
nettySoReuseaddr = Boolean
.parseBoolean(props.getProperty(BrokerConstants.NETTY_SO_REUSEADDR_PROPERTY_NAME, "true"));
nettyTcpNodelay = Boolean
.parseBoolean(props.getProperty(BrokerConstants.NETTY_TCP_NODELAY_PROPERTY_NAME, "true"));
nettySoKeepalive = Boolean
.parseBoolean(props.getProperty(BrokerConstants.NETTY_SO_KEEPALIVE_PROPERTY_NAME, "true"));
nettyChannelTimeoutSeconds = Integer
.parseInt(props.getProperty(BrokerConstants.NETTY_CHANNEL_TIMEOUT_SECONDS_PROPERTY_NAME, "10"));
moquette/HazelcastInterceptHandler.java at 033a428184ce1e8a134fda082c04346ac6858c61 · moquette-io/moquette · GitHub
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
moquette/license.txt at af8c0e3b9a186faf144f51218b934188af8b1120 · moquette-io/moquette · GitHub
}
@Override
public boolean isEmptyQueue() {
return this.sessionsStore.queue(clientID).isEmpty();
}
@Override
public void dropQueue() {
LOG.debug("Removing messages of session. CId={}", this.clientID);
this.sessionsStore.dropQueue(this.clientID);
LOG.debug("Messages of the session have been removed. CId={}", this.clientID);
}
@Override
public EnqueuedMessage poll() {
IMessagesStore.StoredMessage msg = this.sessionsStore.queue(clientID).poll();
if (msg == null) {
return null;
}
int messageId = this.inFlightAckWaiting(msg);
return new EnqueuedMessage(msg, messageId);
}
@Override
public void enqueue(IMessagesStore.StoredMessage message) {
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Fixed checkStyle and ErrorProne warns · moquette-io/moquette@033a428 · GitHub
Fixed checkStyle and ErrorProne warns · moquette-io/moquette@033a428 · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
</executions>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-javadoc-plugin</artifactId>
<executions>
<execution>
<id>attach-javadocs</id>
<goals>
<goal>jar</goal>
</goals>
</execution>
</executions>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-gpg-plugin</artifactId>
<executions>
<execution>
<id>sign-artifacts</id>
<phase>package</phase>
<goals>
<goal>sign</goal>
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
m_processor.processPubRec(ctx.channel(), msg);
break;
case PUBCOMP:
m_processor.processPubComp(ctx.channel(), msg);
break;
case PUBREL:
m_processor.processPubRel(ctx.channel(), msg);
break;
case DISCONNECT:
m_processor.processDisconnect(ctx.channel());
break;
case PUBACK:
m_processor.processPubAck(ctx.channel(), (MqttPubAckMessage) msg);
break;
case PINGREQ:
MqttFixedHeader pingHeader = new MqttFixedHeader(
MqttMessageType.PINGRESP,
false,
AT_MOST_ONCE,
false,
0);
MqttMessage pingResp = new MqttMessage(pingHeader);
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
if command -v wget > /dev/null; then
if [ "$MVNW_VERBOSE" = true ]; then
echo "Found wget ... using wget"
fi
if [ -z "$MVNW_USERNAME" ] || [ -z "$MVNW_PASSWORD" ]; then
wget "$jarUrl" -O "$wrapperJarPath"
else
wget --http-user=$MVNW_USERNAME --http-password=$MVNW_PASSWORD "$jarUrl" -O "$wrapperJarPath"
fi
elif command -v curl > /dev/null; then
if [ "$MVNW_VERBOSE" = true ]; then
echo "Found curl ... using curl"
fi
if [ -z "$MVNW_USERNAME" ] || [ -z "$MVNW_PASSWORD" ]; then
curl -o "$wrapperJarPath" "$jarUrl" -f
else
curl --user $MVNW_USERNAME:$MVNW_PASSWORD -o "$wrapperJarPath" "$jarUrl" -f
fi
else
if [ "$MVNW_VERBOSE" = true ]; then
echo "Falling back to using Java to download"
fi
javaClass="$BASE_DIR/.mvn/wrapper/MavenWrapperDownloader.java"
# For Cygwin, switch paths to Windows format before running javac
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
import com.lmax.disruptor.BatchEventProcessor;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.
</span></p>
<p><b><span style="font-size: 10pt;">
9. Accepting Warranty or Additional Liability.
</span></b></p>
<p><span style="font-size: 10pt;">While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
8
broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
Show comments
View file
Edit file
Delete file
@@ -44,6 +44,7 @@
import io.netty.handler.ssl.SslHandler;
import io.netty.handler.timeout.IdleStateHandler;
import io.netty.util.concurrent.Future;
import io.netty.util.concurrent.GenericFutureListener;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.net.ssl.SSLContext;
@@ -53,6 +54,7 @@
import java.util.Optional;
import java.util.concurrent.TimeUnit;
import static io.moquette.BrokerConstants.*;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
public class NettyAcceptor implements ServerAcceptor {
@@ -85,7 +87,7 @@ protected void encode(ChannelHandlerContext chc, ByteBuf bb, List<Object> out) t
}
}
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
maxBytesInMessage = Integer
.parseInt(props.getProperty(BrokerConstants.NETTY_MAX_BYTES_PROPERTY_NAME,
String.valueOf(BrokerConstants.DEFAULT_NETTY_MAX_BYTES_IN_MESSAGE)));
boolean epoll = Boolean.parseBoolean(props.getProperty(BrokerConstants.NETTY_EPOLL_PROPERTY_NAME, "false"));
if (epoll) {
LOG.info("Netty is using Epoll");
m_bossGroup = new EpollEventLoopGroup();
m_workerGroup = new EpollEventLoopGroup();
channelClass = EpollServerSocketChannel.class;
} else {
LOG.info("Netty is using NIO");
m_bossGroup = new NioEventLoopGroup();
m_workerGroup = new NioEventLoopGroup();
channelClass = NioServerSocketChannel.class;
}
final NettyMQTTHandler mqttHandler = new NettyMQTTHandler(processor);
final boolean useFineMetrics = Boolean.parseBoolean(props.getProperty(METRICS_ENABLE_PROPERTY_NAME, "false"));
if (useFineMetrics) {
DropWizardMetricsHandler metricsHandler = new DropWizardMetricsHandler();
metricsHandler.init(props);
this.metrics = Optional.of(metricsHandler);
} else {
this.metrics = Optional.empty();
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
/
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
this.sessionsStore.queue(this.clientID).add(message);
}
@Override
public IMessagesStore.StoredMessage completeReleasedPublish(int messageID) {
return this.sessionsStore.completeReleasedPublish(clientID, messageID);
}
@Override
public int getPendingPublishMessagesNo() {
return this.sessionsStore.queue(clientID).size();
}
@Override
public int countPubReleaseWaitingPubComplete() {
return this.sessionsStore.countPubReleaseWaitingPubComplete(clientID);
}
@Override
public int getInflightMessagesNo() {
return this.sessionsStore.getInflightMessagesNo(clientID);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Sign in to GitHub · GitHub
</goals>
</execution>
</executions>
</plugin>
</plugins>
</build>
</profile>
</profiles>
<repositories>
<repository>
<id>Maven repo</id>
<url>https://repo1.maven.org/maven2/</url>
</repository>
<repository>
<id>Paho Releases</id>
<url>https://repo.eclipse.org/content/repositories/paho-releases/</url>
</repository>
<repository>
<id>sonatype-snapshots</id>
<snapshots>
<enabled>true</enabled>
</snapshots>
<url>https://oss.sonatype.org/content/repositories/snapshots</url>
</repository>
</repositories>
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
ctx.writeAndFlush(pingResp).addListener(CLOSE_ON_FAILURE);
break;
default:
LOG.error("Unkonwn MessageType:{}", messageType);
break;
}
} catch (Throwable ex) {
LOG.error("Exception was caught while processing MQTT message, {}", ex.getCause(), ex);
ctx.fireExceptionCaught(ex);
ctx.close().addListener(CLOSE_ON_FAILURE);
} finally {
ReferenceCountUtil.release(msg);
}
}
@Override
public void channelInactive(ChannelHandlerContext ctx) throws Exception {
String clientID = NettyUtils.clientID(ctx.channel());
if (clientID != null && !clientID.isEmpty()) {
LOG.info("Notifying connection lost event. MqttClientId = {}", clientID);
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
if $cygwin; then
javaClass=`cygpath --path --windows "$javaClass"`
fi
if [ -e "$javaClass" ]; then
if [ ! -e "$BASE_DIR/.mvn/wrapper/MavenWrapperDownloader.class" ]; then
if [ "$MVNW_VERBOSE" = true ]; then
echo " - Compiling MavenWrapperDownloader.java ..."
fi
# Compiling the Java class
("$JAVA_HOME/bin/javac" "$javaClass")
fi
if [ -e "$BASE_DIR/.mvn/wrapper/MavenWrapperDownloader.class" ]; then
# Running the downloader
if [ "$MVNW_VERBOSE" = true ]; then
echo " - Running MavenWrapperDownloader.java ..."
fi
("$JAVA_HOME/bin/java" -cp .mvn/wrapper MavenWrapperDownloader "$MAVEN_PROJECTBASEDIR")
fi
fi
fi
fi
##########################################################################################
# End of extension
##########################################################################################
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.EventFactory;
import com.lmax.disruptor.EventFactory;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
</span></p>
<p><span style="font-size: 10pt;">
END OF TERMS AND CONDITIONS
</span></p>
<p><span style="font-size: 10pt;">
APPENDIX: How to apply the Apache License to your work.
</span></p>
<p><span style="font-size: 10pt;">
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
</span></p>
<p><span style="font-size: 10pt;">
Copyright [yyyy] [name of copyright owner]
</span></p>
<p><span style="font-size: 10pt;">
Sign in to GitHub · GitHub
moquette/checkstyle.xml at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Sign in to GitHub · GitHub
Sign in to GitHub · GitHub
Sign in to GitHub · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
abstract class PipelineInitializer {
abstract static class PipelineInitializer {
abstract void init(ChannelPipeline pipeline) throws Exception;
}
@@ -197,7 +199,7 @@ public void initChannel(SocketChannel ch) throws Exception {
// Bind and start to accept incoming connections.
ChannelFuture f = b.bind(host, port);
f.sync();
f.sync().addListener(FIRE_EXCEPTION_ON_FAILURE);
} catch (InterruptedException ex) {
LOG.error("An interruptedException was caught while initializing server. Protocol={}", protocol, ex);
}
@@ -349,6 +351,8 @@ void init(ChannelPipeline pipeline) throws Exception {
});
}
@SuppressWarnings("FutureReturnValueIgnored")
@Override
public void close() {
LOG.info("Closing Netty acceptor...");
if (m_workerGroup == null || m_bossGroup == null) {
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
88 lines (72 sloc)
2.54 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
}
final boolean useBugSnag = Boolean.parseBoolean(props.getProperty(BUGSNAG_ENABLE_PROPERTY_NAME, "false"));
if (useBugSnag) {
BugSnagErrorsHandler bugSnagHandler = new BugSnagErrorsHandler();
bugSnagHandler.init(props);
this.errorsCather = Optional.of(bugSnagHandler);
} else {
this.errorsCather = Optional.empty();
}
initializePlainTCPTransport(mqttHandler, props);
initializeWebSocketTransport(mqttHandler, props);
String sslTcpPortProp = props.getProperty(BrokerConstants.SSL_PORT_PROPERTY_NAME);
String wssPortProp = props.getProperty(BrokerConstants.WSS_PORT_PROPERTY_NAME);
if (sslTcpPortProp != null || wssPortProp != null) {
SSLContext sslContext = sslCtxCreator.initSSLContext();
if (sslContext == null) {
LOG.error("Can't initialize SSLHandler layer! Exiting, check your configuration of jks");
return;
}
initializeSSLTCPTransport(mqttHandler, props, sslContext);
initializeWSSTransport(mqttHandler, props, sslContext);
}
}
private void initFactory(String host, int port, String protocol, final PipelineInitializer pipeliner) {
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
302 lines (254 sloc)
10.2 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
moquette/broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
54 lines (48 sloc)
2.04 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
<distributionManagement>
<repository>
<id>bintray</id>
</repository>
</distributionManagement>
</project>
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
165 lines (143 sloc)
5.66 KB
Raw
Blame
/*
m_processor.processConnectionLost(clientID, ctx.channel());
}
ctx.close().addListener(CLOSE_ON_FAILURE);
}
@Override
public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
LOG.error("An unexpected exception was caught while processing MQTT message. Closing Netty channel. CId={}, " +
ctx.close().addListener(CLOSE_ON_FAILURE);
}
@Override
public void channelWritabilityChanged(ChannelHandlerContext ctx) throws Exception {
if (ctx.channel().isWritable()) {
m_processor.notifyChannelWritable(ctx.channel());
}
ctx.fireChannelWritabilityChanged();
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
64 lines (51 sloc)
1.94 KB
Raw
Blame
if [ "$MVNW_VERBOSE" = true ]; then
echo $MAVEN_PROJECTBASEDIR
fi
MAVEN_OPTS="$(concat_lines "$MAVEN_PROJECTBASEDIR/.mvn/jvm.config") $MAVEN_OPTS"
# For Cygwin, switch paths to Windows format before running java
if $cygwin; then
[ -n "$M2_HOME" ] &&
M2_HOME=`cygpath --path --windows "$M2_HOME"`
[ -n "$JAVA_HOME" ] &&
JAVA_HOME=`cygpath --path --windows "$JAVA_HOME"`
[ -n "$CLASSPATH" ] &&
CLASSPATH=`cygpath --path --windows "$CLASSPATH"`
[ -n "$MAVEN_PROJECTBASEDIR" ] &&
MAVEN_PROJECTBASEDIR=`cygpath --path --windows "$MAVEN_PROJECTBASEDIR"`
fi
# Provide a "standardized" way to retrieve the CLI args that will
# work with both Windows and non-Windows executions.
MAVEN_CMD_LINE_ARGS="$MAVEN_CONFIG $@"
export MAVEN_CMD_LINE_ARGS
WRAPPER_LAUNCHER=org.apache.maven.wrapper.MavenWrapperMain
exec "$JAVACMD" \
$MAVEN_OPTS \
-classpath "$MAVEN_PROJECTBASEDIR/.mvn/wrapper/maven-wrapper.jar" \
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.server.ServerChannel;
import org.dna.mqtt.moquette.server.ServerChannel;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
</span></p>
<p><span style="font-size: 10pt;">
http://www.apache.org/licenses/LICENSE-2.0
</span></p>
<p><span style="font-size: 10pt;">
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</span></p>
</div>
</body></html>
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
14
broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.util.ReferenceCountUtil;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_MOST_ONCE;
@Sharable
@@ -78,16 +80,16 @@ public void channelRead(ChannelHandlerContext ctx, Object message) {
false,
0);
MqttMessage pingResp = new MqttMessage(pingHeader);
ctx.writeAndFlush(pingResp);
ctx.writeAndFlush(pingResp).addListener(CLOSE_ON_FAILURE);
break;
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.config;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.nio.file.Files;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static java.nio.charset.StandardCharsets.UTF_8;
public class FileResourceLoader implements IResourceLoader {
private static final Logger LOG = LoggerFactory.getLogger(FileResourceLoader.class);
private final File defaultFile;
private final String parentPath;
public FileResourceLoader() {
this((File) null);
LOG.info("Initializing server. Protocol={}", protocol);
ServerBootstrap b = new ServerBootstrap();
b.group(m_bossGroup, m_workerGroup).channel(channelClass)
.childHandler(new ChannelInitializer<SocketChannel>() {
@Override
public void initChannel(SocketChannel ch) throws Exception {
ChannelPipeline pipeline = ch.pipeline();
try {
pipeliner.init(pipeline);
} catch (Throwable th) {
LOG.error("Severe error during pipeline creation", th);
throw th;
}
}
}).option(ChannelOption.SO_BACKLOG, nettySoBacklog).option(ChannelOption.SO_REUSEADDR, nettySoReuseaddr)
.option(ChannelOption.TCP_NODELAY, nettyTcpNodelay)
.childOption(ChannelOption.SO_KEEPALIVE, nettySoKeepalive);
try {
// Bind and start to accept incoming connections.
ChannelFuture f = b.bind(host, port);
f.sync().addListener(FIRE_EXCEPTION_ON_FAILURE);
} catch (InterruptedException ex) {
LOG.error("An interruptedException was caught while initializing server. Protocol={}", protocol, ex);
}
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.persistence;
import io.moquette.server.Constants;
import io.moquette.spi.IMessagesStore.StoredMessage;
import io.moquette.spi.ISessionsStore;
import io.moquette.spi.ISubscriptionsStore;
import io.moquette.spi.impl.subscriptions.Subscription;
import io.moquette.spi.impl.subscriptions.Topic;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.time.LocalDateTime;
import java.util.*;
import java.util.concurrent.*;
Sign in to GitHub · GitHub
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
moquette/license-eplv10-aslv20.html at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Bumped 0.3 · moquette-io/moquette@f4162c2 · GitHub
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.netty;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import io.netty.channel.ChannelDuplexHandler;
import io.netty.channel.ChannelHandler.Sharable;
import io.netty.channel.ChannelHandlerContext;
import io.netty.handler.timeout.IdleState;
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
69 lines (55 sloc)
2.18 KB
Raw
Blame
/*
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server;
import java.util.NoSuchElementException;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicReference;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import io.moquette.server.netty.AutoFlushHandler;
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
121 lines (110 sloc)
3.87 KB
Raw
Blame
/*
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.config;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
public class ClasspathResourceLoader implements IResourceLoader {
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import java.util.Properties;
import java.util.Properties;
15
...er/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
Show comments
View file
Edit file
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Added Apache 2.0 license
Loading branch information
andsel
committed
Oct 4, 2013
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Added Apache 2.0 license
Loading branch information
andsel
committed
default:
LOG.error("Unkonwn MessageType:{}", messageType);
break;
}
} catch (Throwable ex) {
LOG.error("Exception was caught while processing MQTT message, " + ex.getCause(), ex);
LOG.error("Exception was caught while processing MQTT message, {}", ex.getCause(), ex);
ctx.fireExceptionCaught(ex);
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
} finally {
ReferenceCountUtil.release(msg);
}
@@ -97,17 +99,17 @@ public void channelRead(ChannelHandlerContext ctx, Object message) {
public void channelInactive(ChannelHandlerContext ctx) throws Exception {
String clientID = NettyUtils.clientID(ctx.channel());
if (clientID != null && !clientID.isEmpty()) {
LOG.info("Notifying connection lost event. MqttClientId = {}.", clientID);
LOG.info("Notifying connection lost event. MqttClientId = {}", clientID);
m_processor.processConnectionLost(clientID, ctx.channel());
}
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
public FileResourceLoader(File defaultFile) {
this(defaultFile, System.getProperty("moquette.path", null));
}
public FileResourceLoader(String parentPath) {
this(null, parentPath);
}
public FileResourceLoader(File defaultFile, String parentPath) {
this.defaultFile = defaultFile;
this.parentPath = parentPath;
}
@Override
public Reader loadDefaultResource() {
if (defaultFile != null) {
return loadResource(defaultFile);
} else {
throw new IllegalArgumentException("Default file not set!");
}
}
@Override
public Reader loadResource(String relativePath) {
return loadResource(new File(parentPath, relativePath));
}
public Reader loadResource(File f) {
}
private void initializePlainTCPTransport(final NettyMQTTHandler handler,
IConfig props) throws IOException {
LOG.info("Configuring TCP MQTT transport");
final MoquetteIdleTimeoutHandler timeoutHandler = new MoquetteIdleTimeoutHandler();
String host = props.getProperty(BrokerConstants.HOST_PROPERTY_NAME);
String tcpPortProp = props.getProperty(PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
if (DISABLED_PORT_BIND.equals(tcpPortProp)) {
DISABLED_PORT_BIND);
return;
}
int port = Integer.parseInt(tcpPortProp);
initFactory(host, port, "TCP MQTT", new PipelineInitializer() {
@Override
void init(ChannelPipeline pipeline) {
pipeline.addFirst("idleStateHandler", new IdleStateHandler(nettyChannelTimeoutSeconds, 0, 0));
pipeline.addAfter("idleStateHandler", "idleEventHandler", timeoutHandler);
// pipeline.addLast("logger", new LoggingHandler("Netty", LogLevel.ERROR));
if (errorsCather.isPresent()) {
pipeline.addLast("bugsnagCatcher", errorsCather.get());
}
pipeline.addFirst("bytemetrics", new BytesMetricsHandler(m_bytesMetricsCollector));
pipeline.addLast("decoder", new MqttDecoder(maxBytesInMessage));
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
public class MemorySessionStore implements ISessionsStore, ISubscriptionsStore {
private static final Logger LOG = LoggerFactory.getLogger(MemorySessionStore.class);
static class Session {
final String clientID;
final Map<Topic, Subscription> subscriptions = new ConcurrentHashMap<>();
boolean cleanSession;
final BlockingQueue<StoredMessage> queue = new ArrayBlockingQueue<>(Constants.MAX_MESSAGE_QUEUE);
final Map<Integer, StoredMessage> secondPhaseStore = new ConcurrentHashMap<>();
final Map<Integer, StoredMessage> outboundFlightMessages =
Collections.synchronizedMap(new HashMap<Integer, StoredMessage>());
final Map<Integer, StoredMessage> inboundFlightMessages = new ConcurrentHashMap<>();
Session(String clientID, boolean cleanSession) {
this.clientID = clientID;
this.cleanSession = cleanSession;
}
}
private final Map<String, Session> sessions = new ConcurrentHashMap<>();
private ConcurrentNavigableMap<LocalDateTime, Set<String>> sessionsClosingTimes = new ConcurrentSkipListMap<>();
MemorySessionStore() {
}
private Session getSession(String clientID) {
Session session = sessions.get(clientID);
if (session == null) {
LOG.error("Can't find the session for client <{}>", clientID);
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
import io.netty.handler.timeout.IdleStateEvent;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
@Sharable
class MoquetteIdleTimeoutHandler extends ChannelDuplexHandler {
private static final Logger LOG = LoggerFactory.getLogger(MoquetteIdleTimeoutHandler.class);
@Override
public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exception {
if (evt instanceof IdleStateEvent) {
IdleState e = ((IdleStateEvent) evt).state();
if (e == IdleState.READER_IDLE) {
LOG.info("Firing channel inactive event. MqttClientId = {}.", NettyUtils.clientID(ctx.channel()));
// fire a channelInactive to trigger publish of Will
ctx.fireChannelInactive();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
} else {
if (LOG.isDebugEnabled()) {
LOG.debug(
NettyUtils.clientID(ctx.channel()),
evt.getClass().getName());
}
super.userEventTriggered(ctx, evt);
}
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.persistence;
import io.moquette.spi.IMatchingCondition;
import io.moquette.spi.IMessagesStore;
import io.moquette.spi.impl.subscriptions.Topic;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.util.*;
public class MemoryMessagesStore implements IMessagesStore {
import io.moquette.server.netty.NettyUtils;
import io.moquette.server.netty.metrics.BytesMetrics;
import io.moquette.server.netty.metrics.BytesMetricsHandler;
import io.moquette.server.netty.metrics.MessageMetrics;
import io.moquette.server.netty.metrics.MessageMetricsHandler;
import io.netty.channel.Channel;
import static io.netty.channel.ChannelFutureListener.CLOSE;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
/**
* Value object to maintain the information of single connection, like ClientID, Channel, and clean
* session flag.
*/
public class ConnectionDescriptor {
private static final Logger LOG = LoggerFactory.getLogger(ConnectionDescriptor.class);
public enum ConnectionState {
// Connection states
DISCONNECTED,
SENDACK,
SESSION_CREATED,
MESSAGES_REPUBLISHED,
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
87 lines (67 sloc)
2.26 KB
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.server.config;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
private static final Logger LOG = LoggerFactory.getLogger(ClasspathResourceLoader.class);
private final String defaultResource;
private final ClassLoader classLoader;
public ClasspathResourceLoader() {
this(IConfig.DEFAULT_CONFIG);
}
public ClasspathResourceLoader(String defaultResource) {
this(defaultResource, Thread.currentThread().getContextClassLoader());
}
public ClasspathResourceLoader(String defaultResource, ClassLoader classLoader) {
this.defaultResource = defaultResource;
this.classLoader = classLoader;
}
@Override
public Reader loadDefaultResource() {
return loadResource(defaultResource);
}
@Override
public Reader loadResource(String relativePath) {
LOG.info("Loading resource. RelativePath = {}.", relativePath);
InputStream is = this.classLoader.getResourceAsStream(relativePath);
return is != null ? new InputStreamReader(is, StandardCharsets.UTF_8) : null;
}
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
/**
15
1 parent
f4162c2
commit af8c0e3b9a186faf144f51218b934188af8b1120
Unified
Split
Showing
1 changed file
with
205 additions
and 0 deletions.
+205
−0
license.txt
205
license.txt
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,205 @@
Copyright 2012-2013 (c) Andrea Selva
Apache License
Version 2.0, January 2004
http://www.apache.org/licenses/
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Oct 4, 2013
1 parent
f4162c2
commit af8c0e3b9a186faf144f51218b934188af8b1120
Unified
Split
Showing
1 changed file
with
205 additions
and 0 deletions.
+205
−0
license.txt
205
license.txt
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,205 @@
Copyright 2012-2013 (c) Andrea Selva
Apache License
Version 2.0, January 2004
}
@Override
public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
LOG.error("An unexpected exception was caught while processing MQTT message. Closing Netty channel. CId={}, " +
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
@Override
4
broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.util.Attribute;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class BytesMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<BytesMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("BytesMetrics");
@@ -53,7 +55,7 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
LOG.info("Loading file. Path = {}.", f.getAbsolutePath());
if (f.isDirectory()) {
LOG.error("The given file is a directory. Path = {}.", f.getAbsolutePath());
throw new ResourceIsDirectoryException("File \"" + f + "\" is a directory!");
}
try {
return Files.newBufferedReader(f.toPath(), UTF_8);
} catch (IOException e) {
LOG.error("The file does not exist. Path = {}.", f.getAbsolutePath());
return null;
}
}
@Override
public String getName() {
return "file";
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
pipeline.addLast("encoder", MqttEncoder.INSTANCE);
pipeline.addLast("metrics", new MessageMetricsHandler(m_metricsCollector));
pipeline.addLast("messageLogger", new MQTTMessageLogger());
if (metrics.isPresent()) {
pipeline.addLast("wizardMetrics", metrics.get());
}
pipeline.addLast("handler", handler);
}
});
}
private void initializeWebSocketTransport(final NettyMQTTHandler handler, IConfig props) throws IOException {
LOG.info("Configuring Websocket MQTT transport");
String webSocketPortProp = props.getProperty(WEB_SOCKET_PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
if (DISABLED_PORT_BIND.equals(webSocketPortProp)) {
// Do nothing no WebSocket configured
BrokerConstants.WEB_SOCKET_PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
return;
}
int port = Integer.parseInt(webSocketPortProp);
final MoquetteIdleTimeoutHandler timeoutHandler = new MoquetteIdleTimeoutHandler();
String host = props.getProperty(BrokerConstants.HOST_PROPERTY_NAME);
initFactory(host, port, "Websocket MQTT", new PipelineInitializer() {
@Override
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
033a428184
moquette/broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Cannot retrieve contributors at this time
56 lines (47 sloc)
1.95 KB
throw new RuntimeException("Can't find the session for client <" + clientID + ">");
}
return session;
}
@Override
public void removeSubscription(Topic topic, String clientID) {
getSession(clientID).subscriptions.remove(topic);
}
@Override
public void initStore() {
}
@Override
public ISubscriptionsStore subscriptionStore() {
return this;
}
@Override
public void addNewSubscription(Subscription newSubscription) {
final String clientID = newSubscription.getClientId();
Session session = sessions.get(clientID);
if (session == null) {
LOG.error("Can't find the session for client <{}>", clientID);
return;
}
session.subscriptions.put(newSubscription.getTopicFilter(), newSubscription);
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Dismiss
af8c0e3b9a
moquette/license.txt
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
205 lines (170 sloc)
11.3 KB
Raw
Blame
Copyright 2012-2013 (c) Andrea Selva
Apache License
Version 2.0, January 2004
http://www.apache.org/licenses/
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
1. Definitions.
"License" shall mean the terms and conditions for use, reproduction,
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Fixed checkStyle and ErrorProne warns
Loading branch information
andsel
committed
Apr 26, 2018
1 parent
1a6dd8a
commit 033a428184ce1e8a134fda082c04346ac6858c61
Unified
Split
Showing
81 changed files
with
681 additions
and 425 deletions.
+3
−1
broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
+4
−2
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Fixed checkStyle and ErrorProne warns
Loading branch information
andsel
committed
Apr 26, 2018
1 parent
1a6dd8a
commit 033a428184ce1e8a134fda082c04346ac6858c61
Unified
Split
Showing
81 changed files
with
681 additions
and 425 deletions.
+3
−1
broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
+4
−2
broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
private static final Logger LOG = LoggerFactory.getLogger(MemoryMessagesStore.class);
private Map<Topic, StoredMessage> m_retainedStore = new HashMap<>();
MemoryMessagesStore() {
}
@Override
public void initStore() {
}
@Override
public void storeRetained(Topic topic, StoredMessage storedMessage) {
if (storedMessage.getClientID() == null) {
throw new IllegalArgumentException("Message to be persisted must have a not null client ID");
}
m_retainedStore.put(topic, storedMessage);
}
@Override
public Collection<StoredMessage> searchMatching(IMatchingCondition condition) {
LOG.debug("searchMatching scanning all retained messages, presents are {}", m_retainedStore.size());
List<StoredMessage> results = new ArrayList<>();
for (Map.Entry<Topic, StoredMessage> entry : m_retainedStore.entrySet()) {
StoredMessage storedMsg = entry.getValue();
if (condition.match(entry.getKey())) {
results.add(storedMsg);
}
ESTABLISHED,
// Disconnection states
SUBSCRIPTIONS_REMOVED,
MESSAGES_DROPPED,
INTERCEPTORS_NOTIFIED;
}
public final String clientID;
private final Channel channel;
public final boolean cleanSession;
private final AtomicReference<ConnectionState> channelState = new AtomicReference<>(ConnectionState.DISCONNECTED);
public ConnectionDescriptor(String clientID, Channel session, boolean cleanSession) {
this.clientID = clientID;
this.channel = session;
this.cleanSession = cleanSession;
}
public void writeAndFlush(Object payload) {
this.channel.writeAndFlush(payload).addListener(FIRE_EXCEPTION_ON_FAILURE);
}
public void setupAutoFlusher(int flushIntervalMs) {
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.interception.messages;
import io.netty.handler.codec.mqtt.MqttConnectMessage;
import java.nio.charset.StandardCharsets;
public class InterceptConnectMessage extends InterceptAbstractMessage {
private final MqttConnectMessage msg;
public InterceptConnectMessage(MqttConnectMessage msg) {
super(msg);
this.msg = msg;
}
public String getClientID() {
return msg.payload().clientIdentifier();
}
public boolean isCleanSession() {
return msg.variableHeader().isCleanSession();
}
public int getKeepAlive() {
return msg.variableHeader().keepAliveTimeSeconds();
}
public boolean isPasswordFlag() {
return msg.variableHeader().hasPassword();
}
public byte getProtocolVersion() {
import java.nio.file.Files;
import java.text.ParseException;
import java.util.Properties;
/**
* Mosquitto configuration parser.
*
* A line that at the very first has # is a comment Each line has key value format, where the
* separator used it the space.
*/
class ConfigurationParser {
private static final Logger LOG = LoggerFactory.getLogger(ConfigurationParser.class);
private Properties m_properties = new Properties();
/**
* Parse the configuration from file.
*/
void parse(File file) throws ParseException {
if (file == null) {
LOG.warn("parsing NULL file, so fallback on default configuration!");
return;
}
if (!file.exists()) {
LOG.warn(
String.format(
"parsing not existing file %s, so fallback on default configuration!",
@Override
public String getName() {
return "classpath resource";
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
1. Definitions.
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
http://www.apache.org/licenses/
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
1. Definitions.
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementWrote(((ByteBuf) msg).writableBytes());
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
@Override
3
broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
Show comments
View file
Edit file
Delete file
@@ -28,6 +28,7 @@
import java.util.List;
import static io.moquette.spi.impl.Utils.messageId;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
/**
*
@@ -100,6 +101,6 @@ public void channelInactive(ChannelHandlerContext ctx) throws Exception {
@Override
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
logMQTTMessage(ctx, msg, "C<-B");
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
void init(ChannelPipeline pipeline) {
pipeline.addLast(new HttpServerCodec());
pipeline.addLast("aggregator", new HttpObjectAggregator(65536));
pipeline.addLast("webSocketHandler",
new WebSocketServerProtocolHandler("/mqtt", MQTT_SUBPROTOCOL_CSV_LIST));
pipeline.addLast("ws2bytebufDecoder", new WebSocketFrameToByteBufDecoder());
pipeline.addLast("bytebuf2wsEncoder", new ByteBufToWebSocketFrameEncoder());
pipeline.addFirst("idleStateHandler", new IdleStateHandler(nettyChannelTimeoutSeconds, 0, 0));
pipeline.addAfter("idleStateHandler", "idleEventHandler", timeoutHandler);
pipeline.addFirst("bytemetrics", new BytesMetricsHandler(m_bytesMetricsCollector));
pipeline.addLast("decoder", new MqttDecoder(maxBytesInMessage));
pipeline.addLast("encoder", MqttEncoder.INSTANCE);
pipeline.addLast("metrics", new MessageMetricsHandler(m_metricsCollector));
pipeline.addLast("messageLogger", new MQTTMessageLogger());
pipeline.addLast("handler", handler);
}
});
}
private void initializeSSLTCPTransport(final NettyMQTTHandler handler, IConfig props, final SSLContext sslContext)
Raw
Blame
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.interception;
import com.hazelcast.core.HazelcastInstance;
import com.hazelcast.core.ITopic;
import io.moquette.interception.messages.InterceptPublishMessage;
import io.moquette.server.Server;
import io.netty.buffer.ByteBuf;
import org.slf4j.Logger;
}
@Override
public void wipeSubscriptions(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return;
}
sessions.get(clientID).subscriptions.clear();
}
@Override
public boolean contains(String clientID) {
return sessions.containsKey(clientID);
}
@Override
public void createNewDurableSession(String clientID) {
Session innerSession = new Session(clientID, false);
sessions.put(clientID, innerSession);
}
@Override
public void removeDurableSession(String clientId) {
this.sessions.remove(clientId);
this.wipeSubscriptions(clientId);
}
and distribution as defined by Sections 1 through 9 of this document.
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
+1
−1
broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
+1
−2
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
+7
−3
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
+3
−1
broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
+5
−8
broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
+7
−2
broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
+3
−1
broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
+1
−1
broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
+1
−2
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
+7
−3
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
+3
−1
broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
+5
−8
broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
+7
−2
broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
+3
−1
broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
+6
}
return results;
}
@Override
public void cleanRetained(Topic topic) {
m_retainedStore.remove(topic);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
try {
this.channel.pipeline().addAfter(
"idleEventHandler",
"autoFlusher",
new AutoFlushHandler(flushIntervalMs, TimeUnit.MILLISECONDS));
} catch (NoSuchElementException nseex) {
// the idleEventHandler is not present on the pipeline
this.channel.pipeline()
.addFirst("autoFlusher", new AutoFlushHandler(flushIntervalMs, TimeUnit.MILLISECONDS));
}
}
public boolean doesNotUseChannel(Channel channel) {
return !(this.channel.equals(channel));
}
public boolean close() {
LOG.info("Closing connection descriptor. MqttClientId = {}.", clientID);
final boolean success = assignState(ConnectionState.INTERCEPTORS_NOTIFIED, ConnectionState.DISCONNECTED);
if (!success) {
return false;
}
this.channel.close().addListener(CLOSE_ON_FAILURE);
return true;
}
return (byte) msg.variableHeader().version();
}
public String getProtocolName() {
return msg.variableHeader().name();
}
public boolean isUserFlag() {
return msg.variableHeader().hasUserName();
}
public boolean isWillFlag() {
return msg.variableHeader().isWillFlag();
}
public byte getWillQos() {
return (byte) msg.variableHeader().willQos();
}
public boolean isWillRetain() {
return msg.variableHeader().isWillRetain();
}
public String getUsername() {
return msg.payload().userName();
}
public byte[] getPassword() {
return msg.payload().password().getBytes(StandardCharsets.UTF_8);
}
file.getAbsolutePath()));
return;
}
try {
Reader reader = Files.newBufferedReader(file.toPath(), StandardCharsets.UTF_8);
parse(reader);
} catch (IOException fex) {
LOG.warn("parsing not existing file {}, fallback on default configuration!", file.getAbsolutePath(), fex);
}
}
/**
* Parse the configuration
*
* @throws ParseException
* if the format is not compliant.
*/
void parse(Reader reader) throws ParseException {
if (reader == null) {
// just log and return default properties
LOG.warn("parsing NULL reader, so fallback on default configuration!");
return;
}
BufferedReader br = new BufferedReader(reader);
String line;
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
/**
15
...r/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
and conversions to other media types.
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
moquette/checkstyle.xml
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
154 lines (151 sloc)
6.01 KB
Raw
Blame
<?xml version="1.0" encoding="UTF-8"?>
<!--
~ Copyright 2012 The Netty Project
~
~ The Netty Project licenses this file to you under the Apache License,
~ version 2.0 (the "License"); you may not use this file except in compliance
~ with the License. You may obtain a copy of the License at:
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
and conversions to other media types.
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
}
4
broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
Show comments
View file
Edit file
Delete file
@@ -23,6 +23,8 @@
import io.netty.util.Attribute;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class MessageMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<MessageMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("MessageMetrics");
@@ -52,7 +54,7 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementWrote(1);
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
throws IOException {
LOG.info("Configuring SSL MQTT transport");
String sslPortProp = props.getProperty(SSL_PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
if (DISABLED_PORT_BIND.equals(sslPortProp)) {
// Do nothing no SSL configured
BrokerConstants.SSL_PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
return;
}
int sslPort = Integer.parseInt(sslPortProp);
LOG.info("Starting SSL on port {}", sslPort);
final MoquetteIdleTimeoutHandler timeoutHandler = new MoquetteIdleTimeoutHandler();
String host = props.getProperty(BrokerConstants.HOST_PROPERTY_NAME);
String sNeedsClientAuth = props.getProperty(BrokerConstants.NEED_CLIENT_AUTH, "false");
final boolean needsClientAuth = Boolean.valueOf(sNeedsClientAuth);
initFactory(host, sslPort, "SSL MQTT", new PipelineInitializer() {
@Override
void init(ChannelPipeline pipeline) throws Exception {
pipeline.addLast("ssl", createSslHandler(sslContext, needsClientAuth));
pipeline.addFirst("idleStateHandler", new IdleStateHandler(nettyChannelTimeoutSeconds, 0, 0));
pipeline.addAfter("idleStateHandler", "idleEventHandler", timeoutHandler);
// pipeline.addLast("logger", new LoggingHandler("Netty", LogLevel.ERROR));
import org.slf4j.LoggerFactory;
import static io.moquette.spi.impl.Utils.readBytesAndRewind;
import static java.nio.charset.StandardCharsets.UTF_8;
public class HazelcastInterceptHandler extends AbstractInterceptHandler {
private static final Logger LOG = LoggerFactory.getLogger(HazelcastInterceptHandler.class);
private final HazelcastInstance hz;
public HazelcastInterceptHandler(Server server) {
this.hz = server.getHazelcastInstance();
}
@Override
public String getID() {
return HazelcastInterceptHandler.class.getName() + "@" + hz.getName();
}
@Override
public void onPublish(InterceptPublishMessage msg) {
// TODO ugly, too much array copy
ByteBuf payload = msg.getPayload();
byte[] payloadContent = readBytesAndRewind(payload);
new String(payloadContent, UTF_8));
ITopic<HazelcastMsg> topic = hz.getTopic("moquette");
HazelcastMsg hazelcastMsg = new HazelcastMsg(msg);
topic.publish(hazelcastMsg);
}
@Override
public void updateCleanStatus(String clientId, boolean newCleanStatus) {
sessions.get(clientId).cleanSession = newCleanStatus;
}
@Override
public PersistentSession loadSessionByKey(String clientID) {
return new PersistentSession(clientID, sessions.get(clientID).cleanSession);
}
@Override
public Collection<PersistentSession> listAllSessions() {
Collection<PersistentSession> result = new ArrayList<>();
for (Session entry : sessions.values()) {
result.add(new PersistentSession(entry.clientID, entry.cleanSession));
}
return result;
}
@Override
public List<Subscription> listAllSubscriptions() {
List<Subscription> allSubscriptions = new ArrayList<>();
for (Session entry : sessions.values()) {
allSubscriptions.addAll(entry.subscriptions.values());
(an example is provided in the Appendix below).
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."
"Contributor" shall mean Licensor and any individual or Legal Entity
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Bumped 0.3
Loading branch information
andsel
committed
Sep 23, 2013
1 parent
64e332f
commit f4162c286815c9dc9fd8cd59bfaa723f1432ca72
Unified
+6
−2
broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
+8
−6
broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
+3
−1
broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
+2
−1
broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
+3
−1
broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
+0
−16
broker/src/main/java/io/moquette/spi/DurableSession.java
+16
−0
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
+32
−2
broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
+8
−6
broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
+3
−1
broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
+2
−1
broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
+3
−1
broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
+0
−16
broker/src/main/java/io/moquette/spi/DurableSession.java
+16
−0
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
+32
−0
broker/src/main/java/io/moquette/spi/InboundFlightZone.java
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
public String getUsername() {
return NettyUtils.userName(this.channel);
}
public void abort() {
LOG.info("Closing connection descriptor. MqttClientId = {}.", clientID);
// try {
// this.channel.disconnect().sync();
this.channel.close().addListener(CLOSE_ON_FAILURE); // .sync();
// } catch (InterruptedException e) {
// e.printStackTrace();
// }
}
public boolean assignState(ConnectionState expected, ConnectionState newState) {
LOG.debug(
clientID,
expected,
newState);
boolean retval = channelState.compareAndSet(expected, newState);
if (!retval) {
LOG.error(
"Unable to update state of connection descriptor."
clientID,
expected,
public String getWillTopic() {
return msg.payload().willTopic();
}
public byte[] getWillMessage() {
return msg.payload().willMessage().getBytes(StandardCharsets.UTF_8);
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
try {
while ((line = br.readLine()) != null) {
int commentMarker = line.indexOf('#');
if (commentMarker != -1) {
if (commentMarker == 0) {
// skip its a comment
continue;
} else {
// it's a malformed comment
throw new ParseException(line, commentMarker);
}
} else {
if (line.isEmpty() || line.matches("^\\s*$")) {
// skip it's a black line
continue;
}
// split till the first space
int delimiterIdx = line.indexOf(' ');
String key = line.substring(0, delimiterIdx).trim();
String value = line.substring(delimiterIdx).trim();
m_properties.put(key, value);
}
}
} catch (IOException ex) {
Save preferences
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.
2. Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.
3. Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
~ License for the specific language governing permissions and limitations
~ under the License.
-->
<!DOCTYPE module PUBLIC
"-//Puppy Crawl//DTD Check Configuration 1.2//EN"
"http://www.puppycrawl.com/dtds/configuration_1_2.dtd">
<module name="Checker">
<property name="severity" value="warning"/>
<!--
<module name="SuppressionFilter">
<property name="file" value="checkstyle-suppressions.xml" />
</module>
<module name="io.netty.build.checkstyle.SuppressionFilter">
<property name="pattern" value="((LocalTime|WorldClock)Protocol|LinkedTransferQueue|Version|jzlib/.*|chmv8/.*|com/sun/nio/sctp/.*)\.java" />
</module>
-->
<module name="FileTabCharacter"/>
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.
2. Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.
3. Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
}
@Override
16
broker/src/main/java/io/moquette/spi/DurableSession.java
Show comments
View file
Edit file
Delete file
@@ -22,9 +22,7 @@
import java.util.Collection;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
public class DurableSession extends ClientSession {
@@ -51,20 +49,6 @@ void waitingAck(int messageID, IMessagesStore.StoredMessage msg) {
}
}
class InboundFlightZone {
final Map<Integer, IMessagesStore.StoredMessage> inboundFlightMessages = new ConcurrentHashMap<>();
IMessagesStore.StoredMessage lookup(int messageID) {
pipeline.addFirst("bytemetrics", new BytesMetricsHandler(m_bytesMetricsCollector));
pipeline.addLast("decoder", new MqttDecoder(maxBytesInMessage));
pipeline.addLast("encoder", MqttEncoder.INSTANCE);
pipeline.addLast("metrics", new MessageMetricsHandler(m_metricsCollector));
pipeline.addLast("messageLogger", new MQTTMessageLogger());
pipeline.addLast("handler", handler);
}
});
}
private void initializeWSSTransport(final NettyMQTTHandler handler, IConfig props, final SSLContext sslContext)
throws IOException {
LOG.info("Configuring secure websocket MQTT transport");
String sslPortProp = props.getProperty(WSS_PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
if (DISABLED_PORT_BIND.equals(sslPortProp)) {
// Do nothing no SSL configured
BrokerConstants.WSS_PORT_PROPERTY_NAME, DISABLED_PORT_BIND);
return;
}
int sslPort = Integer.parseInt(sslPortProp);
final MoquetteIdleTimeoutHandler timeoutHandler = new MoquetteIdleTimeoutHandler();
String host = props.getProperty(BrokerConstants.HOST_PROPERTY_NAME);
String sNeedsClientAuth = props.getProperty(BrokerConstants.NEED_CLIENT_AUTH, "false");
final boolean needsClientAuth = Boolean.valueOf(sNeedsClientAuth);
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
}
return allSubscriptions;
}
@Override
public Collection<Subscription> listClientSubscriptions(String clientID) {
final Session session = sessions.get(clientID);
if (session == null) {
throw new IllegalStateException("Asking for subscriptions of not persisted client: " + clientID);
}
return session.subscriptions.values();
}
@Override
public Subscription reload(Subscription subcription) {
String clientID = subcription.getClientId();
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return null;
}
Map<Topic, Subscription> subscriptions = sessions.get(clientID).subscriptions;
if (subscriptions == null || subscriptions.isEmpty()) {
return null;
}
return subscriptions.get(subcription.getTopicFilter());
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.
2. Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.
3. Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
moquette/license-eplv10-aslv20.html
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
576 lines (508 sloc)
29.3 KB
Raw
Blame
<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="ProgId" content="Word.Document">
<meta name="Generator" content="Microsoft Word 9">
<meta name="Originator" content="Microsoft Word 9">
<link rel="File-List" href="http://www.eclipse.org/legal/Eclipse%20EPL%202003_11_10%20Final_files/filelist.xml">
Split
Showing
1 changed file
with
1 addition
and 1 deletion.
+1
−1
pom.xml
2
pom.xml
Show comments
View file
Edit file
Delete file
@@ -3,7 +3,7 @@
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<properties>
<moquette-version>0.3-SNAPSHOT</moquette-version>
<moquette-version>0.3</moquette-version>
<mina-version>2.0.7</mina-version>
</properties>
−0
broker/src/main/java/io/moquette/spi/InboundFlightZone.java
+2
−2
broker/src/main/java/io/moquette/spi/TransientSession.java
+3
−1
broker/src/main/java/io/moquette/spi/impl/DebugUtils.java
+6
−4
broker/src/main/java/io/moquette/spi/impl/MessagesPublisher.java
+4
−4
broker/src/main/java/io/moquette/spi/impl/PersistentQueueMessageSender.java
+46
−71
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessor.java
+8
−6
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessorBootstrapper.java
+2
−2
broker/src/main/java/io/moquette/spi/TransientSession.java
+3
−1
broker/src/main/java/io/moquette/spi/impl/DebugUtils.java
+6
−4
broker/src/main/java/io/moquette/spi/impl/MessagesPublisher.java
+4
−4
broker/src/main/java/io/moquette/spi/impl/PersistentQueueMessageSender.java
+46
−71
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessor.java
+8
−6
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessorBootstrapper.java
+48
newState);
}
return retval;
}
@Override
public String toString() {
return "ConnectionDescriptor{" + "clientID=" + clientID + ", removeTemporaryQoS2=" + cleanSession + ", state="
+ channelState.get() + '}';
}
@Override
public boolean equals(Object o) {
if (this == o)
return true;
if (o == null || getClass() != o.getClass())
return false;
ConnectionDescriptor that = (ConnectionDescriptor) o;
if (clientID != null ? !clientID.equals(that.clientID) : that.clientID != null)
return false;
return !(channel != null ? !channel.equals(that.channel) : that.channel != null);
}
public BytesMetrics getBytesMetrics() {
return BytesMetricsHandler.getBytesMetrics(channel);
}
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
throw new ParseException("Failed to read", 1);
} finally {
try {
reader.close();
} catch (IOException e) {
// ignore
}
}
}
Properties getProperties() {
return m_properties;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.Utils;
import org.dna.mqtt.moquette.proto.Utils;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
4. Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and
<!--
<module name="JavadocPackage"/>
-->
<module name="NewlineAtEndOfFile">
<property name="lineSeparator" value="lf" />
</module>
<!-- Copyright headers -->
<module name="RegexpSingleline">
<property name="format" value="^(\s|\*)*Copyright\s.*$"/>
<property name="minimum" value="1"/>
<property name="maximum" value="1"/>
<property name="message" value="missing copyright header"/>
</module>
<!-- Unmaintainable Javadoc tags -->
<!--module name="RegexpSingleline">
<property name="format" value="(@(author|version)|\(non-Javadoc\))"/>
<property name="ignoreCase" value="true"/>
<property name="message" value="unmaintainable Javadoc tags: @author, @version, or (non-Javadoc)"/>
</module-->
<!-- IDE-generated comment -->
<module name="RegexpSingleline">
<property name="format" value="File \| Settings \| File Templates"/>
<property name="message" value="IDE-generated comment"/>
</module>
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
4. Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
return inboundFlightMessages.get(messageID);
}
void waitingRel(int messageID, IMessagesStore.StoredMessage msg) {
inboundFlightMessages.put(messageID, msg);
}
}
private static final Logger LOG = LoggerFactory.getLogger(DurableSession.class);
private final ISessionsStore sessionsStore;
16
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,19 @@
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
initFactory(host, sslPort, "Secure websocket", new PipelineInitializer() {
@Override
void init(ChannelPipeline pipeline) throws Exception {
pipeline.addLast("ssl", createSslHandler(sslContext, needsClientAuth));
pipeline.addLast("httpEncoder", new HttpResponseEncoder());
pipeline.addLast("httpDecoder", new HttpRequestDecoder());
pipeline.addLast("aggregator", new HttpObjectAggregator(65536));
pipeline.addLast("webSocketHandler",
new WebSocketServerProtocolHandler("/mqtt", MQTT_SUBPROTOCOL_CSV_LIST));
pipeline.addLast("ws2bytebufDecoder", new WebSocketFrameToByteBufDecoder());
pipeline.addLast("bytebuf2wsEncoder", new ByteBufToWebSocketFrameEncoder());
pipeline.addFirst("idleStateHandler", new IdleStateHandler(nettyChannelTimeoutSeconds, 0, 0));
pipeline.addAfter("idleStateHandler", "idleEventHandler", timeoutHandler);
pipeline.addFirst("bytemetrics", new BytesMetricsHandler(m_bytesMetricsCollector));
pipeline.addLast("decoder", new MqttDecoder(maxBytesInMessage));
pipeline.addLast("encoder", MqttEncoder.INSTANCE);
pipeline.addLast("metrics", new MessageMetricsHandler(m_metricsCollector));
pipeline.addLast("messageLogger", new MQTTMessageLogger());
pipeline.addLast("handler", handler);
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
}
@Override
public StoredMessage inFlightAck(String clientID, int messageID) {
return getSession(clientID).outboundFlightMessages.remove(messageID);
}
@Override
public void inFlight(String clientID, int messageID, StoredMessage msg) {
Session session = sessions.get(clientID);
if (session == null) {
LOG.error("Can't find the session for client <{}>", clientID);
return;
}
session.outboundFlightMessages.put(messageID, msg);
}
/**
* Return the next valid packetIdentifier for the given client session.
*/
@Override
public int nextPacketID(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return -1;
}
4. Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
<title>Eclipse Public License - Version 1.0 / Apache License - Version 2.0</title>
<!--[if gte mso 9]><xml>
<o:DocumentProperties>
<o:Revision>2</o:Revision>
<o:TotalTime>3</o:TotalTime>
<o:Created>2004-03-05T23:03:00Z</o:Created>
<o:LastSaved>2004-03-05T23:03:00Z</o:LastSaved>
<o:Pages>4</o:Pages>
<o:Words>1626</o:Words>
<o:Characters>9270</o:Characters>
<o:Lines>77</o:Lines>
<o:Paragraphs>18</o:Paragraphs>
<o:CharactersWithSpaces>11384</o:CharactersWithSpaces>
<o:Version>9.4402</o:Version>
</o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
<w:WordDocument>
<w:TrackRevisions/>
</w:WordDocument>
</xml><![endif]-->
<style>
<!--
Toggle all file notes
0 comments
on commit f4162c2
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
+48
−0
broker/src/main/java/io/moquette/spi/impl/RunningSubscription.java
+3
−1
broker/src/main/java/io/moquette/spi/impl/SessionsRepository.java
+12
−4
broker/src/main/java/io/moquette/spi/impl/security/ACLFileParser.java
+1
−0
broker/src/main/java/io/moquette/spi/impl/security/AcceptAllAuthenticator.java
+10
−8
broker/src/main/java/io/moquette/spi/impl/subscriptions/CNode.java
+10
−75
broker/src/main/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectory.java
+67
−0
broker/src/main/java/io/moquette/spi/impl/subscriptions/DumpTreeVisitor.java
+33
−0
−0
broker/src/main/java/io/moquette/spi/impl/RunningSubscription.java
+3
−1
broker/src/main/java/io/moquette/spi/impl/SessionsRepository.java
+12
−4
broker/src/main/java/io/moquette/spi/impl/security/ACLFileParser.java
+1
−0
broker/src/main/java/io/moquette/spi/impl/security/AcceptAllAuthenticator.java
+10
−8
broker/src/main/java/io/moquette/spi/impl/subscriptions/CNode.java
+10
−75
broker/src/main/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectory.java
+67
−0
broker/src/main/java/io/moquette/spi/impl/subscriptions/DumpTreeVisitor.java
+33
−0
public MessageMetrics getMessageMetrics() {
return MessageMetricsHandler.getMessageMetrics(channel);
}
@Override
public int hashCode() {
int result = clientID != null ? clientID.hashCode() : 0;
result = 31 * result + (channel != null ? channel.hashCode() : 0);
return result;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
Show comments
View file
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
<!-- Force UNIX line separator
<module name="io.netty.build.checkstyle.NewlineCheck"/>
-->
<!-- Trailing whitespace -->
<module name="RegexpSingleline">
<property name="format" value="\s+$"/>
<property name="message" value="trailing whitespace"/>
</module>
<!-- Prohibit consecutive empty lines (except the lines after package/import) -->
<module name="RegexpMultiline">
<property name="message" value="two or more consecutive empty lines"/>
</module>
<module name="RegexpMultiline">
<property name="message" value="an empty line before '}'"/>
</module>
<module name="RegexpMultiline">
<property name="message" value="an empty line after a short line that ends with '{'"/>
</module>
<module name="TreeWalker">
<module name="LineLength">
<property name="max" value="120"/>
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
5. Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.spi;
import io.moquette.spi.impl.subscriptions.Subscription;
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 033a428
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
}
});
}
@SuppressWarnings("FutureReturnValueIgnored")
@Override
public void close() {
LOG.info("Closing Netty acceptor...");
if (m_workerGroup == null || m_bossGroup == null) {
LOG.error("Netty acceptor is not initialized");
throw new IllegalStateException("Invoked close on an Acceptor that wasn't initialized");
}
Future<?> workerWaiter = m_workerGroup.shutdownGracefully();
Future<?> bossWaiter = m_bossGroup.shutdownGracefully();
/*
* We shouldn't raise an IllegalStateException if we are interrupted. If we did so, the
* broker is not shut down properly.
*/
LOG.info("Waiting for worker and boss event loop groups to terminate...");
try {
workerWaiter.await(10, TimeUnit.SECONDS);
bossWaiter.await(10, TimeUnit.SECONDS);
} catch (InterruptedException iex) {
LOG.warn("An InterruptedException was caught while waiting for event loops to terminate...");
Map<Integer, StoredMessage> m = sessions.get(clientID).outboundFlightMessages;
int maxId = m.keySet().isEmpty() ? 0 : Collections.max(m.keySet());
int nextPacketId = (maxId + 1) % 0xFFFF;
m.put(nextPacketId, null);
return nextPacketId;
}
@Override
public BlockingQueue<StoredMessage> queue(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return null;
}
return sessions.get(clientID).queue;
}
@Override
public void dropQueue(String clientID) {
final Session session = sessions.get(clientID);
session.queue.clear();
session.outboundFlightMessages.clear();
session.inboundFlightMessages.clear();
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
5. Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
6. Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
/* Font Definitions */
@font-face
{font-family:Tahoma;
panose-1:2 11 6 4 3 5 4 4 2 4;
mso-font-charset:0;
mso-generic-font-family:swiss;
mso-font-pitch:variable;
mso-font-signature:553679495 -2147483648 8 0 66047 0;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
{mso-style-parent:"";
margin:0in;
margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-size:12.0pt;
font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";}
p
{margin-right:0in;
mso-margin-top-alt:auto;
mso-margin-bottom-alt:auto;
margin-left:0in;
mso-pagination:widow-orphan;
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
broker/src/main/java/io/moquette/spi/impl/subscriptions/SubscriptionCounterVisitor.java
+2
−2
broker/src/main/java/io/moquette/spi/impl/subscriptions/Token.java
+5
−9
broker/src/main/java/io/moquette/spi/impl/subscriptions/Topic.java
+4
−4
broker/src/test/java/io/moquette/Utils.java
+24
−5
broker/src/test/java/io/moquette/persistence/MessageStoreTCK.java
+1
−1
broker/src/test/java/io/moquette/server/MessageCollector.java
+3
−1
broker/src/test/java/io/moquette/server/ServerIntegrationFuseTest.java
+4
−3
broker/src/test/java/io/moquette/server/ServerIntegrationHazelcastHandlerInterceptorTest.java
broker/src/main/java/io/moquette/spi/impl/subscriptions/SubscriptionCounterVisitor.java
+2
−2
broker/src/main/java/io/moquette/spi/impl/subscriptions/Token.java
+5
−9
broker/src/main/java/io/moquette/spi/impl/subscriptions/Topic.java
+4
−4
broker/src/test/java/io/moquette/Utils.java
+24
−5
broker/src/test/java/io/moquette/persistence/MessageStoreTCK.java
+1
−1
broker/src/test/java/io/moquette/server/MessageCollector.java
+3
−1
broker/src/test/java/io/moquette/server/ServerIntegrationFuseTest.java
+4
−3
broker/src/test/java/io/moquette/server/ServerIntegrationHazelcastHandlerInterceptorTest.java
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Accept
Reject
Save preferences
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage.QOSType;
5. Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
6. Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
7. Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
8. Limitation of Liability. In no event and under no legal theory,
</module>
<module name="WhitespaceAfter"/>
<module name="WhitespaceAround">
<property name="tokens" value="ASSIGN, BAND, BAND_ASSIGN, BOR, BOR_ASSIGN, BSR, BSR_ASSIGN, BXOR, BXOR_ASSIGN, DIV, DIV_ASSIGN, EQUAL, GE, GT, LAND, LCURLY, LE, LITERAL_ASSERT, LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR, LITERAL_IF, LITERAL_RETURN, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN, MOD, MOD_ASSIGN, NOT_EQUAL, PLUS, PLUS_ASSIGN, RCURLY, SL, SLIST, SL_ASSIGN, SR, SR_ASSIGN, STAR, STAR_ASSIGN, TYPE_EXTENSION_AND"/>
</module>
<!-- Commented out due to false positives.
<module name="MissingDeprecated"/>
-->
<module name="MissingOverride"/>
<module name="PackageAnnotation"/>
<module name="EmptyBlock">
<property name="option" value="text"/>
</module>
<module name="LeftCurly"/>
<module name="RightCurly"/>
<!--
<module name="NeedBraces"/>
-->
<module name="AvoidNestedBlocks">
<property name="allowInSwitchCase" value="true"/>
</module>
<module name="FinalClass"/>
<module name="HideUtilityClassConstructor"/>
<module name="CovariantEquals"/>
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
6. Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
7. Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
8. Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
}
if (!m_workerGroup.isTerminated()) {
LOG.warn("Forcing shutdown of worker event loop...");
m_workerGroup.shutdownGracefully(0L, 0L, TimeUnit.MILLISECONDS);
}
if (!m_bossGroup.isTerminated()) {
LOG.warn("Forcing shutdown of boss event loop...");
m_bossGroup.shutdownGracefully(0L, 0L, TimeUnit.MILLISECONDS);
}
LOG.info("Collecting message metrics...");
MessageMetrics metrics = m_metricsCollector.computeMetrics();
metrics.messagesWrote());
LOG.info("Collecting bytes metrics...");
BytesMetrics bytesMetrics = m_bytesMetricsCollector.computeMetrics();
bytesMetrics.wroteBytes());
}
private ChannelHandler createSslHandler(SSLContext sslContext, boolean needsClientAuth) {
SSLEngine sslEngine = sslContext.createSSLEngine();
sslEngine.setUseClientMode(false);
if (needsClientAuth) {
sslEngine.setNeedClientAuth(true);
}
return new SslHandler(sslEngine);
}
@Override
public void moveInFlightToSecondPhaseAckWaiting(String clientID, int messageID, StoredMessage msg) {
Session session = sessions.get(clientID);
if (session == null) {
LOG.error("Can't find the session for client <{}>", clientID);
return;
}
session.secondPhaseStore.put(messageID, msg);
session.outboundFlightMessages.put(messageID, msg);
}
@Override
public StoredMessage completeReleasedPublish(String clientID, int messageID) {
return getSession(clientID).secondPhaseStore.remove(messageID);
}
@Override
public int getInflightMessagesNo(String clientID) {
Session session = sessions.get(clientID);
if (session == null) {
LOG.error("Can't find the session for client <{}>", clientID);
return 0;
}
return session.inboundFlightMessages.size() +
origin of the Work and reproducing the content of the NOTICE file.
7. Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
8. Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
font-size:12.0pt;
font-family:"Times New Roman";
mso-fareast-font-family:"Times New Roman";}
p.BalloonText, li.BalloonText, div.BalloonText
{mso-style-name:"Balloon Text";
margin:0in;
margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-size:8.0pt;
font-family:Tahoma;
mso-fareast-font-family:"Times New Roman";}
@page Section1
{size:8.5in 11.0in;
margin:1.0in 1.25in 1.0in 1.25in;
mso-header-margin:.5in;
mso-footer-margin:.5in;
mso-paper-source:0;}
div.Section1
{page:Section1;}
-->
</style>
</head><body style="" lang="EN-US">
<div class="Section1">
+10
−10
broker/src/test/java/io/moquette/server/ServerIntegrationPahoTest.java
+11
−9
broker/src/test/java/io/moquette/server/ServerIntegrationQoSValidationTest.java
+8
−6
broker/src/test/java/io/moquette/server/ServerIntegrationRestartTest.java
+2
−1
broker/src/test/java/io/moquette/server/ServerIntegrationSSLTest.java
+1
−0
broker/src/test/java/io/moquette/server/ServerIntegrationWebSocketTest.java
+3
−2
broker/src/test/java/io/moquette/server/ServerLowlevelMessagesIntegrationTests.java
+5
−4
broker/src/test/java/io/moquette/spi/ClientSessionTest.java
+17
Labels · moquette-io/moquette · GitHub
+10
−10
broker/src/test/java/io/moquette/server/ServerIntegrationPahoTest.java
+11
−9
broker/src/test/java/io/moquette/server/ServerIntegrationQoSValidationTest.java
+8
−6
broker/src/test/java/io/moquette/server/ServerIntegrationRestartTest.java
+2
−1
broker/src/test/java/io/moquette/server/ServerIntegrationSSLTest.java
+1
−0
broker/src/test/java/io/moquette/server/ServerIntegrationWebSocketTest.java
+3
−2
broker/src/test/java/io/moquette/server/ServerLowlevelMessagesIntegrationTests.java
+5
−4
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
import org.dna.mqtt.moquette.proto.messages.AbstractMessage.QOSType;
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 666cc29
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.
9. Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
<module name="EmptyStatement"/>
<module name="EqualsHashCode"/>
<!--
<module name="FinalLocalVariable"/>
-->
<!-- Commented out due to http://jira.codehaus.org/browse/MCHECKSTYLE-111
<module name="RedundantThrows">
<property name="logLoadErrors" value="false"/>
<property name="suppressLoadErrors" value="true"/>
</module>
-->
<module name="SimplifyBooleanExpression"/>
<module name="SimplifyBooleanReturn"/>
<module name="SuperFinalize"/>
<module name="PackageDeclaration"/>
<module name="ExplicitInitialization"/>
<module name="DefaultComesLast"/>
<module name="UnnecessaryParentheses"/>
<!--
<module name="AvoidStarImport">
<property name="allowStaticMemberImports" value="true"/>
</module>
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.
9. Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
END OF TERMS AND CONDITIONS
APPENDIX: How to apply the Apache License to your work.
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
Accept
Reject
Save preferences
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
// countPubReleaseWaitingPubComplete(clientID) +
session.outboundFlightMessages.size();
}
@Override
public int countPubReleaseWaitingPubComplete(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return 0;
}
return sessions.get(clientID).secondPhaseStore.size();
}
@Override
public void removeTemporaryQoS2(String clientID) {
LOG.debug("Session cleanup for client <{}>", clientID);
Session session = sessions.get(clientID);
if (session == null) {
LOG.error("Can't find the session for client <{}>", clientID);
return;
}
LOG.info("Removing stored messages with QoS 2. ClientId={}", clientID);
session.secondPhaseStore.clear();
// TODO this missing last step breaks the junit test
other commercial damages or losses), even if such Contributor
has been advised of the possibility of such damages.
9. Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
END OF TERMS AND CONDITIONS
APPENDIX: How to apply the Apache License to your work.
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
Milestones - moquette-io/moquette · GitHub
<p style="text-align: center;" align="center"><b>Eclipse Public License - v 1.0</b>
</p>
<p><span style="font-size: 10pt;">THE ACCOMPANYING PROGRAM IS PROVIDED UNDER
THE TERMS OF THIS ECLIPSE PUBLIC LICENSE ("AGREEMENT"). ANY USE,
REPRODUCTION OR DISTRIBUTION OF THE PROGRAM CONSTITUTES RECIPIENT'S ACCEPTANCE
OF THIS AGREEMENT.</span> </p>
<p><b><span style="font-size: 10pt;">1. DEFINITIONS</span></b> </p>
<p><span style="font-size: 10pt;">"Contribution" means:</span> </p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
in the case of the initial Contributor, the initial code and documentation
distributed under this Agreement, and<br clear="left">
b) in the case of each subsequent Contributor:</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">i)
changes to the Program, and</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">ii)
additions to the Program;</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">where
such changes and/or additions to the Program originate from and are distributed
by that particular Contributor. A Contribution 'originates' from a Contributor
if it was added to the Program by such Contributor itself or anyone acting on
such Contributor's behalf. Contributions do not include additions to the
Program which: (i) are separate modules of software distributed in conjunction
Issues · moquette-io/moquette · GitHub
−15
broker/src/test/java/io/moquette/spi/impl/AbstractProtocolProcessorCommonUtils.java
+2
−1
broker/src/test/java/io/moquette/spi/impl/BrokerInterceptorTest.java
+4
−1
broker/src/test/java/io/moquette/spi/impl/MockAuthenticator.java
+3
−3
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessorTest.java
+4
−3
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_CONNECT_Test.java
+2
−2
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_VariousUseCases_Test.java
+5
−3
broker/src/test/java/io/moquette/spi/impl/security/DBAuthenticatorTest.java
+5
−3
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
broker/src/test/java/io/moquette/spi/ClientSessionTest.java
+17
−15
broker/src/test/java/io/moquette/spi/impl/AbstractProtocolProcessorCommonUtils.java
+2
−1
broker/src/test/java/io/moquette/spi/impl/BrokerInterceptorTest.java
+4
−1
broker/src/test/java/io/moquette/spi/impl/MockAuthenticator.java
+3
−3
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessorTest.java
+4
−3
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_CONNECT_Test.java
+2
−2
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_VariousUseCases_Test.java
+5
−3
broker/src/test/java/io/moquette/spi/impl/security/DBAuthenticatorTest.java
Issues · moquette-io/moquette · GitHub
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
of your accepting any such warranty or additional liability.
END OF TERMS AND CONDITIONS
APPENDIX: How to apply the Apache License to your work.
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
Copyright [yyyy] [name of copyright owner]
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<module name="RedundantImport"/>
<!-- Commented out due to false positives.
<module name="UnusedImports">
<property name="processJavadoc" value="true"/>
</module>
-->
<module name="JavadocStyle">
<property name="checkFirstSentence" value="false"/>
</module>
<module name="UpperEll"/>
<module name="ArrayTypeStyle"/>
<module name="OuterTypeFilename"/>
<module name="ModifierOrder"/>
<module name="RedundantModifier"/>
<module name="GenericWhitespace"/>
<module name="EmptyForInitializerPad"/>
<module name="EmptyForIteratorPad"/>
<module name="MethodParamPad"/>
<module name="ParenPad"/>
<module name="TypecastParenPad"/>
<module name="ParameterName">
<property name="format" value="^(?!arg[0-9])[_a-z][_a-zA-Z0-9]*$" />
identification within third-party archives.
Copyright [yyyy] [name of copyright owner]
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Toggle all file notes
0 comments
on commit af8c0e3
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
//sessions.remove(clientID);
}
@Override
public synchronized void trackSessionClose(LocalDateTime when, String clientID) {
this.sessionsClosingTimes.putIfAbsent(when, new HashSet<>());
this.sessionsClosingTimes.computeIfPresent(when, (key, oldSet) -> {
oldSet.add(clientID);
return oldSet;
});
}
@Override
public Set<String> sessionOlderThan(LocalDateTime queryPin) {
final Set<String> results = new HashSet<>();
LocalDateTime keyBefore = this.sessionsClosingTimes.lowerKey(queryPin);
while (keyBefore != null) {
results.addAll(this.sessionsClosingTimes.get(keyBefore));
keyBefore = this.sessionsClosingTimes.lowerKey(keyBefore);
}
return results;
}
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
Copyright [yyyy] [name of copyright owner]
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Issues · moquette-io/moquette · GitHub
Skip to content
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
with the Program under their own license agreement, and (ii) are not derivative
works of the Program. </span></p>
<p><span style="font-size: 10pt;">"Contributor" means any person or
entity that distributes the Program.</span> </p>
<p><span style="font-size: 10pt;">"Licensed Patents " mean patent
claims licensable by a Contributor which are necessarily infringed by the use
or sale of its Contribution alone or when combined with the Program. </span></p>
<p><span style="font-size: 10pt;">"Program" means the Contributions
distributed in accordance with this Agreement.</span> </p>
<p><span style="font-size: 10pt;">"Recipient" means anyone who
receives the Program under this Agreement, including all Contributors.</span> </p>
<p><b><span style="font-size: 10pt;">2. GRANT OF RIGHTS</span></b> </p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
Subject to the terms of this Agreement, each Contributor hereby grants Recipient
a non-exclusive, worldwide, royalty-free copyright license to<span style="color: red;"> </span>reproduce, prepare derivative works of, publicly
display, publicly perform, distribute and sublicense the Contribution of such
Contributor, if any, and such derivative works, in source code and object code
form.</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">b)
Subject to the terms of this Agreement, each Contributor hereby grants
Recipient a non-exclusive, worldwide,<span style="color: green;"> </span>royalty-free
patent license under Licensed Patents to make, use, sell, offer to sell, import
and otherwise transfer the Contribution of such Contributor, if any, in source
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
broker/src/test/java/io/moquette/spi/impl/security/FileAuthenticatorTest.java
+5
−4
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryMatchingTest.java
+7
−14
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryTest.java
+0
−1
broker/src/test/java/io/moquette/spi/impl/subscriptions/TopicTest.java
+8
−2
broker/src/test/java/io/moquette/testclient/Client.java
+4
−2
broker/src/test/java/io/moquette/testclient/ClientNettyMQTTHandler.java
+8
−6
broker/src/test/java/io/moquette/testclient/RawClient.java
+2
−2
checkstyle.xml
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
+5
−3
broker/src/test/java/io/moquette/spi/impl/security/FileAuthenticatorTest.java
+5
−4
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryMatchingTest.java
+7
−14
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryTest.java
+0
−1
broker/src/test/java/io/moquette/spi/impl/subscriptions/TopicTest.java
+8
−2
broker/src/test/java/io/moquette/testclient/Client.java
+4
−2
broker/src/test/java/io/moquette/testclient/ClientNettyMQTTHandler.java
+8
−6
broker/src/test/java/io/moquette/testclient/RawClient.java
+2
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Toggle all file notes
0 comments
on commit af8c0e3
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
</module>
</module>
</module>
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
code and object code form. This patent license shall apply to the combination
of the Contribution and the Program if, at the time the Contribution is added
by the Contributor, such addition of the Contribution causes such combination
to be covered by the Licensed Patents. The patent license shall not apply to
any other combinations which include the Contribution. No hardware per se is
licensed hereunder. </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">c)
Recipient understands that although each Contributor grants the licenses to its
Contributions set forth herein, no assurances are provided by any Contributor
that the Program does not infringe the patent or other intellectual property
rights of any other entity. Each Contributor disclaims any liability to Recipient
for claims brought by any other entity based on infringement of intellectual
property rights or otherwise. As a condition to exercising the rights and
licenses granted hereunder, each Recipient hereby assumes sole responsibility
to secure any other intellectual property rights needed, if any. For example,
if a third party patent license is required to allow Recipient to distribute
the Program, it is Recipient's responsibility to acquire that license before
distributing the Program.</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">d)
Each Contributor represents that to its knowledge it has sufficient copyright
rights in its Contribution, if any, to grant the copyright license set forth in
this Agreement. </span></p>
<p><b><span style="font-size: 10pt;">3. REQUIREMENTS</span></b> </p>
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
+9
−11
distribution/build.gradle
+5
−3
embedding_moquette/src/main/java/io/moquette/testembedded/EmbeddedLauncher.java
+15
−0
h2_storage/src/main/java/io/moquette/persistence/h2/H2PersistentQueue.java
+6
−10
h2_storage/src/main/java/io/moquette/persistence/h2/H2PersistentStore.java
+17
−11
h2_storage/src/main/java/io/moquette/persistence/h2/H2SessionsStore.java
+17
−2
h2_storage/src/test/java/io/moquette/persistence/h2/H2PersistentQueueTest.java
+2
−1
h2_storage/src/test/java/io/moquette/persistence/h2/H2SessionsStoreTest.java
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
−2
checkstyle.xml
+9
−11
distribution/build.gradle
+5
−3
embedding_moquette/src/main/java/io/moquette/testembedded/EmbeddedLauncher.java
+15
−0
h2_storage/src/main/java/io/moquette/persistence/h2/H2PersistentQueue.java
+6
−10
h2_storage/src/main/java/io/moquette/persistence/h2/H2PersistentStore.java
+17
−11
h2_storage/src/main/java/io/moquette/persistence/h2/H2SessionsStore.java
+17
−2
h2_storage/src/test/java/io/moquette/persistence/h2/H2PersistentQueueTest.java
+2
−1
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Issues · moquette-io/moquette · GitHub
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Reject
Save preferences
Issues · moquette-io/moquette · GitHub
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Join GitHub · GitHub
Learn more
Accept
Reject
Save preferences
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
<p><span style="font-size: 10pt;">A Contributor may choose to distribute the
Program in object code form under its own license agreement, provided that:</span>
</p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
it complies with the terms and conditions of this Agreement; and</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">b)
its license agreement:</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">i)
effectively disclaims on behalf of all Contributors all warranties and
conditions, express and implied, including warranties or conditions of title
and non-infringement, and implied warranties or conditions of merchantability
and fitness for a particular purpose; </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">ii)
effectively excludes on behalf of all Contributors all liability for damages,
including direct, indirect, special, incidental and consequential damages, such
as lost profits; </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">iii)
states that any provisions which differ from this Agreement are offered by that
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
+1
−1
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBMessagesStore.java
+1
−0
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBPersistentStore.java
+8
−6
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBSessionsStore.java
+3
−1
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBPersistentStoreTest.java
+2
−1
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBSessionsStoreTest.java
+17
−6
perf/src/main/java/io/moquette/parser/netty/performance/BenchmarkPublisher.java
+14
−1
perf/src/main/java/io/moquette/parser/netty/performance/BenchmarkSubscriber.java
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
Milestones
No labels!
There aren’t any labels for this repository quite yet.
9
labels
Sort
Sort
Alphabetically
h2_storage/src/test/java/io/moquette/persistence/h2/H2SessionsStoreTest.java
+1
−1
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBMessagesStore.java
+1
−0
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBPersistentStore.java
+8
−6
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBSessionsStore.java
+3
−1
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBPersistentStoreTest.java
+2
−1
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBSessionsStoreTest.java
+17
−6
perf/src/main/java/io/moquette/parser/netty/performance/BenchmarkPublisher.java
+14
−1
perf/src/main/java/io/moquette/parser/netty/performance/BenchmarkSubscriber.java
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Join GitHub · GitHub
Join GitHub · GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
Milestones
6
Open
0
Closed
Sort
Sort
Recently updated
Furthest due date
Closest due date
Least complete
Contributor alone and not by any other party; and</span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">iv)
states that source code for the Program is available from such Contributor, and
informs licensees how to obtain it in a reasonable manner on or through a
medium customarily used for software exchange.<span style="color: blue;"> </span></span></p>
<p><span style="font-size: 10pt;">When the Program is made available in source
code form:</span> </p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">a)
it must be made available under this Agreement; and </span></p>
<p class="MsoNormal" style="margin-left: 0.5in;"><span style="font-size: 10pt;">b) a
copy of this Agreement must be included with each copy of the Program. </span></p>
<p><span style="font-size: 10pt;">Contributors may not remove or alter any
copyright notices contained within the Program. </span></p>
<p><span style="font-size: 10pt;">Each Contributor must identify itself as the
originator of its Contribution, if any, in a manner that reasonably allows
subsequent Recipients to identify the originator of the Contribution. </span></p>
<p><b><span style="font-size: 10pt;">4. COMMERCIAL DISTRIBUTION</span></b> </p>
<p><span style="font-size: 10pt;">Commercial distributors of software may
accept certain responsibilities with respect to end users, business partners
and the like. While this license is intended to facilitate the commercial use
of the Program, the Contributor who includes the Program in a commercial
product offering should do so in a manner which does not create potential
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
+9
−8
perf/src/main/java/io/moquette/parser/netty/performance/LoopMQTTHandler.java
+6
−3
perf/src/main/java/io/moquette/parser/netty/performance/NettyPublishReceiverHandler.java
+10
−5
perf/src/main/java/io/moquette/parser/netty/performance/ProtocolDecodingServer.java
+8
−3
perf/src/main/java/io/moquette/parser/netty/performance/ProtocolPublishDecodingServer.java
+10
−4
perf/src/main/java/io/moquette/parser/netty/performance/PublishBomber.java
+4
−3
perf/src/main/java/io/moquette/parser/netty/performance/PublishReceiverHandler.java
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Reverse alphabetically
Most issues
Fewest issues
bug
bug
5 open issues and pull requests
dependencies
dependencies
Pull requests that update a dependency file
duplicate
duplicate
feature req
feature req
5 open issues and pull requests
feature
feature
1 open issue or pull request
help wanted
help wanted
invalid
invalid
1 open issue or pull request
question
+9
−8
perf/src/main/java/io/moquette/parser/netty/performance/LoopMQTTHandler.java
+6
−3
perf/src/main/java/io/moquette/parser/netty/performance/NettyPublishReceiverHandler.java
+10
−5
perf/src/main/java/io/moquette/parser/netty/performance/ProtocolDecodingServer.java
+8
−3
perf/src/main/java/io/moquette/parser/netty/performance/ProtocolPublishDecodingServer.java
+10
−4
perf/src/main/java/io/moquette/parser/netty/performance/PublishBomber.java
+4
−3
perf/src/main/java/io/moquette/parser/netty/performance/PublishReceiverHandler.java
+1
−2
tools_scripts/integration/bunch_publish_issue12.groovy
4
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Join GitHub · GitHub
Join GitHub · GitHub
Issues · moquette-io/moquette · GitHub
NullPointerException caused by async connect/disconnect processing · Issue #553 · moquette-io/moquette · GitHub
Mqtt websocket http · Issue #538 · moquette-io/moquette · GitHub
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
↵
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Most complete
Alphabetically
Reverse alphabetically
Most issues
Least issues
0.14
No due date
Last updated 21 days ago
100%
complete
0
open
1
closed
0.13
No due date
Last updated 8 months ago
60%
complete
2
open
3
closed
0.12.1
liability for other Contributors. Therefore, if a Contributor includes the
Program in a commercial product offering, such Contributor ("Commercial
Contributor") hereby agrees to defend and indemnify every other
Contributor ("Indemnified Contributor") against any losses, damages and
costs (collectively "Losses") arising from claims, lawsuits and other
legal actions brought by a third party against the Indemnified Contributor to
the extent caused by the acts or omissions of such Commercial Contributor in
connection with its distribution of the Program in a commercial product
offering. The obligations in this section do not apply to any claims or Losses
relating to any actual or alleged intellectual property infringement. In order
to qualify, an Indemnified Contributor must: a) promptly notify the Commercial
Contributor in writing of such claim, and b) allow the Commercial Contributor
to control, and cooperate with the Commercial Contributor in, the defense and
any related settlement negotiations. The Indemnified Contributor may participate
in any such claim at its own expense.</span> </p>
<p><span style="font-size: 10pt;">For example, a Contributor might include the
Program in a commercial product offering, Product X. That Contributor is then a
Commercial Contributor. If that Commercial Contributor then makes performance
claims, or offers warranties related to Product X, those performance claims and
warranties are such Commercial Contributor's responsibility alone. Under this
section, the Commercial Contributor would have to defend claims against the
other Contributors related to those performance claims and warranties, and if a
court requires any other Contributor to pay any damages as a result, the
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
+1
−2
tools_scripts/integration/bunch_publish_issue12.groovy
4
broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,7 @@
import org.slf4j.Logger;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.LoggerFactory;
import static io.moquette.spi.impl.Utils.readBytesAndRewind;
import static io.moquette.spi.impl.Utils.readBytesAndRewind;
import static java.nio.charset.StandardCharsets.UTF_8;
public class HazelcastInterceptHandler extends AbstractInterceptHandler {
public class HazelcastInterceptHandler extends AbstractInterceptHandler {
@@ -45,7 +46,8 @@ public void onPublish(InterceptPublishMessage msg) {
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
question
1 open issue or pull request
wontfix
wontfix
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
broker/src/main/java/io/moquette/interception/HazelcastInterceptHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,7 @@
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static io.moquette.spi.impl.Utils.readBytesAndRewind;
import static java.nio.charset.StandardCharsets.UTF_8;
public class HazelcastInterceptHandler extends AbstractInterceptHandler {
@@ -45,7 +46,8 @@ public void onPublish(InterceptPublishMessage msg) {
ByteBuf payload = msg.getPayload();
byte[] payloadContent = readBytesAndRewind(payload);
new String(payloadContent, UTF_8));
ITopic<HazelcastMsg> topic = hz.getTopic("moquette");
HazelcastMsg hazelcastMsg = new HazelcastMsg(msg);
topic.publish(hazelcastMsg);
6
broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
Show comments
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Embedding example throws java.lang.UnsupportedOperationException: direct buffer · Issue #534 · moquette-io/moquette · GitHub
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
No due date
Last updated over 1 year ago
100%
complete
0
open
6
closed
0.11
No due date
Last updated over 1 year ago
100%
complete
0
open
1
closed
0.12
No due date
Last updated almost 2 years ago
100%
Commercial Contributor must pay those damages.</span> </p>
<p><b><span style="font-size: 10pt;">5. NO WARRANTY</span></b> </p>
<p><span style="font-size: 10pt;">EXCEPT AS EXPRESSLY SET FORTH IN THIS
AGREEMENT, THE PROGRAM IS PROVIDED ON AN "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED INCLUDING,
WITHOUT LIMITATION, ANY WARRANTIES OR CONDITIONS OF TITLE, NON-INFRINGEMENT,
MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Each Recipient is solely
responsible for determining the appropriateness of using and distributing the
Program and assumes all risks associated with its exercise of rights under this
Agreement , including but not limited to the risks and costs of program errors,
compliance with applicable laws, damage to or loss of data, programs or
equipment, and unavailability or interruption of operations. </span></p>
<p><b><span style="font-size: 10pt;">6. DISCLAIMER OF LIABILITY</span></b> </p>
<p><span style="font-size: 10pt;">EXCEPT AS EXPRESSLY SET FORTH IN THIS
AGREEMENT, NEITHER RECIPIENT NOR ANY CONTRIBUTORS SHALL HAVE ANY LIABILITY FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OR DISTRIBUTION OF
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
ByteBuf payload = msg.getPayload();
ByteBuf payload = msg.getPayload();
byte[] payloadContent = readBytesAndRewind(payload);
byte[] payloadContent = readBytesAndRewind(payload);
new String(payloadContent, UTF_8));
ITopic<HazelcastMsg> topic = hz.getTopic("moquette");
ITopic<HazelcastMsg> topic = hz.getTopic("moquette");
HazelcastMsg hazelcastMsg = new HazelcastMsg(msg);
HazelcastMsg hazelcastMsg = new HazelcastMsg(msg);
topic.publish(hazelcastMsg);
topic.publish(hazelcastMsg);
6
broker/src/main/java/io/moquette/interception/messages/InterceptConnectMessage.java
Show comments
View file
Edit file
Delete file
@@ -18,6 +18,8 @@
import io.netty.handler.codec.mqtt.MqttConnectMessage;
import io.netty.handler.codec.mqtt.MqttConnectMessage;
import java.nio.charset.StandardCharsets;
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
View file
Edit file
Delete file
@@ -18,6 +18,8 @@
import io.netty.handler.codec.mqtt.MqttConnectMessage;
import java.nio.charset.StandardCharsets;
public class InterceptConnectMessage extends InterceptAbstractMessage {
private final MqttConnectMessage msg;
@@ -72,14 +74,14 @@ public String getUsername() {
}
public byte[] getPassword() {
return msg.payload().password().getBytes();
return msg.payload().password().getBytes(StandardCharsets.UTF_8);
}
public String getWillTopic() {
return msg.payload().willTopic();
}
public byte[] getWillMessage() {
return msg.payload().willMessage().getBytes();
return msg.payload().willMessage().getBytes(StandardCharsets.UTF_8);
}
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
No suggested jump to results
Search
All GitHub
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
complete
0
open
4
closed
0.9
No due date
Last updated over 2 years ago
33%
complete
2
open
1
closed
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
THE PROGRAM OR THE EXERCISE OF ANY RIGHTS GRANTED HEREUNDER, EVEN IF ADVISED OF
THE POSSIBILITY OF SUCH DAMAGES.</span> </p>
<p><b><span style="font-size: 10pt;">7. GENERAL</span></b> </p>
<p><span style="font-size: 10pt;">If any provision of this Agreement is invalid
or unenforceable under applicable law, it shall not affect the validity or
enforceability of the remainder of the terms of this Agreement, and without
further action by the parties hereto, such provision shall be reformed to the
minimum extent necessary to make such provision valid and enforceable.</span> </p>
<p><span style="font-size: 10pt;">If Recipient institutes patent litigation
against any entity (including a cross-claim or counterclaim in a lawsuit)
alleging that the Program itself (excluding combinations of the Program with
other software or hardware) infringes such Recipient's patent(s), then such
Recipient's rights granted under Section 2(b) shall terminate as of the date
such litigation is filed. </span></p>
<p><span style="font-size: 10pt;">All Recipient's rights under this Agreement
shall terminate if it fails to comply with any of the material terms or
conditions of this Agreement and does not cure such failure in a reasonable
period of time after becoming aware of such noncompliance. If all Recipient's
rights under this Agreement terminate, Recipient agrees to cease use and
distribution of the Program as soon as reasonably practicable. However,
Recipient's obligations under this Agreement and any licenses granted by
Recipient relating to the Program shall continue and survive. </span></p>
👎
😄
🎉
😕
❤️
🚀
👀
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
public class InterceptConnectMessage extends InterceptAbstractMessage {
public class InterceptConnectMessage extends InterceptAbstractMessage {
private final MqttConnectMessage msg;
private final MqttConnectMessage msg;
@@ -72,14 +74,14 @@ public String getUsername() {
}
}
public byte[] getPassword() {
public byte[] getPassword() {
return msg.payload().password().getBytes();
return msg.payload().password().getBytes(StandardCharsets.UTF_8);
}
}
public String getWillTopic() {
public String getWillTopic() {
return msg.payload().willTopic();
return msg.payload().willTopic();
}
}
public byte[] getWillMessage() {
public byte[] getWillMessage() {
return msg.payload().willMessage().getBytes();
return msg.payload().willMessage().getBytes(StandardCharsets.UTF_8);
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
}
2
broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
Show comments
View file
Edit file
Delete file
@@ -41,7 +41,7 @@ public void initStore() {
public void storeRetained(Topic topic, StoredMessage storedMessage) {
if (storedMessage.getClientID() == null) {
throw new IllegalArgumentException( "Message to be persisted must have a not null client ID");
throw new IllegalArgumentException("Message to be persisted must have a not null client ID");
}
m_retainedStore.put(topic, storedMessage);
}
3
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
Show comments
View file
Edit file
Delete file
@@ -33,7 +33,7 @@
👍
👎
😄
🎉
😕
❤️
🚀
👀
Messages are delayed ~1s
#535
by micw
was closed Sep 16, 2020
2
I tried to build a broker server with my own authentication of users,but it doesn't work
#526
by abcdef123ghi
was closed May 16, 2020
3
java.lang.NoClassDefFoundError
#525
by manish9161
was closed May 13, 2020
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
New configuration parameter : setting the HandshakeTimeout on SslHandler · Issue #531 · moquette-io/moquette · GitHub
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
❤️
🚀
👀
Retained message with QoS 0
#125
opened Nov 11, 2015 by
env3d
5
[FR]Moquette clusters
feature req
#131
opened Dec 11, 2015 by
pabloa
0.9
19
Avoid OutOfMemory error
feature req
#141
opened Jan 17, 2016 by
andsel
0.9
3
Issues · moquette-io/moquette · GitHub
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
<p><span style="font-size: 10pt;">Everyone is permitted to copy and distribute
copies of this Agreement, but in order to avoid inconsistency the Agreement is
copyrighted and may only be modified in the following manner. The Agreement
Steward reserves the right to publish new versions (including revisions) of
this Agreement from time to time. No one other than the Agreement Steward has
the right to modify this Agreement. The Eclipse Foundation is the initial
Agreement Steward. The Eclipse Foundation may assign the responsibility to
serve as the Agreement Steward to a suitable separate entity. Each new version
of the Agreement will be given a distinguishing version number. The Program
(including Contributions) may always be distributed subject to the version of
the Agreement under which it was received. In addition, after a new version of
the Agreement is published, Contributor may elect to distribute the Program
(including its Contributions) under the new version. Except as expressly stated
in Sections 2(a) and 2(b) above, Recipient receives no rights or licenses to
the intellectual property of any Contributor under this Agreement, whether
expressly, by implication, estoppel or otherwise. All rights in the Program not
expressly granted under this Agreement are reserved.</span> </p>
<p><span style="font-size: 10pt;">This Agreement is governed by the laws of the
State of New York and the intellectual property laws of the United States of
America. No party to this Agreement will bring a legal action under this
Agreement more than one year after the cause of action arose. Each party waives
its rights to a jury trial in any resulting litigation.</span> </p>
<p class="MsoNormal"><!--[if !supportEmptyParas]-->&nbsp;<!--[endif]--><o:p></o:p></p>
opened Jul 23, 2020 by
dsoulayrol
NullPointerException in CTrie.evaluate
#529
opened May 13, 2020 by
hylkevds
1
3
Publish javadoc & sources of 0.13
#528
opened May 13, 2020 by
hylkevds
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
queue is full
#521
}
}
}
}
2
broker/src/main/java/io/moquette/persistence/MemoryMessagesStore.java
Show comments
View file
Edit file
Delete file
@@ -41,7 +41,7 @@ public void initStore() {
public void storeRetained(Topic topic, StoredMessage storedMessage) {
public void storeRetained(Topic topic, StoredMessage storedMessage) {
if (storedMessage.getClientID() == null) {
if (storedMessage.getClientID() == null) {
throw new IllegalArgumentException( "Message to be persisted must have a not null client ID");
throw new IllegalArgumentException("Message to be persisted must have a not null client ID");
}
}
m_retainedStore.put(topic, storedMessage);
m_retainedStore.put(topic, storedMessage);
}
}
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
[FR]Moquette clusters
feature req
#131
opened Dec 11, 2015 by
pabloa
0.9
19
How to forcefully disconnect the client from the broker?
#469
😄
🎉
😕
❤️
🚀
👀
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
updated Nov 19, 2020
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
updated Nov 13, 2020
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
updated Oct 22, 2020
1
private static final Logger LOG = LoggerFactory.getLogger(MemorySessionStore.class);
class Session {
static class Session {
final String clientID;
final Map<Topic, Subscription> subscriptions = new ConcurrentHashMap<>();
boolean cleanSession;
@@ -170,7 +170,6 @@ public Subscription reload(Subscription subcription) {
return subscriptions.get(subcription.getTopicFilter());
}
@Override
public StoredMessage inFlightAck(String clientID, int messageID) {
return getSession(clientID).outboundFlightMessages.remove(messageID);
10
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
Show comments
View file
Edit file
Delete file
@@ -29,6 +29,10 @@
import io.moquette.server.netty.metrics.MessageMetricsHandler;
import io.netty.channel.Channel;
import static io.netty.channel.ChannelFutureListener.CLOSE;
1
is Moquette thread safe?
#524
by freelanceroad
was closed May 13, 2020
1
Publish message takes 1 second to arrive on consumer
#515
by janssk1
was closed Apr 11, 2020
0.13
8
Broker not working for Android API greater than 26
#514
by salmanshkt
was closed Jan 22, 2020
1
Could not instantiate class
#512
by rasik1991
was closed Jan 7, 2020
2
IOException: Address already in use
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
Issues · moquette-io/moquette · GitHub
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Join GitHub · GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
moquette/license.txt at 4665c5e6eec4365aca84362f9b7a6f3f39eb9b12 · moquette-io/moquette · GitHub
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
Publish javadoc & sources of 0.13 · Issue #528 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
Allow for multiple server side clients to share a topic with queue behavior...
feature req
#158
opened Mar 4, 2016 by
redboy1972
4
Authentication interface should return Optional< Principal>
feature req
#176
opened May 6, 2016 by
windbender
2
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
Server API to get subscriptions information
feature req
#207
opened Sep 14, 2016 by
teranisi
3
NullPointerException in CTrie.evaluate · Issue #529 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Help
Community Forum
Professional Services
Learning Lab
Status
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
❤️
🚀
👀
Allow for multiple server side clients to share a topic with queue behavior...
feature req
#158
opened Mar 4, 2016 by
redboy1972
updated Jun 4, 2016
4
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
updated Sep 12, 2016
1
Authentication interface should return Optional< Principal>
feature req
❤️
🚀
👀
if unchecked exception is throw while running processSubscription then remove() will never be called
#316
opened May 19, 2017 by
windbender
Publish javadoc & sources of 0.13
#528
opened May 13, 2020 by
hylkevds
Moquette & 2-way SSL authentication
#508
opened Nov 25, 2019 by
lukaszsoszynski
Will it be compatible with Graalvm in the future?
#509
opened Dec 12, 2019 by
coolbeevip
BrokerInterceptor thread pool never closing on serverStop
#506
</div>
<div class="Section2">
<p style="text-align: center;" align="center"><b>Apache License</b></br>
Version 2.0, January 2004<br/>
http://www.apache.org/licenses/<br/>
</p>
<p><span style="font-size: 10pt;">TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION</spam></p>
<p><b><span style="font-size: 10pt;">1. Definitions.</span></b> </p>
<p><span style="font-size: 10pt;">
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.</span></p>
<p><span style="font-size: 10pt;">
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.</span></p>
<p><span style="font-size: 10pt;">
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.</span></p>
opened Mar 28, 2020 by
arifainchtein
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
opened Feb 27, 2020 by
carlsberg-stack
BUG - null Session in subscribe procedure
#517
opened Feb 14, 2020 by
BigGitWorld
Question: disconnecting a client when authentication details removed
#516
opened Jan 23, 2020 by
MattyyttaM
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
opened Jan 17, 2020 by
carlsberg-stack
5
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
opened Dec 18, 2019 by
3
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
Show comments
View file
Edit file
Delete file
@@ -33,7 +33,7 @@
private static final Logger LOG = LoggerFactory.getLogger(MemorySessionStore.class);
private static final Logger LOG = LoggerFactory.getLogger(MemorySessionStore.class);
class Session {
static class Session {
final String clientID;
final String clientID;
final Map<Topic, Subscription> subscriptions = new ConcurrentHashMap<>();
final Map<Topic, Subscription> subscriptions = new ConcurrentHashMap<>();
boolean cleanSession;
boolean cleanSession;
@@ -170,7 +170,6 @@ public Subscription reload(Subscription subcription) {
return subscriptions.get(subcription.getTopicFilter());
return subscriptions.get(subcription.getTopicFilter());
}
opened Apr 8, 2019 by
giri110890
9
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
republishing messages fails....
bug
#234
opened Nov 17, 2016 by
windbender
7
distribute
#458
opened Mar 18, 2019 by
dqqzj
7
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
updated Sep 16, 2020
NullPointerException in CTrie.evaluate
#529
opened May 13, 2020 by
hylkevds
updated May 25, 2020
1
3
Publish javadoc & sources of 0.13
#528
opened May 13, 2020 by
hylkevds
updated May 13, 2020
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
updated May 13, 2020
1
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
/**
* Value object to maintain the information of single connection, like ClientID, Channel, and clean
* session flag.
@@ -62,7 +66,7 @@ public ConnectionDescriptor(String clientID, Channel session, boolean cleanSessi
}
public void writeAndFlush(Object payload) {
this.channel.writeAndFlush(payload);
this.channel.writeAndFlush(payload).addListener(FIRE_EXCEPTION_ON_FAILURE);
}
public void setupAutoFlusher(int flushIntervalMs) {
@@ -88,7 +92,7 @@ public boolean close() {
if (!success) {
return false;
}
this.channel.close();
this.channel.close().addListener(CLOSE_ON_FAILURE);
return true;
}
@@ -100,7 +104,7 @@ public void abort() {
LOG.info("Closing connection descriptor. MqttClientId = {}.", clientID);
#511
by rasik1991
was closed Jan 7, 2020
1
a broker for Android
#502
by PCBzan
was closed Oct 1, 2019
1
Android: java.lang.NoSuchMethodError: No static method join
#501
by hasanalpzengin
was closed Oct 1, 2019
3
Connection Lost on Subscribe Message
#500
by hasanalpzengin
was closed Aug 27, 2019
1
OutOfMemory Error
#496
by BigGitWorld
was closed Aug 13, 2019
🎉
😕
❤️
🚀
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
Memory grows infinitely when Qos set 2
#423
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
64 Open
314 Closed
64 Open
314 Closed
Author
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
NullPointerException caused by async connect/disconnect processing
#553
Open
andrew-tpz opened this issue
Nov 19, 2020
· 0 comments
Open
NullPointerException caused by async connect/disconnect processing
#553
andrew-tpz opened this issue
Nov 19, 2020
· 0 comments
Comments
Copy link
Quote reply
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Mqtt websocket http
#538
Open
strautins opened this issue
Oct 22, 2020
· 1 comment
Open
Mqtt websocket http
#538
strautins opened this issue
Oct 22, 2020
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
😕
❤️
🚀
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
❤️
🚀
👀
Server API to get subscriptions information
feature req
#207
opened Sep 14, 2016 by
teranisi
3
Publish javadoc & sources of 0.13
#528
opened May 13, 2020 by
hylkevds
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Reintroduce maven project files by andsel · Pull Request #542 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
🎉
😕
❤️
🚀
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
Intermittent concurrentModificationExceptions
bug
#208
opened Sep 14, 2016 by
kjayashankar
1
when protocol processor is inited with ssl port the word "disabled" is used to indicate the server name
#209
opened Sep 15, 2016 by
windbender
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
republishing messages fails....
bug
#234
opened Nov 17, 2016 by
windbender
7
processConnectionLost miss to remove the subscriptions of the client
question
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
#176
opened May 6, 2016 by
windbender
updated Sep 12, 2016
2
Server API to get subscriptions information
feature req
#207
opened Sep 14, 2016 by
teranisi
updated Sep 14, 2016
3
when protocol processor is inited with ssl port the word "disabled" is used to indicate the server name
#209
opened Sep 15, 2016 by
windbender
updated Sep 15, 2016
Intermittent concurrentModificationExceptions
bug
#208
opened Sep 14, 2016 by
kjayashankar
updated Sep 22, 2016
1
opened Oct 9, 2019 by
bobrowskim
queue is full
#521
opened Mar 28, 2020 by
arifainchtein
Publish Failed Acknowledgment
#433
opened Oct 22, 2018 by
BigGitWorld
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Connection dropped when publishing message with payload greater 8KB.
#503
opened Aug 30, 2019 by
r-t-s
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
opened Feb 27, 2020 by
carlsberg-stack
Error processing protocol message: PUBACK
<p><span style="font-size: 10pt;">
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.</span></p>
<p><span style="font-size: 10pt;">
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.</span></p>
<p><span style="font-size: 10pt;">
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.</span></p>
<p><span style="font-size: 10pt;">
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
(an example is provided in the Appendix below).</span></p>
<p><span style="font-size: 10pt;">
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
beniroquai
1
Will it be compatible with Graalvm in the future?
#509
opened Dec 12, 2019 by
coolbeevip
Moquette & 2-way SSL authentication
#508
opened Nov 25, 2019 by
lukaszsoszynski
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
Connection dropped when publishing message with payload greater 8KB.
#503
}
@Override
@Override
public StoredMessage inFlightAck(String clientID, int messageID) {
public StoredMessage inFlightAck(String clientID, int messageID) {
return getSession(clientID).outboundFlightMessages.remove(messageID);
return getSession(clientID).outboundFlightMessages.remove(messageID);
10
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
Show comments
View file
Edit file
Delete file
@@ -29,6 +29,10 @@
import io.moquette.server.netty.metrics.MessageMetricsHandler;
import io.moquette.server.netty.metrics.MessageMetricsHandler;
import io.netty.channel.Channel;
import io.netty.channel.Channel;
import static io.netty.channel.ChannelFutureListener.CLOSE;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
6
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Retained message with QoS 0
#125
opened Nov 11, 2015 by
env3d
5
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
opened Jan 17, 2020 by
carlsberg-stack
5
Allow for multiple server side clients to share a topic with queue behavior...
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
updated Mar 31, 2020
queue is full
#521
opened Mar 28, 2020 by
arifainchtein
updated Mar 28, 2020
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
opened Feb 27, 2020 by
carlsberg-stack
updated Feb 28, 2020
BUG - null Session in subscribe procedure
#517
opened Feb 14, 2020 by
BigGitWorld
updated Feb 14, 2020
Question: disconnecting a client when authentication details removed
#516
// try {
// this.channel.disconnect().sync();
this.channel.close(); // .sync();
this.channel.close().addListener(CLOSE_ON_FAILURE); // .sync();
// } catch (InterruptedException e) {
// e.printStackTrace();
// }
4
broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
Show comments
View file
Edit file
Delete file
@@ -19,6 +19,8 @@
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
@@ -51,7 +53,7 @@ public Reader loadDefaultResource() {
public Reader loadResource(String relativePath) {
Is Moquette realtime?
question
#495
by BigGitWorld
was closed Aug 13, 2019
1
Question : Persistent session in Moquette
#494
by BigGitWorld
was closed Aug 5, 2019
1
[Q] Embeded server. How to subscribe internal consumer
#493
by bademux
was closed Aug 1, 2019
5
Retained repository retainedOnTopic method calls Topic.match incorrectly
#488
by davesters
was closed Jul 21, 2019
1
canSkipQueue() returns false in QOS=1 while subscriber is connected to the broker
#487
opened Jul 10, 2018 by
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
Issues · moquette-io/moquette · GitHub
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
andrew-tpz
commented
Nov 19, 2020
•
edited
Expected behavior
Session is not removed by handleConnectionLost if new session is already reopened
Actual behavior
handleConnectionLost starts
processConnect starts and reopen session
handleConnectionLost continues and removes session
PostOffice.flushInFlight fails to use session
Steps to reproduce
Run broker
Use clean session=true in mqtt-client
Start and stop mqtt-client several times. Try to do pause between stop and start as short as possible.
P.S. It seems like one more mqtt-client connected permanently gives better chance to reproduce.
Minimal yet complete reproducer code (or URL to code) or complete log file
I added extra logging to catch the problem
14:59:39.254 [nioEventLoopGroup-3-6] io.moquette.broker.SessionRegistry - retrieve session OK by handleConnectionLost
14:59:39.254 [nioEventLoopGroup-3-7] io.moquette.broker.MQTTConnection - processConnect started
14:59:39.254 [nioEventLoopGroup-3-7] io.moquette.broker.SessionRegistry - NEW SESSION
14:59:39.255 [nioEventLoopGroup-3-7] io.moquette.broker.SessionRegistry - REOPEN SESSION
14:59:39.255 [nioEventLoopGroup-3-6] io.moquette.broker.SessionRegistry - remove session by handleConnectionLost
Added GitHub Issue template · moquette-io/moquette@a49792a · GitHub
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
· 1 comment
Comments
Copy link
Quote reply
strautins
commented
Oct 22, 2020
Hello,
Trying to understand http api for moquette broker.
Can somebody give me documentation info of how to post on http mqtt messages to moquette?
With client id, login, password etc.
WEB_SOCKET_PORT_PROPERTY_NAME = "websocket_port";
WEB_SOCKET_PATH_PROPERTY_NAME = "websocket_path";
so far I get
ERROR NewNettyMQTTHandler - Unexpected exception while processing MQTT message. Closing Netty channel. CId=null java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.netty.handler.codec.mqtt.MqttMessage
Can't get good info from google,
Thanks
Copy link
Author
strautins
commented
Oct 22, 2020
Correcting, there is no default http post for mqtt, false info I have got. AWS created their own support. So info how to implement websockets?
Sign up for free
Issues · moquette-io/moquette · GitHub
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
Search
All GitHub
↵
Jump to
↵
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Buffering settings to reduce latency
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
InterceptAcknowledgedMessage.StoredMessage is inaccessible
#444
opened Jan 14, 2019 by
austinw-fineart
0.13
3
distribute
#458
opened Mar 18, 2019 by
dqqzj
7
Question: disconnecting a client when authentication details removed
#516
opened Jan 23, 2020 by
MattyyttaM
Add Ping Request handling to the interceptors
#481
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Skip to content
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
checkHeaderAvailability don't check max remaininglength
#236
opened Nov 18, 2016 by
shuzhongling
1
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
Exception: java.lang.NoClassDefFoundError: org/mapdb/DBMaker
#248
opened Jan 5, 2017 by
ThomasSchemmer
3
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
if unchecked exception is throw while running processSubscription then remove() will never be called
#316
opened May 19, 2017 by
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
Open
micw opened this issue
Sep 16, 2020
· 0 comments
Open
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
micw opened this issue
Sep 16, 2020
· 0 comments
Comments
Copy link
Quote reply
micw
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
updated Oct 14, 2016
1
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
updated Dec 13, 2016
processConnectionLost miss to remove the subscriptions of the client
question
#236
opened Nov 18, 2016 by
shuzhongling
updated Dec 14, 2016
1
republishing messages fails....
bug
#234
opened Nov 17, 2016 by
windbender
#483
opened Jun 13, 2019 by
Demitrius
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Question: disconnecting a client when authentication details removed
#516
opened Jan 23, 2020 by
MattyyttaM
when protocol processor is inited with ssl port the word "disabled" is used to indicate the server name
#209
opened Sep 15, 2016 by
windbender
How one port supports both unidirectional and two-way certificate authentication for TLS
#491
opened Jul 30, 2019 by
cnneillee
Deploy -javadoc and -source jars
#465
opened Apr 1, 2019 by
joker1
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.</span></p>
<p><span style="font-size: 10pt;">
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."</span></p>
<p><span style="font-size: 10pt;">
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.</span></p>
<p><b><span style="font-size: 10pt;">2. Grant of Copyright License.</span></b> </p>
<p><span style="font-size: 10pt;">
opened Aug 30, 2019 by
r-t-s
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
How one port supports both unidirectional and two-way certificate authentication for TLS
#491
opened Jul 30, 2019 by
cnneillee
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
/**
/**
* Value object to maintain the information of single connection, like ClientID, Channel, and clean
* Value object to maintain the information of single connection, like ClientID, Channel, and clean
* session flag.
* session flag.
@@ -62,7 +66,7 @@ public ConnectionDescriptor(String clientID, Channel session, boolean cleanSessi
}
}
public void writeAndFlush(Object payload) {
public void writeAndFlush(Object payload) {
this.channel.writeAndFlush(payload);
this.channel.writeAndFlush(payload).addListener(FIRE_EXCEPTION_ON_FAILURE);
}
}
public void setupAutoFlusher(int flushIntervalMs) {
public void setupAutoFlusher(int flushIntervalMs) {
@@ -88,7 +92,7 @@ public boolean close() {
if (!success) {
if (!success) {
return false;
feature req
#158
opened Mar 4, 2016 by
redboy1972
4
NullPointerException in CTrie.evaluate
#529
opened May 13, 2020 by
hylkevds
1
3
failed to allocate 16777216 byte(s) of direct memory
#466
opened Apr 4, 2019 by
FengXMGeek
3
NullPointerException.I think is a bug
#473
opened Apr 22, 2019 by
liuhanjim
3
Exception: java.lang.NoClassDefFoundError: org/mapdb/DBMaker
#248
opened Jan 23, 2020 by
MattyyttaM
updated Jan 23, 2020
NullPointerException.I think is a bug
#473
opened Apr 22, 2019 by
liuhanjim
updated Jan 22, 2020
3
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
opened Jan 17, 2020 by
carlsberg-stack
updated Jan 20, 2020
5
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
opened Dec 18, 2019 by
beniroquai
LOG.info("Loading resource. RelativePath = {}.", relativePath);
InputStream is = this.classLoader.getResourceAsStream(relativePath);
return is != null ? new InputStreamReader(is) : null;
return is != null ? new InputStreamReader(is, StandardCharsets.UTF_8) : null;
}
@Override
13
broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.text.ParseException;
import java.util.Properties;
@@ -55,15 +57,10 @@ void parse(File file) throws ParseException {
return;
by BigGitWorld
was closed Aug 10, 2019
3
Subscriber client does not receive pulished messages to the server
#485
by BigGitWorld
was closed Aug 10, 2019
9
java.lang.ClassNotFoundException: org.eclipse.moquette.spi.impl.subscriptions.Subscription in Android
#484
by mstranne
was closed Jun 18, 2019
6
Duplicate subscription
#477
by BigGitWorld
was closed May 13, 2019
7
Subscribe to topics with wildcards
#476
by BigGitWorld
was closed May 13, 2019
2
Netty Leak Detected.
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
😕
❤️
🚀
👀
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
Add Ping Request handling to the interceptors
#481
opened Jun 5, 2019 by
djbr-david
6
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
14:59:39.255 [nioEventLoopGroup-3-7] io.moquette.broker.MQTTConnection - processConnect ACK started
14:59:39.257 [nioEventLoopGroup-3-7] io.moquette.broker.MQTTConnection - processConnect ACK end with true
14:59:39.257 [nioEventLoopGroup-3-7] io.moquette.broker.SessionRegistry - retrieve session NULL by flushInFlight
14:59:39.257 [nioEventLoopGroup-3-7] io.moquette.broker.NewNettyMQTTHandler - Unexpected exception while processing MQTT message. Closing Netty channel. CId=
java.lang.NullPointerException: Attempt to invoke virtual method 'void io.moquette.broker.Session.flushAllQueuedMessages()' on a null object reference
at io.moquette.broker.PostOffice.flushInFlight(PostOffice.java:319)
at io.moquette.broker.MQTTConnection.readCompleted(MQTTConnection.java:536)
at io.moquette.broker.NewNettyMQTTHandler.channelReadComplete(NewNettyMQTTHandler.java:76)
Moquette MQTT version
0.12.1, master 4665c5e
JVM version (e.g. java -version)
1.8
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
No suggested jump to results
Search
All GitHub
↵
Jump to
↵
Search
All GitHub
↵
Jump to
↵
Sign in
Join GitHub
Create your account
GitHub requires JavaScript enabled during sign up, for our signup captcha. Please enable JavaScript during sign up.
Username
Email address
Password
Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter. Learn more.
Email preferences
Send me occasional product updates, announcements, and offers.
Verify your account
Create account
By creating an account, you agree to the
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Buffering settings to reduce latency
#527
opened May 8, 2020 by
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
#527
opened May 8, 2020 by
impliedx
1
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Big refactory on session management: · moquette-io/moquette@1b272e5 · GitHub
opened Jun 5, 2019 by
djbr-david
6
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
windbender
Message size >64kB is not handled via Websocket connection.
#319
opened May 25, 2017 by
raipratheek
1
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Netty Leak Detection
#356
opened Aug 31, 2017 by
somejavadev
1
cannot make a distinction between bad user and not authorized when connect
#359
opened Sep 5, 2017 by
rongwei84n
2
Will Message lost if client reconnect before server clear the old connection
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
commented
Sep 16, 2020
Expected behavior
Example should print out messages
Actual behavior
Exception:
Exception in thread "pool-6-thread-1" java.lang.UnsupportedOperationException: direct buffer
at io.netty.buffer.PooledUnsafeDirectByteBuf.array(PooledUnsafeDirectByteBuf.java:226)
at io.netty.buffer.AbstractPooledDerivedByteBuf.array(AbstractPooledDerivedByteBuf.java:118)
Steps to reproduce
Use the embedding example with recent java and recent netty (in my case I run it on java 11 within a spring-boot app with spring-boot managed maven dependencies).
Minimal yet complete reproducer code (or URL to code) or complete log file
Original.
Moquette MQTT version
0.12.1 with netty 4.1.28
JVM version (e.g. java -version)
openjdk 11
Additional info
Problematic is the call to msg.getPayload().array() which is not guaranteed to succeed. The code can simply be changed to read from the buffer:
byte[] bytes = new byte[msg.getPayload().readableBytes()];
msg.getPayload().readBytes(bytes);
final String decodedPayload = new String(bytes, StandardCharsets.UTF_8);
Sign up for free
to join this conversation on GitHub.
Already have an account?
updated Dec 14, 2016
7
Exception: java.lang.NoClassDefFoundError: org/mapdb/DBMaker
#248
opened Jan 5, 2017 by
ThomasSchemmer
updated Jan 24, 2017
3
Avoid OutOfMemory error
feature req
#141
opened Jan 17, 2016 by
andsel
updated Apr 14, 2017
0.9
3
if unchecked exception is throw while running processSubscription then remove() will never be called
#316
opened May 19, 2017 by
windbender
updated May 19, 2017
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
Subscription storage
#482
opened Jun 12, 2019 by
BigGitWorld
Abnormal disconnection of the connection will result in InterceptHandler.onConnectionLost() called twice
#430
opened Sep 20, 2018 by
CoderBigL
getSubscriptions() always return an Empty list
#438
opened Nov 19, 2018 by
abdollahpour
BUG - null Session in subscribe procedure
#517
opened Feb 14, 2020 by
BigGitWorld
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.</span></p>
<p><b><span style="font-size: 10pt;">3. Grant of Patent License.</span></b><p>
<p><span style="font-size: 10pt;">
Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
Demitrius
Subscription storage
#482
opened Jun 12, 2019 by
BigGitWorld
Previous 1 2 3 Next
Previous Next
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
return false;
}
}
this.channel.close();
this.channel.close().addListener(CLOSE_ON_FAILURE);
return true;
return true;
}
}
@@ -100,7 +104,7 @@ public void abort() {
LOG.info("Closing connection descriptor. MqttClientId = {}.", clientID);
LOG.info("Closing connection descriptor. MqttClientId = {}.", clientID);
// try {
// try {
// this.channel.disconnect().sync();
// this.channel.disconnect().sync();
this.channel.close(); // .sync();
this.channel.close().addListener(CLOSE_ON_FAILURE); // .sync();
// } catch (InterruptedException e) {
// } catch (InterruptedException e) {
// e.printStackTrace();
// e.printStackTrace();
// }
opened Jan 5, 2017 by
ThomasSchemmer
3
The server throws an exception when the message is received
#406
opened Jun 4, 2018 by
ma-yadong
3
Server API to get subscriptions information
feature req
#207
opened Sep 14, 2016 by
teranisi
3
Avoid OutOfMemory error
feature req
#141
opened Jan 17, 2016 by
andsel
0.9
3
InterceptAcknowledgedMessage.StoredMessage is inaccessible
#444
updated Jan 2, 2020
1
Will it be compatible with Graalvm in the future?
#509
opened Dec 12, 2019 by
coolbeevip
updated Dec 12, 2019
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
updated Dec 10, 2019
1
Moquette & 2-way SSL authentication
#508
opened Nov 25, 2019 by
lukaszsoszynski
updated Nov 25, 2019
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
updated Nov 9, 2019
}
try {
FileReader reader = new FileReader(file);
Reader reader = Files.newBufferedReader(file.toPath(), StandardCharsets.UTF_8);
parse(reader);
} catch (FileNotFoundException fex) {
LOG.warn(
String.format(
"parsing not existing file %s, so fallback on default configuration!",
file.getAbsolutePath()),
fex);
return;
} catch (IOException fex) {
LOG.warn("parsing not existing file {}, fallback on default configuration!", file.getAbsolutePath(), fex);
}
}
9
broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
Show comments
View file
Edit file
Delete file
@@ -19,10 +19,15 @@
duplicate
#474
by kopens
was closed Apr 28, 2019
1
java.lang.NoSuchMethodError: io.netty.handler.codec.mqtt.MqttPublishVariableHeader.packetId()
bug
#472
by noordawod
was closed Apr 21, 2019
0.13
2
doesn't work with apache Httpd2.4?
#471
by cleverpig
was closed Apr 28, 2019
2
command between clients of two server
#470
by BigGitWorld
was closed Apr 28, 2019
5
Previous 1 2 3 4 5 … 12 13 Next
Previous Next
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
ConcurrentModificationException while stress testing
invalid
3
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
1
1
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
6
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
checkHeaderAvailability don't check max remaininglength
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Terms of Service.
For more information about GitHub's privacy practices, see the
GitHub Privacy Statement.
We'll occasionally send you account-related emails.
Product
Features
Security
Team
Enterprise
Customer stories
The ReadME Project
Pricing
Resources
Roadmap
Platform
Developer API
Partners
Atom
Electron
GitHub Desktop
Support
Help
Community Forum
Professional Services
Learning Lab
Status
impliedx
1
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
#490
opened Jul 23, 2019 by
mpe85
6
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
checkHeaderAvailability don't check max remaininglength
#217
opened Oct 12, 2016 by
beyondfengyu
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
Error processing protocol message: PUBACK
#483
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
New configuration parameter : setting the HandshakeTimeout on SslHandler
#531
Open
dsoulayrol opened this issue
Jul 23, 2020
· 0 comments
Open
New configuration parameter : setting the HandshakeTimeout on SslHandler
#531
dsoulayrol opened this issue
micw
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
#366
opened Oct 22, 2017 by
fjcyue
1
1
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
6
The server throws an exception when the message is received
#406
opened Jun 4, 2018 by
ma-yadong
3
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
opened Mar 23, 2017 by
leesangboo
updated Jun 21, 2017
7
[FR]Moquette clusters
feature req
#131
opened Dec 11, 2015 by
pabloa
updated Jul 11, 2017
0.9
19
Retained message with QoS 0
#125
opened Nov 11, 2015 by
env3d
updated Aug 8, 2017
andrew-tpz
Potential Bug in NextPacketID
bug
#237
opened Nov 29, 2016 by
peacecoder
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
Netty Leak Detection.
#467
opened Apr 4, 2019 by
kopens
1
Previous 1 2 3 Next
Previous Next
ProTip!
Updated in the last three days: updated:>2020-11-20.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
as of the date such litigation is filed.
</span></p>
<p><b><span style="font-size: 10pt;">
4. Redistribution.
</span></b></p>
<p><span style="font-size: 10pt;">You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
modifications, and in Source or Object form, provided that You
meet the following conditions:</span><p>
<ul>
<li><span style="font-size: 10pt;">
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and</span><p>
</li>
<li><span style="font-size: 10pt;">
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and</span><p>
</li>
</li><span style="font-size: 10pt;">
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and</span><p>
</li>
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
// }
4
broker/src/main/java/io/moquette/server/config/ClasspathResourceLoader.java
Show comments
View file
Edit file
Delete file
@@ -19,6 +19,8 @@
import java.io.InputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.Reader;
import java.nio.charset.StandardCharsets;
import org.slf4j.Logger;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.LoggerFactory;
@@ -51,7 +53,7 @@ public Reader loadDefaultResource() {
public Reader loadResource(String relativePath) {
public Reader loadResource(String relativePath) {
opened Jan 14, 2019 by
austinw-fineart
0.13
3
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
zhengyangyong
3
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
Authentication interface should return Optional< Principal>
feature req
#176
1
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
updated Oct 10, 2019
failed to allocate 16777216 byte(s) of direct memory
#466
opened Apr 4, 2019 by
FengXMGeek
updated Sep 27, 2019
3
Plans to support MQTT 5?
#490
opened Jul 23, 2019 by
mpe85
updated Sep 20, 2019
6
Connection dropped when publishing message with payload greater 8KB.
#503
opened Aug 30, 2019 by
r-t-s
updated Aug 30, 2019
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.nio.file.Files;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static java.nio.charset.StandardCharsets.UTF_8;
public class FileResourceLoader implements IResourceLoader {
private static final Logger LOG = LoggerFactory.getLogger(FileResourceLoader.class);
@@ -68,8 +73,8 @@ public Reader loadResource(File f) {
throw new ResourceIsDirectoryException("File \"" + f + "\" is a directory!");
}
try {
return new FileReader(f);
} catch (FileNotFoundException e) {
return Files.newBufferedReader(f.toPath(), UTF_8);
} catch (IOException e) {
LOG.error("The file does not exist. Path = {}.", f.getAbsolutePath());
return null;
}
4
ProTip!
Exclude everything labeled bug with -label:bug.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Netty Leak Detection.
#217
opened Oct 12, 2016 by
beyondfengyu
1
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
1
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Contact GitHub
Company
About
Blog
Careers
Press
Social Impact
Shop
Twitter
Facebook
YouTube
LinkedIn
GitHub
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Site Map
What is Git?
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
opened Sep 16, 2020 by
micw
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
ConcurrentModificationException while stress testing
invalid
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
4665c5e6ee
moquette/license.txt
Go to file
Go to file
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
205 lines (170 sloc)
11.3 KB
Raw
Blame
Copyright 2012-2013 (c) Andrea Selva
Apache License
Version 2.0, January 2004
http://www.apache.org/licenses/
TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
opened Jun 13, 2019 by
Demitrius
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Netty Leak Detection.
#467
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Publish javadoc & sources of 0.13
#528
Open
hylkevds opened this issue
May 13, 2020
· 0 comments
Open
Publish javadoc & sources of 0.13
#528
hylkevds opened this issue
May 13, 2020
· 0 comments
Comments
Copy link
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Reintroduce maven project files
Jul 23, 2020
· 0 comments
Labels
feature
Comments
Copy link
Quote reply
dsoulayrol
commented
Jul 23, 2020
Hi,
I am working with embedded devices which are very limited in resources, and the server certificate verification takes a very long time. The server closes the connection after 10 seconds, far before the client has completed its computation to ask for the key exchange.
This timeout is set by io.netty.handler.ssl.SslHandler. This handler is created in NewNettyAcceptor#createSslHandler. (I am using version 0.12.1, but I see nothing changed in master). When I call SslHandler#setHandshakeTimeoutMillis here, my problem is solved.
So I'd like to have the capability to provide this timeout value as a property for moquette. I believe it would be an interesting feature because MQTT is easily used on embedded devices, and SSL support is somewhat heavy, so my problem could be seen elsewhere.
I am ready to create a Pull Request if necessary, but I would be happy to hear your comments first on the subject.
👍
1
dsoulayrol
pushed a commit
to dsoulayrol/moquette
that referenced
this issue
Nov 5, 2020
7
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Previous 1 2 3 Next
Previous Next
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
NullPointerException in CTrie.evaluate
#529
Open
hylkevds opened this issue
May 13, 2020
· 3 comments
· May be fixed by #532
Open
NullPointerException in CTrie.evaluate
#529
hylkevds opened this issue
May 13, 2020
· 3 comments
· May be fixed by #532
Comments
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
5
Netty Leak Detection
#356
opened Aug 31, 2017 by
somejavadev
updated Aug 31, 2017
1
Authorizator based on client Certificate information
#328
opened Jun 15, 2017 by
edenmob
updated Sep 14, 2017
1
cannot make a distinction between bad user and not authorized when connect
#359
opened Sep 5, 2017 by
rongwei84n
updated Apr 29, 2018
2
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
<li><span style="font-size: 10pt;">
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.</span><p>
</li>
</ul>
</span></p>
<p><span style="font-size: 10pt;">
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
LOG.info("Loading resource. RelativePath = {}.", relativePath);
LOG.info("Loading resource. RelativePath = {}.", relativePath);
InputStream is = this.classLoader.getResourceAsStream(relativePath);
InputStream is = this.classLoader.getResourceAsStream(relativePath);
return is != null ? new InputStreamReader(is) : null;
return is != null ? new InputStreamReader(is, StandardCharsets.UTF_8) : null;
}
}
@Override
@Override
13
broker/src/main/java/io/moquette/server/config/ConfigurationParser.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import java.io.FileReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.IOException;
import java.io.Reader;
import java.io.Reader;
opened May 6, 2016 by
windbender
2
cannot make a distinction between bad user and not authorized when connect
#359
opened Sep 5, 2017 by
rongwei84n
2
Moquette shows topics, but subscribers won't receive anything - Subscription missing?
#510
opened Dec 18, 2019 by
beniroquai
1
Previous 1 2 3 Next
Previous Next
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Will Message lost if client reconnect before server clear the old connection
#366
opened Oct 22, 2017 by
fjcyue
updated Aug 13, 2019
1
1
How to forcefully disconnect the client from the broker?
#469
opened Apr 8, 2019 by
giri110890
updated Aug 9, 2019
9
Previous 1 2 3 Next
Previous Next
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.handler.timeout.IdleState;
import io.netty.handler.timeout.IdleStateEvent;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
@Sharable
class MoquetteIdleTimeoutHandler extends ChannelDuplexHandler {
@@ -37,7 +39,7 @@ public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exc
LOG.info("Firing channel inactive event. MqttClientId = {}.", NettyUtils.clientID(ctx.channel()));
// fire a channelInactive to trigger publish of Will
ctx.fireChannelInactive();
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
} else {
if (LOG.isDebugEnabled()) {
8
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
#467
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
Updated in the last three days: updated:>2020-11-20.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Error processing protocol message: PUBACK
#483
opened Jun 13, 2019 by
Demitrius
Significant (>90%) message loss under heavy load
#480
opened Jun 5, 2019 by
flonix8
2
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
1
java.lang.ClassCastException: io.netty.handler.codec.http.HttpObjectAggregator$AggregatedFullHttpRequest cannot be cast to io.moquette.parser.proto.messages.AbstractMessage
#290
opened Mar 23, 2017 by
leesangboo
7
ConcurrentModificationException while stress testing
invalid
#427
opened Aug 9, 2018 by
rakechan
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Added GitHub Issue template
Loading branch information
andsel
committed
Oct 20, 2017
1 parent
1b272e5
commit a49792adf5d6bcf636737478e972207f516dc4df
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
#427
opened Aug 9, 2018 by
rakechan
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Netty Leak Detection.
#467
1. Definitions.
"License" shall mean the terms and conditions for use, reproduction,
and distribution as defined by Sections 1 through 9 of this document.
"Licensor" shall mean the copyright owner or entity authorized by
the copyright owner that is granting the License.
"Legal Entity" shall mean the union of the acting entity and all
other entities that control, are controlled by, or are under common
control with that entity. For the purposes of this definition,
"control" means (i) the power, direct or indirect, to cause the
direction or management of such entity, whether by contract or
otherwise, or (ii) ownership of fifty percent (50%) or more of the
outstanding shares, or (iii) beneficial ownership of such entity.
"You" (or "Your") shall mean an individual or Legal Entity
exercising permissions granted by this License.
"Source" form shall mean the preferred form for making modifications,
including but not limited to software source code, documentation
source, and configuration files.
"Object" form shall mean any form resulting from mechanical
transformation or translation of a Source form, including but
not limited to compiled object code, generated documentation,
and conversions to other media types.
"Work" shall mean the work of authorship, whether in Source or
Object form, made available under the License, as indicated by a
copyright notice that is included in or attached to the work
Netty Leak Detection.
#467
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Quote reply
Contributor
hylkevds
commented
May 13, 2020
It seems something went wrong during the publication of 0.13 to the bintray repository. The sources jar is missing:
https://jcenter.bintray.com/io/moquette/moquette-broker/0.13/
Though I just noticed they are also missing for 0.12.
0.11 does have sources.
👍
1
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
#542
Merged
andsel
merged 1 commit into
master
from
reintroduce_maven_project_files
Nov 2, 2020
+1,241
−372
Conversation
0
Commits
1
Checks
0
Files changed
21
Reintroduce maven build, with wrapper, removed gradle.
7f91798
Select commit
7f91798
Reintroduce maven build, with wrapper, removed gradle.
andsel Oct 22, 2020
Added configuration item for handshake timeout on SSL channel (moquet…
…
d4401d7
…te-io#531)
andsel
added
the
feature
label
Nov 13, 2020
dsoulayrol
pushed a commit
to dsoulayrol/moquette
that referenced
this issue
Nov 13, 2020
Added configuration item for handshake timeout on SSL channel (moquet…
…
2496e2e
…te-io#531)
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
1
Netty Leak Detection.
#467
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
Updated in the last three days: updated:>2020-11-20.
© 2020 GitHub, Inc.
Terms
Privacy
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Copy link
Quote reply
Contributor
hylkevds
commented
May 13, 2020
Expected behavior
No exceptions when publishing a message
Actual behavior
09:28:02.560 [nioEventLoopGroup-3-1] ERROR i.m.broker.NewNettyMQTTHandler - Error processing protocol message: PUBLISH
java.lang.NullPointerException: null
at io.moquette.broker.subscriptions.CTrie.evaluate(CTrie.java:58)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:70)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:86)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:86)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:65)
at io.moquette.broker.subscriptions.CTrieSubscriptionDirectory.matchWithoutQosSharpening(CTrieSubscriptionDirectory.java:67)
at io.moquette.broker.subscriptions.CTrieSubscriptionDirectory.matchQosSharpening(CTrieSubscriptionDirectory.java:72)
at io.moquette.broker.PostOffice.publish2Subscribers(PostOffice.java:207)
at io.moquette.broker.PostOffice.receivedPublishQos2(PostOffice.java:244)
at io.moquette.broker.MQTTConnection.processPublish(MQTTConnection.java:361)
👍
👎
😄
🎉
😕
❤️
🚀
👀
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
#531
opened Jul 23, 2020 by
dsoulayrol
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
The server throws an exception when the message is received
#406
opened Jun 4, 2018 by
ma-yadong
updated Jun 6, 2018
3
client can't reconnect to the broker once exception happened inner processSubscribe()
#388
opened Feb 6, 2018 by
fjcyue
updated Jul 26, 2018
6
In BytesMetrics wroteBytes always return 0
#425
opened Jul 27, 2018 by
mjpatelsls
updated Aug 6, 2018
1
Memory grows infinitely when Qos set 2
#423
opened Jul 10, 2018 by
Learn more
Accept
Reject
Save preferences
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
</span></p>
<p><b><span style="font-size: 10pt;">
5. Submission of Contributions.
</span></b></p>
<p><span style="font-size: 10pt;">Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
</span></p>
<p><b><span style="font-size: 10pt;">
6. Trademarks.
</span></b></p>
<p><span style="font-size: 10pt;">This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
</span></p>
<p><b><span style="font-size: 10pt;">
7. Disclaimer of Warranty.
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.text.ParseException;
import java.text.ParseException;
import java.util.Properties;
import java.util.Properties;
@@ -55,15 +57,10 @@ void parse(File file) throws ParseException {
return;
return;
}
}
try {
try {
FileReader reader = new FileReader(file);
Reader reader = Files.newBufferedReader(file.toPath(), StandardCharsets.UTF_8);
parse(reader);
parse(reader);
} catch (FileNotFoundException fex) {
} catch (IOException fex) {
LOG.warn(
LOG.warn("parsing not existing file {}, fallback on default configuration!", file.getAbsolutePath(), fex);
String.format(
"parsing not existing file %s, so fallback on default configuration!",
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
Show comments
View file
Edit file
Delete file
@@ -44,6 +44,7 @@
import io.netty.handler.ssl.SslHandler;
import io.netty.handler.timeout.IdleStateHandler;
import io.netty.util.concurrent.Future;
import io.netty.util.concurrent.GenericFutureListener;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import javax.net.ssl.SSLContext;
@@ -53,6 +54,7 @@
import java.util.Optional;
import java.util.concurrent.TimeUnit;
import static io.moquette.BrokerConstants.*;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
2
BrokerInterceptor thread pool never closing on serverStop
#506
opened Oct 9, 2019 by
bobrowskim
license is missing in artifact
#492
opened Jul 30, 2019 by
ascheman
Subscription breaks during performance test
#505
opened Oct 4, 2019 by
JinseonyLee
1
MQTT SSL not working
#499
opened Aug 20, 2019 by
francesco98
1
Netty Leak Detection.
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Unified
Split
Showing
1 changed file
with
13 additions
and 0 deletions.
+13
−0
.github/ISSUE_TEMPLATE.md
13
.github/ISSUE_TEMPLATE.md
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,13 @@
### Expected behavior
### Actual behavior
### Steps to reproduce
### Minimal yet complete reproducer code (or URL to code) or complete log file
### Moquette MQTT version
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
2 Open
1 Closed
2 Open
1 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
1 Closed
1 Open
1 Closed
Author
Filter by author
Label
Filter by label
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
What’s not been updated in a month: updated:<2020-10-23.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
(an example is provided in the Appendix below).
"Derivative Works" shall mean any work, whether in Source or Object
form, that is based on (or derived from) the Work and for which the
editorial revisions, annotations, elaborations, or other modifications
represent, as a whole, an original work of authorship. For the purposes
of this License, Derivative Works shall not include works that remain
separable from, or merely link (or bind by name) to the interfaces of,
the Work and Derivative Works thereof.
"Contribution" shall mean any work of authorship, including
the original version of the Work and any modifications or additions
to that Work or Derivative Works thereof, that is intentionally
submitted to Licensor for inclusion in the Work by the copyright owner
or by an individual or Legal Entity authorized to submit on behalf of
the copyright owner. For the purposes of this definition, "submitted"
means any form of electronic, verbal, or written communication sent
to the Licensor or its representatives, including but not limited to
communication on electronic mailing lists, source code control systems,
and issue tracking systems that are managed by, or on behalf of, the
Licensor for the purpose of discussing and improving the Work, but
excluding communication that is conspicuously marked or otherwise
designated in writing by the copyright owner as "Not a Contribution."
"Contributor" shall mean Licensor and any individual or Legal Entity
on behalf of whom a Contribution has been received by Licensor and
subsequently incorporated within the Work.
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Big refactory on session management:
- introduced a unique point of access and management of sessions state (SessionRepository)
- separated behaiour for sessions with clean flag to false into DurableSession
- separated behaviour for session with clean flag to true into TransientSession
Loading branch information
andsel
committed
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Merged
Reintroduce maven project files
#542
Reintroduce maven build, with wrapper, removed gradle.
7f91798
Select commit
7f91798
Reintroduce maven build, with wrapper, removed gradle.
andsel Oct 22, 2020
Waiting for checks information...
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Assignees
No one assigned
Labels
feature
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
2 participants
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
at io.moquette.broker.MQTTConnection.handleMessage(MQTTConnection.java:77)
at io.moquette.broker.NewNettyMQTTHandler.channelRead(NewNettyMQTTHandler.java:58)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.broker.metrics.MQTTMessageLogger.channelRead(MQTTMessageLogger.java:46)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.broker.metrics.MessageMetricsHandler.channelRead(MessageMetricsHandler.java:50)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
zhengyangyong
updated Aug 12, 2018
3
Abnormal disconnection of the connection will result in InterceptHandler.onConnectionLost() called twice
#430
opened Sep 20, 2018 by
CoderBigL
updated Sep 20, 2018
Publish Failed Acknowledgment
#433
opened Oct 22, 2018 by
BigGitWorld
updated Oct 22, 2018
Previous 1 2 3 Next
Previous Next
ProTip!
Mix and match filters to narrow down what you’re looking for.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
</span></b></p>
<p><span style="font-size: 10pt;">Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
</span></p>
<p><b><span style="font-size: 10pt;">
8. Limitation of Liability.
</span></b></p>
<p><span style="font-size: 10pt;">In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
file.getAbsolutePath()),
fex);
return;
}
}
}
}
9
broker/src/main/java/io/moquette/server/config/FileResourceLoader.java
Show comments
View file
Edit file
Delete file
@@ -19,10 +19,15 @@
import java.io.File;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.io.Reader;
Save preferences
Save preferences
public class NettyAcceptor implements ServerAcceptor {
@@ -85,7 +87,7 @@ protected void encode(ChannelHandlerContext chc, ByteBuf bb, List<Object> out) t
}
}
abstract class PipelineInitializer {
abstract static class PipelineInitializer {
abstract void init(ChannelPipeline pipeline) throws Exception;
}
@@ -197,7 +199,7 @@ public void initChannel(SocketChannel ch) throws Exception {
// Bind and start to accept incoming connections.
ChannelFuture f = b.bind(host, port);
f.sync();
f.sync().addListener(FIRE_EXCEPTION_ON_FAILURE);
} catch (InterruptedException ex) {
LOG.error("An interruptedException was caught while initializing server. Protocol={}", protocol, ex);
}
@@ -349,6 +351,8 @@ void init(ChannelPipeline pipeline) throws Exception {
});
}
@SuppressWarnings("FutureReturnValueIgnored")
Learn more
Accept
Reject
Save preferences
#467
opened Apr 4, 2019 by
kopens
1
Repeating receiving non clear session messages.
bug
#197
opened Aug 11, 2016 by
stayclean
1
NullPointerException caused by async connect/disconnect processing
#553
opened Nov 19, 2020 by
andrew-tpz
Previous 1 2 3 Next
Previous Next
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
### JVM version (e.g. `java -version`)
### OS version (e.g. `uname -a`)
Toggle all file notes
0 comments
on commit a49792a
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
New configuration parameter : setting the HandshakeTimeout on SslHandler
feature
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
2. Grant of Copyright License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
copyright license to reproduce, prepare Derivative Works of,
publicly display, publicly perform, sublicense, and distribute the
Work and such Derivative Works in Source or Object form.
3. Grant of Patent License. Subject to the terms and conditions of
this License, each Contributor hereby grants to You a perpetual,
worldwide, non-exclusive, no-charge, royalty-free, irrevocable
(except as stated in this section) patent license to make, have made,
use, offer to sell, sell, import, and otherwise transfer the Work,
where such license applies only to those patent claims licensable
by such Contributor that are necessarily infringed by their
Contribution(s) alone or by combination of their Contribution(s)
with the Work to which such Contribution(s) was submitted. If You
institute patent litigation against any entity (including a
cross-claim or counterclaim in a lawsuit) alleging that the Work
or a Contribution incorporated within the Work constitutes direct
or contributory patent infringement, then any patent licenses
granted to You under this License for that Work shall terminate
as of the date such litigation is filed.
4. Redistribution. You may reproduce and distribute copies of the
Work or Derivative Works thereof in any medium, with or without
Accept
Reject
Save preferences
Oct 14, 2017
1 parent
6bacce6
commit 1b272e584933fc0b78919bad767d7e73dbcc01b6
Unified
Split
Showing
43 changed files
with
1,101 additions
and 1,704 deletions.
+0
−8
broker/src/main/java/io/moquette/connections/IConnectionsManager.java
+46
−93
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
+3
−1
broker/src/main/java/io/moquette/persistence/PersistentSession.java
+1
−1
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
Save preferences
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.broker.metrics.BytesMetricsHandler.channelRead(BytesMetricsHandler.java:51)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
has been advised of the possibility of such damages.
</span></p>
<p><b><span style="font-size: 10pt;">
9. Accepting Warranty or Additional Liability.
</span></b></p>
<p><span style="font-size: 10pt;">While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
</span></p>
<p><span style="font-size: 10pt;">
END OF TERMS AND CONDITIONS
</span></p>
<p><span style="font-size: 10pt;">
APPENDIX: How to apply the Apache License to your work.
</span></p>
<p><span style="font-size: 10pt;">
To apply the Apache License to your work, attach the following
import java.nio.file.Files;
import org.slf4j.Logger;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.LoggerFactory;
import static java.nio.charset.StandardCharsets.UTF_8;
public class FileResourceLoader implements IResourceLoader {
public class FileResourceLoader implements IResourceLoader {
private static final Logger LOG = LoggerFactory.getLogger(FileResourceLoader.class);
private static final Logger LOG = LoggerFactory.getLogger(FileResourceLoader.class);
@@ -68,8 +73,8 @@ public Reader loadResource(File f) {
throw new ResourceIsDirectoryException("File \"" + f + "\" is a directory!");
throw new ResourceIsDirectoryException("File \"" + f + "\" is a directory!");
}
}
try {
try {
return new FileReader(f);
return Files.newBufferedReader(f.toPath(), UTF_8);
} catch (FileNotFoundException e) {
} catch (IOException e) {
@Override
public void close() {
LOG.info("Closing Netty acceptor...");
if (m_workerGroup == null || m_bossGroup == null) {
14
broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.util.ReferenceCountUtil;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_MOST_ONCE;
@Sharable
@@ -78,16 +80,16 @@ public void channelRead(ChannelHandlerContext ctx, Object message) {
false,
0);
MqttMessage pingResp = new MqttMessage(pingHeader);
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
🎉
😕
❤️
🚀
👀
Mqtt websocket http
#538
opened Oct 22, 2020 by
strautins
1
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
Reject
Save preferences
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
#531
opened Jul 23, 2020 by
dsoulayrol
ProTip!
Type g p on any issue or pull request to go back to the pull request listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
NullPointerException in CTrie.evaluate
#529
opened May 13, 2020 by
hylkevds
1
3
Publish javadoc & sources of 0.13
#528
opened May 13, 2020 by
hylkevds
ProTip!
Find all open issues with in progress development work with linked:pr.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
👀
Embedding example throws java.lang.UnsupportedOperationException: direct buffer
#534
opened Sep 16, 2020 by
micw
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
Learn more
Accept
Reject
Save preferences
modifications, and in Source or Object form, provided that You
meet the following conditions:
(a) You must give any other recipients of the Work or
Derivative Works a copy of this License; and
(b) You must cause any modified files to carry prominent notices
stating that You changed the files; and
(c) You must retain, in the Source form of any Derivative Works
that You distribute, all copyright, patent, trademark, and
attribution notices from the Source form of the Work,
excluding those notices that do not pertain to any part of
the Derivative Works; and
(d) If the Work includes a "NOTICE" text file as part of its
distribution, then any Derivative Works that You distribute must
include a readable copy of the attribution notices contained
within such NOTICE file, excluding those notices that do not
pertain to any part of the Derivative Works, in at least one
+7
−17
broker/src/main/java/io/moquette/server/ConnectionDescriptorStore.java
+1
−1
broker/src/main/java/io/moquette/server/Constants.java
+40
−163
broker/src/main/java/io/moquette/spi/ClientSession.java
+229
−0
broker/src/main/java/io/moquette/spi/DurableSession.java
+28
−0
Accept
Reject
Save preferences
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1414)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:945)
at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:146)
at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:545)
at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:499)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
Reject
Save preferences
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
</span></p>
<p><span style="font-size: 10pt;">
Copyright [yyyy] [name of copyright owner]
</span></p>
<p><span style="font-size: 10pt;">
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
</span></p>
<p><span style="font-size: 10pt;">
http://www.apache.org/licenses/LICENSE-2.0
</span></p>
<p><span style="font-size: 10pt;">
Unless required by applicable law or agreed to in writing, software
LOG.error("The file does not exist. Path = {}.", f.getAbsolutePath());
LOG.error("The file does not exist. Path = {}.", f.getAbsolutePath());
return null;
return null;
}
}
4
broker/src/main/java/io/moquette/server/netty/MoquetteIdleTimeoutHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.handler.timeout.IdleState;
import io.netty.handler.timeout.IdleState;
import io.netty.handler.timeout.IdleStateEvent;
import io.netty.handler.timeout.IdleStateEvent;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
@Sharable
ctx.writeAndFlush(pingResp);
ctx.writeAndFlush(pingResp).addListener(CLOSE_ON_FAILURE);
break;
default:
LOG.error("Unkonwn MessageType:{}", messageType);
break;
}
} catch (Throwable ex) {
LOG.error("Exception was caught while processing MQTT message, " + ex.getCause(), ex);
LOG.error("Exception was caught while processing MQTT message, {}", ex.getCause(), ex);
ctx.fireExceptionCaught(ex);
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
} finally {
ReferenceCountUtil.release(msg);
}
@@ -97,17 +99,17 @@ public void channelRead(ChannelHandlerContext ctx, Object message) {
public void channelInactive(ChannelHandlerContext ctx) throws Exception {
String clientID = NettyUtils.clientID(ctx.channel());
if (clientID != null && !clientID.isEmpty()) {
LOG.info("Notifying connection lost event. MqttClientId = {}.", clientID);
LOG.info("Notifying connection lost event. MqttClientId = {}", clientID);
m_processor.processConnectionLost(clientID, ctx.channel());
Learn more
Accept
Reject
Save preferences
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
of the following places: within a NOTICE text file distributed
as part of the Derivative Works; within the Source form or
documentation, if provided along with the Derivative Works; or,
within a display generated by the Derivative Works, if and
wherever such third-party notices normally appear. The contents
of the NOTICE file are for informational purposes only and
do not modify the License. You may add Your own attribution
notices within Derivative Works that You distribute, alongside
or as an addendum to the NOTICE text from the Work, provided
that such additional attribution notices cannot be construed
as modifying the License.
You may add Your own copyright statement to Your modifications and
may provide additional or different license terms and conditions
for use, reproduction, or distribution of Your modifications, or
for any such Derivative Works as a whole, provided Your use,
reproduction, and distribution of the Work otherwise complies with
the conditions stated in this License.
5. Submission of Contributions. Unless You explicitly state otherwise,
any Contribution intentionally submitted for inclusion in the Work
by You to the Licensor shall be under the terms and conditions of
this License, without any additional terms or conditions.
Notwithstanding the above, nothing herein shall supersede or modify
the terms of any separate license agreement you may have executed
with Licensor regarding such Contributions.
broker/src/main/java/io/moquette/spi/EnqueuedMessage.java
+0
−1
broker/src/main/java/io/moquette/spi/IMessagesStore.java
+12
−29
broker/src/main/java/io/moquette/spi/ISessionsStore.java
+12
−49
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
+185
−0
broker/src/main/java/io/moquette/spi/TransientSession.java
+13
−8
broker/src/main/java/io/moquette/spi/impl/InternalRepublisher.java
+8
−6
broker/src/main/java/io/moquette/spi/impl/MessagesPublisher.java
+2
−2
broker/src/main/java/io/moquette/spi/impl/PersistentQueueMessageSender.java
+63
−104
at java.base/java.lang.Thread.run(Thread.java:834)
Steps to reproduce
git clone git@github.com:FraunhoferIOSB/FROST-Server.git
cd FROST-Server
mvn install
https://travis-ci.org/github/FraunhoferIOSB/FROST-Server/jobs/686452716
It seems it does not always happen on my machine, but it's very reproducable on Travis. I've not been able to debug Moquette, since it does not compile on java 11.
Moquette MQTT version
0.13
JVM version (e.g. java -version)
11.0.7
Copy link
Contributor
Author
hylkevds
commented
May 13, 2020
•
edited
I've made a little minimal test project / torture test for this problem that will usually give the above exception in a few seconds:
https://github.com/hylkevds/moquetteTests
What it does is:
It spins up a Moquette
It creates 1 client for publishing
It creates 10 threads for publishing data
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</span></p>
</div>
</body></html>
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
@Sharable
class MoquetteIdleTimeoutHandler extends ChannelDuplexHandler {
class MoquetteIdleTimeoutHandler extends ChannelDuplexHandler {
@@ -37,7 +39,7 @@ public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exc
LOG.info("Firing channel inactive event. MqttClientId = {}.", NettyUtils.clientID(ctx.channel()));
LOG.info("Firing channel inactive event. MqttClientId = {}.", NettyUtils.clientID(ctx.channel()));
// fire a channelInactive to trigger publish of Will
// fire a channelInactive to trigger publish of Will
ctx.fireChannelInactive();
ctx.fireChannelInactive();
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
}
} else {
} else {
if (LOG.isDebugEnabled()) {
if (LOG.isDebugEnabled()) {
8
broker/src/main/java/io/moquette/server/netty/NettyAcceptor.java
}
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
@Override
public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
LOG.error("An unexpected exception was caught while processing MQTT message. Closing Netty channel. CId={}, " +
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
@Override
4
broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.util.Attribute;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class BytesMetricsHandler extends ChannelDuplexHandler {
6. Trademarks. This License does not grant permission to use the trade
names, trademarks, service marks, or product names of the Licensor,
except as required for reasonable and customary use in describing the
origin of the Work and reproducing the content of the NOTICE file.
7. Disclaimer of Warranty. Unless required by applicable law or
agreed to in writing, Licensor provides the Work (and each
Contributor provides its Contributions) on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
implied, including, without limitation, any warranties or conditions
of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
PARTICULAR PURPOSE. You are solely responsible for determining the
appropriateness of using or redistributing the Work and assume any
risks associated with Your exercise of permissions under this License.
8. Limitation of Liability. In no event and under no legal theory,
whether in tort (including negligence), contract, or otherwise,
unless required by applicable law (such as deliberate and grossly
negligent acts) or agreed to in writing, shall any Contributor be
liable to You for damages, including any direct, indirect, special,
incidental, or consequential damages of any character arising as a
result of this License or out of the use or inability to use the
Work (including but not limited to damages for loss of goodwill,
other commercial damages or losses), even if such Contributor
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessor.java
+6
−7
broker/src/main/java/io/moquette/spi/impl/ProtocolProcessorBootstrapper.java
+1
−1
broker/src/main/java/io/moquette/spi/impl/Qos1PublishHandler.java
+6
−7
broker/src/main/java/io/moquette/spi/impl/Qos2PublishHandler.java
+126
−0
broker/src/main/java/io/moquette/spi/impl/SessionsRepository.java
+15
−28
broker/src/main/java/io/moquette/spi/impl/subscriptions/CNode.java
+34
−27
broker/src/main/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectory.java
+3
−4
broker/src/main/java/io/moquette/spi/impl/subscriptions/ISubscriptionsDirectory.java
+17
each publishes on 1 topic
each publishes as fast as it can
It creates 1 (or more) thread for listening, each with its own client.
In a loop they:
connect,
subscribe to all topics
count received messages for 2000 ms
unsubscribe from all topics
disconnect
sleep for 100 ms
If you increase the listener count to 10 or so, I also see lots of other exceptions and netty weirdness, but with just 1 client I only get the above exception.
I hope that helps you in finding the issue!
Copy link
Contributor
Author
hylkevds
commented
May 15, 2020
I managed to get moquette to compile with the help of PR #498 and did a bit of debugging.
If the exception happens, it's because it is evaluating on a TNode, and I think TNodes should be excluded when fetching subscriptions from children:
in CTrie.java:86
if (subInode.mainNode() instanceof TNode) {
continue;
}
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Show comments
View file
Edit file
Delete file
@@ -44,6 +44,7 @@
import io.netty.handler.ssl.SslHandler;
import io.netty.handler.ssl.SslHandler;
import io.netty.handler.timeout.IdleStateHandler;
import io.netty.handler.timeout.IdleStateHandler;
import io.netty.util.concurrent.Future;
import io.netty.util.concurrent.Future;
import io.netty.util.concurrent.GenericFutureListener;
import org.slf4j.Logger;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.LoggerFactory;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLContext;
@@ -53,6 +54,7 @@
import java.util.Optional;
import java.util.Optional;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeUnit;
import static io.moquette.BrokerConstants.*;
private static final AttributeKey<BytesMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("BytesMetrics");
@@ -53,7 +55,7 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementWrote(((ByteBuf) msg).writableBytes());
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
@Override
3
broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
Show comments
View file
Edit file
Delete file
@@ -28,6 +28,7 @@
import java.util.List;
import static io.moquette.spi.impl.Utils.messageId;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
/**
*
@@ -100,6 +101,6 @@ public void channelInactive(ChannelHandlerContext ctx) throws Exception {
has been advised of the possibility of such damages.
9. Accepting Warranty or Additional Liability. While redistributing
the Work or Derivative Works thereof, You may choose to offer,
and charge a fee for, acceptance of support, warranty, indemnity,
or other liability obligations and/or rights consistent with this
License. However, in accepting such obligations, You may act only
on Your own behalf and on Your sole responsibility, not on behalf
of any other Contributor, and only if You agree to indemnify,
defend, and hold each Contributor harmless for any liability
incurred by, or claims asserted against, such Contributor by reason
of your accepting any such warranty or additional liability.
END OF TERMS AND CONDITIONS
APPENDIX: How to apply the Apache License to your work.
To apply the Apache License to your work, attach the following
boilerplate notice, with the fields enclosed by brackets "[]"
replaced with your own identifying information. (Don't include
the brackets!) The text should be enclosed in the appropriate
comment syntax for the file format. We also recommend that a
file or class name and description of purpose be included on the
same "printed page" as the copyright notice for easier
identification within third-party archives.
Copyright [yyyy] [name of copyright owner]
Licensed under the Apache License, Version 2.0 (the "License");
−7
broker/src/main/java/io/moquette/spi/impl/subscriptions/Subscription.java
+0
−243
broker/src/main/java/io/moquette/spi/impl/subscriptions/SubscriptionsDirectory.java
+0
−180
broker/src/main/java/io/moquette/spi/impl/subscriptions/TreeNode.java
+6
−5
broker/src/test/java/io/moquette/persistence/MessageStoreTCK.java
+32
−20
broker/src/test/java/io/moquette/spi/ClientSessionTest.java
+8
−6
broker/src/test/java/io/moquette/spi/impl/AbstractProtocolProcessorCommonUtils.java
+25
−20
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessorTest.java
But I've not fully gone through all details of your CTrie implementation, so I'm not sure this has no side effects.
Copy link
Contributor
Author
hylkevds
commented
May 25, 2020
This seems to be a duplicate of #505
The solution proposed there is essentially the same: Don't process TNodes.
The test project above is still useful for finding problems though :)
hylkevds
added a commit
to hylkevds/moquette
that referenced
this issue
Aug 13, 2020
Fixes moquette-io#529, moquette-io#505: NPE caused by matching on a T…
…
9c1c2ff
…Node
hylkevds
added a commit
to hylkevds/moquette
import static io.moquette.BrokerConstants.*;
import static io.netty.channel.ChannelFutureListener.FIRE_EXCEPTION_ON_FAILURE;
public class NettyAcceptor implements ServerAcceptor {
public class NettyAcceptor implements ServerAcceptor {
@@ -85,7 +87,7 @@ protected void encode(ChannelHandlerContext chc, ByteBuf bb, List<Object> out) t
}
}
}
}
abstract class PipelineInitializer {
abstract static class PipelineInitializer {
abstract void init(ChannelPipeline pipeline) throws Exception;
abstract void init(ChannelPipeline pipeline) throws Exception;
}
}
@@ -197,7 +199,7 @@ public void initChannel(SocketChannel ch) throws Exception {
// Bind and start to accept incoming connections.
// Bind and start to accept incoming connections.
ChannelFuture f = b.bind(host, port);
ChannelFuture f = b.bind(host, port);
f.sync();
f.sync().addListener(FIRE_EXCEPTION_ON_FAILURE);
} catch (InterruptedException ex) {
@Override
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
logMQTTMessage(ctx, msg, "C<-B");
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
}
4
broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
Show comments
View file
Edit file
Delete file
@@ -23,6 +23,8 @@
import io.netty.util.Attribute;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class MessageMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<MessageMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("MessageMetrics");
@@ -52,7 +54,7 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
+10
−6
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_CONNECT_Test.java
+2
−2
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_InternalPublish_Test.java
+0
−6
broker/src/test/java/io/moquette/spi/impl/ProtocolProcessor_VariousUseCases_Test.java
+53
−51
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryMatchingTest.java
+15
−13
broker/src/test/java/io/moquette/spi/impl/subscriptions/CTrieSubscriptionDirectoryTest.java
+0
−332
broker/src/test/java/io/moquette/spi/impl/subscriptions/SubscriptionsDirectoryTest.java
+0
−76
broker/src/test/java/io/moquette/spi/impl/subscriptions/TreeNodeTest.java
that referenced
this issue
Aug 13, 2020
Fixes moquette-io#529, moquette-io#505: NPE caused by matching on a T…
…
72a21ef
…Node
hylkevds
linked a pull request that will
close
this issue
Aug 13, 2020
Fixes #529, #505: NPE caused by matching on a TNode
#532
Open
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
} catch (InterruptedException ex) {
LOG.error("An interruptedException was caught while initializing server. Protocol={}", protocol, ex);
LOG.error("An interruptedException was caught while initializing server. Protocol={}", protocol, ex);
}
}
@@ -349,6 +351,8 @@ void init(ChannelPipeline pipeline) throws Exception {
});
});
}
}
@SuppressWarnings("FutureReturnValueIgnored")
@Override
public void close() {
public void close() {
LOG.info("Closing Netty acceptor...");
LOG.info("Closing Netty acceptor...");
if (m_workerGroup == null || m_bossGroup == null) {
if (m_workerGroup == null || m_bossGroup == null) {
14
broker/src/main/java/io/moquette/server/netty/NettyMQTTHandler.java
metrics.incrementWrote(1);
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
@Override
16
broker/src/main/java/io/moquette/spi/DurableSession.java
Show comments
View file
Edit file
Delete file
@@ -22,9 +22,7 @@
import java.util.Collection;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
public class DurableSession extends ClientSession {
@@ -51,20 +49,6 @@ void waitingAck(int messageID, IMessagesStore.StoredMessage msg) {
}
}
class InboundFlightZone {
final Map<Integer, IMessagesStore.StoredMessage> inboundFlightMessages = new ConcurrentHashMap<>();
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
+43
−89
h2_storage/src/main/java/io/moquette/persistence/h2/H2SessionsStore.java
+2
−0
h2_storage/src/test/java/io/moquette/persistence/h2/H2MessagesStoreTest.java
+40
−88
mapdb_storage/src/main/java/io/moquette/persistence/mapdb/MapDBSessionsStore.java
+2
−0
mapdb_storage/src/test/java/io/moquette/persistence/mapdb/MapDBPersistentStoreTest.java
+5
−3
perf/src/main/java/io/moquette/spi/impl/subscriptions/PerformanceTest.java
8
broker/src/main/java/io/moquette/connections/IConnectionsManager.java
Show comments
View file
Edit file
Delete file
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
Fixes #529, #505: NPE caused by matching on a TNode
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.util.ReferenceCountUtil;
import io.netty.util.ReferenceCountUtil;
import org.slf4j.Logger;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.slf4j.LoggerFactory;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_MOST_ONCE;
import static io.netty.handler.codec.mqtt.MqttQoS.AT_MOST_ONCE;
@Sharable
@Sharable
@@ -78,16 +80,16 @@ public void channelRead(ChannelHandlerContext ctx, Object message) {
false,
false,
0);
IMessagesStore.StoredMessage lookup(int messageID) {
return inboundFlightMessages.get(messageID);
}
void waitingRel(int messageID, IMessagesStore.StoredMessage msg) {
inboundFlightMessages.put(messageID, msg);
}
}
private static final Logger LOG = LoggerFactory.getLogger(DurableSession.class);
private final ISessionsStore sessionsStore;
16
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,19 @@
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
moquette/ISSUE_TEMPLATE.md at a49792adf5d6bcf636737478e972207f516dc4df · moquette-io/moquette · GitHub
queue is full · Issue #521 · moquette-io/moquette · GitHub
@@ -55,14 +55,6 @@
*/
boolean closeConnection(String clientID, boolean closeImmediately);
/**
* Returns the state of the session of a given client.
*
* @param clientID
* @return
*/
MqttSession getSessionStatus(String clientID);
/**
* Returns the state of all the sessions
*
139
broker/src/main/java/io/moquette/persistence/MemorySessionStore.java
Show comments
View file
Edit file
Delete file
@@ -17,7 +17,6 @@
package io.moquette.persistence;
import io.moquette.server.Constants;
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
0);
MqttMessage pingResp = new MqttMessage(pingHeader);
MqttMessage pingResp = new MqttMessage(pingHeader);
ctx.writeAndFlush(pingResp);
ctx.writeAndFlush(pingResp).addListener(CLOSE_ON_FAILURE);
break;
break;
default:
default:
LOG.error("Unkonwn MessageType:{}", messageType);
LOG.error("Unkonwn MessageType:{}", messageType);
break;
break;
}
}
} catch (Throwable ex) {
} catch (Throwable ex) {
LOG.error("Exception was caught while processing MQTT message, " + ex.getCause(), ex);
LOG.error("Exception was caught while processing MQTT message, {}", ex.getCause(), ex);
ctx.fireExceptionCaught(ex);
ctx.fireExceptionCaught(ex);
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
} finally {
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.spi;
import io.moquette.spi.impl.subscriptions.Subscription;
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 033a428
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Added GitHub Issue template · moquette-io/moquette@a49792a · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
import io.moquette.spi.ClientSession;
import io.moquette.spi.IMessagesStore.StoredMessage;
import io.moquette.spi.ISessionsStore;
import io.moquette.spi.ISubscriptionsStore;
@@ -30,32 +29,30 @@
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.atomic.AtomicReference;
public class MemorySessionStore implements ISessionsStore, ISubscriptionsStore {
private static final Logger LOG = LoggerFactory.getLogger(MemorySessionStore.class);
class Session {
final String clientID;
final ClientSession clientSession;
final Map<Topic, Subscription> subscriptions = new ConcurrentHashMap<>();
final AtomicReference<PersistentSession> persistentSession = new AtomicReference<>(null);
boolean cleanSession;
final BlockingQueue<StoredMessage> queue = new ArrayBlockingQueue<>(Constants.MAX_MESSAGE_QUEUE);
final Map<Integer, StoredMessage> secondPhaseStore = new ConcurrentHashMap<>();
final Map<Integer, StoredMessage> outboundFlightMessages =
Collections.synchronizedMap(new HashMap<Integer, StoredMessage>());
final Map<Integer, StoredMessage> inboundFlightMessages = new ConcurrentHashMap<>();
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1 · Issue #522 · moquette-io/moquette · GitHub
} finally {
ReferenceCountUtil.release(msg);
ReferenceCountUtil.release(msg);
}
}
@@ -97,17 +99,17 @@ public void channelRead(ChannelHandlerContext ctx, Object message) {
public void channelInactive(ChannelHandlerContext ctx) throws Exception {
public void channelInactive(ChannelHandlerContext ctx) throws Exception {
String clientID = NettyUtils.clientID(ctx.channel());
String clientID = NettyUtils.clientID(ctx.channel());
if (clientID != null && !clientID.isEmpty()) {
if (clientID != null && !clientID.isEmpty()) {
LOG.info("Notifying connection lost event. MqttClientId = {}.", clientID);
LOG.info("Notifying connection lost event. MqttClientId = {}", clientID);
m_processor.processConnectionLost(clientID, ctx.channel());
m_processor.processConnectionLost(clientID, ctx.channel());
}
}
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
}
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes · Issue #518 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
BUG - null Session in subscribe procedure · Issue #517 · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Session(String clientID, ClientSession clientSession) {
Session(String clientID, boolean cleanSession) {
this.clientID = clientID;
this.clientSession = clientSession;
this.cleanSession = cleanSession;
}
}
private final Map<String, Session> sessions = new ConcurrentHashMap<>();
public MemorySessionStore() {
MemorySessionStore() {
}
private Session getSession(String clientID) {
@@ -110,64 +107,57 @@ public boolean contains(String clientID) {
}
@Override
public ClientSession createNewSession(String clientID, boolean cleanSession) {
LOG.debug("createNewSession for client <{}>", clientID);
Session session = sessions.get(clientID);
if (session != null) {
LOG.error("already exists a session for client <{}>, bad condition", clientID);
throw new IllegalArgumentException("Can't create a session with the ID of an already existing" + clientID);
}
LOG.debug("clientID {} is a newcome, creating it's empty subscriptions set", clientID);
session = new Session(clientID, new ClientSession(clientID, this, this, cleanSession));
Compare · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
@Override
@Override
public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
LOG.error("An unexpected exception was caught while processing MQTT message. Closing Netty channel. CId={}, " +
LOG.error("An unexpected exception was caught while processing MQTT message. Closing Netty channel. CId={}, " +
ctx.close();
ctx.close().addListener(CLOSE_ON_FAILURE);
}
}
@Override
@Override
4
broker/src/main/java/io/moquette/server/netty/metrics/BytesMetricsHandler.java
Show comments
View file
Edit file
Delete file
@@ -24,6 +24,8 @@
import io.netty.util.Attribute;
import io.netty.util.Attribute;
Accept
Reject
Save preferences
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
session.persistentSession.set(new PersistentSession(cleanSession));
sessions.put(clientID, session);
return session.clientSession;
public void createNewDurableSession(String clientID) {
Session innerSession = new Session(clientID, false);
sessions.put(clientID, innerSession);
}
@Override
public ClientSession sessionForClient(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return null;
}
public void removeDurableSession(String clientId) {
this.sessions.remove(clientId);
this.wipeSubscriptions(clientId);
}
@Override
public void updateCleanStatus(String clientId, boolean newCleanStatus) {
sessions.get(clientId).cleanSession = newCleanStatus;
}
PersistentSession storedSession = sessions.get(clientID).persistentSession.get();
return new ClientSession(clientID, this, this, storedSession.cleanSession);
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
import io.netty.util.AttributeKey;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class BytesMetricsHandler extends ChannelDuplexHandler {
public class BytesMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<BytesMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("BytesMetrics");
private static final AttributeKey<BytesMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("BytesMetrics");
@@ -53,7 +55,7 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
BytesMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementWrote(((ByteBuf) msg).writableBytes());
metrics.incrementWrote(((ByteBuf) msg).writableBytes());
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
}
@Override
@Override
3
broker/src/main/java/io/moquette/server/netty/metrics/MQTTMessageLogger.java
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
a49792adf5
moquette/.github/ISSUE_TEMPLATE.md
Go to file
Go to file
Issues · moquette-io/moquette · GitHub
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
Issues · moquette-io/moquette · GitHub
Issues · moquette-io/moquette · GitHub
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
@Override
public PersistentSession loadSessionByKey(String clientID) {
return new PersistentSession(clientID, sessions.get(clientID).cleanSession);
}
@Override
public Collection<ClientSession> getAllSessions() {
Collection<ClientSession> result = new ArrayList<>();
public Collection<PersistentSession> listAllSessions() {
Collection<PersistentSession> result = new ArrayList<>();
for (Session entry : sessions.values()) {
result.add(new ClientSession(entry.clientID, this, this, entry.persistentSession.get().cleanSession));
result.add(new PersistentSession(entry.clientID, entry.cleanSession));
}
return result;
}
@Override
public void updateCleanStatus(String clientID, boolean cleanSession) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return;
public List<Subscription> listAllSubscriptions() {
List<Subscription> allSubscriptions = new ArrayList<>();
for (Session entry : sessions.values()) {
Issues · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Show comments
View file
Edit file
Delete file
@@ -28,6 +28,7 @@
import java.util.List;
import java.util.List;
import static io.moquette.spi.impl.Utils.messageId;
import static io.moquette.spi.impl.Utils.messageId;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
/**
/**
*
*
@@ -100,6 +101,6 @@ public void channelInactive(ChannelHandlerContext ctx) throws Exception {
@Override
@Override
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
logMQTTMessage(ctx, msg, "C<-B");
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
T
Go to line
L
Copy path
Cannot retrieve contributors at this time
This file is used as an issue template.
You are using an old version of issue templates. Please update to the new issue template workflow.
Learn more
13 lines (7 sloc)
248 Bytes
Raw
Blame
Expected behavior
Actual behavior
Steps to reproduce
Minimal yet complete reproducer code (or URL to code) or complete log file
Moquette MQTT version
JVM version (e.g. java -version)
OS version (e.g. uname -a)
Go
© 2020 GitHub, Inc.
Terms
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
queue is full
#521
Open
arifainchtein opened this issue
Mar 28, 2020
· 0 comments
Open
queue is full
#521
arifainchtein opened this issue
Mar 28, 2020
· 0 comments
Comments
allSubscriptions.addAll(entry.subscriptions.values());
}
sessions.get(clientID).persistentSession.set(new PersistentSession(cleanSession));
return allSubscriptions;
}
@Override
public List<ClientTopicCouple> listAllSubscriptions() {
List<ClientTopicCouple> allSubscriptions = new ArrayList<>();
for (Session entry : sessions.values()) {
for (Subscription sub : entry.subscriptions.values()) {
allSubscriptions.add(sub.asClientTopicCouple());
}
public Collection<Subscription> listClientSubscriptions(String clientID) {
final Session session = sessions.get(clientID);
if (session == null) {
throw new IllegalStateException("Asking for subscriptions of not persisted client: " + clientID);
}
return allSubscriptions;
return session.subscriptions.values();
}
@Override
public Subscription getSubscription(ClientTopicCouple couple) {
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
logMQTTMessage(ctx, msg, "C<-B");
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
}
}
}
4
broker/src/main/java/io/moquette/server/netty/metrics/MessageMetricsHandler.java
Show comments
View file
Edit file
Delete file
@@ -23,6 +23,8 @@
import io.netty.util.Attribute;
import io.netty.util.Attribute;
import io.netty.util.AttributeKey;
import io.netty.util.AttributeKey;
import static io.netty.channel.ChannelFutureListener.CLOSE_ON_FAILURE;
public class MessageMetricsHandler extends ChannelDuplexHandler {
public class MessageMetricsHandler extends ChannelDuplexHandler {
private static final AttributeKey<MessageMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("MessageMetrics");
private static final AttributeKey<MessageMetrics> ATTR_KEY_METRICS = AttributeKey.valueOf("MessageMetrics");
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Added GitHub Issue template
Loading branch information
andsel
committed
Oct 20, 2017
1 parent
1b272e5
commit a49792adf5d6bcf636737478e972207f516dc4df
Unified
Split
Showing
1 changed file
with
13 additions
and 0 deletions.
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
Copy link
Quote reply
arifainchtein
commented
Mar 28, 2020
Hello,
I am using version 0.11 and I am getting this error. Any suggestions as to why its happening and how do i prevent it from happening?
Thanks
7013256 [nioEventLoopGroup-3-1] INFO ProtocolProcessor - Processing PUBLISH message. CId=ZhinuHeartPublisher, topic=OrganismStatus, messageId=9663, qos=AT_LEAST_ONCE 97013256 [nioEventLoopGroup-3-1] INFO MessagesPublisher - Sending publish message to subscribers. ClientId=ZhinuHeartPublisher, topic=OrganismStatus, messageId=9663 97013256 [nioEventLoopGroup-3-1] INFO PersistentQueueMessageSender - Sending PUBLISH message. MessageId=20314, CId=web_63, topic=OrganismStatus 97013256 [nioEventLoopGroup-3-1] INFO ConnectionDescriptorStore - Sending PUBLISH message CId=<web_63>, messageId=20314 97013256 [nioEventLoopGroup-3-1] ERROR NettyMQTTHandler - Exception was caught while processing MQTT message, null java.lang.IllegalStateException: Queue full at java.util.AbstractQueue.add(AbstractQueue.java:98) at java.util.concurrent.ArrayBlockingQueue.add(ArrayBlockingQueue.java:312) at io.moquette.spi.DurableSession.enqueue(DurableSession.java:207) at io.moquette.spi.impl.MessagesPublisher.publish2Subscribers(MessagesPublisher.java:107) at io.moquette.spi.impl.MessagesPublisher.publish2Subscribers(MessagesPublisher.java:71) at io.moquette.spi.impl.Qos1PublishHandler.receivedPublishQos1(Qos1PublishHandler.java:70) at io.moquette.spi.impl.ProtocolProcessor.processPublish(ProtocolProcessor.java:470) at io.moquette.server.netty.NettyMQTTHandler.channelRead(NettyMQTTHandler.java:56) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.moquette.server.netty.metrics.MQTTMessageLogger.channelRead(MQTTMessageLogger.java:44) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.moquette.server.netty.metrics.MessageMetricsHandler.channelRead(MessageMetricsHandler.java:48) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.moquette.server.netty.metrics.BytesMetricsHandler.channelRead(BytesMetricsHandler.java:49) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:287) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926) at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134) at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644) at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:579) at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:496) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458) at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138) at java.lang.Thread.run(Thread.java:748)
String clientID = couple.clientID;
public Subscription reload(Subscription subcription) {
String clientID = subcription.getClientId();
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return null;
@@ -177,17 +167,9 @@ public Subscription getSubscription(ClientTopicCouple couple) {
if (subscriptions == null || subscriptions.isEmpty()) {
return null;
}
return subscriptions.get(couple.topicFilter);
return subscriptions.get(subcription.getTopicFilter());
}
@Override
public List<Subscription> getSubscriptions() {
List<Subscription> subscriptions = new ArrayList<>();
for (Session entry : sessions.values()) {
subscriptions.addAll(entry.subscriptions.values());
}
return subscriptions;
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Compare changes
Compare changes across branches, commits, tags, and more below.
If you need to, you can also compare across forks.
base repository:
moquette-io/moquette
Choose a Base Repository
moquette-io/moquette
19317362/moquette
908626950/moquette
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
Open
mjacoby opened this issue
Mar 31, 2020
· 0 comments
Open
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
mjacoby opened this issue
Mar 31, 2020
· 0 comments
Comments
Copy link
Quote reply
@@ -52,7 +54,7 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
public void write(ChannelHandlerContext ctx, Object msg, ChannelPromise promise) throws Exception {
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
MessageMetrics metrics = ctx.channel().attr(ATTR_KEY_METRICS).get();
metrics.incrementWrote(1);
metrics.incrementWrote(1);
ctx.write(msg, promise);
ctx.write(msg, promise).addListener(CLOSE_ON_FAILURE);
}
}
@Override
@Override
16
broker/src/main/java/io/moquette/spi/DurableSession.java
Show comments
View file
Edit file
Delete file
@@ -22,9 +22,7 @@
import java.util.Collection;
import java.util.Collection;
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
Open
carlsberg-stack opened this issue
Feb 27, 2020
· 0 comments
Open
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
carlsberg-stack opened this issue
Feb 27, 2020
· 0 comments
Comments
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
+13
−0
.github/ISSUE_TEMPLATE.md
13
.github/ISSUE_TEMPLATE.md
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,13 @@
### Expected behavior
### Actual behavior
### Steps to reproduce
### Minimal yet complete reproducer code (or URL to code) or complete log file
### Moquette MQTT version
### JVM version (e.g. `java -version`)
### OS version (e.g. `uname -a`)
Toggle all file notes
0 comments
on commit a49792a
Please
sign in to comment.
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Pull requests · moquette-io/moquette · GitHub
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
BUG - null Session in subscribe procedure
#517
Open
BigGitWorld opened this issue
Feb 14, 2020
· 0 comments
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
}
@Override
public StoredMessage inFlightAck(String clientID, int messageID) {
@@ -234,7 +216,10 @@ public int nextPacketID(String clientID) {
@Override
public void dropQueue(String clientID) {
sessions.get(clientID).queue.clear();
final Session session = sessions.get(clientID);
session.queue.clear();
session.outboundFlightMessages.clear();
session.inboundFlightMessages.clear();
}
@Override
@@ -251,7 +236,7 @@ public void moveInFlightToSecondPhaseAckWaiting(String clientID, int messageID,
}
@Override
public StoredMessage secondPhaseAcknowledged(String clientID, int messageID) {
public StoredMessage completeReleasedPublish(String clientID, int messageID) {
return getSession(clientID).secondPhaseStore.remove(messageID);
}
@@ -264,35 +249,13 @@ public int getInflightMessagesNo(String clientID) {
return 0;
}
Issues · moquette-io/moquette · GitHub
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
9612jhf/moquette
ASUSCloudIoT/moquette
Aviking88/moquette
CNXTEoEorg/moquette
Dev-Tony/moquette
GCPBigData/moquette
JamesLiAndroid/moquette
Jamesweng/moquette
LanKo-X/moquette
Lengbamboo/moquette
Matthew83/moquette
MehdiFal/moquette
MihoYamato/moquette
ShangarDeviNatarajan/moquette-1
SyedOsman33/moquette
VincentCaow/moquette
Wangab/moquette
WayChungChen/moquette
WeWebsterchen/moquette
WilliamKinaan/moquette
Wizzercn/moquette
XiaolinYi/moquette
YouAreAGeologist/moquette
Pull requests · moquette-io/moquette · GitHub
Contributor
mjacoby
commented
Mar 31, 2020
Expected behavior
Broker should reject connection with protocol version 3.1 and clientId longer than 23 characters with return code 2 (Identifier Rejected) as defined in the standard https://public.dhe.ibm.com/software/dw/webservices/ws-mqtt/mqtt-v3r1.html#connect
Actual behavior
Exception is thrown and no CONNACK is sent. Seems like server does not accept any connections after that.
Steps to reproduce
Start moquette MQTT server and establish client connection using MQTT v3.1 using a clientId with more than 23 characters
Minimal yet complete reproducer code (or URL to code) or complete log file
Exception thrown
ERROR i.m.s.netty.NettyMQTTHandler - Unexpected exception while processing MQTT message. Closing Netty channel. CId=null
java.lang.NullPointerException: null
at io.moquette.server.netty.metrics.MQTTMessageLogger.logMQTTMessage(MQTTMessageLogger.java:54)
at io.moquette.server.netty.metrics.MQTTMessageLogger.channelRead(MQTTMessageLogger.java:44)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.server.netty.metrics.MessageMetricsHandler.channelRead(MessageMetricsHandler.java:50)
import java.util.HashSet;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;
import java.util.Set;
import java.util.concurrent.ConcurrentHashMap;
public class DurableSession extends ClientSession {
public class DurableSession extends ClientSession {
@@ -51,20 +49,6 @@ void waitingAck(int messageID, IMessagesStore.StoredMessage msg) {
}
}
}
}
class InboundFlightZone {
final Map<Integer, IMessagesStore.StoredMessage> inboundFlightMessages = new ConcurrentHashMap<>();
IMessagesStore.StoredMessage lookup(int messageID) {
return inboundFlightMessages.get(messageID);
}
void waitingRel(int messageID, IMessagesStore.StoredMessage msg) {
inboundFlightMessages.put(messageID, msg);
}
}
private static final Logger LOG = LoggerFactory.getLogger(DurableSession.class);
Pull requests · moquette-io/moquette · GitHub
Copy link
Quote reply
carlsberg-stack
commented
Feb 27, 2020
•
edited
Server Log
2020-02-28 13:03:11.970 20418-20876/ I/System.out: 117068 [nioEventLoopGroup-5-1] DEBUG io.moquette.broker.AutoFlushHandler - Initializing autoflush handler on channel [id: 0x82488a46, L:/172.16.1.196:1883 - R:/172.16.1.196:38308] Cid: null
2020-02-28 13:03:12.309 20418-20876/ I/System.out: 117404 [nioEventLoopGroup-5-1] INFO io.moquette.broker.metrics.MQTTMessageLogger - C->B CONNECT
2020-02-28 13:03:12.316 20418-20876/ I/System.out: 117412 [nioEventLoopGroup-5-1] DEBUG io.moquette.broker.MQTTConnection - Received MQTT message, type: CONNECT, channel: [id: 0x82488a46, L:/172.16.1.196:1883 - R:/172.16.1.196:38308]
2020-02-28 13:03:12.431 20418-20876/ I/System.out: 117431 [nioEventLoopGroup-5-1] ERROR io.moquette.broker.NewNettyMQTTHandler - Error processing protocol message: CONNECT
2020-02-28 13:03:12.431 20418-20876/ I/System.out: java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes (declaration of 'org.apache.commons.codec.binary.Hex' appears in /system/framework/org.apache.http.legacy.boot.jar)
2020-02-28 13:03:12.432 20418-20876/ I/System.out: at org.apache.commons.codec.digest.DigestUtils.sha256Hex(DigestUtils.java:500)
2020-02-28 13:03:12.432 20418-20876/ I/System.out: at io.moquette.broker.security.ResourceAuthenticator.checkValid(ResourceAuthenticator.java:124)
2020-02-28 13:03:12.432 20418-20876/ I/System.out: at io.moquette.broker.MQTTConnection.login(MQTTConnection.java:235)
2020-02-28 13:03:12.432 20418-20876/ I/System.out: at io.moquette.broker.MQTTConnection.processConnect(MQTTConnection.java:160)
2020-02-28 13:03:12.432 20418-20876/ I/System.out: at io.moquette.broker.MQTTConnection.handleMessage(MQTTConnection.java:67)
2020-02-28 13:03:12.433 20418-20876/ I/System.out: at io.moquette.broker.NewNettyMQTTHandler.channelRead(NewNettyMQTTHandler.java:58)
2020-02-28 13:03:12.433 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.433 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.433 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Open
BUG - null Session in subscribe procedure
#517
BigGitWorld opened this issue
Feb 14, 2020
· 0 comments
Comments
Copy link
Quote reply
BigGitWorld
commented
Feb 14, 2020
•
edited
Expected behavior
Suppose a mqtt client with a specific CLIENT-ID is connected to the server.
Now another mqtt client with the same CLIENT-ID wants to connect to the server.
I expect:
At first, the server disconnects the old client.
And then, the new client can connect to the server.
In implementation:
I expect the new client's thread waits for completing the old client disconnection and then do its task.
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
return session.inboundFlightMessages.size() + session.secondPhaseStore.size()
+ session.outboundFlightMessages.size();
}
@Override
public StoredMessage inboundInflight(String clientID, int messageID) {
return getSession(clientID).inboundFlightMessages.get(messageID);
}
@Override
public void markAsInboundInflight(String clientID, int messageID, StoredMessage msg) {
if (!sessions.containsKey(clientID))
LOG.error("Can't find the session for client <{}>", clientID);
sessions.get(clientID).inboundFlightMessages.put(messageID, msg);
return session.inboundFlightMessages.size() +
// countPubReleaseWaitingPubComplete(clientID) +
session.outboundFlightMessages.size();
}
@Override
public int getPendingPublishMessagesNo(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return 0;
}
return sessions.get(clientID).queue.size();
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
YoungWalker/moquette
ZerroCool/moquette
activexJ/moquette
alex-mengx/moquette
alick2011/moquette
altair-albert/moquette
andsel/moquette
aploese/moquette
apqit/moquette
archive-j/moquette
ashengwang/moquette
banyue/moquette
bazi/moquette
bcw104/moquette
beckhamcm/moquette
bekirozgunlu/moquette
bemisguided/moquette
bhaecke/moquette
biddyweb/moquette
bingogh/moquette
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:287)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.server.netty.metrics.BytesMetricsHandler.channelRead(BytesMetricsHandler.java:51)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
private static final Logger LOG = LoggerFactory.getLogger(DurableSession.class);
private final ISessionsStore sessionsStore;
private final ISessionsStore sessionsStore;
16
broker/src/main/java/io/moquette/spi/ISubscriptionsStore.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,19 @@
/*
* Copyright (c) 2012-2017 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
2020-02-28 13:03:12.433 20418-20876/ I/System.out: at io.moquette.broker.metrics.MQTTMessageLogger.channelRead(MQTTMessageLogger.java:46)
2020-02-28 13:03:12.434 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.434 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.434 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.434 20418-20876/ I/System.out: at io.moquette.broker.metrics.MessageMetricsHandler.channelRead(MessageMetricsHandler.java:50)
2020-02-28 13:03:12.434 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.435 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.435 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.435 20418-20876/ I/System.out: at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
2020-02-28 13:03:12.436 20418-20876/ I/System.out: at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
2020-02-28 13:03:12.436 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.436 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.436 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.437 20418-20876/ I/System.out: at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
2020-02-28 13:03:12.437 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.437 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.437 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.437 20418-20876/ I/System.out: at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
2020-02-28 13:03:12.438 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
2 Open
0 Closed
2 Open
0 Closed
Pull requests · moquette-io/moquette · GitHub
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
Actual behavior
In Actual case, I observed that :
processConnect() will be called for the new client and because this CLIENT-ID exists in the sessions (due to the old client), So nothing is added to the sessions.
And concurrently the server disconnects the old client and remove it's session from sessionRegistry.
And Now when the new client wants to subscribe to a topic (after successfully connection),
in the PostOffice#subscribeClientToTopics() the below line results is a NULL:
Session session = sessionRegistry.retrieve(clientID);
And therefore the below line will results in a NPE:
session.addSubscriptions(newSubscriptions);
Steps to reproduce
Minimal yet complete reproducer code (or URL to code) or complete log file
java.lang.NullPointerException: null
at io.moquette.broker.PostOffice.subscribeClientToTopics(PostOffice.java:85)
at io.moquette.broker.MQTTConnection.processSubscribe(MQTTConnection.java:309)
at io.moquette.broker.MQTTConnection.handleMessage(MQTTConnection.java:71)
at io.moquette.broker.NewNettyMQTTHandler.channelRead(NewNettyMQTTHandler.java:55)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.broker.metrics.MQTTMessageLogger.channelRead(MQTTMessageLogger.java:46)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
Accept
Reject
Save preferences
Pull requests · moquette-io/moquette · GitHub
}
@Override
public int getSecondPhaseAckPendingMessages(String clientID) {
public int countPubReleaseWaitingPubComplete(String clientID) {
if (!sessions.containsKey(clientID)) {
LOG.error("Can't find the session for client <{}>", clientID);
return 0;
@@ -302,7 +265,7 @@ public int getSecondPhaseAckPendingMessages(String clientID) {
}
@Override
public void cleanSession(String clientID) {
public void removeTemporaryQoS2(String clientID) {
LOG.debug("Session cleanup for client <{}>", clientID);
Session session = sessions.get(clientID);
@@ -311,18 +274,8 @@ public void cleanSession(String clientID) {
return;
}
// remove also the messages stored of type QoS1/2
LOG.info("Removing stored messages with QoS 1 and 2. ClientId={}", clientID);
LOG.info("Removing stored messages with QoS 2. ClientId={}", clientID);
session.secondPhaseStore.clear();
session.outboundFlightMessages.clear();
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
5 Closed
1 Open
5 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
bingzhuyou/moquette
blackadmin/moquette
briancarbs/moquette
butaji/moquette
ccf19881030/moquette
cheng04119/moquette
chengc017/moquette
chord1645/moquette
christopheblin/moquette
cimhealth/moquette
cm8421/moquette
coalba/moquette
cpacey/moquette
crooods/moquette
ctfree/moquette
cuidonghuan/moquette
dant3/moquette
daququ/moquette
daveztong/moquette
dc198798/moquette
ddyywu/moquette
dininen/moquette
dlanza1/kafka-mqtt-gateway
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1334)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:926)
at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134)
at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:579)
at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:496)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:458)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138)
at java.lang.Thread.run(Thread.java:748)
Moquette MQTT version
0.11
JVM version (e.g. java -version)
1.8.0_211
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.spi;
package io.moquette.spi;
import io.moquette.spi.impl.subscriptions.Subscription;
import io.moquette.spi.impl.subscriptions.Subscription;
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 033a428
Please
sign in to comment.
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
2020-02-28 13:03:12.438 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.438 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.438 20418-20876/ I/System.out: at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)
2020-02-28 13:03:12.439 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.439 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.439 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.439 20418-20876/ I/System.out: at io.moquette.broker.metrics.BytesMetricsHandler.channelRead(BytesMetricsHandler.java:51)
2020-02-28 13:03:12.439 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
2020-02-28 13:03:12.439 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.440 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
2020-02-28 13:03:12.440 20418-20876/ I/System.out: at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1414)
2020-02-28 13:03:12.440 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
Sign in
to your account
Clear current search query, filters, and sorts
1 Open
0 Closed
1 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.broker.metrics.MessageMetricsHandler.channelRead(MessageMetricsHandler.java:50)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
session.inboundFlightMessages.clear();
LOG.info("Wiping existing subscriptions. ClientId={}", clientID);
wipeSubscriptions(clientID);
//remove also the enqueued messages
dropQueue(clientID);
// TODO this missing last step breaks the junit test
//sessions.remove(clientID);
4
broker/src/main/java/io/moquette/persistence/PersistentSession.java
Show comments
View file
Edit file
Delete file
@@ -25,8 +25,10 @@
private static final long serialVersionUID = 5052054783220481854L;
public final boolean cleanSession;
public final String clientID;
public PersistentSession(boolean cleanSession) {
public PersistentSession(String clientID, boolean cleanSession) {
this.clientID = clientID;
this.cleanSession = cleanSession;
}
}
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Pull requests · moquette-io/moquette · GitHub
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
queue is full
#521
donaldlee2008/moquette
edd1225/moquette
extramoney/moquette
fchrist/moquette
frankzqy/moquette
gauravisworking/moquette
gavinljj/moquette
gui0778/moquette
guii/moquette
gujx/moquette
gunaones/moquette
guohongjun/moquette
heqingfei/moquette
himeshagile/moquette
hippocampi/moquette
horryq/moquette
huilvhui/moquette
hurtonm/moquette
hvinayan/moquette
igorsilvamenezes/moquette
inexplicable/moquette
iodb/moquette
jimmy486/moquette
Pull requests · moquette-io/moquette · GitHub
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
OS version (e.g. uname -a)
Win 10 Enterprise
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
2020-02-28 13:03:12.440 20418-20876/ I/System.out: at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
2020-02-28 13:03:12.440 20418-20876/ I/System.out: at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:945)
2020-02-28 13:03:12.441 20418-20876/ I/System.out: at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:146)
2020-02-28 13:03:12.441 20418-20876/ I/System.out: at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
2020-02-28 13:03:12.441 20418-20876/ I/System.out: at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
2020-02-28 13:03:12.441 20418-20876/ I/System.out: at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
2020-02-28 13:03:12.442 20418-20876/ I/System.out: at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
2020-02-28 13:03:12.442 20418-20876/ I/System.out: at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
2020-02-28 13:03:12.442 20418-20876/ I/System.out: at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
2020-02-28 13:03:12.442 20418-20876/ I/System.out: at java.lang.Thread.run(Thread.java:764)
2020-02-28 13:03:12.450 20418-20876/ I/System.out: 117548 [nioEventLoopGroup-5-1] INFO io.moquette.broker.NewNettyMQTTHandler - Closed client channel due to exception in processing
// Paho Client Log
2020-02-28 13:03:12.469 20418-20418/ W/System.err: Connection lost (32109) - java.io.EOFException
2020-02-28 13:03:12.469 20418-20418/ W/System.err: at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:190)
2020-02-28 13:03:12.470 20418-20418/ W/System.err: at java.lang.Thread.run(Thread.java:764)
2020-02-28 13:03:12.471 20418-20418/ W/System.err: Caused by: java.io.EOFException
2020-02-28 13:03:12.471 20418-20418/ W/System.err: at java.io.DataInputStream.readByte(DataInputStream.java:270)
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Buffering settings to reduce latency
#527
opened May 8, 2020 by
impliedx
1
ProTip!
no:milestone will show everything without a milestone.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
😕
❤️
🚀
👀
Broker does not reject connections with clientId longer than 23 characters for MQTT v3.1
#522
opened Mar 31, 2020 by
mjacoby
ProTip!
Updated in the last three days: updated:>2020-11-20.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
😄
🎉
😕
❤️
🚀
👀
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
#518
opened Feb 27, 2020 by
carlsberg-stack
Bridging to a cloud broker [Microsoft Azure -- IOT Hub] ?
#513
opened Jan 17, 2020 by
carlsberg-stack
5
ProTip!
What’s not been updated in a month: updated:<2020-10-23.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.handler.codec.http.websocketx.Utf8FrameValidator.channelRead(Utf8FrameValidator.java:77)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler$1.channelRead(WebSocketServerProtocolHandler.java:204)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310)
at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
2
broker/src/main/java/io/moquette/server/ConnectionDescriptor.java
Show comments
View file
Edit file
Delete file
@@ -126,7 +126,7 @@ public boolean assignState(ConnectionState expected, ConnectionState newState) {
@Override
public String toString() {
return "ConnectionDescriptor{" + "clientID=" + clientID + ", cleanSession=" + cleanSession + ", state="
return "ConnectionDescriptor{" + "clientID=" + clientID + ", removeTemporaryQoS2=" + cleanSession + ", state="
+ channelState.get() + '}';
}
24
broker/src/main/java/io/moquette/server/ConnectionDescriptorStore.java
Show comments
View file
Edit file
Delete file
@@ -23,12 +23,13 @@
import io.moquette.server.netty.metrics.BytesMetrics;
import io.moquette.server.netty.metrics.MessageMetrics;
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Pinned issues
MQTT durable subscription exception
#455
opened Mar 8, 2019 by
OleksandrBerezianskyi
Open
1
Labels
9
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
opened Mar 28, 2020 by
arifainchtein
ProTip!
Add no:assignee to see everything that’s not assigned.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
jincieryi/moquette
jiudong90/moquette
jkandasa/moquette
jun0813/moquette
jwoolston/moquette
kansifang/moquette
kevto/moquette
kjayashankar/moquette
kmhughes/moquette
knayekihtrak/moquette
konradmichael/moquette
koolob/moquette
laizhouzhang/moquette
lance1232001/moquette
lanma/moquette
lants1/moquette
lbfalcons/moquette
leftshiftone/moquette
liheeng/moquette
lijian17/moquette
liuyanjunbj/moquette
lizhanhui/moquette
lovecc0923/moquette
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
2020-02-28 13:03:12.472 20418-20418/ W/System.err: at org.eclipse.paho.client.mqttv3.internal.wire.MqttInputStream.readMqttWireMessage(MqttInputStream.java:92)
2020-02-28 13:03:12.472 20418-20418/ W/System.err: at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:137)
2020-02-28 13:03:12.472 20418-20418/ W/System.err: ... 1 more
carlsberg-stack
changed the title
Connecting Using username and password throw error? Working fine without authentication
java.lang.NoSuchMethodError: No static method encodeHexString([B)Ljava/lang/String; in class Lorg/apache/commons/codec/binary/Hex; or its super classes
Feb 28, 2020
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
New pull request
New
Clear current search query, filters, and sorts
0 Open
0 Closed
0 Open
0 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Pull requests · moquette-io/moquette · GitHub
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.moquette.broker.metrics.BytesMetricsHandler.channelRead(BytesMetricsHandler.java:51)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Pull requests · moquette-io/moquette · GitHub
import io.moquette.spi.ClientSession;
import io.moquette.spi.ISessionsStore;
import io.moquette.spi.impl.SessionsRepository;
import io.moquette.spi.impl.subscriptions.Subscription;
import io.netty.handler.codec.mqtt.MqttMessage;
import io.netty.handler.codec.mqtt.MqttMessageType;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import java.util.ArrayList;
import java.util.Collection;
import java.util.concurrent.ConcurrentHashMap;
@@ -39,11 +40,11 @@
private static final Logger LOG = LoggerFactory.getLogger(ConnectionDescriptorStore.class);
private final ConcurrentMap<String, ConnectionDescriptor> connectionDescriptors;
private final ISessionsStore sessionsStore;
private final SessionsRepository sessionsRepository;
public ConnectionDescriptorStore(ISessionsStore sessionsStore) {
public ConnectionDescriptorStore(SessionsRepository sessionsRepository) {
this.connectionDescriptors = new ConcurrentHashMap<>();
this.sessionsStore = sessionsStore;
this.sessionsRepository = sessionsRepository;
}
Milestones
6
Labels
9
Milestones
6
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Clear current search query, filters, and sorts
3 Open
15 Closed
3 Open
15 Closed
Author
Filter by author
Removed gradle · moquette-io/moquette@1d20eaf · GitHub
Pull requests · moquette-io/moquette · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
maggu2810/moquette
mahmed8003/moquette
mahui1980/moquette
mapengfei00099/moquette
mgurevin/moquette
mindis/moquette
mingj/moquette
mkretzschmar/moquette
mojunneng/moquette
mpaatz/moquette
muka/moquette
myqhit/moquette
narry/moquette
nathantippy/moquette
nickman/moquette
nuspy/moquette
okse-3/moquette
oldshipmaster/moquette
oomhj/moquette
pamod/moquette
parksangkil/moquette
pillimede/moquette
plechi/moquette
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
New
Clear current search query, filters, and sorts
0 Open
1 Closed
0 Open
1 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Accept
Reject
Save preferences
New pull request
New
Clear current search query, filters, and sorts
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Save preferences
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
13 Open
161 Closed
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
No results matched your search.
You could search all of GitHub or try an advanced search.
Reintroduce maven build, with wrapper, removed gradle. · moquette-io/moquette@7f91798 · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1414)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:945)
at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:146)
at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:886)
at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
at java.lang.Thread.run(Thread.java:748)
Moquette MQTT version
Latest version (0.12.1)
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
13 Open
161 Closed
13 Open
161 Closed
Reintroduce maven project files by andsel · Pull Request #542 · moquette-io/moquette · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
public boolean sendMessage(MqttMessage message, Integer messageID, String clientID) {
@@ -124,22 +125,11 @@ public boolean closeConnection(String clientID, boolean closeImmediately) {
}
}
@Override
public MqttSession getSessionStatus(String clientID) {
LOG.info("Retrieving status of session. CId=<{}>", clientID);
ClientSession session = sessionsStore.sessionForClient(clientID);
if (session == null) {
LOG.error("MQTT client ID doesn't have an associated session. CId=<{}>", clientID);
return null;
}
return buildMqttSession(session);
}
@Override
public Collection<MqttSession> getSessions() {
LOG.info("Retrieving status of all sessions.");
Collection<MqttSession> result = new ArrayList<>();
for (ClientSession session : sessionsStore.getAllSessions()) {
for (ClientSession session : this.sessionsRepository.getAllSessions()) {
result.add(buildMqttSession(session));
}
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
0.14 Milestone · GitHub
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Pull requests · moquette-io/moquette · GitHub
popeye0807/moquette
qchen006/moquette
qiuzhanghua/moquette
quyf/moquette
redboy1972/moquette
redlion99/moquette
redsolo/moquette
robbyb67/moquette
robgratz/moquette
rubberbird/moquette
runafter/moquette
saeedhadi/moquette
salmanebah/moquette
sangkyunyoon/moquette
sayi21cn/moquette
sboorlagadda/moquette
senspace/moquette
seraya-fan/moquette
sgano1/moquette
sixtop/moquette
slacrey/moquette
soenter/moquette
soken-su/moquette
sonecabr/moquette
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
No results matched your search.
You could search all of GitHub or try an advanced search.
ProTip!
no:milestone will show everything without a milestone.
© 2020 GitHub, Inc.
Terms
Privacy
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
Added configuration item for handshake timeout on SSL channel (#531)
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
ProTip!
Type g p on any issue or pull request to go back to the pull request listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
return result;
@@ -165,7 +155,7 @@ private MqttSession buildMqttSession(ClientSession session) {
result.setConnectionEstablished(false);
}
result.setPendingPublishMessagesNo(session.getPendingPublishMessagesNo());
result.setSecondPhaseAckPendingMessages(session.getSecondPhaseAckPendingMessages());
result.setSecondPhaseAckPendingMessages(session.countPubReleaseWaitingPubComplete());
result.setInflightMessages(session.getInflightMessagesNo());
return result;
}
2
broker/src/main/java/io/moquette/server/Constants.java
Show comments
View file
Edit file
Delete file
@@ -22,7 +22,7 @@
public final class Constants {
public static final String ATTR_CLIENTID = "ClientID";
public static final String CLEAN_SESSION = "cleanSession";
public static final String CLEAN_SESSION = "removeTemporaryQoS2";
public static final String KEEP_ALIVE = "keepAlive";
🚀
👀
BUG - null Session in subscribe procedure
#517
opened Feb 14, 2020 by
BigGitWorld
Subscription storage
#482
opened Jun 12, 2019 by
BigGitWorld
Publish Failed Acknowledgment
#433
opened Oct 22, 2018 by
BigGitWorld
ProTip!
Type g p on any issue or pull request to go back to the pull request listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Skip to content
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
sonson1023/moquette
splade/moquette
stannislin/moquette
sumyfly/moquette
superdjz/moquette
superposition/moquette
sureddy/moquette
surpass/moquette
swarwick/moquette
systembugtj/moquette
tanapop/moquette
tangxunye/moquette
technocreatives/moquette
teco-kit/moquette-lusagent
tennessine/moquette
teranisi/moquette
thangdc94/moquette
thinkjoyorg/moquette
tigersshi/moquette
timvanginderen/moquette
ttomato/moquette
uwitec/moquette
wanghaipeng789/moquette
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
#551
opened Nov 13, 2020 by
dsoulayrol
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
1
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
1
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
one get
#520
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
updated Nov 16, 2020
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Updated paho to 1.2.5 to fix CVE-2019-11777 (fixed in Pago 1.2.1)
#550
by andsel
was merged Nov 13, 2020
Switched temp files in unit test to temp folder managed
#549
by andsel
was merged Nov 13, 2020
Moved flow of CONNECT completely inside MQTTConnection
#548
by andsel
was merged Nov 13, 2020
Added configuration item for handshake timeout on SSL channel (#531)
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
public static final int MAX_MESSAGE_QUEUE = 1024; // number of messages
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 1b272e5
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
watergit2016/moquette
wendersonferreira/moquette
willenwu21/moquette
windbender/moquette
xintao222/moquette
xuchao/moquette
yangpeiyong/moquette
yanxuxiao/moquette
yunemr/moquette
zhangxiaofeng123/moquette
zhoudianyou/moquette
zhuyuming/moquette
zofuthan/moquette
zorowonder/moquette
zyy/moquette
Nothing to show
base:
master
head repository:
moquette-io/moquette
Choose a Head Repository
moquette-io/moquette
19317362/moquette
908626950/moquette
New
Clear current search query, filters, and sorts
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
opened Mar 4, 2020 by
luoliangtiger
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
2
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
updated Nov 13, 2020
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
updated Nov 12, 2020
1
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
updated Aug 13, 2020
1
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
updated May 26, 2020
one get
#520
opened Mar 4, 2020 by
luoliangtiger
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
#547
by dsoulayrol
was closed Nov 13, 2020
3
Updates Netty to 4.1.53 to have MQTT5 support
dependencies
#546
by andsel
was merged Nov 3, 2020
Bump netty.version from 4.1.22.Final to 4.1.53.Final in /broker
dependencies
#545
by dependabot
bot
was closed Nov 3, 2020
1
Bump junit from 4.8.2 to 4.13.1
dependencies
#544
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
13 Open
161 Closed
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Reject
Save preferences
Subscription breaks during performance test · Issue #505 · moquette-io/moquette · GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Removed gradle
Loading branch information
andsel
committed
Oct 30, 2020
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
New
Clear current search query, filters, and sorts
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
9612jhf/moquette
ASUSCloudIoT/moquette
Aviking88/moquette
CNXTEoEorg/moquette
Dev-Tony/moquette
GCPBigData/moquette
JamesLiAndroid/moquette
Jamesweng/moquette
LanKo-X/moquette
Lengbamboo/moquette
Matthew83/moquette
MehdiFal/moquette
MihoYamato/moquette
ShangarDeviNatarajan/moquette-1
SyedOsman33/moquette
VincentCaow/moquette
Wangab/moquette
WayChungChen/moquette
WeWebsterchen/moquette
WilliamKinaan/moquette
Wizzercn/moquette
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Clean test storage on exit to prevent assert in next test
#497
4
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
1
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
updated Mar 4, 2020
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
updated Mar 2, 2020
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
updated Oct 18, 2019
2
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
updated Sep 24, 2019
4
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Reintroduce maven build, with wrapper, removed gradle.
Loading branch information
andsel
committed
Nov 2, 2020
1 parent
b69146b
commit 7f9179857196626b1eceaeab6272dea8e4435869
Unified
New
Clear current search query, filters, and sorts
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
by dependabot
bot
was merged Nov 12, 2020
Bump org.eclipse.paho.client.mqttv3 from 1.2.0 to 1.2.1 in /broker
dependencies
#543
by dependabot
bot
was closed Nov 3, 2020
1
Reintroduce maven project files
#542
by andsel
was merged Nov 2, 2020
0.14
Switched to gradle 5.6
#541
by andsel
was merged Oct 30, 2020
Added specific handling for BindExcpetion when the port is occupied
#540
by andsel
was merged Oct 30, 2020
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Sort by
Newest
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
Milestones
New issue
0.14
No due date
1 parent
3e4ab20
commit 1d20eaf5b969a43795b6baf199d70f275c788a51
Unified
Split
Showing
8 changed files
with
0 additions
and 361 deletions.
+0
−9
gradle/java.gradle
+0
−20
gradle/lint.gradle
+0
−63
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
Filter by who’s assigned
Sort
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
1
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
4
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Labels
9
Milestones
6
Labels
9
Milestones
6
New pull request
XiaolinYi/moquette
YouAreAGeologist/moquette
YoungWalker/moquette
ZerroCool/moquette
activexJ/moquette
alex-mengx/moquette
alick2011/moquette
altair-albert/moquette
andsel/moquette
aploese/moquette
apqit/moquette
archive-j/moquette
ashengwang/moquette
banyue/moquette
bazi/moquette
bcw104/moquette
beckhamcm/moquette
bekirozgunlu/moquette
bemisguided/moquette
bhaecke/moquette
biddyweb/moquette
bingogh/moquette
bingzhuyou/moquette
blackadmin/moquette
opened Aug 16, 2019 by
qbast
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
one get
#520
opened Mar 4, 2020 by
luoliangtiger
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
1
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
updated Aug 17, 2019
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
updated Aug 16, 2019
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
updated Jun 21, 2019
4
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
updated Apr 8, 2019
1
ProTip!
Find all pull requests that aren't related to any open issues with -linked:issue.
© 2020 GitHub, Inc.
Terms
Split
Showing
21 changed files
with
1,241 additions
and 372 deletions.
+117
−0
.mvn/wrapper/MavenWrapperDownloader.java
BIN
.mvn/wrapper/maven-wrapper.jar
+2
−0
.mvn/wrapper/maven-wrapper.properties
+2
−9
.travis.yml
+265
−0
broker/pom.xml
+1
−1
broker/src/test/java/io/moquette/integration/IntegrationUtils.java
+1
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
Make the number of Netty worker threads number configurable
Re-generated keystores used in SSL tests
#539
by andsel
was merged Oct 25, 2020
Reduce log level for log messages caused by client side input mistakes
#537
by PHameete
was merged Oct 9, 2020
1
5
Minor, changed header
#536
by andsel
was merged Oct 1, 2020
Bumped release 0.13
#523
by andsel
was merged Apr 11, 2020
Upgrade build, OSGi metadata
#504
by J-N-K
Reintroduce maven project files
#542
Merged
andsel
merged 1 commit into
master
from
reintroduce_maven_project_files
Nov 2, 2020
+1,241
−372
Conversation
0
Commits
1
Checks
0
Files changed
21
Merged
Reintroduce maven project files
#542
Changes from all commits
Commits
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
one get
#520
opened Mar 4, 2020 by
luoliangtiger
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
1
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
100% complete
0 Open
1 Closed
There are no open issues in this milestone.
Add issues to milestones to help organize your work for a particular release or project.
Create new issue
Or find and add issues with no milestone in this repo.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
gradle/test.gradle
BIN
gradle/wrapper/gradle-wrapper.jar
+0
−5
gradle/wrapper/gradle-wrapper.properties
+0
−172
gradlew
+0
−84
gradlew.bat
+0
−8
settings.gradle
9
gradle/java.gradle
Show comments
View file
Edit file
Delete file
Load diff
This file was deleted.
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
❤️
🚀
👀
one get
#520
opened Mar 4, 2020 by
luoliangtiger
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
2
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
one get
#520
opened Mar 4, 2020 by
luoliangtiger
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
1
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
New
Clear current search query, filters, and sorts
13 Open
161 Closed
13 Open
161 Closed
Author
Filter by author
Label
Filter by label
Use alt + click/return to exclude labels.
Projects
Filter by project
Milestones
Filter by milestone
Reviews
Filter by reviews
No reviews
Review required
Approved review
Changes requested
Assignee
briancarbs/moquette
butaji/moquette
ccf19881030/moquette
cheng04119/moquette
chengc017/moquette
chord1645/moquette
christopheblin/moquette
cimhealth/moquette
cm8421/moquette
coalba/moquette
cpacey/moquette
crooods/moquette
ctfree/moquette
cuidonghuan/moquette
dant3/moquette
daququ/moquette
daveztong/moquette
dc198798/moquette
ddyywu/moquette
dininen/moquette
dlanza1/kafka-mqtt-gateway
donaldlee2008/moquette
edd1225/moquette
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
1
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
1
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
Learn more
Accept
Reject
Save preferences
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
−1
broker/src/test/resources/log4j.properties
+68
−0
distribution/pom.xml
+57
−0
distribution/src/main/assembly/assembly.xml
+23
−0
embedding_moquette/pom.xml
+0
−9
gradle/java.gradle
+0
−20
gradle/lint.gradle
+0
−63
gradle/test.gradle
BIN
gradle/wrapper/gradle-wrapper.jar
#468
opened Apr 8, 2019 by
komamitsu
updated Apr 8, 2019
1
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
updated Jun 21, 2019
4
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
updated Aug 16, 2019
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
updated Aug 17, 2019
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
was closed Aug 31, 2019
Fix retained messages with wildcard subscriptions
#489
by davesters
was merged Jul 21, 2019
2
Merge pull request #1 from moquette-io/master
#486
by djbr-david
was closed Jul 2, 2019
1
remove unnecessary quotes which fixes execution in windows 10
#478
by joestr
was merged May 21, 2019
1
Update Freedomotic references
#475
by mcicolella
was merged May 2, 2019
2
Added possibility to configure additional Netty channel handlers
Show all changes
1 commit
Select commit
7f91798
Reintroduce maven build, with wrapper, removed gradle.
andsel Oct 22, 2020
File filter...
Filter file types
.bat
(1)
.cmd
(1)
.gradle
(4)
.jar
(2)
.java
(2)
.properties
(3)
.xml
(5)
.yml
(1)
opened Mar 31, 2019 by
komamitsu
4
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
1
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
Authentication changes
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Oops, something went wrong.
Retry
20
gradle/lint.gradle
Show comments
View file
Edit file
Delete file
Load diff
This file was deleted.
Oops, something went wrong.
Retry
63
gradle/test.gradle
Show comments
View file
Edit file
Delete file
Load diff
This file was deleted.
Oops, something went wrong.
hylkevds
1
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
How one port supports both unidirectional and two-way certificate authentication for TLS · Issue #491 · moquette-io/moquette · GitHub
1
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
ProTip!
Exclude everything labeled bug with -label:bug.
© 2020 GitHub, Inc.
Terms
Privacy
Filter by who’s assigned
Sort
Sort by
Newest
Oldest
Most commented
Least commented
Recently updated
Least recently updated
Most reactions
👍
👎
😄
🎉
😕
extramoney/moquette
fchrist/moquette
frankzqy/moquette
gauravisworking/moquette
gavinljj/moquette
gui0778/moquette
guii/moquette
gujx/moquette
gunaones/moquette
guohongjun/moquette
heqingfei/moquette
himeshagile/moquette
hippocampi/moquette
horryq/moquette
4
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
2
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
ProTip!
Type g i on any issue or pull request to go back to the issue listing page.
© 2020 GitHub, Inc.
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
+0
−5
gradle/wrapper/gradle-wrapper.properties
+0
−172
gradlew
+0
−84
gradlew.bat
+310
−0
mvnw
+182
−0
mvnw.cmd
+213
−0
pom.xml
+0
−8
settings.gradle
117
.mvn/wrapper/MavenWrapperDownloader.java
Show comments
#464
opened Mar 31, 2019 by
komamitsu
updated Sep 24, 2019
4
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
updated Oct 18, 2019
2
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
updated Mar 2, 2020
one get
#520
opened Mar 4, 2020 by
luoliangtiger
updated Mar 4, 2020
Bugfix/stop broker interceptor
#462
by aemaem
was closed Apr 5, 2019
7
Extended websocket configuration
#461
by aemaem
was merged Apr 2, 2019
Refactors config implementation: Use java.util.Properties directly now
#459
by flonix8
was closed Jun 3, 2019
8
Flush written data in MQTTConnection#sendIfWritableElseDrop
#454
by komamitsu
was merged Mar 17, 2019
19
Enhanced exception handling / logging for invalid messages
#450
by mscheibler
was merged Jan 28, 2019
No extension
(2)
All 9 file types selected
Filter deleted files
Hide deleted files
Filter viewed files
Hide viewed files
Clear filters
Jump to…
Jump to file
Failed to load files. Retry
Always
Unified
Split
Just for now
Hide whitespace changes
Apply and reload
117
.mvn/wrapper/MavenWrapperDownloader.java
Show comments
View file
Edit file
Delete file
#507
opened Oct 11, 2019 by
ndchandar
2
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
4
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Retry
BIN
-53.1 KB
gradle/wrapper/gradle-wrapper.jar
Show comments
View file
Edit file
Delete file
Binary file not shown.
5
gradle/wrapper/gradle-wrapper.properties
Show comments
View file
Edit file
Delete file
Load diff
This file was deleted.
Oops, something went wrong.
Retry
172
gradlew
Show comments
View file
Edit file
1
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
2
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
4
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
❤️
🚀
👀
Fix a bug Session#resendInflightNotAcked() fails due to handling a freed ByteBuf
#464
opened Mar 31, 2019 by
komamitsu
4
fix trie match bug and bytesMetrics bug
#479
opened Jun 2, 2019 by
ilylia
4
Authentication changes
#507
opened Oct 11, 2019 by
ndchandar
2
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
huilvhui/moquette
hurtonm/moquette
hvinayan/moquette
igorsilvamenezes/moquette
inexplicable/moquette
iodb/moquette
jimmy486/moquette
jincieryi/moquette
jiudong90/moquette
jkandasa/moquette
jun0813/moquette
jwoolston/moquette
kansifang/moquette
kevto/moquette
kjayashankar/moquette
kmhughes/moquette
knayekihtrak/moquette
konradmichael/moquette
koolob/moquette
laizhouzhang/moquette
lance1232001/moquette
lanma/moquette
lants1/moquette
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
View file
Edit file
Delete file
@@ -0,0 +1,117 @@
/*
* Copyright 2007-present the original author or authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
#530
opened May 26, 2020 by
Northram511
updated May 26, 2020
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
updated Aug 13, 2020
1
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
updated Nov 12, 2020
1
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
updated Nov 13, 2020
GitHub actions
#552
1
Previous 1 2 3 4 5 6 7 Next
Previous Next
ProTip!
Adding no:label will show everything without a label.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Open in desktop
@@ -0,0 +1,117 @@
/*
* Copyright 2007-present the original author or authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
import java.net.*;
import java.io.*;
import java.nio.channels.*;
import java.util.Properties;
public class MavenWrapperDownloader {
1
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
ProTip!
What’s not been updated in a month: updated:<2020-10-23.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Delete file
Load diff
This file was deleted.
Oops, something went wrong.
Retry
84
gradlew.bat
Show comments
View file
Edit file
Delete file
Load diff
This file was deleted.
Oops, something went wrong.
Retry
8
settings.gradle
Show comments
View file
Edit file
Delete file
Load diff
This file was deleted.
GitHub actions by HanSolo · Pull Request #552 · moquette-io/moquette · GitHub
Make the number of Netty worker threads number configurable
#468
opened Apr 8, 2019 by
komamitsu
1
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
ProTip!
Exclude everything labeled bug with -label:bug.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
1
Fix java 11+ build and tests
#533
opened Aug 14, 2020 by
hylkevds
1
Clean test storage on exit to prevent assert in next test
#497
opened Aug 16, 2019 by
qbast
Java 11 compatibility
#498
opened Aug 17, 2019 by
qbast
fixed throw NullPointerException when new connection
#519
opened Mar 2, 2020 by
luoliangtiger
one get
#520
opened Mar 4, 2020 by
lbfalcons/moquette
leftshiftone/moquette
liheeng/moquette
lijian17/moquette
liuyanjunbj/moquette
lizhanhui/moquette
lovecc0923/moquette
maggu2810/moquette
mahmed8003/moquette
mahui1980/moquette
mapengfei00099/moquette
mgurevin/moquette
mindis/moquette
mingj/moquette
mkretzschmar/moquette
mojunneng/moquette
mpaatz/moquette
muka/moquette
myqhit/moquette
narry/moquette
nathantippy/moquette
nickman/moquette
nuspy/moquette
okse-3/moquette
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
import java.net.*;
import java.io.*;
import java.nio.channels.*;
import java.util.Properties;
public class MavenWrapperDownloader {
private static final String WRAPPER_VERSION = "0.5.6";
/**
* Default URL to download the maven-wrapper.jar from, if no 'downloadUrl' is provided.
*/
private static final String DEFAULT_DOWNLOAD_URL = "https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/"
+ WRAPPER_VERSION + "/maven-wrapper-" + WRAPPER_VERSION + ".jar";
/**
* Path to the maven-wrapper.properties file, which might contain a downloadUrl property to
* use instead of the default one.
*/
private static final String MAVEN_WRAPPER_PROPERTIES_PATH =
".mvn/wrapper/maven-wrapper.properties";
/**
* Path where the maven-wrapper.jar will be saved to.
*/
private static final String MAVEN_WRAPPER_JAR_PATH =
".mvn/wrapper/maven-wrapper.jar";
/**
opened Nov 16, 2020 by
HanSolo
updated Nov 16, 2020
ProTip!
Follow long discussions with comments:>50.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
private static final String WRAPPER_VERSION = "0.5.6";
/**
* Default URL to download the maven-wrapper.jar from, if no 'downloadUrl' is provided.
*/
private static final String DEFAULT_DOWNLOAD_URL = "https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/"
+ WRAPPER_VERSION + "/maven-wrapper-" + WRAPPER_VERSION + ".jar";
/**
* Path to the maven-wrapper.properties file, which might contain a downloadUrl property to
* use instead of the default one.
*/
private static final String MAVEN_WRAPPER_PROPERTIES_PATH =
".mvn/wrapper/maven-wrapper.properties";
/**
* Path where the maven-wrapper.jar will be saved to.
*/
private static final String MAVEN_WRAPPER_JAR_PATH =
".mvn/wrapper/maven-wrapper.jar";
/**
* Name of the property which should be used to override the default download url for the wrapper.
*/
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Already on GitHub?
Sign in
to your account
Jump to bottom
Subscription breaks during performance test
#505
Open
JinseonyLee opened this issue
Oct 4, 2019
· 1 comment
Open
Subscription breaks during performance test
#505
JinseonyLee opened this issue
Oct 4, 2019
· 1 comment
Comments
Copy link
Quote reply
JinseonyLee
commented
Oct 4, 2019
•
edited
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 1d20eaf
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
luoliangtiger
Bugfix/stop broker interceptor
#530
opened May 26, 2020 by
Northram511
Fixes #529, #505: NPE caused by matching on a TNode
#532
opened Aug 13, 2020 by
hylkevds
1
Added configuration item for handshake timeout on SSL channel (#531)
#551
opened Nov 13, 2020 by
dsoulayrol
GitHub actions
#552
opened Nov 16, 2020 by
HanSolo
ProTip!
Mix and match filters to narrow down what you’re looking for.
© 2020 GitHub, Inc.
Terms
Privacy
oldshipmaster/moquette
oomhj/moquette
pamod/moquette
parksangkil/moquette
pillimede/moquette
plechi/moquette
popeye0807/moquette
qchen006/moquette
qiuzhanghua/moquette
quyf/moquette
redboy1972/moquette
redlion99/moquette
redsolo/moquette
robbyb67/moquette
robgratz/moquette
rubberbird/moquette
runafter/moquette
saeedhadi/moquette
salmanebah/moquette
sangkyunyoon/moquette
sayi21cn/moquette
sboorlagadda/moquette
senspace/moquette
seraya-fan/moquette
* Name of the property which should be used to override the default download url for the wrapper.
*/
private static final String PROPERTY_NAME_WRAPPER_URL = "wrapperUrl";
public static void main(String args[]) {
System.out.println("- Downloader started");
File baseDirectory = new File(args[0]);
System.out.println("- Using base directory: " + baseDirectory.getAbsolutePath());
// If the maven-wrapper.properties exists, read it and check if it contains a custom
// wrapperUrl parameter.
File mavenWrapperPropertyFile = new File(baseDirectory, MAVEN_WRAPPER_PROPERTIES_PATH);
String url = DEFAULT_DOWNLOAD_URL;
if(mavenWrapperPropertyFile.exists()) {
FileInputStream mavenWrapperPropertyFileInputStream = null;
try {
mavenWrapperPropertyFileInputStream = new FileInputStream(mavenWrapperPropertyFile);
Properties mavenWrapperProperties = new Properties();
mavenWrapperProperties.load(mavenWrapperPropertyFileInputStream);
url = mavenWrapperProperties.getProperty(PROPERTY_NAME_WRAPPER_URL, url);
} catch (IOException e) {
System.out.println("- ERROR loading '" + MAVEN_WRAPPER_PROPERTIES_PATH + "'");
} finally {
try {
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
private static final String PROPERTY_NAME_WRAPPER_URL = "wrapperUrl";
public static void main(String args[]) {
System.out.println("- Downloader started");
File baseDirectory = new File(args[0]);
System.out.println("- Using base directory: " + baseDirectory.getAbsolutePath());
// If the maven-wrapper.properties exists, read it and check if it contains a custom
// wrapperUrl parameter.
File mavenWrapperPropertyFile = new File(baseDirectory, MAVEN_WRAPPER_PROPERTIES_PATH);
String url = DEFAULT_DOWNLOAD_URL;
if(mavenWrapperPropertyFile.exists()) {
FileInputStream mavenWrapperPropertyFileInputStream = null;
try {
mavenWrapperPropertyFileInputStream = new FileInputStream(mavenWrapperPropertyFile);
Properties mavenWrapperProperties = new Properties();
mavenWrapperProperties.load(mavenWrapperPropertyFileInputStream);
url = mavenWrapperProperties.getProperty(PROPERTY_NAME_WRAPPER_URL, url);
} catch (IOException e) {
System.out.println("- ERROR loading '" + MAVEN_WRAPPER_PROPERTIES_PATH + "'");
} finally {
try {
if(mavenWrapperPropertyFileInputStream != null) {
mavenWrapperPropertyFileInputStream.close();
}
Hi,
I tested mqtt server with moquette 0.12.1 version with H2.
I sent 1 message/per sec with 2 ~ 3000 clients.
When I first started testing, then It was done properly.
But, when all clients are disconnected and restarted testing, It can't use internalPublish methods.
It is the error log below.
Caused by: java.lang.NullPointerException: null
at io.moquette.broker.subscriptions.CTrie.evaluate(CTrie.java:58)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:70)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:86)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:86)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:86)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:65)
at io.moquette.broker.subscriptions.CTrieSubscriptionDirectory.matchWithoutQosSharpening(CTrieSubscriptionDirectory.java:67)
at io.moquette.broker.subscriptions.CTrieSubscriptionDirectory.matchQosSharpening(CTrieSubscriptionDirectory.java:72)
at io.moquette.broker.PostOfficeImpl.publish2Subscribers(PostOfficeImpl.java:226)
at io.moquette.broker.PostOfficeImpl.internalPublish(PostOfficeImpl.java:304)
I checked the subscription tree trace log.
subscription tree root
|-level1
| |-level2
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
sgano1/moquette
sixtop/moquette
slacrey/moquette
soenter/moquette
soken-su/moquette
sonecabr/moquette
sonson1023/moquette
splade/moquette
stannislin/moquette
sumyfly/moquette
superdjz/moquette
superposition/moquette
sureddy/moquette
surpass/moquette
swarwick/moquette
systembugtj/moquette
tanapop/moquette
tangxunye/moquette
technocreatives/moquette
teco-kit/moquette-lusagent
tennessine/moquette
teranisi/moquette
thangdc94/moquette
thinkjoyorg/moquette
if(mavenWrapperPropertyFileInputStream != null) {
mavenWrapperPropertyFileInputStream.close();
}
} catch (IOException e) {
// Ignore ...
}
}
}
System.out.println("- Downloading from: " + url);
File outputFile = new File(baseDirectory.getAbsolutePath(), MAVEN_WRAPPER_JAR_PATH);
if(!outputFile.getParentFile().exists()) {
if(!outputFile.getParentFile().mkdirs()) {
System.out.println(
"- ERROR creating output directory '" + outputFile.getParentFile().getAbsolutePath() + "'");
}
}
System.out.println("- Downloading to: " + outputFile.getAbsolutePath());
try {
downloadFileFromURL(url, outputFile);
System.out.println("Done");
System.exit(0);
} catch (Throwable e) {
} catch (IOException e) {
// Ignore ...
}
}
}
System.out.println("- Downloading from: " + url);
File outputFile = new File(baseDirectory.getAbsolutePath(), MAVEN_WRAPPER_JAR_PATH);
if(!outputFile.getParentFile().exists()) {
if(!outputFile.getParentFile().mkdirs()) {
System.out.println(
"- ERROR creating output directory '" + outputFile.getParentFile().getAbsolutePath() + "'");
}
}
System.out.println("- Downloading to: " + outputFile.getAbsolutePath());
try {
downloadFileFromURL(url, outputFile);
System.out.println("Done");
System.exit(0);
} catch (Throwable e) {
System.out.println("- Error downloading");
e.printStackTrace();
System.exit(1);
}
| | |-''TNode
| | |-''TNode
| | |-''TNode
When the exception occured, the subscription suddenly changed from CNode to TNode.
I added log to check Node type and token value in CTrie.java
CTrie.java(62line) cnode = io.moquette.broker.subscriptions.TNode@1f, token = FirstTest.7
CTrie.java(63line) cnode.token = null
Caused by: java.lang.NullPointerException: null
at io.moquette.broker.subscriptions.CTrie.evaluate(CTrie.java:58)
at io.moquette.broker.subscriptions.CTrie.recursiveMatch(CTrie.java:70
java -version
openjdk version "1.8.0_212"
OpenJDK Runtime Environment (Zulu 8.38.0.13-CA-linux64) (build 1.8.0_212-b04)
OpenJDK 64-Bit Server VM (Zulu 8.38.0.13-CA-linux64) (build 25.212-b04, mixed mode)
cat /etc/os-release
NAME="Red Hat Enterprise Linux Server"
VERSION="7.5 (Maipo)"
Is there any way to solve this situation?
Copy link
Author
JinseonyLee
commented
Dec 10, 2019
I found a solution.
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
moquette/MemoryRetainedRepository.java at 213851335a4f22fc30796911d5bebcd1d26fb7c7 · moquette-io/moquette · GitHub
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
How one port supports both unidirectional and two-way certificate authentication for TLS
#491
Open
cnneillee opened this issue
Jul 30, 2019
· 0 comments
Open
How one port supports both unidirectional and two-way certificate authentication for TLS
#491
cnneillee opened this issue
Jul 30, 2019
· 0 comments
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
tigersshi/moquette
timvanginderen/moquette
ttomato/moquette
uwitec/moquette
wanghaipeng789/moquette
watergit2016/moquette
wendersonferreira/moquette
willenwu21/moquette
windbender/moquette
xintao222/moquette
xuchao/moquette
yangpeiyong/moquette
yanxuxiao/moquette
yunemr/moquette
zhangxiaofeng123/moquette
zhoudianyou/moquette
zhuyuming/moquette
zofuthan/moquette
zorowonder/moquette
zyy/moquette
System.out.println("- Error downloading");
e.printStackTrace();
System.exit(1);
}
}
private static void downloadFileFromURL(String urlString, File destination) throws Exception {
if (System.getenv("MVNW_USERNAME") != null && System.getenv("MVNW_PASSWORD") != null) {
String username = System.getenv("MVNW_USERNAME");
char[] password = System.getenv("MVNW_PASSWORD").toCharArray();
Authenticator.setDefault(new Authenticator() {
@Override
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
});
}
URL website = new URL(urlString);
ReadableByteChannel rbc;
rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream(destination);
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
fos.close();
rbc.close();
}
}
private static void downloadFileFromURL(String urlString, File destination) throws Exception {
if (System.getenv("MVNW_USERNAME") != null && System.getenv("MVNW_PASSWORD") != null) {
String username = System.getenv("MVNW_USERNAME");
char[] password = System.getenv("MVNW_PASSWORD").toCharArray();
Authenticator.setDefault(new Authenticator() {
@Override
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
});
}
URL website = new URL(urlString);
ReadableByteChannel rbc;
rbc = Channels.newChannel(website.openStream());
FileOutputStream fos = new FileOutputStream(destination);
fos.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);
fos.close();
rbc.close();
}
In performance test, it is processed in Tnode format in CTrie.java's recursiveMatch methods.
NullPointerException is not thrown if the source is changed as follows:
It just changes the order of processing.
Before
CNode cnode = inode.mainNode();
NavigationAction action = evaluate(topic, cnode);
if (action == NavigationAction.MATCH) {
return cnode.subscriptions;
}
if (action == NavigationAction.STOP) {
return Collections.emptySet();
}
if (cnode instanceof TNode) {
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Comments
Copy link
Quote reply
cnneillee
commented
Jul 30, 2019
Hello
I have a question
How one port supports both unidirectional and two-way certificate authentication for TLS？
thank you!
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
Nothing to show
compare:
master
Choose different branches or forks above to discuss and review changes.
Learn about pull requests
Create pull request
Compare and review just about anything
Branches, tags, commit ranges, and time ranges. In the same repository and across forks.
Example comparisons
gh-pages
Jun 7, 2020
rel_0.13
Apr 11, 2020
test_branch
Oct 1, 2019
broker_restructuring_connections
Nov 1, 2018
persistent_starved_session_cleaner
Oct 18, 2017
24 hours ago
© 2020 GitHub, Inc.
Terms
}
BIN
+49.5 KB
.mvn/wrapper/maven-wrapper.jar
Show comments
View file
Edit file
Delete file
Binary file not shown.
2
.mvn/wrapper/maven-wrapper.properties
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,2 @@
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.2/apache-maven-3.6.2-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar
11
.travis.yml
Show comments
View file
}
BIN
+49.5 KB
.mvn/wrapper/maven-wrapper.jar
Show comments
View file
Edit file
Delete file
Open in desktop
Binary file not shown.
2
.mvn/wrapper/maven-wrapper.properties
Show comments
View file
Edit file
Delete file
Open in desktop
@@ -0,0 +1,2 @@
distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.2/apache-maven-3.6.2-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/io/takari/maven-wrapper/0.5.6/maven-wrapper-0.5.6.jar
11
.travis.yml
Show comments
return Collections.emptySet();
}
TO-BE
CNode cnode = inode.mainNode();
if (cnode instanceof TNode) {
return Collections.emptySet();
}
NavigationAction action = evaluate(topic, cnode);
if (action == NavigationAction.MATCH) {
return cnode.subscriptions;
}
if (action == NavigationAction.STOP) {
return Collections.emptySet();
}
hylkevds
mentioned this issue
May 25, 2020
NullPointerException in CTrie.evaluate
#529
Open
hylkevds
added a commit
to hylkevds/moquette
that referenced
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
GitHub actions
#552
Open
HanSolo
wants to merge
2
commits into
moquette-io:master
Trending
Learning Lab
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Edit file
Delete file
@@ -1,13 +1,6 @@
language: java
jdk:
- openjdk12
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
directories:
- $HOME/.gradle/caches/
- $HOME/.gradle/wrapper/
script:
- ./gradlew install test
#script:
# - ./mvnw verify
Oops, something went wrong.
Retry
Toggle all file notes
0 comments
on commit 7f91798
Please
View file
Edit file
Delete file
Open in desktop
@@ -1,13 +1,6 @@
language: java
jdk:
- openjdk12
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
directories:
- $HOME/.gradle/caches/
- $HOME/.gradle/wrapper/
script:
- ./gradlew install test
#script:
# - ./mvnw verify
Oops, something went wrong.
Retry
Toggle all file notes
ProTip!
this issue
Aug 13, 2020
Fixes moquette-io#529, moquette-io#505: NPE caused by matching on a T…
…
9c1c2ff
…Node
hylkevds
added a commit
to hylkevds/moquette
that referenced
this issue
Aug 13, 2020
Fixes moquette-io#529, moquette-io#505: NPE caused by matching on a T…
…
72a21ef
…Node
hylkevds
mentioned this issue
Aug 13, 2020
Fixes #529, #505: NPE caused by matching on a TNode
#532
Open
Sign up for free
base:
master
from
HanSolo:github_actions
Open
GitHub actions
#552
HanSolo
wants to merge
2
commits into
moquette-io:master
from
HanSolo:github_actions
Conversation
0
Commits
2
Checks
0
Files changed
Jump to
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Added copyright and license notice to every source file, added about.… · moquette-io/moquette@666cc29 · GitHub
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
Use n and p to navigate between commits in a pull request.
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked pull requests
Successfully merging a pull request may close this issue.
None yet
1 participant
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Conversation
Copy link
Quote reply
HanSolo
commented
Nov 16, 2020
Added a github action that runs mvn verify on each push on Ubuntu 18.04 using JDK 11, 12 and 15
HanSolo
added 2 commits
Nov 16, 2020
Added github action to mvn verify on each push
…
72eb166
On each push mvn verify will be executed on Ubuntu 18.04, latest OS X and latest Windows using JDK 8, 11, 12, 15 and 16-ea
Adjusted action to build on 11, 12 and 15
Loading status checks…
b7fc10a
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
Dismiss
Join GitHub today
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Reviewers
No reviews
Assignees
No one assigned
Labels
None yet
Projects
None yet
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Sign up for free
Dismiss
213851335a
moquette/broker/src/main/java/io/moquette/broker/MemoryRetainedRepository.java
/
Jump to
Code definitions
No definitions found in this file.
Code navigation not available for this commit
Go to file
Go to file
T
Go to line
L
Go to definition
R
Copy path
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Cannot retrieve contributors at this time
66 lines (58 sloc)
2.14 KB
Raw
Blame
/*
* Copyright (c) 2012-2018 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package io.moquette.broker;
import io.moquette.broker.subscriptions.Topic;
import io.netty.buffer.ByteBuf;
import io.netty.handler.codec.mqtt.MqttPublishMessage;
Minor, changed header (#536) · moquette-io/moquette@8ba0b4d · GitHub
↵
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentMap;
/*
* In memory retained messages store
* */
final class MemoryRetainedRepository implements IRetainedRepository {
private final ConcurrentMap<Topic, RetainedMessage> storage = new ConcurrentHashMap<>();
@Override
public void cleanRetained(Topic topic) {
storage.remove(topic);
}
@Override
public void retain(Topic topic, MqttPublishMessage msg) {
final ByteBuf payload = msg.content();
byte[] rawPayload = new byte[payload.readableBytes()];
payload.getBytes(0, rawPayload);
final RetainedMessage toStore = new RetainedMessage(msg.fixedHeader().qosLevel(), rawPayload);
storage.put(topic, toStore);
}
@Override
public boolean isEmpty() {
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Added copyright and license notice to every source file, added about.…
…html and license.htl
Loading branch information
andsel
committed
return storage.isEmpty();
}
@Override
public List<RetainedMessage> retainedOnTopic(String topic) {
final Topic searchTopic = new Topic(topic);
final List<RetainedMessage> matchingMessages = new ArrayList<>();
for (Map.Entry<Topic, RetainedMessage> entry : storage.entrySet()) {
final Topic scanTopic = entry.getKey();
if (searchTopic.match(scanTopic)) {
matchingMessages.add(entry.getValue());
}
}
return matchingMessages;
}
}
Copy lines
Copy permalink
View git blame
Reference in new issue
Go
© 2020 GitHub, Inc.
Terms
Privacy
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
Jun 11, 2014
1 parent
0bbe719
commit 666cc29d47f57fc00798856e335e5270c0075a10
Unified
Split
Showing
133 changed files
with
2,569 additions
and 13 deletions.
+28
−0
about.html
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
Sign in to GitHub · GitHub
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
In this repository
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
+15
−0
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Wiki
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Minor, changed header (#536)
Loading branch information
andsel
committed
Oct 1, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Updates Netty to 4.1.53 to have MQTT5 support by andsel · Pull Request #546 · moquette-io/moquette · GitHub
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
6ee0137
commit 8ba0b4dfe52dce28a4eb5e362f18afaf850e71d4
Unified
Split
Showing
1 changed file
with
1 addition
and 1 deletion.
+1
−1
README.md
2
README.md
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/RepublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/StopEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/SubscribeEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/storage/StoredPublishEvent.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/Subscription.java
+15
−0
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
## What is Moquette?
## Moquette Project
[![Build Status](https://api.travis-ci.org/moquette-io/moquette.svg?branch=master)](https://travis-ci.org/moquette-io/moquette)
Toggle all file notes
0 comments
on commit 8ba0b4d
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/SubscriptionsStore.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/Token.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/TreeNode.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ConfigurationParser.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ConnectionDescriptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/Constants.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/IAuthenticator.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/Server.java
Sign in to GitHub · GitHub
Open source guides
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ServerAcceptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/ServerChannel.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/MoquetteIdleTimoutHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyAcceptor.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyChannel.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/NettyMQTTHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetrics.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetricsCollector.java
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Sign in to GitHub · GitHub
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/BytesMetricsHandler.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetrics.java
+15
−0
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetricsCollector.java
+15
−1
broker/src/main/java/org/dna/mqtt/moquette/server/netty/metrics/MessageMetricsHandler.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticatorTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageServiceTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/MockAuthenticator.java
+15
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Security
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Dismiss
Join GitHub today
GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.
Sign up
GitHub is where the world builds software
Millions of developers and companies build, ship, and maintain their software on GitHub — the largest and most advanced development platform in the world.
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
−0
broker/src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessorTest.java
+15
−0
.../src/test/java/org/dna/mqtt/moquette/messaging/spi/impl/subscriptions/SubscriptionsStoreTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ConfigurationParserTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/MQTTWebSocket.java
+15
−1
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationFuseTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationPahoTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationQoSValidationTest.java
+15
−3
Sign up for free
Dismiss
New issue
Have a question about this project? Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
Pick a username
Email Address
Password
Sign up for GitHub
By clicking “Sign up for GitHub”, you agree to our terms of service and
privacy statement. We’ll occasionally send you account related emails.
Already on GitHub?
Sign in
to your account
Jump to bottom
Updates Netty to 4.1.53 to have MQTT5 support
#546
Merged
andsel
merged 1 commit into
master
from
fix/update_netty_version
Nov 3, 2020
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationSSLTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerIntegrationWebSocketTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerLowlevelMessagesIntegrationTests.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/ServerRestartIntegrationTest.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/server/TestCallback.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/testclient/Client.java
+15
−0
broker/src/test/java/org/dna/mqtt/moquette/testclient/ClientNettyMQTTHandler.java
+15
−0
bundle/src/main/java/org/dna/mqtt/moquette/bundle/Activator.java
Merged
Updates Netty to 4.1.53 to have MQTT5 support
#546
andsel
merged 1 commit into
master
from
fix/update_netty_version
Nov 3, 2020
+12
−10
Conversation
0
Commits
1
Checks
0
Files changed
3
Conversation
Copy link
Quote reply
Collaborator
andsel
Sign in to GitHub · GitHub
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
Travis CI - Test and Deploy Your Code with Confidence
Hey there!
Looks like you have JavaScript disabled.
The Travis CI webclient needs JavaScript to work properly.
Please enable JavaScript to get the best Travis CI experience.
Thank you!
+576
−0
license-eplv10-aslv20.html
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnectDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/ConnectEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DemuxDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DemuxEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DisconnectDecoder.java
+15
−0
commented
Nov 2, 2020
No description provided.
Updates Netty to 4.1.53 to have MQTT5 support
Loading status checks…
c504891
andsel
force-pushed the
fix/update_netty_version
branch
from
b81b4c9
to
c504891
Nov 2, 2020
andsel
added
the
dependencies
label
Nov 2, 2020
Hide details
View details
Skip to content
GitHub no longer supports this web browser.
Learn more about the browsers we support.
Sign in to GitHub
Username or email address
Password Forgot password?
New to GitHub?
Create an account.
Terms
Privacy
Security
Contact GitHub
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/DisconnectEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MQTTDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MQTTEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/MessageIDDecoder.java
+15
−1
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingReqDecoder.java
+15
−1
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingReqEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingRespDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PingRespEncoder.java
andsel
merged commit 89a4ada
into
master
Nov 3, 2020
0 of 2 checks passed
0 of 2 checks passed
continuous-integration/travis-ci/pr
The Travis CI build failed
Details
continuous-integration/travis-ci/push
The Travis CI build is in progress
Details
Sign up for free
to join this conversation on GitHub.
Already have an account?
Sign in to comment
Reviewers
No reviews
Assignees
No one assigned
Labels
dependencies
Projects
None yet
Minor, changed header (#536) · moquette-io/moquette@8ba0b4d · GitHub
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubCompDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubCompEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRecDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRecEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRelDecoder.java
+15
−0
Milestone
No milestone
Linked issues
Successfully merging this pull request may close these issues.
None yet
1 participant
Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PubRelEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PublishDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/PublishEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubAckDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubscribeDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/SubscribeEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubAckDecoder.java
+15
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubAckEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeDecoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeEncoder.java
+15
−0
netty_parser/src/main/java/org/dna/mqtt/moquette/parser/netty/Utils.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnAckEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnectDecoderTest.java
+15
−0
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
All GitHub
↵
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/ConnectEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PubAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PubAckEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PublishDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/PublishEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubAckDecoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubAckEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubscribeDecoderTest.java
Insights
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Minor, changed header (#536)
Loading branch information
andsel
committed
Oct 1, 2020
Verified
This commit was created on GitHub.com and signed with a verified signature using GitHub’s key.
GPG key ID: 4AEE18F83AFDEB23
Learn about signing commits
1 parent
6ee0137
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/SubscribeEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/TestUtils.java
+15
−1
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeDecoderTest.java
+15
−1
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UnsubscribeEncoderTest.java
+15
−0
netty_parser/src/test/java/org/dna/mqtt/moquette/parser/netty/UtilsTest.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/commons/Constants.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/MQTTException.java
+15
commit 8ba0b4dfe52dce28a4eb5e362f18afaf850e71d4
Unified
Split
Showing
1 changed file
with
1 addition
and 1 deletion.
+1
−1
README.md
2
README.md
Show comments
View file
Edit file
Delete file
@@ -1,5 +1,5 @@
## What is Moquette?
## Moquette Project
[![Build Status](https://api.travis-ci.org/moquette-io/moquette.svg?branch=master)](https://travis-ci.org/moquette-io/moquette)
[![Build Status](https://api.travis-ci.org/moquette-io/moquette.svg?branch=master)](https://travis-ci.org/moquette-io/moquette)
Toggle all file notes
−4
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/Utils.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/AbstractMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ConnAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ConnectMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/DisconnectMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/MessageIDMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PingReqMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PingRespMessage.java
0 comments
on commit 8ba0b4d
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubCompMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubRecMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PubRelMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/PublishMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/SubAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/SubscribeMessage.java
+15
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/UnsubAckMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/UnsubscribeMessage.java
+15
−0
parser_commons/src/main/java/org/dna/mqtt/moquette/proto/messages/ZeroLengthMessage.java
28
about.html
Show comments
View file
Edit file
Delete file
@@ -0,0 +1,28 @@
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>About</title>
</head>
<body lang="EN-US">
<h2>About Moquette MQT broker</h2>
<p>June 11, 2014</p>
<h3>License</h3>
<p>The Eclipse Foundation makes available all content in this plug-in (&quot;Moquette MQTT&quot;). Unless otherwise
indicated below, the Content is provided to you under the terms and conditions of the
Eclipse Public License Version 1.0 (&quot;EPL&quot;). A copy of the EPL is available
at <a href="http://www.eclipse.org/legal/epl-v10.html">http://www.eclipse.org/legal/epl-v10.html</a>.
For purposes of the EPL, &quot;Program&quot; will mean the Content.</p>
<p>If you did not receive this Content directly from the Eclipse Foundation, the Content is
being redistributed by another party (&quot;Redistributor&quot;) and different terms and conditions may
apply to your use of any object code in the Content. Check the Redistributor's license that was
provided with the Content. If no such license exists, contact the Redistributor. Unless otherwise
indicated below, the terms and conditions of the EPL still apply to any source code in the Content
and such source code may be obtained at <a href="http://www.eclipse.org/">http://www.eclipse.org</a>.</p>
</body>
</html>
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMatchingCondition.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IMessaging.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IPersistentSubscriptionStore.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import java.util.List;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/IStorageService.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/DebugUtils.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/FileAuthenticator.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.BufferedReader;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/HawtDBStorageService.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.io.File;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/MemoryStorageService.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import java.nio.ByteBuffer;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ProtocolProcessor.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/SimpleMessaging.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.BatchEventProcessor;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/ValueEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
Updates Netty to 4.1.53 to have MQTT5 support · moquette-io/moquette@b81b4c9 · GitHub
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl;
import com.lmax.disruptor.EventFactory;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/DisconnectEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
Skip to content
Sign up
Why GitHub?
Features →
Code review
Project management
Integrations
Actions
Packages
Security
Team management
Hosting
Mobile
Customer stories →
Security →
Team
Enterprise
Explore
Explore GitHub →
Learn & contribute
Topics
Collections
Trending
Learning Lab
Open source guides
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.server.ServerChannel;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/InitEvent.java
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
Connect with others
Events
Community forum
GitHub Education
GitHub Stars program
Marketplace
Pricing
Plans →
Compare plans
Contact Sales
Nonprofit →
Education →
In this repository
All GitHub
↵
Jump to
↵
No suggested jump to results
In this repository
All GitHub
↵
Jump to
↵
In this repository
All GitHub
↵
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import java.util.Properties;
15
...er/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/LostConnectionEvent.java
Show comments
View file
Edit file
Delete file
Jump to
↵
Sign in
Sign up
moquette-io
/
moquette
Watch
159
Star
1.7k
Fork
671
Code
Issues
64
Pull requests
13
Actions
Projects
0
Wiki
Security
Insights
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/MessagingEvent.java
Show comments
View file
Edit file
More
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Permalink
This commit does not belong to any branch on this respository, and may belong to a fork outside of the repository.
Browse files
Loading status checks…
Updates Netty to 4.1.53 to have MQTT5 support
Loading branch information
andsel
committed
Nov 2, 2020
1 parent
4c6bae1
commit b81b4c950cad678c28b567e06c11397d271c6202
Unified
Split
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
15
...r/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/OutputMessagingEvent.java
Show comments
View file
Showing
2 changed files
with
11 additions
and 4 deletions.
+5
−3
broker/pom.xml
+6
−1
pom.xml
8
broker/pom.xml
Show comments
View file
Edit file
Delete file
@@ -15,7 +15,9 @@
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<bintray.package>io.moquette.moquette-broker</bintray.package>
<netty.version>4.1.22.Final</netty.version>
<netty.version>4.1.53.Final</netty.version>
<netty.tcnative.version>2.0.34.Final</netty.tcnative.version>
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/ProtocolEvent.java
Show comments
<paho.version>1.2.1</paho.version>
<h2.version>1.4.199</h2.version>
</properties>
@@ -160,7 +162,7 @@
<dependency>
<groupId>org.eclipse.paho</groupId>
<artifactId>org.eclipse.paho.client.mqttv3</artifactId>
<version>1.2.0</version>
<scope>test</scope>
</dependency>
@@ -182,7 +184,7 @@
<dependency>
<groupId>io.netty</groupId>
<artifactId>netty-tcnative</artifactId>
<version>2.0.10.Final</version>
<classifier>linux-x86_64</classifier>
<scope>test</scope>
</dependency>
7
pom.xml
Show comments
View file
Edit file
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.Utils;
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PubAckEvent.java
Show comments
Delete file
@@ -3,7 +3,7 @@
<modelVersion>4.0.0</modelVersion>
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<netty.version>4.1.12.Final</netty.version>
<!--<netty.version>4.1.12.Final</netty.version>-->
<source.version>1.8</source.version>
<target.version>1.8</target.version>
<bintray.repo>andsel/maven</bintray.repo>
@@ -190,6 +190,11 @@
</profiles>
<repositories>
<repository>
<id>Maven repo</id>
<url>https://repo1.maven.org/maven2/</url>
</repository>
<repository>
<id>Paho Releases</id>
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
/**
15
broker/src/main/java/org/dna/mqtt/moquette/messaging/spi/impl/events/PublishEvent.java
<url>https://repo.eclipse.org/content/repositories/paho-releases/</url>
Toggle all file notes
0 comments
on commit b81b4c9
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Show comments
View file
Edit file
Delete file
@@ -1,3 +1,18 @@
/*
* Copyright (c) 2012-2014 The original author or authors
* ------------------------------------------------------
* All rights reserved. This program and the accompanying materials
* are made available under the terms of the Eclipse Public License v1.0
* and Apache License v2.0 which accompanies this distribution.
*
* The Eclipse Public License is available at
* http://www.eclipse.org/legal/epl-v10.html
*
* The Apache License v2.0 is available at
* http://www.opensource.org/licenses/apache2.0.php
*
* You may elect to redistribute this code under either of these licenses.
*/
package org.dna.mqtt.moquette.messaging.spi.impl.events;
import org.dna.mqtt.moquette.proto.messages.AbstractMessage.QOSType;
Oops, something went wrong.
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
Retry
Toggle all file notes
0 comments
on commit 666cc29
Please
sign in to comment.
© 2020 GitHub, Inc.
Terms
Privacy
Cookie Preferences
Security
Status
Help
Contact GitHub
Pricing
API
Training
Blog
About
You can’t perform that action at this time.
You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
Learn more.
Accept
Reject
We use optional third-party analytics cookies to understand how you use GitHub.com so we can build better products.
You can always update your selection by clicking Cookie Preferences at the bottom of the page.
For more information, see our Privacy Statement.
Essential cookies
Learn more
Always active
Analytics cookies
We use analytics cookies to understand how you use our websites so we can make them better, e.g. they're used to gather information about the pages you visit and how many clicks you need to accomplish a task.
Learn more
Accept
Reject
Save preferences
